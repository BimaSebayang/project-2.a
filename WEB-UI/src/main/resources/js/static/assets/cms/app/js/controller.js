APP.controller("SidebarController",function(b,e,a,d,c){a.pendingNotificationCount=0;if(localStorage.getItem("pendingNotificationCount")){a.pendingNotificationCount=localStorage.getItem("pendingNotificationCount")}});APP.directive("datepicker",function(){return{restrict:"A",link:function(c,b,a){b.datepicker({dateFormat:"dd/mm/yy"})}}});APP.controller("GroupManagementController",function(b,e,a,d,c){b.keyIndex="id";b.linkAction={};b.datas=null;b.modules=null;b.currentPage=1;b.currentPageInfo=1;b.pageSize=PAGE_SIZE;b.total=1;b.from=1;b.to=PAGE_SIZE;b.qlue="";b.sortBy="";b.sortReverse=false;b.filterData={columnSelected:null,availableColumn:[],};b.loadData=function(f,g){if(f!=undefined){b.currentPage=f}if(g!=undefined){b.qlue=g}e.get(endPoint+"groupmanagement/list",{params:{}}).success(function(h){b.datas=h.listResponse;b.message=h.message;b.status=h.status;b.error=h.error;if("invalid_token"==b.error){b.invalidToken()}})};b.invalidToken=function(){return invalidConfirm(function(){e.get(endPoint+"invalid-token",{},{}).then(function f(h){window.location.reload()},function g(h){console.log(h)})})};b.loadDataSort=function(g,f){b.sortBy=g;b.loadData(b.page)};b.loadDataSearch=function(g,f){b.loadData(g,f)};b.onDeleteClick=function(f){return deleteConfirm(function(){e.post(endPoint+"users/delete",{adminId:f},{}).then(function g(i){window.location.reload()},function h(i){console.log(i)})})};b.$watch("currentPage",function(){b.loadData(b.currentPage)})});APP.controller("UserManagementController",function(b,e,a,d,c){b.keyIndex="id";b.linkAction={add:"users/add-ldap",update:"detail-update?id=",remove:"remove?uid=",paramId:"?id=",paramPdf:"?extend=PDF",paramXLS:"?extend=XLS",dataUpload:"&dataList="};b.datas=null;b.modules=null;b.currentPage=1;b.currentPageInfo=1;b.pageSize=PAGE_SIZE;b.total=1;b.from=1;b.to=PAGE_SIZE;b.qlue="";b.flagStatus=false;b.dataStatus=[{id:"true",name:"Active"},{id:"false",name:"Inactive"}];b.checkTotalUser="true";b.search=function(){b.checkTotalUser="false";this.loadData()};b.sortBy="";b.sortReverse=false;b.filterData={columnSelected:null,availableColumn:[],};b.inputParam=function(f){if(f=="status"){b.flagStatus=true;b.paramVal="true"}else{b.paramVal="";b.flagStatus=false}};b.checkDetail=function(){return $("#lookDetailUser").val()};b.getValueGroupName=function(){return $("#setGroupName").val()};b.onChangeValue=function(f){b.paramVal=f};b.loadData=function(f,g){b.var1="0";b.var2="0";b.page="";if(b.checkTotalUser=="true"){b.checkDetailTotalUser=b.checkDetail();if(b.checkDetailTotalUser=="true"){b.var1="groupName";b.var2=b.getValueGroupName()}}if(f!=undefined){b.currentPage=f}if(g!=undefined){b.qlue=g}if(b.paramKey!=undefined){b.var1=b.paramKey}if(b.paramVal!=undefined){b.var2=b.paramVal}if(b.secPage!=undefined){b.page=b.secPage}e.get(endPoint+"admin/usermanagement/list",{params:{param1:b.var1,param2:b.var2,page:b.page}}).success(function(h){b.datas=h.listResponse;b.message=h.message;b.status=h.status;b.error=h.error;b.pageNumber=h.pageNumber;b.pageSize=h.pageSize;b.totalPage=h.totalPage;if(b.datas==0){b.emptyData=true}else{b.emptyData=false}})};b.download=function(f,g){e.get(endPoint+"admin/usermanagement/download",{params:{dataList:JSON.stringify(f),extend:g}}).success(function(h){b.message=h.message;b.status=h.status;b.error=h.error;b.loadDataSearch()})};b.getPage=function(f){return new Array(f)};b.pagging=function(f){b.secPage=f;b.loadData()};b.loadDataSort=function(g,f){b.sortBy=g;b.loadData(b.page)};b.loadDataSearch=function(g,f){b.loadData(g,f)};b.$watch("currentPage",function(){b.loadData(b.currentPage)})});APP.controller("ManualMergeSplitController",function(b,e,a,d,c){b.custom=[];b.keyIndex="id";b.linkAction={list:"/list",add:"/add",search:"/search"};b.datas=null;b.datasModal=null;b.modules=null;b.currentPage=1;b.currentPageInfo=1;b.pageSize=PAGE_SIZE;b.total=1;b.from=1;b.to=PAGE_SIZE;b.qlue="";b.dataList="";b.checkedCustom=[];b.msgStatus=false;b.errorSubmit=false;b.comment=[];b.lockGCN=false;b.emptyDatasLock=false;b.datas={};b.sortBy="";b.sortReverse=false;b.remove=function(k){var h=b.datas.length;while(h--){if(b.datas[h].idnSvp==k){b.datas.splice(h,1)}}var f=b.checkedCustom;var l=[];l=f.toString().split(",");var g=l.length;while(g--){if(f[g]==k){b.checkedCustom.splice(g,1)}}b.lockGcnByUser()};b.onComment=function(g,f){b.comment=g};b.save=function(g,j){if(j){for(var f in b.custom){if(b.custom.hasOwnProperty(f)&&b.custom[f]){b.checkedCustom.push(g)}}}else{var h=b.checkedCustom.length;while(h--){if(b.checkedCustom[h]==g){b.checkedCustom.splice(h,1)}}}};b.search=function(f){b.msgStatus=false;b.secPage=undefined;b.customeList(f);this.loadDatas()};b.customeList=function(f){b.checkedCustom=[];for(var h in f){if(f.hasOwnProperty(h)&&f[h].idnSvp&&f[h].idnSvp){if(b.checkedCustom.length>0){var g=b.checkedCustom;var l=[];l=g.toString().split(",");var i=l.length;while(i--){if(g[i]!=f[h].idnSvp){b.checkedCustom.splice(i,1)}}}else{b.checkedCustom.push(f[h].idnSvp)}}}};b.functionalGrouping=function(g){b.counter=0;var j=1;b.itemsGroup=[];var f=[];if(g.length>0){for(var m=0;m<g.length;m++){for(var h=m;h<g.length;h++){if(g[h].idnSvp==g[m].idnSvp){if(f.length>0){if(b.checkVarGroup(f,g[m].idnSvp)){f.push({value:g[m].idnSvp})}}else{f.push({value:g[m].idnSvp})}}}}f.sort();for(var m=0;m<f.length;m++){b.itemsGroup.push({key:j++,value:f[m].value})}for(var n=b.itemsGroup.length;n<g.length;n++){b.itemsGroup.push({key:j++,value:"AutoGenerate"})}for(var m=0;m<g.length;m++){g[m].goldenRecord=false;g[m].newIdnSvp=f[0].value;g[m].group=1}}};b.checkVarGroup=function(f,h){for(var g=0;g<f.length;g++){if(f[g].value==h){return false}}return true};b.onCheckedGolden=function(l,k,j){var g=k.idnSvp;var f=k.idnParty;if(l==true){for(var h=0;h<j.length;h++){if(j[h].idnSvp==g&&j[h].idnParty==f){k.goldenRecord=l;j[h].goldenRecordFlag=false}if(j[h].idnSvp==g&&j[h].idnParty!=f){j[h].goldenRecordFlag=true}}}else{for(var h=0;h<j.length;h++){if(j[h].idnSvp==g&&j[h].idnParty==f){k.goldenRecord=l;j[h].goldenRecordFlag=false}if(j[h].idnSvp==g&&j[h].idnParty!=f){j[h].goldenRecordFlag=false}}}};b.onSelected=function(h,g){for(var f in b.itemsGroup){if(f==h-1){g.newIdnSvp=b.itemsGroup[f].value;g.group=b.itemsGroup[f].key}}};b.listload=function(){b.msgStatus=false;b.errorSubmit=false;var f="";if(b.checkedCustom!=undefined&&b.checkedCustom!=true&&b.checkedCustom!=false){f=b.checkedCustom}e.get(endPoint+"maintenance/mergesplit/listAdd",{params:{inGcn:f}}).success(function(g){b.datasAdd=g.listResponse;b.message=g.message;b.status=g.status;b.error=g.error;if(b.datasAdd.length>0){b.lockGcnByUser()}b.functionalGrouping(b.datas);if(b.datas.length>0){b.emptyDatas=true}else{b.emptyDatas=false}})};b.loadDatas=function(k,p){var o="";var n="";var f="";var g="";var i="";var l="";var h="";var j="";b.custom=[];b.errorSubmit=false;if(k!=undefined){b.currentPage=k}if(p!=undefined){b.qlue=p}if(b.checkedCustom!=undefined&&b.checkedCustom!=true&&b.checkedCustom!=false){o=b.checkedCustom}if(b.paramgcn!=undefined){n=b.paramgcn}if(b.paramname!=undefined){f=b.paramname}if(b.parambirtdate!=undefined){var m="";var q=b.parambirtdate;m=q.getFullYear()+""+(q.getMonth()+1<10?"0"+(q.getMonth()+1):q.getMonth()+1)+""+(q.getDate()<10?"0"+(q.getDate()):q.getDate());g=m}if(b.parammother!=undefined){i=b.parammother}if(b.paramktp!=undefined){l=b.paramktp}if(b.paramnpwp!=undefined){h=b.paramnpwp}if(b.secPage!=undefined){j=b.secPage}e.get(endPoint+"maintenance/mergesplit/list",{params:{notInGcn:o,paramgcn:n,paramname:f,parambirtdate:g,parammother:i,paramktp:l,paramnpwp:h,secPage:j}}).success(function(r){b.datasModal=r.listResponse;b.message=r.message;b.status=r.status;b.error=r.error;b.last=r.last;b.totalPage=r.totalPage;b.pageNumber=r.pageNumber;b.pageSize=r.pageSize;if(b.datasModal!=null&&b.datasModal!=undefined){if(b.datasModal.length>0){b.emptyDataModal=false}else{b.emptyDataModal=true}}if("invalid_token"==b.error){b.invalidToken()}})};b.invalidToken=function(){e.get(endPoint+"maintenance/mergesplit/invalid-token",{},{}).then(function f(h){window.location.reload()},function g(h){console.log(h)})};b.submit=function(f){var g="";if(b.comment!=undefined&&b.comment!=""){g=b.comment}if(g==""){b.errorSubmit=true;b.status="";b.title="Please Add Comment";return b.listload}b.dataList=[];b.dataList=f;e.get(endPoint+"maintenance/mergesplit/submit",{params:{dataList:JSON.stringify(f),comment:g}}).success(function(h){b.dataResponse=h.objectResponse;b.message=h.message;b.status=h.status;b.title=h.title;b.detail=h.detail;if(b.status!=201&&b.message=="CREATED"){b.errorSubmit=true}else{b.errorSubmit=false}if(b.dataResponse!=null&&b.dataResponse!=undefined){b.msgStatus=true;b.idRecomendation=b.dataResponse.id}b.checkedCustom=[];b.datas=[];b.emptyDatas=false;b.comment="";b.sendEmail()})};b.sendEmail=function(){e.get(endPoint+"maintenance/mergesplit/sendEmail",{params:{idRec:b.idRecomendation}}).success(function(f){})};b.lockGcnByUser=function(){e.get(endPoint+"maintenance/mergesplit/lockByUserLogin",{params:{}}).success(function(f){b.datas=f.listResponse;b.message=f.message;b.status=f.status;b.error=f.error;b.title=f.title;b.detail=f.detail;b.functionalGrouping(b.datas);if(b.datas.length>0){b.emptyDatas=true}if("invalid_token"==b.error){b.invalidToken()}})};b.releaseLock=function(f){e.get(endPoint+"maintenance/mergesplit/releaseByUserLogin",{params:{gcn:f}}).success(function(g){b.message=g.message;b.status=g.status;b.remove(f);if(b.datas.length>0){b.emptyDatas=true}else{b.emptyDatas=false}})};b.detailCIF=function(g,f){e.get(endPoint+"/maintenance/rekomendasi/detailCif",{params:{cif:g,source:f}}).success(function(h){b.datasCifDetail=h.objectResponse;b.message=h.message;b.status=h.status;b.error=h.error;if(b.datasCifDetail!=undefined&&b.datasCifDetail!=null){if(b.datasCifDetail.dteBirth!=undefined&&b.datasCifDetail.dteBirth!=null){b.datasCifDetail.dteBirth=formatterDate(b.datasCifDetail.dteBirth)}}if("invalid_token"==b.error){b.invalidToken()}})};b.invalidToken=function(){e.get(endPoint+"/maintenance/rekomendasi/invalid-token",{},{}).then(function f(h){window.location.reload()},function g(h){console.log(h)})};b.release=function(f){b.releaseLock(f)};b.reset=function(){b.datas=[];b.emptyDatas=false;b.msgStatus=false;b.errorSubmit=false;b.comment=undefined;b.lockGcnByUser()};b.getPage=function(f){return new Array(f)};b.pagging=function(f){b.secPage=f;b.loadDatas()}});APP.controller("RekomendasiController",function(b,e,a,d,c){b.keyIndex="id";b.linkAction={detail:"/detail-investigasi?id=",paramId:"?id="};b.datas=null;b.modules=null;b.currentPage=1;b.currentPageInfo=1;b.pageSize=PAGE_SIZE;b.total=1;b.from=1;b.to=PAGE_SIZE;b.qlue="";b.flagStatus=false;b.flagDate=false;b.flagInput=true;b.emptyData=false;b.msgStatus=false;b.detailId="";b.pageDetail=false;b.comments=[];b.newComments=[];b.orderByField="id";b.reverseSort=false;b.errorSubmit=false;b.errorComment=false;b.search=function(){b.secPage="";this.loadData()};b.onChangeValue=function(f){b.param2=f};b.cekDisableRecord=function(j,k){var g=j.customer.idnSvp;var f=j.customer.idnParty;if(j.goldenRecord==false){for(var h=0;h<k.length;h++){if(k[h].customer.idnSvp==g&&k[h].customer.idnParty!=f){if(k[h].goldenRecord==true){j.customer.goldenRecordFlag=true}}}}};b.onCheckedGolden=function(l,k,j){var g=k.customer.idnSvp;var f=k.customer.idnParty;if(l==true){for(var h=0;h<j.length;h++){if(j[h].customer.idnSvp==g&&j[h].customer.idnParty==f){k.customer.goldenRecord=l;j[h].customer.goldenRecordFlag=false}if(j[h].customer.idnSvp==g&&j[h].customer.idnParty!=f){j[h].customer.goldenRecordFlag=true}}}else{for(var h=0;h<j.length;h++){if(j[h].customer.idnSvp==g&&j[h].customer.idnParty==f){k.customer.goldenRecord=l;j[h].customer.goldenRecordFlag=false}if(j[h].customer.idnSvp==g&&j[h].customer.idnParty!=f){j[h].customer.goldenRecordFlag=false}}}};b.onSelected=function(h,g){for(var f in b.itemsGroup){if(f==h-1){g.newGcn=b.itemsGroup[f].value;g.group=b.itemsGroup[f].key}}};b.onComment=function(g,f){b.newComments[f].text=g};b.addComment=function(){b.newComments.push({text:""})};b.sortBy="";b.sortReverse=false;b.filterData={columnSelected:null,availableColumn:[],};b.onSelectStatus=function(){e.get(endPoint+"maintenance/rekomendasi/listStatus",{params:{}}).success(function(f){b.dataStatus=f.listResponse})};b.statusFilter=function(f){return(f.id!="4")&&(f.id!="5")&&(f.id!="6")};b.inputParam=function(f){b.param1=f;if(b.param1!="recommenDate"&&b.param1!="investDate"&&b.param1!="reviewDate"){b.param2=""}if(f=="status"){b.flagStatus=true;b.flagInput=false;b.flagDate=false;this.onSelectStatus()}else{if(f=="recommenDate"||f=="investDate"||f=="reviewDate"){b.flagStatus=false;b.flagInput=false;b.flagDate=true}else{b.flagStatus=false;b.flagInput=true;b.flagDate=false}}};b.loadData=function(h,i){b.var1="0";b.var2="0";b.page="";b.datas=[];b.newComments=[];b.errorSubmit=false;if(h!=undefined){b.currentPage=h}if(i!=undefined){b.qlue=i}if(b.param1!=undefined){b.var1=b.param1}if(b.param2!=undefined){b.var2=b.param2}if(b.param1=="status"&&b.param2==""){b.var2="1"}if(b.param1=="recommenDate"||b.param1=="investDate"||b.param1=="reviewDate"){var g="";if(b.param2!=undefined&&b.param2!=""){var f=b.param2;g=f.getFullYear()+"-"+(f.getMonth()+1<10?"0"+(f.getMonth()+1):f.getMonth()+1)+"-"+(f.getDate()<10?"0"+(f.getDate()):f.getDate())}b.var2=g}if(b.secPage!=undefined&&b.secPage!=""){b.page=b.secPage}e.get(endPoint+"maintenance/rekomendasi/list",{params:{param1:b.var1,param2:b.var2,page:b.page}}).success(function(j){b.datas=j.listResponse;b.message=j.message;b.status=j.status;b.error=j.error;b.last=j.last;b.totalPage=j.totalPage;b.pageNumber=j.pageNumber;b.pageSize=j.pageSize;if(b.datas==0){b.emptyData=true}else{b.emptyData=false}})};b.getPage=function(f){return new Array(f)};b.pagging=function(f){b.secPage=f;b.loadData()};b.loadDetailData=function(f,g){b.dataDetail=[];b.newComments=[];b.errorSubmit=false;if(f!=undefined){b.currentPage=f}if(g!=undefined){b.qlue=g}e.get(endPoint+"maintenance/rekomendasi/detailInvestigasi",{params:{id:b.detailId}}).success(function(h){b.dataDetail=h.content;b.message=h.message;b.status=h.status;b.error=h.error;b.comments=h.comments;b.idDetail=b.detailId;b.pageDetail=true;b.functionalGrouping(b.dataDetail)})};b.functionalGrouping=function(g){b.counter=0;var j=1;b.itemsGroup=[];var f=[];if(g.length>0){for(var m=0;m<g.length;m++){for(var h=m;h<g.length;h++){if(g[h].customer.idnSvp==g[m].customer.idnSvp){if(f.length>0){if(b.checkVarGroup(f,g[m].customer.idnSvp)){f.push({value:g[m].customer.idnSvp})}}else{f.push({value:g[m].customer.idnSvp})}}}}f.sort();for(var m=0;m<f.length;m++){b.itemsGroup.push({key:j++,value:f[m].value})}for(var n=b.itemsGroup.length;n<g.length;n++){b.itemsGroup.push({key:j++,value:"AutoGenerate"})}for(var m=0;m<g.length;m++){g[m].newGcn=f[0].value;g[m].group=1}}};b.checkVarGroup=function(f,h){for(var g=0;g<f.length;g++){if(f[g].value==h){return false}}return true};b.getIdInvestigasi=function(f){b.errorSubmit=false;b.newComments=[];b.detailId=f;b.loadDetailData()};b.submit=function(f){var g=[];b.newComments=[];b.errorSubmit=false;if(b.comments!=undefined&&b.comments!=""){g=b.comments}b.dataList=[];b.dataList=f;e.get(endPoint+"maintenance/rekomendasi/edit",{params:{id:b.detailId,dataList:JSON.stringify(f)}}).success(function(h){b.message=h.message;b.status=h.status;b.title=h.title;if(b.status==201){b.loadDataSearch();b.errorSubmit=false}else{b.errorSubmit=true}})};b.saveComment=function(k){var j=[];b.errorSubmit=false;var h=false;if(b.newComments!=undefined&&b.newComments!=null){for(var g=0;g<b.newComments.length;g++){var f=b.newComments[g].text;if(f==""){h=true}}}if(h){b.errorComment=true}else{j=b.newComments;e.get(endPoint+"maintenance/rekomendasi/submitComments",{params:{id:k,newComments:JSON.stringify(j)}}).success(function(i){b.message=i.message;b.status=i.status;b.error=i.error;b.errorComment=false;b.loadDetailData()})}};b.back=function(f){e.get(endPoint+"maintenance/rekomendasi/lock",{params:{idInvestigation:f}}).success(function(g){b.message=g.message;b.status=g.status;b.error=g.error;b.loadDataSearch()})};b.detailCIF=function(g,f){e.get(endPoint+"/maintenance/rekomendasi/detailCif",{params:{cif:g,source:f}}).success(function(h){b.datasCifDetail=h.objectResponse;b.message=h.message;b.status=h.status;b.error=h.error;if(b.datasCifDetail!=undefined&&b.datasCifDetail!=null){if(b.datasCifDetail.dteBirth!=undefined&&b.datasCifDetail.dteBirth!=null){b.datasCifDetail.dteBirth=formatterDate(b.datasCifDetail.dteBirth)}}if("invalid_token"==b.error){b.invalidToken()}})};b.invalidToken=function(){e.get(endPoint+"maintenance/rekomendasi/invalid-token",{},{}).then(function f(h){window.location.reload()},function g(h){console.log(h)})};b.submitData=function(f){this.submit(f)};b.loadDataSort=function(g,f){b.sortBy=g;b.loadData(b.page)};b.loadDataSearch=function(g,f){b.pageDetail=false;b.newComments=[];b.loadData(g,f)};b.$watch("currentPage",function(){b.loadData(b.currentPage)})});APP.controller("ApprovalController",function(b,e,a,d,c){b.keyIndex="id";b.linkAction={detail:"/detail-investigasi?id=",paramId:"?id="};b.datas=null;b.modules=null;b.currentPage=1;b.currentPageInfo=1;b.pageSize=PAGE_SIZE;b.total=1;b.from=1;b.to=PAGE_SIZE;b.qlue="";b.flagStatus=false;b.flagDate=false;b.flagInput=true;b.emptyData=false;b.msgStatus=false;b.detailId="";b.pageDetail=false;b.orderByField="id";b.reverseSort=false;b.comments=[];b.newComments=[];b.reverseSort=false;b.errorSubmit=false;b.createdBySystems=false;b.disableButton=false;b.errorComment=false;b.reason="";b.checkParam=true;b.search=function(){b.secPage="";this.loadData()};b.paramCheck=function(){return $("#paramIdRec").val()};b.paramGetValue=function(){return $("#idRecom").val()};b.onChangeValue=function(f){b.param2=f};b.cekDisableRecord=function(j,k){var g=j.customer.idnSvp;var f=j.customer.idnParty;if(j.goldenRecord==false){for(var h=0;h<k.length;h++){if(k[h].customer.idnSvp==g&&k[h].customer.idnParty!=f){if(k[h].goldenRecord==true){j.customer.goldenRecordFlag=true}}}}};b.onCheckedGolden=function(l,k,j){var g=k.customer.idnSvp;var f=k.customer.idnParty;if(l==true){for(var h=0;h<j.length;h++){if(j[h].customer.idnSvp==g&&j[h].customer.idnParty==f){k.customer.goldenRecord=l;j[h].customer.goldenRecordFlag=false}if(j[h].customer.idnSvp==g&&j[h].customer.idnParty!=f){j[h].customer.goldenRecordFlag=true}}}else{for(var h=0;h<j.length;h++){if(j[h].customer.idnSvp==g&&j[h].customer.idnParty==f){k.customer.goldenRecord=l;j[h].customer.goldenRecordFlag=false}if(j[h].customer.idnSvp==g&&j[h].customer.idnParty!=f){j[h].customer.goldenRecordFlag=false}}}};b.onSelected=function(h,g){for(var f in b.itemsGroup){if(f==h-1){g.newGcn=b.itemsGroup[f].value;g.group=b.itemsGroup[f].key}}};b.sortBy="";b.sortReverse=false;b.filterData={columnSelected:null,availableColumn:[],};b.onComment=function(g,f){b.newComments[f].text=g};b.addComment=function(){b.newComments.push({text:""})};b.loadData=function(h,i){b.var1="0";b.var2="0";b.page="";if(h!=undefined){b.currentPage=h}if(i!=undefined){b.qlue=i}if(b.param1!=undefined){b.var1=b.param1}if(b.param2!=undefined){b.var2=b.param2}if(b.param1=="status"&&b.param2==""){b.var2="3"}if(b.param1=="recommenDate"||b.param1=="investDate"||b.param1=="reviewDate"){var g="";if(b.param2!=undefined&&b.param2!=""){var f=b.param2;g=f.getFullYear()+"-"+(f.getMonth()+1<10?"0"+(f.getMonth()+1):f.getMonth()+1)+"-"+(f.getDate()<10?"0"+(f.getDate()):f.getDate())}b.var2=g}if(b.secPage!=undefined&&b.secPage!=""){b.page=b.secPage}e.get(endPoint+"maintenance/approval/list",{params:{param1:b.var1,param2:b.var2,page:b.page}}).success(function(j){b.datas=j.listResponse;b.message=j.message;b.status=j.status;b.pageNumber=j.pageNumber;b.pageSize=j.pageSize;b.totalPage=j.totalPage;b.error=j.error;if(b.datas==0){b.emptyData=true}else{b.emptyData=false}if(b.checkParam==true){if(b.paramCheck()=="true"){b.detailId=b.paramGetValue();b.loadDetailData()}b.checkParam=false}})};b.getPage=function(f){return new Array(f)};b.pagging=function(f){b.secPage=f;b.loadData()};b.onSelectStatus=function(){e.get(endPoint+"maintenance/rekomendasi/listStatus",{params:{}}).success(function(f){b.dataStatus=f.listResponse})};b.statusFilter=function(f){return(f.id!="4")&&(f.id!="5")&&(f.id!="1")&&(f.id!="2")};b.inputParam=function(f){b.param1=f;if(b.param1!="recommenDate"&&b.param1!="investDate"&&b.param1!="reviewDate"){b.param2=""}if(f=="status"){b.flagStatus=true;b.flagInput=false;b.flagDate=false;this.onSelectStatus()}else{if(f=="recommenDate"||f=="investDate"||f=="reviewDate"){b.flagStatus=false;b.flagInput=false;b.flagDate=true}else{b.flagStatus=false;b.flagInput=true;b.flagDate=false}}};b.loadDetailData=function(f,g){b.dataDetail=[];b.newComments=[];b.failedApprove=false;b.errorComment=false;if(f!=undefined){b.currentPage=f}if(g!=undefined){b.qlue=g}e.get(endPoint+"maintenance/rekomendasi/detailInvestigasi",{params:{id:b.detailId}}).success(function(h){b.dataDetail=h.content;b.message=h.message;b.status=h.status;b.comments=h.comments;b.idDetail=b.detailId;b.error=h.error;b.reason="";b.pageDetail=true;if(h.createdBySystems=="true"){b.createdBySystems=true}else{b.createdBySystems=false}if(h.statusRecommendationDTO.id==6){b.disableButton=true}else{b.disableButton=false}})};b.functionalGrouping=function(g){b.counter=0;var j=1;b.itemsGroup=[];var f=[];if(g.length>0){for(var m=0;m<g.length;m++){for(var h=m;h<g.length;h++){if(g[h].customer.idnSvp==g[m].customer.idnSvp){if(f.length>0){if(b.checkVarGroup(f,g[m].customer.idnSvp)){f.push({value:g[m].customer.idnSvp})}}else{f.push({value:g[m].customer.idnSvp})}}}}f.sort();for(var m=0;m<f.length;m++){b.itemsGroup.push({key:j++,value:f[m].value})}for(var n=b.itemsGroup.length;n<g.length;n++){b.itemsGroup.push({key:j++,value:"AutoGenerate"})}}};b.checkVarGroup=function(f,h){for(var g=0;g<f.length;g++){if(f[g].value==h){return false}}return true};b.getIdInvestigasi=function(f){b.detailId=f;this.loadDetailData()};b.approve=function(f){b.newComments=[];if(f!=undefined&&b!=""){b.detailId=f}e.get(endPoint+"maintenance/approval/approve",{params:{id:b.detailId}}).success(function(g){b.message=g.message;b.status=g.status;b.title=g.title;b.error=g.error;if(b.status==200){b.loadDataSearch();b.errorSubmit=false}else{b.errorSubmit=true}})};b.reject=function(f){var g="";b.newComments=[];if(b.reason!=undefined&&b.reason!=""){g=b.reason}b.dataList=[];b.dataList=f;e.get(endPoint+"maintenance/approval/reject",{params:{id:b.detailId,dataList:JSON.stringify(f),reason:g}}).success(function(h){b.message=h.message;b.status=h.status;b.title=h.title;b.error=h.error;if(b.status==200){b.loadDataSearch();b.errorSubmit=false}else{b.errorSubmit=true}})};b.requestModify=function(f){var g="";b.newComments=[];if(b.reason!=undefined&&b.reason!=""){g=b.reason}b.dataList=[];b.dataList=f;e.get(endPoint+"maintenance/approval/modification",{params:{id:b.detailId,dataList:JSON.stringify(f),reason:g}}).success(function(h){b.message=h.message;b.status=h.status;b.title=h.title;b.error=h.error;if(b.status==200){b.loadDataSearch();b.errorSubmit=false}else{b.errorSubmit=true}})};b.saveComment=function(k){var j=[];b.errorSubmit=false;var h=false;if(b.newComments!=undefined&&b.newComments!=null){for(var g=0;g<b.newComments.length;g++){var f=b.newComments[g].text;if(f==""){h=true}}}if(h){b.errorComment=true}else{j=b.newComments;e.get(endPoint+"maintenance/rekomendasi/submitComments",{params:{id:k,newComments:JSON.stringify(j)}}).success(function(i){b.message=i.message;b.status=i.status;b.error=i.error;b.errorComment=false;b.loadDetailData()})}};b.back=function(f){b.newComments=[];b.errorSubmit=false;e.get(endPoint+"maintenance/approval/lock",{params:{idInvestigation:f}}).success(function(g){b.message=g.message;b.status=g.status;b.loadDataSearch()})};b.detailCIF=function(g,f){e.get(endPoint+"/maintenance/rekomendasi/detailCif",{params:{cif:g,source:f}}).success(function(h){b.datasCifDetail=h.objectResponse;b.message=h.message;b.status=h.status;b.error=h.error;if(b.datasCifDetail!=undefined&&b.datasCifDetail!=null){if(b.datasCifDetail.dteBirth!=undefined&&b.datasCifDetail.dteBirth!=null){b.datasCifDetail.dteBirth=formatterDate(b.datasCifDetail.dteBirth)}}if("invalid_token"==b.error){b.invalidToken()}})};b.invalidToken=function(){e.get(endPoint+"maintenance/approval/invalid-token",{},{}).then(function f(h){window.location.reload()},function g(h){console.log(h)})};b.loadDataSort=function(g,f){b.sortBy=g;b.loadData(b.page)};b.loadDataSearch=function(g,f){b.newComments=[];b.pageDetail=false;b.errorSubmit=false;b.loadData(g,f)};b.$watch("currentPage",function(){b.loadData(b.currentPage)})});APP.controller("ApprovedController",function(b,e,a,d,c){b.keyIndex="id";b.linkAction={paramId:"?id=",downloadPdf:"?id=PDF",downloadXls:"?id=XLS"};b.datas=null;b.modules=null;b.currentPage=1;b.currentPageInfo=1;b.pageSize=PAGE_SIZE;b.total=1;b.from=1;b.to=PAGE_SIZE;b.qlue="";b.flagStatus=false;b.flagDate=false;b.flagInput=true;b.emptyData=false;b.msgStatus=false;b.detailId="";b.pageDetail=false;b.comments="";b.orderByField="id";b.reverseSort=false;b.todayParam=false;b.todayParamCheck=true;b.search=function(){b.secPage="";this.loadData()};b.getIdInvestigasi=function(f){b.detailId=f;b.loadDetailData()};b.onChangeValue=function(f){b.param2=f};b.sortBy="";b.sortReverse=false;b.filterData={columnSelected:null,availableColumn:[],};b.onSelectStatus=function(){e.get(endPoint+"maintenance/rekomendasi/listStatus",{params:{}}).success(function(f){b.dataStatus=f.listResponse})};b.checkToday=function(){return $("#todayParam").val()};b.loadData=function(h,i){b.var1="0";b.var2="0";b.page="";if(b.todayParamCheck){b.todayParam=b.checkToday()}else{b.todayParam="false"}if(h!=undefined){b.currentPage=h}if(i!=undefined){b.qlue=i}if(b.param1!=undefined){b.var1=b.param1}if(b.param2!=undefined){b.var2=b.param2}if(b.param1=="status"&&b.param2==""){b.var2="1"}if(b.todayParam=="true"){b.var1="completedDate";var g="";var f=new Date();g=f.getFullYear()+"-"+(f.getMonth()+1<10?"0"+(f.getMonth()+1):f.getMonth()+1)+"-"+(f.getDate()<10?"0"+(f.getDate()):f.getDate());b.var2=g}else{if(b.todayParam=="false"){if(b.param1=="recommenDate"||b.param1=="investDate"||b.param1=="reviewDate"||b.param1=="completedDate"){var g="";if(b.param2!=undefined&&b.param2!=""){var f=b.param2;g=f.getFullYear()+"-"+(f.getMonth()+1<10?"0"+(f.getMonth()+1):f.getMonth()+1)+"-"+(f.getDate()<10?"0"+(f.getDate()):f.getDate())}b.var2=g}}}if(b.secPage!=undefined&&b.secPage!=""){b.page=b.secPage}e.get(endPoint+"report/approved/list",{params:{param1:b.var1,param2:b.var2,page:b.page}}).success(function(j){b.datas=j.listResponse;b.message=j.message;b.status=j.status;b.pageNumber=j.pageNumber;b.pageSize=j.pageSize;b.totalPage=j.totalPage;b.error=j.error;if(b.datas==0||b.datas==undefined){b.emptyData=true}else{b.emptyData=false}})};b.inputParam=function(f){b.param1=f;if(b.param1!="recommenDate"&&b.param1!="investDate"&&b.param1!="reviewDate"&&b.param1!="completedDate"){b.param2=""}if(f=="status"){b.flagStatus=true;b.flagInput=false;b.flagDate=false;this.onSelectStatus()}else{if(f=="recommenDate"||f=="investDate"||f=="reviewDate"||f=="completedDate"){b.flagStatus=false;b.flagInput=false;b.flagDate=true}else{b.flagStatus=false;b.flagInput=true;b.flagDate=false}}};b.download=function(f,g){e.get(endPoint+"/report/approved/download",{params:{dataList:JSON.stringify(f),extend:g}}).success(function(h){b.message=h.message;b.status=h.status;b.error=h.error;b.loadDataSearch()})};b.loadDetailData=function(f,g){b.dataDetail=[];b.failedApprove=false;if(f!=undefined){b.currentPage=f}if(g!=undefined){b.qlue=g}e.get(endPoint+"maintenance/rekomendasi/detailInvestigasi",{params:{id:b.detailId}}).success(function(h){b.dataDetail=h.content;b.message=h.message;b.status=h.status;b.comments=h.comments;b.idDetail=b.detailId;b.error=h.error;b.reason="";b.pageDetail=true;if("invalid_token"==b.error){b.invalidToken()}})};b.detailCIF=function(g,f){e.get(endPoint+"/maintenance/rekomendasi/detailCif",{params:{cif:g,source:f}}).success(function(h){b.datasCifDetail=h.objectResponse;b.message=h.message;b.status=h.status;b.error=h.error;if(b.datasCifDetail!=undefined&&b.datasCifDetail!=null){if(b.datasCifDetail.dteBirth!=undefined&&b.datasCifDetail.dteBirth!=null){b.datasCifDetail.dteBirth=formatterDate(b.datasCifDetail.dteBirth)}}if("invalid_token"==b.error){b.invalidToken()}})};b.invalidToken=function(){e.get(endPoint+"report/rejected/invalid-token",{},{}).then(function f(h){window.location.reload()},function g(h){console.log(h)})};b.getPage=function(f){return new Array(f)};b.pagging=function(f){b.secPage=f;b.loadData()};b.loadDataSort=function(g,f){b.sortBy=g;b.loadData(b.page)};b.loadDataSearch=function(g,f){b.pageDetail=false;b.loadData(g,f)};b.$watch("currentPage",function(){b.pageDetail=false;b.loadData(b.currentPage)})});APP.controller("RejectedController",function(b,e,a,d,c){b.keyIndex="id";b.linkAction={paramId:"?id=",downloadPdf:"?id=PDF",downloadXls:"?id=XLS"};b.datas=null;b.modules=null;b.currentPage=1;b.currentPageInfo=1;b.pageSize=PAGE_SIZE;b.total=1;b.from=1;b.to=PAGE_SIZE;b.qlue="";b.flagStatus=false;b.flagDate=false;b.flagInput=true;b.emptyData=false;b.msgStatus=false;b.detailId="";b.pageDetail=false;b.comments="";b.orderByField="id";b.reverseSort=false;b.todayParam=false;b.todayParamCheck=true;b.search=function(){b.secPage="";this.loadData()};b.onChangeValue=function(f){b.param2=f};b.sortBy="";b.sortReverse=false;b.filterData={columnSelected:null,availableColumn:[],};b.checkToday=function(){return $("#todayParam").val()};b.getIdInvestigasi=function(f){b.detailId=f;b.loadDetailData()};b.loadData=function(h,i){b.var1="0";b.var2="0";b.varPage="";if(b.todayParamCheck){b.todayParam=b.checkToday()}else{b.todayParam="false"}if(h!=undefined){b.currentPage=h}if(i!=undefined){b.qlue=i}if(b.param1!=undefined){b.var1=b.param1}if(b.param2!=undefined){b.var2=b.param2}if(b.param1=="status"&&b.param2==""){b.var2="1"}if(b.todayParam=="true"){b.var1="completedDate";var g="";var f=new Date();g=f.getFullYear()+"-"+(f.getMonth()+1<10?"0"+(f.getMonth()+1):f.getMonth()+1)+"-"+(f.getDate()<10?"0"+(f.getDate()):f.getDate());b.var2=g}else{if(b.todayParam=="false"){if(b.param1=="recommenDate"||b.param1=="investDate"||b.param1=="reviewDate"||b.param1=="completedDate"){var g="";if(b.param2!=undefined&&b.param2!=""){var f=b.param2;g=f.getFullYear()+"-"+(f.getMonth()+1<10?"0"+(f.getMonth()+1):f.getMonth()+1)+"-"+(f.getDate()<10?"0"+(f.getDate()):f.getDate())}b.var2=g}}}if(b.secPage!=undefined&&b.secPage!=""){b.varPage=b.secPage}e.get(endPoint+"report/rejected/list",{params:{param1:b.var1,param2:b.var2,page:b.varPage}}).success(function(j){b.datas=j.listResponse;b.message=j.message;b.status=j.status;b.pageNumber=j.pageNumber;b.pageSize=j.pageSize;b.totalPage=j.totalPage;b.error=j.error;b.todayParamCheck=false;if(b.datas==0){b.emptyData=true}else{b.emptyData=false}})};b.onSelectStatus=function(){e.get(endPoint+"maintenance/rekomendasi/listStatus",{params:{}}).success(function(f){b.dataStatus=f.listResponse})};b.inputParam=function(f){b.param1=f;if(b.param1!="recommenDate"&&b.param1!="investDate"&&b.param1!="reviewDate"&&b.param1!="completedDate"){b.param2=""}if(f=="status"){b.flagStatus=true;b.flagInput=false;b.flagDate=false;this.onSelectStatus()}else{if(f=="recommenDate"||f=="investDate"||f=="reviewDate"||f=="completedDate"){b.flagStatus=false;b.flagInput=false;b.flagDate=true}else{b.flagStatus=false;b.flagInput=true;b.flagDate=false}}};b.download=function(f,g){e.get(endPoint+"/report/rejected/download",{params:{dataList:JSON.stringify(f),extend:g}}).success(function(h){b.message=h.message;b.status=h.status;b.error=h.error;b.loadDataSearch()})};b.loadDetailData=function(f,g){b.dataDetail=[];b.failedApprove=false;if(f!=undefined){b.currentPage=f}if(g!=undefined){b.qlue=g}e.get(endPoint+"maintenance/rekomendasi/detailInvestigasi",{params:{id:b.detailId}}).success(function(h){b.dataDetail=h.content;b.message=h.message;b.status=h.status;b.comments=h.comments;b.idDetail=b.detailId;b.error=h.error;b.reason="";b.pageDetail=true;if("invalid_token"==b.error){b.invalidToken()}})};b.detailCIF=function(g,f){e.get(endPoint+"/maintenance/rekomendasi/detailCif",{params:{cif:g,source:f}}).success(function(h){b.datasCifDetail=h.objectResponse;b.message=h.message;b.status=h.status;b.error=h.error;if(b.datasCifDetail!=undefined&&b.datasCifDetail!=null){if(b.datasCifDetail.dteBirth!=undefined&&b.datasCifDetail.dteBirth!=null){b.datasCifDetail.dteBirth=formatterDate(b.datasCifDetail.dteBirth)}}if("invalid_token"==b.error){b.invalidToken()}})};b.invalidToken=function(){e.get(endPoint+"report/rejected/invalid-token",{},{}).then(function f(h){window.location.reload()},function g(h){console.log(h)})};b.getPage=function(f){return new Array(f)};b.pagging=function(f){b.secPage=f;b.loadData()};b.loadDataSort=function(g,f){b.sortBy=g;b.loadData(b.page)};b.loadDataSearch=function(g,f){b.pageDetail=false;b.loadData(g,f)};b.$watch("currentPage",function(){b.pageDetail=false;b.loadData(b.currentPage)})});APP.controller("InquiryController",function(b,e,a,d,c){b.keyIndex="id";b.linkAction={paramId:"?gcnNo="};b.datas=null;b.modules=null;b.currentPage=1;b.currentPageInfo=1;b.pageSize=PAGE_SIZE;b.total=1;b.from=1;b.to=PAGE_SIZE;b.qlue="";b.flagStatus=false;b.flagDate=false;b.flagInput=true;b.emptyData=false;b.msgStatus=false;b.detailId="";b.pageDetail=false;b.tableClick=false;b.search=function(){b.secPage=undefined;b.loadDatas()};b.onChangeValue=function(f){b.param2=f};b.sortBy="";b.sortReverse=false;b.filterData={columnSelected:null,availableColumn:[],};b.loadDatas=function(j,q){var f="";var o="";var g="";var h="";var n="";var k="";var m="";var p="";var i="";if(j!=undefined){b.currentPage=j}if(q!=undefined){b.qlue=q}if(b.paramCif!=undefined){f=b.paramCif}if(b.paramGcn!=undefined){o=b.paramGcn}if(b.paramName!=undefined){g=b.paramName}if(b.parambirtDate!=undefined){var l="";var r=b.parambirtDate;l=r.getFullYear()+""+(r.getMonth()+1<10?"0"+(r.getMonth()+1):r.getMonth()+1)+""+(r.getDate()<10?"0"+(r.getDate()):r.getDate());h=l}if(b.paramMother!=undefined){n=b.paramMother}if(b.paramktp!=undefined){k=b.paramktp}if(b.paramNpwp!=undefined){m=b.paramNpwp}if(b.paramNoHp!=undefined){p=b.paramNoHp}if(b.secPage!=undefined){i=b.secPage}e.get(endPoint+"inquiryGCN/inquiry/list",{params:{paramCif:f,paramGcn:o,paramName:g,parambirtDate:h,paramMother:n,paramktp:k,paramNpwp:m,paramNoHp:p,secPage:i}}).success(function(s){b.datas=s.listResponse;b.message=s.message;b.status=s.status;b.error=s.error;b.last=s.last;b.totalPage=s.totalPage;b.pageNumber=s.pageNumber;b.pageSize=s.pageSize;b.tableClick=true;if("invalid_token"==b.error){b.invalidToken()}if(b.datas!=null&&b.datas!=undefined){if(b.datas.length>0){b.emptyData=true}else{b.emptyData=false}}})};b.invalidToken=function(){e.get(endPoint+"inquiryGCN/inquiry/invalid-token",{},{}).then(function f(h){window.location.reload()},function g(h){console.log(h)})};b.getPage=function(f){return new Array(f)};b.pagging=function(f){b.secPage=f;b.loadDatas()};b.loadDataSort=function(g,f){b.sortBy=g;b.loadDatas(b.page)};b.loadDataSearch=function(g,f){b.pageDetail=false;b.loadDatas(g,f)}});APP.controller("InquiryDetailController",function(b,e,a,d,c){b.keyIndex="id";b.linkAction={};b.datas=null;b.modules=null;b.currentPage=1;b.currentPageInfo=1;b.pageSize=PAGE_SIZE;b.total=1;b.from=1;b.to=PAGE_SIZE;b.qlue="";b.dataDetailCB=[];b.dataDetailCC=[];b.dataDetailJF=[];b.search=function(){b.loadDatas()};b.onChangeValue=function(f){b.param2=f};b.sortBy="";b.sortReverse=false;b.filterData={columnSelected:null,availableColumn:[],};b.search=function(f,g){b.cifNo=f;b.source=g;b.loadDatas()};b.loadDatas=function(h,i){var g="";var f="";if(b.cifNo!=undefined){g=b.cifNo}if(b.source!=undefined){f=b.source}e.get(endPoint+"inquiryGCN/inquiry/list-account",{params:{paramCif:g,paramSource:f}}).success(function(j){if(b.source=="CB"){b.dataDetailCB=j.listResponse;if(b.dataDetailCB.length>0){b.dataRowCB=true}else{b.dataRowCB=false}}else{if(b.source=="CC"){b.dataDetailCC=j.listResponse;if(b.dataDetailCC.length>0){b.dataRowCC=true}else{b.dataRowCC=false}}else{if(b.source=="JF"){b.dataDetailJF=j.listResponse;if(b.dataDetailJF.length>0){b.dataRowJF=true}else{b.dataRowJF=false}}}}b.message=j.message;b.status=j.status;b.error=j.error})};b.loadDataSort=function(g,f){b.sortBy=g;b.loadDatas(b.page)};b.loadDataSearch=function(g,f){b.pageDetail=false;b.loadDatas(g,f)}});APP.controller("dashboardController",function(b,e,a,d,c){b.keyIndex="id";b.datas=null;b.loadData=function(f,g){e.get(endPoint+"/dashboard/analytic",{params:{}}).success(function(h){b.datas=h.objectResponse;b.error=h.error;if("invalid_token"==b.error){b.invalidToken()}})};b.invalidToken=function(){e.get(endPoint+"/dashboard/invalid-token",{},{}).then(function f(h){window.location.reload()},function g(h){console.log(h)})};b.$watch("currentPage",function(){b.loadData(b.currentPage)})});APP.controller("DataInquiryController",function(b,e,a,d,c){b.keyIndex="id";b.linkAction={};b.datas=null;b.currentPage=1;b.currentPageInfo=1;b.pageSize=PAGE_SIZE;b.total=1;b.from=1;b.to=PAGE_SIZE;b.qlue="";b.emptyData=false;b.sortBy="";b.sortReverse=false;b.filterData={columnSelected:null,availableColumn:[],};b.pagging=function(f){b.secPage=f;b.loadData()};b.DateFormatter=function(f){if(f==""||f==undefined){return""}return f.substring(0,2)+"/"+f.substring(2,4)+"/"+f.substring(4,8)};b.search=function(){this.loadData()};b.viewDetail=function(f){b.detail=f};setInterval(function(){if(b.paramVal==undefined&&b.paramKey==undefined){var f="0";var g="0";if(b.paramVal!=undefined){g=b.paramVal}if(b.paramKey!=undefined){f=b.paramKey;if(f=="custDob"){g=g.replace("/","")}}if(b.secPage==undefined){b.secPage="0"}e.get(endPoint+"blacklist/datainquiry/list/asynch",{params:{paramKey:f,paramVal:g,secPage:b.secPage,}}).success(function(h){b.datas=h.listResponse;b.message=h.message;b.status=h.status;b.error=h.error;b.totalPage=h.totalPage;b.pageNumber=h.pageNumber;if(b.datas.length>0){b.emptyData=false}else{b.emptyData=true}})}},1000);b.loadData=function(h,i){var f="0";var g="0";if(b.paramVal!=undefined){g=b.paramVal}if(b.paramKey!=undefined){f=b.paramKey;if(f=="custDob"){g=g.replace("/","")}}if(b.secPage==undefined){b.secPage="0"}e.get(endPoint+"blacklist/datainquiry/list",{params:{paramKey:f,paramVal:g,secPage:b.secPage}}).success(function(j){b.datas=j.listResponse;b.message=j.message;b.status=j.status;b.error=j.error;b.totalPage=j.totalPage;b.pageNumber=j.pageNumber;if(b.datas.length>0){b.emptyData=false}else{b.emptyData=true}})};b.pagging=function(f){b.secPage=f;b.loadData()};b.loadDataSort=function(g,f){b.sortBy=g;b.loadData(b.page)};b.loadDataSearch=function(g,f){b.loadData(g,f)};b.$watch("currentPage",function(){b.loadData(b.currentPage)})});APP.controller("DataInputBlacklistController",function(b,f,a,e,d,c){b.selectFlag=function(j){var h=b.datas;for(var g=0;g<h.length;g++){if(h[g].id==j){b.blacklistFlagTempDesc=h[g].blacklistFlagDesc;break}}};b.gcnCekMasukKagak=function(){b.custDob};b.selectFlagDesc=function(g){var j=b.datas;for(var h=0;h<j.length;h++){if(j[h].blacklistFlag==g){b.blacklistFlagTemp=j[h].id;b.blacklistFlagTempDesc=j[h].blacklistFlagDesc;break}}};b.cannotSave=false;b.getGcnData=function(){f.get(endPoint+"/blacklist/datainput/getDataGcnProfile",{params:{idnId:b.IdNo,nmeFull:b.custName,dteBirth:b.custDob}}).success(function(g){var h=g.objectResponse;if(h!=""||h!=undefined){if(h.idn_mobile_phone!=null){b.phoneNo=h.idn_mobile_phone}if(h.cde_gender!=null){b.custGender=h.cde_gender}if(h.crdacct_nbr!=null){b.cifBg=h.crdacct_nbr}if(h.noseri!=null){b.cifCC=h.noseri}if(h.no_rekening!=null){b.cifMojf=h.no_rekening}if(h.idn_svp!=null){b.gcnNo=h.idn_svp}if(h.idn_party!=null){b.cifHost=h.idn_party}if(h.nationality!=null){b.addressCountry=h.nationality}if(h.cfdhn!=null){b.dhnbiBlacklistNo=h.cfdhn}if(h.cfurut!=null){b.dhnbiSeqNo=h.cfurut}if(h.cfref!=null){b.dhnbiRefNo=h.cfref}if(h.cfnamb!=null){b.dhnbiBankName=h.cfnamb}if(h.cfbasd!=null){b.dhnbiDateEnd=h.cfbasd}if(h.cfnpwp!=null){b.npwpNo=h.cfnpwp}if(h.idType!=null){b.idType=h.idType}if(h.blacklistFlag!=null){b.selectFlagDesc(h.blacklistFlag)}if(h.addressCity!=null){b.addressCity=h.addressCity}if(h.address!=null){b.address=h.address}if(h.addressProvince!=null){b.addressProvince=h.addressProvince}if(h.addressPostalCode!=null){b.addressPostalCode=h.addressPostalCode}if(h.nationality!=null){b.addressCountry=h.nationality}if(h.custType!=null){b.custType=h.custType}if(h.startDate!=null){b.startDate=h.startDate}if(h.endDate!=null){b.endDate=h.endDate}}})};f.get(endPoint+"/blacklist/listparameter/BlacklistParameter/all",{params:{secPage:"",isPaging:false}}).success(function(g){b.datas=g.listResponse;b.message=g.message;b.status=g.status;b.error=g.error;b.totalPage=g.totalPage;b.pageNumber=g.pageNumber});b.Date=function(g){return new Date(g)};b.save=function(){var j=b.idData;var i=b._csrf.token;var h={headers:{Accept:"application/json, */*","x-csrf-token":i}};b.cannotSave=false;var k={idData:j,custName:b.custName,gcnNo:b.gcnNo,cifHost:b.cifHost,idNo:b.IdNo,idType:b.idType,npwpNo:b.npwpNo,custDob:b.custDob,custGender:b.custGender,custType:b.custType,blacklistFlagTemp:b.blacklistFlagTemp,phoneNo:b.phoneNo,startDate:b.startDate,endDate:b.endDate,addressCity:b.addressCity,address:b.address,addressProvince:b.addressProvince,addressPostalCode:b.addressPostalCode,addressCountry:b.addressCountry,description:b.description,cifBg:b.cifBg,cifCC:b.cifCC,cifMojf:b.cifMojf,dhnbiBlacklistNo:b.dhnbiBlacklistNo,dhnbiSeqNo:b.dhnbiSeqNo,dhnbiRefNo:b.dhnbiRefNo,dhnbiBankName:b.dhnbiBankName,dhnbiDateEnd:b.dhnbiDateEnd};f.post(endPoint+"blacklist/datainput/save",k,h).then(function(l){if(j==""||j==undefined){d.location.href=endPoint+"blacklist/datainquiry"}else{d.location.href=endPoint+"/blacklist/datamaintenance"}},function g(l){d.alert(l.data)})};b.downloadFile=function(){f.get(endPoint+"blacklist/datainput/downloadFile").success(function(g){b.downloadHref=g.objectResponse})};b.saveFiles=function(){var h=endPoint+"blacklist/datainput/save/files";var i=b._csrf.token;var g=new FileReader();if(b.input==undefined){b.cannotSave=true;return}g.onload=function(){dataURL=g.result;var k={headers:{Accept:"application/json, */*","x-csrf-token":i}};f.post(h,dataURL,k).then(function(l){d.location.href=endPoint+"blacklist/datainquiry"},function j(l){d.alert("error : "+l.errorMessage)})};g.readAsDataURL(b.input.files[0])};if(b.totalPageFile==undefined){b.totalPageFile=1}if(b.pageNumberFile==undefined||scope.pageNumberFile==""){b.pageNumberFile=1}b.paggingFile=function(i){b.pageNumberFile=i;var h=b._csrf.token;var g=new FileReader();g.onload=function(){dataURL=g.result;var l=endPoint+"blacklist/datainput/uploadWebService/"+b.pageNumberFile;var k={headers:{Accept:"application/json, */*","x-csrf-token":h}};f.post(l,dataURL,k).then(function(m){if(m.data.error=="NO ERROR"){b.dataFiles=m.data.listResponse;b.totalPageFile=m.data.totalPage}else{}},function j(m){alert("error");d.alert(m.errorMessage)})};g.readAsDataURL(b.input.files[0])};b.readExcelFile=function(j){var i=b._csrf.token;b.input=j.target;var h=b.input.files[0].size;var g=new FileReader();if(h<393216){g.onload=function(){dataURL=g.result;var m=endPoint+"blacklist/datainput/uploadWebService/"+b.pageNumberFile;var l={headers:{Accept:"application/json, */*","x-csrf-token":i}};f.post(m,dataURL,l).then(function(n){if(n.data.error=="NO ERROR"){b.dataFiles=n.data.listResponse;b.totalPageFile=n.data.totalPage}else{}},function k(n){d.alert(n.errorMessage)})}}else{d.alert("Ukuran file terlalu besar")}g.readAsDataURL(b.input.files[0])}});APP.controller("blacklistParameterController",function(c,f,a,e,d){c.errorParameter=false;c.errorSave=false;c.errorRequired=false;c.nameRequired=null;c.emptyData=false;c.linkAction={paramId:"?id="};c.sizeModel=[{blacklistFlag:"",blacklistFlagDesc:""}];c.addModel=function(){c.sizeModel.push({blacklistFlag:"",blacklistFlagDesc:""})};c.onParameter=function(h,g){c.sizeModel[g].blacklistFlag=h};c.onDescription=function(h,g){c.sizeModel[g].blacklistFlagDesc=h};c.validateParameterFlag=function(h){for(var k=0;k<h.length;k++){for(var g=k;g<h.length;g++){if(h[k].blacklistFlag==h[g].blacklistFlag&&k!=g){return false}}}return true};c.validateRequired=function(g){for(var h=0;h<g.length;h++){if(g[h].blacklistFlag==""||g[h].blacklistFlag==null){c.nameRequired="Parameter";return true}if(g[h].blacklistFlagDesc==""||g[h].blacklistFlagDesc==null){c.nameRequired="Deskripsi";return true}}};c.save=function(h){var g=true;if(c.validateRequired(h)){c.errorRequired=true;return}if(h.length>0){g=c.validateParameterFlag(h)}if(g){f.get(endPoint+"blacklist/listparameter/save",{params:{blacklistFlag:JSON.stringify(h)}}).success(function(i){c.message=i.message;c.status=i.status;if(c.status==200){d.location.href=endPoint+"blacklist/listparameter"}else{c.errorSave=true;c.datas=i.objectResponse}})}else{c.errorParameter=true}};var b=new URLSearchParams(window.location.search);c.update=function(){var g=b.get("id");if(c.description!=null||c.description!=""){f.get(endPoint+"blacklist/listparameter/update",{params:{id:g,blacklistFlag:c.parameter,blacklistFlagDesc:c.description}}).success(function(h){d.location.href=endPoint+"blacklist/listparameter"})}};c.loadData=function(g,h){if(g!=undefined){c.currentPage=g}if(h!=undefined){c.qlue=h}if(c.secPage==undefined){c.secPage=0}f.get(endPoint+"/blacklist/listparameter/BlacklistParameter/all",{params:{secPage:c.secPage,isPaging:true}}).success(function(i){c.datas=i.listResponse;c.message=i.message;c.status=i.status;c.error=i.error;c.totalPage=i.totalPage;c.pageNumber=i.pageNumber;if(c.datas.length==0){c.emptyData=true}})};c.sortBy="";c.sortReverse=false;c.checkDetail=function(){return $("#lookDetailUser").val()};c.getValueGroupName=function(){return $("#setGroupName").val()};c.onChangeValue=function(g){c.paramVal=g};c.inputParam=function(g){if(g=="status"){c.flagStatus=true;c.paramVal="true"}else{c.paramVal="";c.flagStatus=false}};c.filterData={columnSelected:null,availableColumn:[],};c.getPage=function(g){return new Array(g)};c.pagging=function(g){c.secPage=g;c.loadData()};c.loadDataSort=function(h,g){c.sortBy=h;c.loadData(c.page)};c.loadDataSearch=function(h,g){c.loadData(h,g)};c.$watch("currentPage",function(){c.loadData(c.currentPage)});c.search=function(){c.checkTotalUser="false";c.emptyData=false;this.loadData()}});APP.controller("DataMaintenanceController",function(b,f,a,e,d,c){b.viewDetail=function(g){b.detail=g};b.keyIndex="id";b.linkAction={paramId:"?id="};b.datas=null;b.currentPage=1;b.currentPageInfo=1;b.pageSize=PAGE_SIZE;b.total=1;b.from=1;b.to=PAGE_SIZE;b.qlue="";b.emptyData=false;b.sortBy="";b.sortReverse=false;b.DateFormatter=function(g){if(g==""||g==undefined){return""}return g.substring(0,2)+"/"+g.substring(2,4)+"/"+g.substring(4,8)};b.filterData={columnSelected:null,availableColumn:[],};b.search=function(){b.loadData()};b.onChangeValue=function(g){b.paramVal=g};b.editDataMaintenance=function(g){c.sendData(g)};b.loadData=function(i,j){var g="0";var h="0";if(b.paramKey!=undefined){g=b.paramKey}if(b.paramVal!=undefined){h=b.paramVal;if(g=="custDob"){h=h.replace("/","")}}if(b.secPage==undefined){b.secPage="0"}f.get(endPoint+"blacklist/datamaintenance/list",{params:{paramKey:g,paramVal:h,secPage:b.secPage}}).success(function(k){b.datas=k.listResponse;b.message=k.message;b.status=k.status;b.error=k.error;b.totalPage=k.totalPage;b.pageNumber=k.pageNumber;if(b.datas.length>0){b.emptyData=false}else{b.emptyData=true}})};b.pagging=function(g){b.secPage=g;b.loadData()};b.getPage=function(g){return new Array(g)};b.pagging=function(g){b.secPage=g;b.loadData()};b.loadDataSort=function(h,g){b.sortBy=h;b.loadData(b.page)};b.loadDataSearch=function(h,g){b.loadData(h,g)};b.$watch("currentPage",function(){b.loadData(b.currentPage)})});APP.controller("UploadController",function(c,f,b,e,d){c.keyIndex="id";c.linkAction={};c.datas=null;c.currentPage=1;c.currentPageInfo=1;c.pageSize=PAGE_SIZE;c.total=1;c.from=1;c.to=PAGE_SIZE;c.qlue="";var a=new FormData();c.sortBy="";c.sortReverse=false;c.filterData={columnSelected:null,availableColumn:[],};c.Upload=function(){var h=/^([a-zA-Z0-9\s_\\.\-:])+(.xls|.xlsx)$/;if(h.test(c.SelectedFile.uploadingFiles.toLowerCase())){if(typeof(FileReader)!="undefined"){var g=new FileReader();if(g.readAsBinaryString){g.onload=function(i){c.ProcessExcel(i.target.result)};g.readAsBinaryString(c.SelectedFile)}else{g.onload=function(m){var l="";var j=new Uint8Array(m.target.result);for(var k=0;k<j.byteLength;k++){l+=String.fromCharCode(j[k])}c.ProcessExcel(l)};g.readAsArrayBuffer(c.SelectedFile)}}else{d.alert("This browser does not support HTML5.")}}else{d.alert("Please upload a valid Excel file.")}};c.ProcessExcel=function(j){var g=XLSX.read(j,{type:"binary"});var h=g.SheetNames[0];var i=XLSX.utils.sheet_to_row_object_array(g.Sheets[h]);c.$apply(function(){c.Customers=i;c.IsVisible=true})};c.add=function(){var h=document.getElementById("fileupload").files[0];var g=new FileReader();g.onloadend=function(j){var i=j.target.result};g.readAsBinaryString(h)};c.selectedFiles=function(g){c.selectedFiles=g}});APP.controller("ReportUserMonitoringController",function(b,e,a,d,c){b.keyIndex="id";b.linkAction={};b.datas=null;b.currentPage=1;b.currentPageInfo=1;b.pageSize=PAGE_SIZE;b.total=1;b.from=1;b.to=PAGE_SIZE;b.qlue="";b.emptyData=false;b.serial=1;b.sortBy="";b.sortReverse=false;b.filterData={columnSelected:null,availableColumn:[],};b.loadData=function(f,g){b.var1="0";b.var2="0";b.page="";if(f!=undefined){b.currentPage=f}if(g!=undefined){b.qlue=g}if(b.paramKey!=undefined){b.var1=b.paramKey}if(b.paramVal!=undefined){b.var2=b.paramVal}if(b.secPage!=undefined){b.page=b.secPage}e.get(endPoint+"report/reportuser/list",{params:{paramKey:b.var1,paramVal:b.var2,secPage:b.page}}).success(function(h){b.datas=h.listResponse;b.message=h.message;b.status=h.status;b.error=h.error;b.pageNumber=h.pageNumber;b.pageSize=h.pageSize;b.totalPage=h.totalPage;if(b.datas==0){b.emptyData=true}else{b.emptyData=false}})};b.search=function(){b.loadData()};b.getPage=function(f){return new Array(f)};b.pagging=function(f){b.secPage=f;b.loadData()};b.loadDataSort=function(g,f){b.sortBy=g;b.loadData(b.page)};b.loadDataSearch=function(g,f){b.loadData(g,f)};b.$watch("currentPage",function(){b.loadData(b.currentPage)})});function getTo(a,b,c){var d=(a*b);d=(d>c)?c:d;return d}function stringToDate(k,g,f){if(g==undefined){g="dd-mm-yyyy"}if(f==undefined){f="-"}var h=g.toLowerCase();var d=h.split(f);var c=k.split(f);var e=d.indexOf("mm");var a=d.indexOf("dd");var b=d.indexOf("yyyy");var i=parseInt(c[e]);i-=1;var j=new Date(c[b],i,c[a]);return j}function deleteConfirm(b){var a=confirm("Are you sure to delete this record ?");if(a){if(typeof b=="function"){b()}}else{return false}}function invalidConfirm(b){var a=confirm("Invalid Token, please re-login");b()}function getParameterByName(b,a){if(!a){a=window.location.href}b=b.replace(/[\[\]]/g,"\\$&");var d=new RegExp("[?&]"+b+"(=([^&#]*)|&|#|$)"),c=d.exec(a);if(!c){return null}if(!c[2]){return""}return decodeURIComponent(c[2].replace(/\+/g," "))}function goBack(){return window.history.back()}function setStatusDesc(a){switch(a){case 1:return"Approved";case 2:return"Rejected";default:return"Pending Approval"}}function getFilename(b){if(b!=undefined&&b!=""){var a=b.split("\\");return a[a.length-1]}return null}function formatterDate(a){var d="";var c=a.slice(0,4);var e=a.slice(4,6);var b=a.slice(6,8);d=e+"-"+b+"-"+c;return d}APP.factory("SharingData",function(){var a={};a.data=false;a.getData=function(){return this.data};a.sendData=function(b){this.data=b};return a});
APP.controller("SidebarController",function(f,h,g,i,j){g.pendingNotificationCount=0;if(localStorage.getItem("pendingNotificationCount")){g.pendingNotificationCount=localStorage.getItem("pendingNotificationCount")}});APP.directive("datepicker",function(){return{restrict:"A",link:function(f,d,e){d.datepicker({dateFormat:"dd/mm/yy"})}}});APP.controller("GroupManagementController",function(f,h,g,i,j){f.keyIndex="id";f.linkAction={};f.datas=null;f.modules=null;f.currentPage=1;f.currentPageInfo=1;f.pageSize=PAGE_SIZE;f.total=1;f.from=1;f.to=PAGE_SIZE;f.qlue="";f.sortBy="";f.sortReverse=false;f.filterData={columnSelected:null,availableColumn:[],};f.loadData=function(b,a){if(b!=undefined){f.currentPage=b}if(a!=undefined){f.qlue=a}h.get(endPoint+"groupmanagement/list",{params:{}}).success(function(c){f.datas=c.listResponse;f.message=c.message;f.status=c.status;f.error=c.error;if("invalid_token"==f.error){f.invalidToken()}})};f.invalidToken=function(){return invalidConfirm(function(){h.get(endPoint+"invalid-token",{},{}).then(function b(c){window.location.reload()},function a(c){console.log(c)})})};f.loadDataSort=function(a,b){f.sortBy=a;f.loadData(f.page)};f.loadDataSearch=function(a,b){f.loadData(a,b)};f.onDeleteClick=function(a){return deleteConfirm(function(){h.post(endPoint+"users/delete",{adminId:a},{}).then(function c(d){window.location.reload()},function b(d){console.log(d)})})};f.$watch("currentPage",function(){f.loadData(f.currentPage)})});APP.controller("UserManagementController",function(f,h,g,i,j){f.keyIndex="id";f.linkAction={add:"users/add-ldap",update:"detail-update?id=",remove:"remove?uid=",paramId:"?id=",paramPdf:"?extend=PDF",paramXLS:"?extend=XLS",dataUpload:"&dataList="};f.datas=null;f.modules=null;f.currentPage=1;f.currentPageInfo=1;f.pageSize=PAGE_SIZE;f.total=1;f.from=1;f.to=PAGE_SIZE;f.qlue="";f.flagStatus=false;f.dataStatus=[{id:"true",name:"Active"},{id:"false",name:"Inactive"}];f.checkTotalUser="true";f.search=function(){f.checkTotalUser="false";this.loadData()};f.sortBy="";f.sortReverse=false;f.filterData={columnSelected:null,availableColumn:[],};f.inputParam=function(a){if(a=="status"){f.flagStatus=true;f.paramVal="true"}else{f.paramVal="";f.flagStatus=false}};f.checkDetail=function(){return $("#lookDetailUser").val()};f.getValueGroupName=function(){return $("#setGroupName").val()};f.onChangeValue=function(a){f.paramVal=a};f.loadData=function(b,a){f.var1="0";f.var2="0";f.page="";if(f.checkTotalUser=="true"){f.checkDetailTotalUser=f.checkDetail();if(f.checkDetailTotalUser=="true"){f.var1="groupName";f.var2=f.getValueGroupName()}}if(b!=undefined){f.currentPage=b}if(a!=undefined){f.qlue=a}if(f.paramKey!=undefined){f.var1=f.paramKey}if(f.paramVal!=undefined){f.var2=f.paramVal}if(f.secPage!=undefined){f.page=f.secPage}h.get(endPoint+"admin/usermanagement/list",{params:{param1:f.var1,param2:f.var2,page:f.page}}).success(function(c){f.datas=c.listResponse;f.message=c.message;f.status=c.status;f.error=c.error;f.pageNumber=c.pageNumber;f.pageSize=c.pageSize;f.totalPage=c.totalPage;if(f.datas==0){f.emptyData=true}else{f.emptyData=false}})};f.download=function(b,a){h.get(endPoint+"admin/usermanagement/download",{params:{dataList:JSON.stringify(b),extend:a}}).success(function(c){f.message=c.message;f.status=c.status;f.error=c.error;f.loadDataSearch()})};f.getPage=function(a){return new Array(a)};f.pagging=function(a){f.secPage=a;f.loadData()};f.loadDataSort=function(a,b){f.sortBy=a;f.loadData(f.page)};f.loadDataSearch=function(a,b){f.loadData(a,b)};f.$watch("currentPage",function(){f.loadData(f.currentPage)})});APP.controller("ManualMergeSplitController",function(f,h,g,i,j){f.custom=[];f.keyIndex="id";f.linkAction={list:"/list",add:"/add",search:"/search"};f.datas=null;f.datasModal=null;f.modules=null;f.currentPage=1;f.currentPageInfo=1;f.pageSize=PAGE_SIZE;f.total=1;f.from=1;f.to=PAGE_SIZE;f.qlue="";f.dataList="";f.checkedCustom=[];f.msgStatus=false;f.errorSubmit=false;f.comment=[];f.lockGCN=false;f.emptyDatasLock=false;f.datas={};f.sortBy="";f.sortReverse=false;f.remove=function(b){var c=f.datas.length;while(c--){if(f.datas[c].idnSvp==b){f.datas.splice(c,1)}}var e=f.checkedCustom;var a=[];a=e.toString().split(",");var d=a.length;while(d--){if(e[d]==b){f.checkedCustom.splice(d,1)}}f.lockGcnByUser()};f.onComment=function(a,b){f.comment=a};f.save=function(c,a){if(a){for(var d in f.custom){if(f.custom.hasOwnProperty(d)&&f.custom[d]){f.checkedCustom.push(c)}}}else{var b=f.checkedCustom.length;while(b--){if(f.checkedCustom[b]==c){f.checkedCustom.splice(b,1)}}}};f.search=function(a){f.msgStatus=false;f.secPage=undefined;f.customeList(a);this.loadDatas()};f.customeList=function(e){f.checkedCustom=[];for(var c in e){if(e.hasOwnProperty(c)&&e[c].idnSvp&&e[c].idnSvp){if(f.checkedCustom.length>0){var d=f.checkedCustom;var a=[];a=d.toString().split(",");var b=a.length;while(b--){if(d[b]!=e[c].idnSvp){f.checkedCustom.splice(b,1)}}}else{f.checkedCustom.push(e[c].idnSvp)}}}};f.functionalGrouping=function(d){f.counter=0;var b=1;f.itemsGroup=[];var e=[];if(d.length>0){for(var a=0;a<d.length;a++){for(var c=a;c<d.length;c++){if(d[c].idnSvp==d[a].idnSvp){if(e.length>0){if(f.checkVarGroup(e,d[a].idnSvp)){e.push({value:d[a].idnSvp})}}else{e.push({value:d[a].idnSvp})}}}}e.sort();for(var a=0;a<e.length;a++){f.itemsGroup.push({key:b++,value:e[a].value})}for(var k=f.itemsGroup.length;k<d.length;k++){f.itemsGroup.push({key:b++,value:"AutoGenerate"})}for(var a=0;a<d.length;a++){d[a].goldenRecord=false;d[a].newIdnSvp=e[0].value;d[a].group=1}}};f.checkVarGroup=function(c,a){for(var b=0;b<c.length;b++){if(c[b].value==a){return false}}return true};f.onCheckedGolden=function(a,b,c){var e=b.idnSvp;var m=b.idnParty;if(a==true){for(var d=0;d<c.length;d++){if(c[d].idnSvp==e&&c[d].idnParty==m){b.goldenRecord=a;c[d].goldenRecordFlag=false}if(c[d].idnSvp==e&&c[d].idnParty!=m){c[d].goldenRecordFlag=true}}}else{for(var d=0;d<c.length;d++){if(c[d].idnSvp==e&&c[d].idnParty==m){b.goldenRecord=a;c[d].goldenRecordFlag=false}if(c[d].idnSvp==e&&c[d].idnParty!=m){c[d].goldenRecordFlag=false}}}};f.onSelected=function(a,b){for(var c in f.itemsGroup){if(c==a-1){b.newIdnSvp=f.itemsGroup[c].value;b.group=f.itemsGroup[c].key}}};f.listload=function(){f.msgStatus=false;f.errorSubmit=false;var a="";if(f.checkedCustom!=undefined&&f.checkedCustom!=true&&f.checkedCustom!=false){a=f.checkedCustom}h.get(endPoint+"maintenance/mergesplit/listAdd",{params:{inGcn:a}}).success(function(b){f.datasAdd=b.listResponse;f.message=b.message;f.status=b.status;f.error=b.error;if(f.datasAdd.length>0){f.lockGcnByUser()}f.functionalGrouping(f.datas);if(f.datas.length>0){f.emptyDatas=true}else{f.emptyDatas=false}})};f.loadDatas=function(s,b){var c="";var d="";var x="";var w="";var u="";var r="";var v="";var t="";f.custom=[];f.errorSubmit=false;if(s!=undefined){f.currentPage=s}if(b!=undefined){f.qlue=b}if(f.checkedCustom!=undefined&&f.checkedCustom!=true&&f.checkedCustom!=false){c=f.checkedCustom}if(f.paramgcn!=undefined){d=f.paramgcn}if(f.paramname!=undefined){x=f.paramname}if(f.parambirtdate!=undefined){var e="";var a=f.parambirtdate;e=a.getFullYear()+""+(a.getMonth()+1<10?"0"+(a.getMonth()+1):a.getMonth()+1)+""+(a.getDate()<10?"0"+(a.getDate()):a.getDate());w=e}if(f.parammother!=undefined){u=f.parammother}if(f.paramktp!=undefined){r=f.paramktp}if(f.paramnpwp!=undefined){v=f.paramnpwp}if(f.secPage!=undefined){t=f.secPage}h.get(endPoint+"maintenance/mergesplit/list",{params:{notInGcn:c,paramgcn:d,paramname:x,parambirtdate:w,parammother:u,paramktp:r,paramnpwp:v,secPage:t}}).success(function(k){f.datasModal=k.listResponse;f.message=k.message;f.status=k.status;f.error=k.error;f.last=k.last;f.totalPage=k.totalPage;f.pageNumber=k.pageNumber;f.pageSize=k.pageSize;if(f.datasModal!=null&&f.datasModal!=undefined){if(f.datasModal.length>0){f.emptyDataModal=false}else{f.emptyDataModal=true}}if("invalid_token"==f.error){f.invalidToken()}})};f.invalidToken=function(){h.get(endPoint+"maintenance/mergesplit/invalid-token",{},{}).then(function b(c){window.location.reload()},function a(c){console.log(c)})};f.submit=function(b){var a="";if(f.comment!=undefined&&f.comment!=""){a=f.comment}if(a==""){f.errorSubmit=true;f.status="";f.title="Please Add Comment";return f.listload}f.dataList=[];f.dataList=b;h.get(endPoint+"maintenance/mergesplit/submit",{params:{dataList:JSON.stringify(b),comment:a}}).success(function(c){f.dataResponse=c.objectResponse;f.message=c.message;f.status=c.status;f.title=c.title;f.detail=c.detail;if(f.status!=201&&f.message=="CREATED"){f.errorSubmit=true}else{f.errorSubmit=false}if(f.dataResponse!=null&&f.dataResponse!=undefined){f.msgStatus=true;f.idRecomendation=f.dataResponse.id}f.checkedCustom=[];f.datas=[];f.emptyDatas=false;f.comment="";f.sendEmail()})};f.sendEmail=function(){h.get(endPoint+"maintenance/mergesplit/sendEmail",{params:{idRec:f.idRecomendation}}).success(function(a){})};f.lockGcnByUser=function(){h.get(endPoint+"maintenance/mergesplit/lockByUserLogin",{params:{}}).success(function(a){f.datas=a.listResponse;f.message=a.message;f.status=a.status;f.error=a.error;f.title=a.title;f.detail=a.detail;f.functionalGrouping(f.datas);if(f.datas.length>0){f.emptyDatas=true}if("invalid_token"==f.error){f.invalidToken()}})};f.releaseLock=function(a){h.get(endPoint+"maintenance/mergesplit/releaseByUserLogin",{params:{gcn:a}}).success(function(b){f.message=b.message;f.status=b.status;f.remove(a);if(f.datas.length>0){f.emptyDatas=true}else{f.emptyDatas=false}})};f.detailCIF=function(a,b){h.get(endPoint+"/maintenance/rekomendasi/detailCif",{params:{cif:a,source:b}}).success(function(c){f.datasCifDetail=c.objectResponse;f.message=c.message;f.status=c.status;f.error=c.error;if(f.datasCifDetail!=undefined&&f.datasCifDetail!=null){if(f.datasCifDetail.dteBirth!=undefined&&f.datasCifDetail.dteBirth!=null){f.datasCifDetail.dteBirth=formatterDate(f.datasCifDetail.dteBirth)}}if("invalid_token"==f.error){f.invalidToken()}})};f.invalidToken=function(){h.get(endPoint+"/maintenance/rekomendasi/invalid-token",{},{}).then(function b(c){window.location.reload()},function a(c){console.log(c)})};f.release=function(a){f.releaseLock(a)};f.reset=function(){f.datas=[];f.emptyDatas=false;f.msgStatus=false;f.errorSubmit=false;f.comment=undefined;f.lockGcnByUser()};f.getPage=function(a){return new Array(a)};f.pagging=function(a){f.secPage=a;f.loadDatas()}});APP.controller("RekomendasiController",function(f,h,g,i,j){f.keyIndex="id";f.linkAction={detail:"/detail-investigasi?id=",paramId:"?id="};f.datas=null;f.modules=null;f.currentPage=1;f.currentPageInfo=1;f.pageSize=PAGE_SIZE;f.total=1;f.from=1;f.to=PAGE_SIZE;f.qlue="";f.flagStatus=false;f.flagDate=false;f.flagInput=true;f.emptyData=false;f.msgStatus=false;f.detailId="";f.pageDetail=false;f.comments=[];f.newComments=[];f.orderByField="id";f.reverseSort=false;f.errorSubmit=false;f.errorComment=false;f.search=function(){f.secPage="";this.loadData()};f.onChangeValue=function(a){f.param2=a};f.cekDisableRecord=function(b,a){var d=b.customer.idnSvp;var e=b.customer.idnParty;if(b.goldenRecord==false){for(var c=0;c<a.length;c++){if(a[c].customer.idnSvp==d&&a[c].customer.idnParty!=e){if(a[c].goldenRecord==true){b.customer.goldenRecordFlag=true}}}}};f.onCheckedGolden=function(a,b,c){var e=b.customer.idnSvp;var m=b.customer.idnParty;if(a==true){for(var d=0;d<c.length;d++){if(c[d].customer.idnSvp==e&&c[d].customer.idnParty==m){b.customer.goldenRecord=a;c[d].customer.goldenRecordFlag=false}if(c[d].customer.idnSvp==e&&c[d].customer.idnParty!=m){c[d].customer.goldenRecordFlag=true}}}else{for(var d=0;d<c.length;d++){if(c[d].customer.idnSvp==e&&c[d].customer.idnParty==m){b.customer.goldenRecord=a;c[d].customer.goldenRecordFlag=false}if(c[d].customer.idnSvp==e&&c[d].customer.idnParty!=m){c[d].customer.goldenRecordFlag=false}}}};f.onSelected=function(a,b){for(var c in f.itemsGroup){if(c==a-1){b.newGcn=f.itemsGroup[c].value;b.group=f.itemsGroup[c].key}}};f.onComment=function(a,b){f.newComments[b].text=a};f.addComment=function(){f.newComments.push({text:""})};f.sortBy="";f.sortReverse=false;f.filterData={columnSelected:null,availableColumn:[],};f.onSelectStatus=function(){h.get(endPoint+"maintenance/rekomendasi/listStatus",{params:{}}).success(function(a){f.dataStatus=a.listResponse})};f.statusFilter=function(a){return(a.id!="4")&&(a.id!="5")&&(a.id!="6")};f.inputParam=function(a){f.param1=a;if(f.param1!="recommenDate"&&f.param1!="investDate"&&f.param1!="reviewDate"){f.param2=""}if(a=="status"){f.flagStatus=true;f.flagInput=false;f.flagDate=false;this.onSelectStatus()}else{if(a=="recommenDate"||a=="investDate"||a=="reviewDate"){f.flagStatus=false;f.flagInput=false;f.flagDate=true}else{f.flagStatus=false;f.flagInput=true;f.flagDate=false}}};f.loadData=function(b,a){f.var1="0";f.var2="0";f.page="";f.datas=[];f.newComments=[];f.errorSubmit=false;if(b!=undefined){f.currentPage=b}if(a!=undefined){f.qlue=a}if(f.param1!=undefined){f.var1=f.param1}if(f.param2!=undefined){f.var2=f.param2}if(f.param1=="status"&&f.param2==""){f.var2="1"}if(f.param1=="recommenDate"||f.param1=="investDate"||f.param1=="reviewDate"){var c="";if(f.param2!=undefined&&f.param2!=""){var d=f.param2;c=d.getFullYear()+"-"+(d.getMonth()+1<10?"0"+(d.getMonth()+1):d.getMonth()+1)+"-"+(d.getDate()<10?"0"+(d.getDate()):d.getDate())}f.var2=c}if(f.secPage!=undefined&&f.secPage!=""){f.page=f.secPage}h.get(endPoint+"maintenance/rekomendasi/list",{params:{param1:f.var1,param2:f.var2,page:f.page}}).success(function(e){f.datas=e.listResponse;f.message=e.message;f.status=e.status;f.error=e.error;f.last=e.last;f.totalPage=e.totalPage;f.pageNumber=e.pageNumber;f.pageSize=e.pageSize;if(f.datas==0){f.emptyData=true}else{f.emptyData=false}})};f.getPage=function(a){return new Array(a)};f.pagging=function(a){f.secPage=a;f.loadData()};f.loadDetailData=function(b,a){f.dataDetail=[];f.newComments=[];f.errorSubmit=false;if(b!=undefined){f.currentPage=b}if(a!=undefined){f.qlue=a}h.get(endPoint+"maintenance/rekomendasi/detailInvestigasi",{params:{id:f.detailId}}).success(function(c){f.dataDetail=c.content;f.message=c.message;f.status=c.status;f.error=c.error;f.comments=c.comments;f.idDetail=f.detailId;f.pageDetail=true;f.functionalGrouping(f.dataDetail)})};f.functionalGrouping=function(d){f.counter=0;var b=1;f.itemsGroup=[];var e=[];if(d.length>0){for(var a=0;a<d.length;a++){for(var c=a;c<d.length;c++){if(d[c].customer.idnSvp==d[a].customer.idnSvp){if(e.length>0){if(f.checkVarGroup(e,d[a].customer.idnSvp)){e.push({value:d[a].customer.idnSvp})}}else{e.push({value:d[a].customer.idnSvp})}}}}e.sort();for(var a=0;a<e.length;a++){f.itemsGroup.push({key:b++,value:e[a].value})}for(var k=f.itemsGroup.length;k<d.length;k++){f.itemsGroup.push({key:b++,value:"AutoGenerate"})}for(var a=0;a<d.length;a++){d[a].newGcn=e[0].value;d[a].group=1}}};f.checkVarGroup=function(c,a){for(var b=0;b<c.length;b++){if(c[b].value==a){return false}}return true};f.getIdInvestigasi=function(a){f.errorSubmit=false;f.newComments=[];f.detailId=a;f.loadDetailData()};f.submit=function(b){var a=[];f.newComments=[];f.errorSubmit=false;if(f.comments!=undefined&&f.comments!=""){a=f.comments}f.dataList=[];f.dataList=b;h.get(endPoint+"maintenance/rekomendasi/edit",{params:{id:f.detailId,dataList:JSON.stringify(b)}}).success(function(c){f.message=c.message;f.status=c.status;f.title=c.title;if(f.status==201){f.loadDataSearch();f.errorSubmit=false}else{f.errorSubmit=true}})};f.saveComment=function(a){var b=[];f.errorSubmit=false;var c=false;if(f.newComments!=undefined&&f.newComments!=null){for(var d=0;d<f.newComments.length;d++){var e=f.newComments[d].text;if(e==""){c=true}}}if(c){f.errorComment=true}else{b=f.newComments;h.get(endPoint+"maintenance/rekomendasi/submitComments",{params:{id:a,newComments:JSON.stringify(b)}}).success(function(k){f.message=k.message;f.status=k.status;f.error=k.error;f.errorComment=false;f.loadDetailData()})}};f.back=function(a){h.get(endPoint+"maintenance/rekomendasi/lock",{params:{idInvestigation:a}}).success(function(b){f.message=b.message;f.status=b.status;f.error=b.error;f.loadDataSearch()})};f.detailCIF=function(a,b){h.get(endPoint+"/maintenance/rekomendasi/detailCif",{params:{cif:a,source:b}}).success(function(c){f.datasCifDetail=c.objectResponse;f.message=c.message;f.status=c.status;f.error=c.error;if(f.datasCifDetail!=undefined&&f.datasCifDetail!=null){if(f.datasCifDetail.dteBirth!=undefined&&f.datasCifDetail.dteBirth!=null){f.datasCifDetail.dteBirth=formatterDate(f.datasCifDetail.dteBirth)}}if("invalid_token"==f.error){f.invalidToken()}})};f.invalidToken=function(){h.get(endPoint+"maintenance/rekomendasi/invalid-token",{},{}).then(function b(c){window.location.reload()},function a(c){console.log(c)})};f.submitData=function(a){this.submit(a)};f.loadDataSort=function(a,b){f.sortBy=a;f.loadData(f.page)};f.loadDataSearch=function(a,b){f.pageDetail=false;f.newComments=[];f.loadData(a,b)};f.$watch("currentPage",function(){f.loadData(f.currentPage)})});APP.controller("ApprovalController",function(f,h,g,i,j){f.keyIndex="id";f.linkAction={detail:"/detail-investigasi?id=",paramId:"?id="};f.datas=null;f.modules=null;f.currentPage=1;f.currentPageInfo=1;f.pageSize=PAGE_SIZE;f.total=1;f.from=1;f.to=PAGE_SIZE;f.qlue="";f.flagStatus=false;f.flagDate=false;f.flagInput=true;f.emptyData=false;f.msgStatus=false;f.detailId="";f.pageDetail=false;f.orderByField="id";f.reverseSort=false;f.comments=[];f.newComments=[];f.reverseSort=false;f.errorSubmit=false;f.createdBySystems=false;f.disableButton=false;f.errorComment=false;f.reason="";f.checkParam=true;f.search=function(){f.secPage="";this.loadData()};f.paramCheck=function(){return $("#paramIdRec").val()};f.paramGetValue=function(){return $("#idRecom").val()};f.onChangeValue=function(a){f.param2=a};f.cekDisableRecord=function(b,a){var d=b.customer.idnSvp;var e=b.customer.idnParty;if(b.goldenRecord==false){for(var c=0;c<a.length;c++){if(a[c].customer.idnSvp==d&&a[c].customer.idnParty!=e){if(a[c].goldenRecord==true){b.customer.goldenRecordFlag=true}}}}};f.onCheckedGolden=function(a,b,c){var e=b.customer.idnSvp;var m=b.customer.idnParty;if(a==true){for(var d=0;d<c.length;d++){if(c[d].customer.idnSvp==e&&c[d].customer.idnParty==m){b.customer.goldenRecord=a;c[d].customer.goldenRecordFlag=false}if(c[d].customer.idnSvp==e&&c[d].customer.idnParty!=m){c[d].customer.goldenRecordFlag=true}}}else{for(var d=0;d<c.length;d++){if(c[d].customer.idnSvp==e&&c[d].customer.idnParty==m){b.customer.goldenRecord=a;c[d].customer.goldenRecordFlag=false}if(c[d].customer.idnSvp==e&&c[d].customer.idnParty!=m){c[d].customer.goldenRecordFlag=false}}}};f.onSelected=function(a,b){for(var c in f.itemsGroup){if(c==a-1){b.newGcn=f.itemsGroup[c].value;b.group=f.itemsGroup[c].key}}};f.sortBy="";f.sortReverse=false;f.filterData={columnSelected:null,availableColumn:[],};f.onComment=function(a,b){f.newComments[b].text=a};f.addComment=function(){f.newComments.push({text:""})};f.loadData=function(b,a){f.var1="0";f.var2="0";f.page="";if(b!=undefined){f.currentPage=b}if(a!=undefined){f.qlue=a}if(f.param1!=undefined){f.var1=f.param1}if(f.param2!=undefined){f.var2=f.param2}if(f.param1=="status"&&f.param2==""){f.var2="3"}if(f.param1=="recommenDate"||f.param1=="investDate"||f.param1=="reviewDate"){var c="";if(f.param2!=undefined&&f.param2!=""){var d=f.param2;c=d.getFullYear()+"-"+(d.getMonth()+1<10?"0"+(d.getMonth()+1):d.getMonth()+1)+"-"+(d.getDate()<10?"0"+(d.getDate()):d.getDate())}f.var2=c}if(f.secPage!=undefined&&f.secPage!=""){f.page=f.secPage}h.get(endPoint+"maintenance/approval/list",{params:{param1:f.var1,param2:f.var2,page:f.page}}).success(function(e){f.datas=e.listResponse;f.message=e.message;f.status=e.status;f.pageNumber=e.pageNumber;f.pageSize=e.pageSize;f.totalPage=e.totalPage;f.error=e.error;if(f.datas==0){f.emptyData=true}else{f.emptyData=false}if(f.checkParam==true){if(f.paramCheck()=="true"){f.detailId=f.paramGetValue();f.loadDetailData()}f.checkParam=false}})};f.getPage=function(a){return new Array(a)};f.pagging=function(a){f.secPage=a;f.loadData()};f.onSelectStatus=function(){h.get(endPoint+"maintenance/rekomendasi/listStatus",{params:{}}).success(function(a){f.dataStatus=a.listResponse})};f.statusFilter=function(a){return(a.id!="4")&&(a.id!="5")&&(a.id!="1")&&(a.id!="2")};f.inputParam=function(a){f.param1=a;if(f.param1!="recommenDate"&&f.param1!="investDate"&&f.param1!="reviewDate"){f.param2=""}if(a=="status"){f.flagStatus=true;f.flagInput=false;f.flagDate=false;this.onSelectStatus()}else{if(a=="recommenDate"||a=="investDate"||a=="reviewDate"){f.flagStatus=false;f.flagInput=false;f.flagDate=true}else{f.flagStatus=false;f.flagInput=true;f.flagDate=false}}};f.loadDetailData=function(b,a){f.dataDetail=[];f.newComments=[];f.failedApprove=false;f.errorComment=false;if(b!=undefined){f.currentPage=b}if(a!=undefined){f.qlue=a}h.get(endPoint+"maintenance/rekomendasi/detailInvestigasi",{params:{id:f.detailId}}).success(function(c){f.dataDetail=c.content;f.message=c.message;f.status=c.status;f.comments=c.comments;f.idDetail=f.detailId;f.error=c.error;f.reason="";f.pageDetail=true;if(c.createdBySystems=="true"){f.createdBySystems=true}else{f.createdBySystems=false}if(c.statusRecommendationDTO.id==6){f.disableButton=true}else{f.disableButton=false}})};f.functionalGrouping=function(d){f.counter=0;var b=1;f.itemsGroup=[];var e=[];if(d.length>0){for(var a=0;a<d.length;a++){for(var c=a;c<d.length;c++){if(d[c].customer.idnSvp==d[a].customer.idnSvp){if(e.length>0){if(f.checkVarGroup(e,d[a].customer.idnSvp)){e.push({value:d[a].customer.idnSvp})}}else{e.push({value:d[a].customer.idnSvp})}}}}e.sort();for(var a=0;a<e.length;a++){f.itemsGroup.push({key:b++,value:e[a].value})}for(var k=f.itemsGroup.length;k<d.length;k++){f.itemsGroup.push({key:b++,value:"AutoGenerate"})}}};f.checkVarGroup=function(c,a){for(var b=0;b<c.length;b++){if(c[b].value==a){return false}}return true};f.getIdInvestigasi=function(a){f.detailId=a;this.loadDetailData()};f.approve=function(a){f.newComments=[];if(a!=undefined&&f!=""){f.detailId=a}h.get(endPoint+"maintenance/approval/approve",{params:{id:f.detailId}}).success(function(b){f.message=b.message;f.status=b.status;f.title=b.title;f.error=b.error;if(f.status==200){f.loadDataSearch();f.errorSubmit=false}else{f.errorSubmit=true}})};f.reject=function(b){var a="";f.newComments=[];if(f.reason!=undefined&&f.reason!=""){a=f.reason}f.dataList=[];f.dataList=b;h.get(endPoint+"maintenance/approval/reject",{params:{id:f.detailId,dataList:JSON.stringify(b),reason:a}}).success(function(c){f.message=c.message;f.status=c.status;f.title=c.title;f.error=c.error;if(f.status==200){f.loadDataSearch();f.errorSubmit=false}else{f.errorSubmit=true}})};f.requestModify=function(b){var a="";f.newComments=[];if(f.reason!=undefined&&f.reason!=""){a=f.reason}f.dataList=[];f.dataList=b;h.get(endPoint+"maintenance/approval/modification",{params:{id:f.detailId,dataList:JSON.stringify(b),reason:a}}).success(function(c){f.message=c.message;f.status=c.status;f.title=c.title;f.error=c.error;if(f.status==200){f.loadDataSearch();f.errorSubmit=false}else{f.errorSubmit=true}})};f.saveComment=function(a){var b=[];f.errorSubmit=false;var c=false;if(f.newComments!=undefined&&f.newComments!=null){for(var d=0;d<f.newComments.length;d++){var e=f.newComments[d].text;if(e==""){c=true}}}if(c){f.errorComment=true}else{b=f.newComments;h.get(endPoint+"maintenance/rekomendasi/submitComments",{params:{id:a,newComments:JSON.stringify(b)}}).success(function(k){f.message=k.message;f.status=k.status;f.error=k.error;f.errorComment=false;f.loadDetailData()})}};f.back=function(a){f.newComments=[];f.errorSubmit=false;h.get(endPoint+"maintenance/approval/lock",{params:{idInvestigation:a}}).success(function(b){f.message=b.message;f.status=b.status;f.loadDataSearch()})};f.detailCIF=function(a,b){h.get(endPoint+"/maintenance/rekomendasi/detailCif",{params:{cif:a,source:b}}).success(function(c){f.datasCifDetail=c.objectResponse;f.message=c.message;f.status=c.status;f.error=c.error;if(f.datasCifDetail!=undefined&&f.datasCifDetail!=null){if(f.datasCifDetail.dteBirth!=undefined&&f.datasCifDetail.dteBirth!=null){f.datasCifDetail.dteBirth=formatterDate(f.datasCifDetail.dteBirth)}}if("invalid_token"==f.error){f.invalidToken()}})};f.invalidToken=function(){h.get(endPoint+"maintenance/approval/invalid-token",{},{}).then(function b(c){window.location.reload()},function a(c){console.log(c)})};f.loadDataSort=function(a,b){f.sortBy=a;f.loadData(f.page)};f.loadDataSearch=function(a,b){f.newComments=[];f.pageDetail=false;f.errorSubmit=false;f.loadData(a,b)};f.$watch("currentPage",function(){f.loadData(f.currentPage)})});APP.controller("ApprovedController",function(f,h,g,i,j){f.keyIndex="id";f.linkAction={paramId:"?id=",downloadPdf:"?id=PDF",downloadXls:"?id=XLS"};f.datas=null;f.modules=null;f.currentPage=1;f.currentPageInfo=1;f.pageSize=PAGE_SIZE;f.total=1;f.from=1;f.to=PAGE_SIZE;f.qlue="";f.flagStatus=false;f.flagDate=false;f.flagInput=true;f.emptyData=false;f.msgStatus=false;f.detailId="";f.pageDetail=false;f.comments="";f.orderByField="id";f.reverseSort=false;f.todayParam=false;f.todayParamCheck=true;f.search=function(){f.secPage="";this.loadData()};f.getIdInvestigasi=function(a){f.detailId=a;f.loadDetailData()};f.onChangeValue=function(a){f.param2=a};f.sortBy="";f.sortReverse=false;f.filterData={columnSelected:null,availableColumn:[],};f.onSelectStatus=function(){h.get(endPoint+"maintenance/rekomendasi/listStatus",{params:{}}).success(function(a){f.dataStatus=a.listResponse})};f.checkToday=function(){return $("#todayParam").val()};f.loadData=function(b,a){f.var1="0";f.var2="0";f.page="";if(f.todayParamCheck){f.todayParam=f.checkToday()}else{f.todayParam="false"}if(b!=undefined){f.currentPage=b}if(a!=undefined){f.qlue=a}if(f.param1!=undefined){f.var1=f.param1}if(f.param2!=undefined){f.var2=f.param2}if(f.param1=="status"&&f.param2==""){f.var2="1"}if(f.todayParam=="true"){f.var1="completedDate";var c="";var d=new Date();c=d.getFullYear()+"-"+(d.getMonth()+1<10?"0"+(d.getMonth()+1):d.getMonth()+1)+"-"+(d.getDate()<10?"0"+(d.getDate()):d.getDate());f.var2=c}else{if(f.todayParam=="false"){if(f.param1=="recommenDate"||f.param1=="investDate"||f.param1=="reviewDate"||f.param1=="completedDate"){var c="";if(f.param2!=undefined&&f.param2!=""){var d=f.param2;c=d.getFullYear()+"-"+(d.getMonth()+1<10?"0"+(d.getMonth()+1):d.getMonth()+1)+"-"+(d.getDate()<10?"0"+(d.getDate()):d.getDate())}f.var2=c}}}if(f.secPage!=undefined&&f.secPage!=""){f.page=f.secPage}h.get(endPoint+"report/approved/list",{params:{param1:f.var1,param2:f.var2,page:f.page}}).success(function(e){f.datas=e.listResponse;f.message=e.message;f.status=e.status;f.pageNumber=e.pageNumber;f.pageSize=e.pageSize;f.totalPage=e.totalPage;f.error=e.error;if(f.datas==0||f.datas==undefined){f.emptyData=true}else{f.emptyData=false}})};f.inputParam=function(a){f.param1=a;if(f.param1!="recommenDate"&&f.param1!="investDate"&&f.param1!="reviewDate"&&f.param1!="completedDate"){f.param2=""}if(a=="status"){f.flagStatus=true;f.flagInput=false;f.flagDate=false;this.onSelectStatus()}else{if(a=="recommenDate"||a=="investDate"||a=="reviewDate"||a=="completedDate"){f.flagStatus=false;f.flagInput=false;f.flagDate=true}else{f.flagStatus=false;f.flagInput=true;f.flagDate=false}}};f.download=function(b,a){h.get(endPoint+"/report/approved/download",{params:{dataList:JSON.stringify(b),extend:a}}).success(function(c){f.message=c.message;f.status=c.status;f.error=c.error;f.loadDataSearch()})};f.loadDetailData=function(b,a){f.dataDetail=[];f.failedApprove=false;if(b!=undefined){f.currentPage=b}if(a!=undefined){f.qlue=a}h.get(endPoint+"maintenance/rekomendasi/detailInvestigasi",{params:{id:f.detailId}}).success(function(c){f.dataDetail=c.content;f.message=c.message;f.status=c.status;f.comments=c.comments;f.idDetail=f.detailId;f.error=c.error;f.reason="";f.pageDetail=true;if("invalid_token"==f.error){f.invalidToken()}})};f.detailCIF=function(a,b){h.get(endPoint+"/maintenance/rekomendasi/detailCif",{params:{cif:a,source:b}}).success(function(c){f.datasCifDetail=c.objectResponse;f.message=c.message;f.status=c.status;f.error=c.error;if(f.datasCifDetail!=undefined&&f.datasCifDetail!=null){if(f.datasCifDetail.dteBirth!=undefined&&f.datasCifDetail.dteBirth!=null){f.datasCifDetail.dteBirth=formatterDate(f.datasCifDetail.dteBirth)}}if("invalid_token"==f.error){f.invalidToken()}})};f.invalidToken=function(){h.get(endPoint+"report/rejected/invalid-token",{},{}).then(function b(c){window.location.reload()},function a(c){console.log(c)})};f.getPage=function(a){return new Array(a)};f.pagging=function(a){f.secPage=a;f.loadData()};f.loadDataSort=function(a,b){f.sortBy=a;f.loadData(f.page)};f.loadDataSearch=function(a,b){f.pageDetail=false;f.loadData(a,b)};f.$watch("currentPage",function(){f.pageDetail=false;f.loadData(f.currentPage)})});APP.controller("RejectedController",function(f,h,g,i,j){f.keyIndex="id";f.linkAction={paramId:"?id=",downloadPdf:"?id=PDF",downloadXls:"?id=XLS"};f.datas=null;f.modules=null;f.currentPage=1;f.currentPageInfo=1;f.pageSize=PAGE_SIZE;f.total=1;f.from=1;f.to=PAGE_SIZE;f.qlue="";f.flagStatus=false;f.flagDate=false;f.flagInput=true;f.emptyData=false;f.msgStatus=false;f.detailId="";f.pageDetail=false;f.comments="";f.orderByField="id";f.reverseSort=false;f.todayParam=false;f.todayParamCheck=true;f.search=function(){f.secPage="";this.loadData()};f.onChangeValue=function(a){f.param2=a};f.sortBy="";f.sortReverse=false;f.filterData={columnSelected:null,availableColumn:[],};f.checkToday=function(){return $("#todayParam").val()};f.getIdInvestigasi=function(a){f.detailId=a;f.loadDetailData()};f.loadData=function(b,a){f.var1="0";f.var2="0";f.varPage="";if(f.todayParamCheck){f.todayParam=f.checkToday()}else{f.todayParam="false"}if(b!=undefined){f.currentPage=b}if(a!=undefined){f.qlue=a}if(f.param1!=undefined){f.var1=f.param1}if(f.param2!=undefined){f.var2=f.param2}if(f.param1=="status"&&f.param2==""){f.var2="1"}if(f.todayParam=="true"){f.var1="completedDate";var c="";var d=new Date();c=d.getFullYear()+"-"+(d.getMonth()+1<10?"0"+(d.getMonth()+1):d.getMonth()+1)+"-"+(d.getDate()<10?"0"+(d.getDate()):d.getDate());f.var2=c}else{if(f.todayParam=="false"){if(f.param1=="recommenDate"||f.param1=="investDate"||f.param1=="reviewDate"||f.param1=="completedDate"){var c="";if(f.param2!=undefined&&f.param2!=""){var d=f.param2;c=d.getFullYear()+"-"+(d.getMonth()+1<10?"0"+(d.getMonth()+1):d.getMonth()+1)+"-"+(d.getDate()<10?"0"+(d.getDate()):d.getDate())}f.var2=c}}}if(f.secPage!=undefined&&f.secPage!=""){f.varPage=f.secPage}h.get(endPoint+"report/rejected/list",{params:{param1:f.var1,param2:f.var2,page:f.varPage}}).success(function(e){f.datas=e.listResponse;f.message=e.message;f.status=e.status;f.pageNumber=e.pageNumber;f.pageSize=e.pageSize;f.totalPage=e.totalPage;f.error=e.error;f.todayParamCheck=false;if(f.datas==0){f.emptyData=true}else{f.emptyData=false}})};f.onSelectStatus=function(){h.get(endPoint+"maintenance/rekomendasi/listStatus",{params:{}}).success(function(a){f.dataStatus=a.listResponse})};f.inputParam=function(a){f.param1=a;if(f.param1!="recommenDate"&&f.param1!="investDate"&&f.param1!="reviewDate"&&f.param1!="completedDate"){f.param2=""}if(a=="status"){f.flagStatus=true;f.flagInput=false;f.flagDate=false;this.onSelectStatus()}else{if(a=="recommenDate"||a=="investDate"||a=="reviewDate"||a=="completedDate"){f.flagStatus=false;f.flagInput=false;f.flagDate=true}else{f.flagStatus=false;f.flagInput=true;f.flagDate=false}}};f.download=function(b,a){h.get(endPoint+"/report/rejected/download",{params:{dataList:JSON.stringify(b),extend:a}}).success(function(c){f.message=c.message;f.status=c.status;f.error=c.error;f.loadDataSearch()})};f.loadDetailData=function(b,a){f.dataDetail=[];f.failedApprove=false;if(b!=undefined){f.currentPage=b}if(a!=undefined){f.qlue=a}h.get(endPoint+"maintenance/rekomendasi/detailInvestigasi",{params:{id:f.detailId}}).success(function(c){f.dataDetail=c.content;f.message=c.message;f.status=c.status;f.comments=c.comments;f.idDetail=f.detailId;f.error=c.error;f.reason="";f.pageDetail=true;if("invalid_token"==f.error){f.invalidToken()}})};f.detailCIF=function(a,b){h.get(endPoint+"/maintenance/rekomendasi/detailCif",{params:{cif:a,source:b}}).success(function(c){f.datasCifDetail=c.objectResponse;f.message=c.message;f.status=c.status;f.error=c.error;if(f.datasCifDetail!=undefined&&f.datasCifDetail!=null){if(f.datasCifDetail.dteBirth!=undefined&&f.datasCifDetail.dteBirth!=null){f.datasCifDetail.dteBirth=formatterDate(f.datasCifDetail.dteBirth)}}if("invalid_token"==f.error){f.invalidToken()}})};f.invalidToken=function(){h.get(endPoint+"report/rejected/invalid-token",{},{}).then(function b(c){window.location.reload()},function a(c){console.log(c)})};f.getPage=function(a){return new Array(a)};f.pagging=function(a){f.secPage=a;f.loadData()};f.loadDataSort=function(a,b){f.sortBy=a;f.loadData(f.page)};f.loadDataSearch=function(a,b){f.pageDetail=false;f.loadData(a,b)};f.$watch("currentPage",function(){f.pageDetail=false;f.loadData(f.currentPage)})});APP.controller("InquiryController",function(f,h,g,i,j){f.keyIndex="id";f.linkAction={paramId:"?gcnNo="};f.datas=null;f.modules=null;f.currentPage=1;f.currentPageInfo=1;f.pageSize=PAGE_SIZE;f.total=1;f.from=1;f.to=PAGE_SIZE;f.qlue="";f.flagStatus=false;f.flagDate=false;f.flagInput=true;f.emptyData=false;f.msgStatus=false;f.detailId="";f.pageDetail=false;f.tableClick=false;f.search=function(){f.secPage=undefined;f.loadDatas()};f.onChangeValue=function(a){f.param2=a};f.sortBy="";f.sortReverse=false;f.filterData={columnSelected:null,availableColumn:[],};f.loadDatas=function(v,b){var z="";var d="";var y="";var x="";var e="";var u="";var s="";var c="";var w="";if(v!=undefined){f.currentPage=v}if(b!=undefined){f.qlue=b}if(f.paramCif!=undefined){z=f.paramCif}if(f.paramGcn!=undefined){d=f.paramGcn}if(f.paramName!=undefined){y=f.paramName}if(f.parambirtDate!=undefined){var t="";var a=f.parambirtDate;t=a.getFullYear()+""+(a.getMonth()+1<10?"0"+(a.getMonth()+1):a.getMonth()+1)+""+(a.getDate()<10?"0"+(a.getDate()):a.getDate());x=t}if(f.paramMother!=undefined){e=f.paramMother}if(f.paramktp!=undefined){u=f.paramktp}if(f.paramNpwp!=undefined){s=f.paramNpwp}if(f.paramNoHp!=undefined){c=f.paramNoHp}if(f.secPage!=undefined){w=f.secPage}h.get(endPoint+"inquiryGCN/inquiry/list",{params:{paramCif:z,paramGcn:d,paramName:y,parambirtDate:x,paramMother:e,paramktp:u,paramNpwp:s,paramNoHp:c,secPage:w}}).success(function(k){f.datas=k.listResponse;f.message=k.message;f.status=k.status;f.error=k.error;f.last=k.last;f.totalPage=k.totalPage;f.pageNumber=k.pageNumber;f.pageSize=k.pageSize;f.tableClick=true;if("invalid_token"==f.error){f.invalidToken()}if(f.datas!=null&&f.datas!=undefined){if(f.datas.length>0){f.emptyData=true}else{f.emptyData=false}}})};f.invalidToken=function(){h.get(endPoint+"inquiryGCN/inquiry/invalid-token",{},{}).then(function b(c){window.location.reload()},function a(c){console.log(c)})};f.getPage=function(a){return new Array(a)};f.pagging=function(a){f.secPage=a;f.loadDatas()};f.loadDataSort=function(a,b){f.sortBy=a;f.loadDatas(f.page)};f.loadDataSearch=function(a,b){f.pageDetail=false;f.loadDatas(a,b)}});APP.controller("InquiryDetailController",function(f,h,g,i,j){f.keyIndex="id";f.linkAction={};f.datas=null;f.modules=null;f.currentPage=1;f.currentPageInfo=1;f.pageSize=PAGE_SIZE;f.total=1;f.from=1;f.to=PAGE_SIZE;f.qlue="";f.dataDetailCB=[];f.dataDetailCC=[];f.dataDetailJF=[];f.search=function(){f.loadDatas()};f.onChangeValue=function(a){f.param2=a};f.sortBy="";f.sortReverse=false;f.filterData={columnSelected:null,availableColumn:[],};f.search=function(b,a){f.cifNo=b;f.source=a;f.loadDatas()};f.loadDatas=function(b,a){var c="";var d="";if(f.cifNo!=undefined){c=f.cifNo}if(f.source!=undefined){d=f.source}h.get(endPoint+"inquiryGCN/inquiry/list-account",{params:{paramCif:c,paramSource:d}}).success(function(e){if(f.source=="CB"){f.dataDetailCB=e.listResponse;if(f.dataDetailCB.length>0){f.dataRowCB=true}else{f.dataRowCB=false}}else{if(f.source=="CC"){f.dataDetailCC=e.listResponse;if(f.dataDetailCC.length>0){f.dataRowCC=true}else{f.dataRowCC=false}}else{if(f.source=="JF"){f.dataDetailJF=e.listResponse;if(f.dataDetailJF.length>0){f.dataRowJF=true}else{f.dataRowJF=false}}}}f.message=e.message;f.status=e.status;f.error=e.error})};f.loadDataSort=function(a,b){f.sortBy=a;f.loadDatas(f.page)};f.loadDataSearch=function(a,b){f.pageDetail=false;f.loadDatas(a,b)}});APP.controller("dashboardController",function(f,h,g,i,j){f.keyIndex="id";f.datas=null;f.loadData=function(b,a){h.get(endPoint+"/dashboard/analytic",{params:{}}).success(function(c){f.datas=c.objectResponse;f.error=c.error;if("invalid_token"==f.error){f.invalidToken()}})};f.invalidToken=function(){h.get(endPoint+"/dashboard/invalid-token",{},{}).then(function b(c){window.location.reload()},function a(c){console.log(c)})};f.$watch("currentPage",function(){f.loadData(f.currentPage)})});APP.controller("DataInquiryController",function(f,h,g,i,j){f.keyIndex="id";f.linkAction={};f.datas=null;f.currentPage=1;f.currentPageInfo=1;f.pageSize=PAGE_SIZE;f.total=1;f.from=1;f.to=PAGE_SIZE;f.qlue="";f.emptyData=false;f.sortBy="";f.sortReverse=false;f.filterData={columnSelected:null,availableColumn:[],};f.pagging=function(a){f.secPage=a;f.loadData()};f.DateFormatter=function(a){if(a==""||a==undefined){return""}return a.substring(0,2)+"/"+a.substring(2,4)+"/"+a.substring(4,8)};f.search=function(){this.loadData()};f.viewDetail=function(a){f.detail=a};setInterval(function(){if(f.paramVal==undefined&&f.paramKey==undefined){var b="0";var a="0";if(f.paramVal!=undefined){a=f.paramVal}if(f.paramKey!=undefined){b=f.paramKey;if(b=="custDob"){a=a.replace("/","")}}if(f.secPage==undefined){f.secPage="0"}h.get(endPoint+"blacklist/datainquiry/list/asynch",{params:{paramKey:b,paramVal:a,secPage:f.secPage,}}).success(function(c){f.datas=c.listResponse;f.message=c.message;f.status=c.status;f.error=c.error;f.totalPage=c.totalPage;f.pageNumber=c.pageNumber;if(f.datas.length>0){f.emptyData=false}else{f.emptyData=true}})}},1000);f.loadData=function(b,a){var d="0";var c="0";if(f.paramVal!=undefined){c=f.paramVal}if(f.paramKey!=undefined){d=f.paramKey;if(d=="custDob"){c=c.replace("/","")}}if(f.secPage==undefined){f.secPage="0"}h.get(endPoint+"blacklist/datainquiry/list",{params:{paramKey:d,paramVal:c,secPage:f.secPage}}).success(function(e){f.datas=e.listResponse;f.message=e.message;f.status=e.status;f.error=e.error;f.totalPage=e.totalPage;f.pageNumber=e.pageNumber;if(f.datas.length>0){f.emptyData=false}else{f.emptyData=true}})};f.pagging=function(a){f.secPage=a;f.loadData()};f.loadDataSort=function(a,b){f.sortBy=a;f.loadData(f.page)};f.loadDataSearch=function(a,b){f.loadData(a,b)};f.$watch("currentPage",function(){f.loadData(f.currentPage)})});APP.controller("DataInputBlacklistController",function(g,i,h,j,k,l){g.selectFlag=function(a){var b=g.datas;for(var c=0;c<b.length;c++){if(b[c].id==a){g.blacklistFlagTempDesc=b[c].blacklistFlagDesc;break}}};g.gcnCekMasukKagak=function(){g.custDob};g.selectFlagDesc=function(c){var a=g.datas;for(var b=0;b<a.length;b++){if(a[b].blacklistFlag==c){g.blacklistFlagTemp=a[b].id;g.blacklistFlagTempDesc=a[b].blacklistFlagDesc;break}}};g.cannotSave=false;g.getGcnData=function(){i.get(endPoint+"/blacklist/datainput/getDataGcnProfile",{params:{idnId:g.IdNo,nmeFull:g.custName,dteBirth:g.custDob}}).success(function(b){var a=b.objectResponse;if(a!=""||a!=undefined){if(a.idn_mobile_phone!=null){g.phoneNo=a.idn_mobile_phone}if(a.cde_gender!=null){g.custGender=a.cde_gender}if(a.crdacct_nbr!=null){g.cifBg=a.crdacct_nbr}if(a.noseri!=null){g.cifCC=a.noseri}if(a.no_rekening!=null){g.cifMojf=a.no_rekening}if(a.idn_svp!=null){g.gcnNo=a.idn_svp}if(a.idn_party!=null){g.cifHost=a.idn_party}if(a.nationality!=null){g.addressCountry=a.nationality}if(a.cfdhn!=null){g.dhnbiBlacklistNo=a.cfdhn}if(a.cfurut!=null){g.dhnbiSeqNo=a.cfurut}if(a.cfref!=null){g.dhnbiRefNo=a.cfref}if(a.cfnamb!=null){g.dhnbiBankName=a.cfnamb}if(a.cfbasd!=null){g.dhnbiDateEnd=a.cfbasd}if(a.cfnpwp!=null){g.npwpNo=a.cfnpwp}if(a.idType!=null){g.idType=a.idType}if(a.blacklistFlag!=null){g.selectFlagDesc(a.blacklistFlag)}if(a.addressCity!=null){g.addressCity=a.addressCity}if(a.address!=null){g.address=a.address}if(a.addressProvince!=null){g.addressProvince=a.addressProvince}if(a.addressPostalCode!=null){g.addressPostalCode=a.addressPostalCode}if(a.nationality!=null){g.addressCountry=a.nationality}if(a.custType!=null){g.custType=a.custType}if(a.startDate!=null){g.startDate=a.startDate}if(a.endDate!=null){g.endDate=a.endDate}}})};i.get(endPoint+"/blacklist/listparameter/BlacklistParameter/all",{params:{secPage:"",isPaging:false}}).success(function(a){g.datas=a.listResponse;g.message=a.message;g.status=a.status;g.error=a.error;g.totalPage=a.totalPage;g.pageNumber=a.pageNumber});g.Date=function(a){return new Date(a)};g.save=function(){var b=g.idData;var c=g._csrf.token;var d={headers:{Accept:"application/json, */*","x-csrf-token":c}};g.cannotSave=false;var a={idData:b,custName:g.custName,gcnNo:g.gcnNo,cifHost:g.cifHost,idNo:g.IdNo,idType:g.idType,npwpNo:g.npwpNo,custDob:g.custDob,custGender:g.custGender,custType:g.custType,blacklistFlagTemp:g.blacklistFlagTemp,phoneNo:g.phoneNo,startDate:g.startDate,endDate:g.endDate,addressCity:g.addressCity,address:g.address,addressProvince:g.addressProvince,addressPostalCode:g.addressPostalCode,addressCountry:g.addressCountry,description:g.description,cifBg:g.cifBg,cifCC:g.cifCC,cifMojf:g.cifMojf,dhnbiBlacklistNo:g.dhnbiBlacklistNo,dhnbiSeqNo:g.dhnbiSeqNo,dhnbiRefNo:g.dhnbiRefNo,dhnbiBankName:g.dhnbiBankName,dhnbiDateEnd:g.dhnbiDateEnd};i.post(endPoint+"blacklist/datainput/save",a,d).then(function(f){if(b==""||b==undefined){k.location.href=endPoint+"blacklist/datainquiry"}else{k.location.href=endPoint+"/blacklist/datamaintenance"}},function e(f){k.alert(f.data)})};g.downloadFile=function(){i.get(endPoint+"blacklist/datainput/downloadFile").success(function(a){g.downloadHref=a.objectResponse})};g.saveFiles=function(){var b=endPoint+"blacklist/datainput/save/files";var a=g._csrf.token;var c=new FileReader();if(g.input==undefined){g.cannotSave=true;return}c.onload=function(){dataURL=c.result;var d={headers:{Accept:"application/json, */*","x-csrf-token":a}};i.post(b,dataURL,d).then(function(f){k.location.href=endPoint+"blacklist/datainquiry"},function e(f){k.alert("error : "+f.errorMessage)})};c.readAsDataURL(g.input.files[0])};if(g.totalPageFile==undefined){g.totalPageFile=1}if(g.pageNumberFile==undefined||scope.pageNumberFile==""){g.pageNumberFile=1}g.paggingFile=function(a){g.pageNumberFile=a;var b=g._csrf.token;var c=new FileReader();c.onload=function(){dataURL=c.result;var d=endPoint+"blacklist/datainput/uploadWebService/"+g.pageNumberFile;var e={headers:{Accept:"application/json, */*","x-csrf-token":b}};i.post(d,dataURL,e).then(function(n){if(n.data.error=="NO ERROR"){g.dataFiles=n.data.listResponse;g.totalPageFile=n.data.totalPage}else{}},function f(n){alert("error");k.alert(n.errorMessage)})};c.readAsDataURL(g.input.files[0])};g.readExcelFile=function(a){var b=g._csrf.token;g.input=a.target;var c=g.input.files[0].size;var d=new FileReader();if(c<393216){d.onload=function(){dataURL=d.result;var e=endPoint+"blacklist/datainput/uploadWebService/"+g.pageNumberFile;var f={headers:{Accept:"application/json, */*","x-csrf-token":b}};i.post(e,dataURL,f).then(function(m){if(m.data.error=="NO ERROR"){g.dataFiles=m.data.listResponse;g.totalPageFile=m.data.totalPage}else{}},function n(m){k.alert(m.errorMessage)})}}else{k.alert("Ukuran file terlalu besar")}d.readAsDataURL(g.input.files[0])}});APP.controller("blacklistParameterController",function(l,i,h,j,k){l.errorParameter=false;l.errorSave=false;l.errorRequired=false;l.nameRequired=null;l.emptyData=false;l.linkAction={paramId:"?id="};l.sizeModel=[{blacklistFlag:"",blacklistFlagDesc:""}];l.addModel=function(){l.sizeModel.push({blacklistFlag:"",blacklistFlagDesc:""})};l.onParameter=function(a,b){l.sizeModel[b].blacklistFlag=a};l.onDescription=function(a,b){l.sizeModel[b].blacklistFlagDesc=a};l.validateParameterFlag=function(b){for(var a=0;a<b.length;a++){for(var c=a;c<b.length;c++){if(b[a].blacklistFlag==b[c].blacklistFlag&&a!=c){return false}}}return true};l.validateRequired=function(b){for(var a=0;a<b.length;a++){if(b[a].blacklistFlag==""||b[a].blacklistFlag==null){l.nameRequired="Parameter";return true}if(b[a].blacklistFlagDesc==""||b[a].blacklistFlagDesc==null){l.nameRequired="Deskripsi";return true}}};l.save=function(a){var b=true;if(l.validateRequired(a)){l.errorRequired=true;return}if(a.length>0){b=l.validateParameterFlag(a)}if(b){i.get(endPoint+"blacklist/listparameter/save",{params:{blacklistFlag:JSON.stringify(a)}}).success(function(c){l.message=c.message;l.status=c.status;if(l.status==200){k.location.href=endPoint+"blacklist/listparameter"}else{l.errorSave=true;l.datas=c.objectResponse}})}else{l.errorParameter=true}};var g=new URLSearchParams(window.location.search);l.update=function(){var a=g.get("id");if(l.description!=null||l.description!=""){i.get(endPoint+"blacklist/listparameter/update",{params:{id:a,blacklistFlag:l.parameter,blacklistFlagDesc:l.description}}).success(function(b){k.location.href=endPoint+"blacklist/listparameter"})}};l.loadData=function(b,a){if(b!=undefined){l.currentPage=b}if(a!=undefined){l.qlue=a}if(l.secPage==undefined){l.secPage=0}i.get(endPoint+"/blacklist/listparameter/BlacklistParameter/all",{params:{secPage:l.secPage,isPaging:true}}).success(function(c){l.datas=c.listResponse;l.message=c.message;l.status=c.status;l.error=c.error;l.totalPage=c.totalPage;l.pageNumber=c.pageNumber;if(l.datas.length==0){l.emptyData=true}})};l.sortBy="";l.sortReverse=false;l.checkDetail=function(){return $("#lookDetailUser").val()};l.getValueGroupName=function(){return $("#setGroupName").val()};l.onChangeValue=function(a){l.paramVal=a};l.inputParam=function(a){if(a=="status"){l.flagStatus=true;l.paramVal="true"}else{l.paramVal="";l.flagStatus=false}};l.filterData={columnSelected:null,availableColumn:[],};l.getPage=function(a){return new Array(a)};l.pagging=function(a){l.secPage=a;l.loadData()};l.loadDataSort=function(a,b){l.sortBy=a;l.loadData(l.page)};l.loadDataSearch=function(a,b){l.loadData(a,b)};l.$watch("currentPage",function(){l.loadData(l.currentPage)});l.search=function(){l.checkTotalUser="false";l.emptyData=false;this.loadData()}});APP.controller("DataMaintenanceController",function(g,i,h,j,k,l){g.viewDetail=function(a){g.detail=a};g.keyIndex="id";g.linkAction={paramId:"?id="};g.datas=null;g.currentPage=1;g.currentPageInfo=1;g.pageSize=PAGE_SIZE;g.total=1;g.from=1;g.to=PAGE_SIZE;g.qlue="";g.emptyData=false;g.sortBy="";g.sortReverse=false;g.DateFormatter=function(a){if(a==""||a==undefined){return""}return a.substring(0,2)+"/"+a.substring(2,4)+"/"+a.substring(4,8)};g.filterData={columnSelected:null,availableColumn:[],};g.search=function(){g.loadData()};g.onChangeValue=function(a){g.paramVal=a};g.editDataMaintenance=function(a){l.sendData(a)};g.loadData=function(b,a){var d="0";var c="0";if(g.paramKey!=undefined){d=g.paramKey}if(g.paramVal!=undefined){c=g.paramVal;if(d=="custDob"){c=c.replace("/","")}}if(g.secPage==undefined){g.secPage="0"}i.get(endPoint+"blacklist/datamaintenance/list",{params:{paramKey:d,paramVal:c,secPage:g.secPage}}).success(function(e){g.datas=e.listResponse;g.message=e.message;g.status=e.status;g.error=e.error;g.totalPage=e.totalPage;g.pageNumber=e.pageNumber;if(g.datas.length>0){g.emptyData=false}else{g.emptyData=true}})};g.pagging=function(a){g.secPage=a;g.loadData()};g.getPage=function(a){return new Array(a)};g.pagging=function(a){g.secPage=a;g.loadData()};g.loadDataSort=function(a,b){g.sortBy=a;g.loadData(g.page)};g.loadDataSearch=function(a,b){g.loadData(a,b)};g.$watch("currentPage",function(){g.loadData(g.currentPage)})});APP.controller("UploadController",function(l,i,g,j,k){l.keyIndex="id";l.linkAction={};l.datas=null;l.currentPage=1;l.currentPageInfo=1;l.pageSize=PAGE_SIZE;l.total=1;l.from=1;l.to=PAGE_SIZE;l.qlue="";var h=new FormData();l.sortBy="";l.sortReverse=false;l.filterData={columnSelected:null,availableColumn:[],};l.Upload=function(){var a=/^([a-zA-Z0-9\s_\\.\-:])+(.xls|.xlsx)$/;if(a.test(l.SelectedFile.uploadingFiles.toLowerCase())){if(typeof(FileReader)!="undefined"){var b=new FileReader();if(b.readAsBinaryString){b.onload=function(c){l.ProcessExcel(c.target.result)};b.readAsBinaryString(l.SelectedFile)}else{b.onload=function(c){var d="";var f=new Uint8Array(c.target.result);for(var e=0;e<f.byteLength;e++){d+=String.fromCharCode(f[e])}l.ProcessExcel(d)};b.readAsArrayBuffer(l.SelectedFile)}}else{k.alert("This browser does not support HTML5.")}}else{k.alert("Please upload a valid Excel file.")}};l.ProcessExcel=function(a){var d=XLSX.read(a,{type:"binary"});var c=d.SheetNames[0];var b=XLSX.utils.sheet_to_row_object_array(d.Sheets[c]);l.$apply(function(){l.Customers=b;l.IsVisible=true})};l.add=function(){var a=document.getElementById("fileupload").files[0];var b=new FileReader();b.onloadend=function(c){var d=c.target.result};b.readAsBinaryString(a)};l.selectedFiles=function(a){l.selectedFiles=a}});APP.controller("ReportUserMonitoringController",function(f,h,g,i,j){f.keyIndex="id";f.linkAction={};f.datas=null;f.currentPage=1;f.currentPageInfo=1;f.pageSize=PAGE_SIZE;f.total=1;f.from=1;f.to=PAGE_SIZE;f.qlue="";f.emptyData=false;f.serial=1;f.sortBy="";f.sortReverse=false;f.filterData={columnSelected:null,availableColumn:[],};f.loadData=function(b,a){f.var1="0";f.var2="0";f.page="";if(b!=undefined){f.currentPage=b}if(a!=undefined){f.qlue=a}if(f.paramKey!=undefined){f.var1=f.paramKey}if(f.paramVal!=undefined){f.var2=f.paramVal}if(f.secPage!=undefined){f.page=f.secPage}h.get(endPoint+"report/reportuser/list",{params:{paramKey:f.var1,paramVal:f.var2,secPage:f.page}}).success(function(c){f.datas=c.listResponse;f.message=c.message;f.status=c.status;f.error=c.error;f.pageNumber=c.pageNumber;f.pageSize=c.pageSize;f.totalPage=c.totalPage;if(f.datas==0){f.emptyData=true}else{f.emptyData=false}})};f.search=function(){f.loadData()};f.getPage=function(a){return new Array(a)};f.pagging=function(a){f.secPage=a;f.loadData()};f.loadDataSort=function(a,b){f.sortBy=a;f.loadData(f.page)};f.loadDataSearch=function(a,b){f.loadData(a,b)};f.$watch("currentPage",function(){f.loadData(f.currentPage)})});function getTo(f,e,h){var g=(f*e);g=(g>h)?h:g;return g}function stringToDate(l,p,q){if(p==undefined){p="dd-mm-yyyy"}if(q==undefined){q="-"}var o=p.toLowerCase();var s=o.split(q);var t=l.split(q);var r=s.indexOf("mm");var v=s.indexOf("dd");var u=s.indexOf("yyyy");var n=parseInt(t[r]);n-=1;var m=new Date(t[u],n,t[v]);return m}function deleteConfirm(c){var d=confirm("Are you sure to delete this record ?");if(d){if(typeof c=="function"){c()}}else{return false}}function invalidConfirm(c){var d=confirm("Invalid Token, please re-login");c()}function getParameterByName(e,f){if(!f){f=window.location.href}e=e.replace(/[\[\]]/g,"\\$&");var g=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)"),h=g.exec(f);if(!h){return null}if(!h[2]){return""}return decodeURIComponent(h[2].replace(/\+/g," "))}function goBack(){return window.history.back()}function setStatusDesc(b){switch(b){case 1:return"Approved";case 2:return"Rejected";default:return"Pending Approval"}}function getFilename(c){if(c!=undefined&&c!=""){var d=c.split("\\");return d[d.length-1]}return null}function formatterDate(g){var i="";var j=g.slice(0,4);var h=g.slice(4,6);var f=g.slice(6,8);i=h+"-"+f+"-"+j;return i}APP.factory("SharingData",function(){var b={};b.data=false;b.getData=function(){return this.data};b.sendData=function(a){this.data=a};return b});
(function(){if(window.CKEDITOR&&window.CKEDITOR.dom){return}window.CKEDITOR||(window.CKEDITOR=function(){var c=/(^|.*[\\\/])ckeditor\.js(?:\?.*|;.*)?$/i,b={timestamp:"G14E",version:"4.5.7",revision:"e98277f",rnd:Math.floor(900*Math.random())+100,_:{pending:[],basePathSrcPattern:c},status:"unloaded",basePath:function(){var f=window.CKEDITOR_BASEPATH||"";if(!f){for(var e=document.getElementsByTagName("script"),g=0;g<e.length;g++){var h=e[g].src.match(c);if(h){f=h[1];break}}}-1==f.indexOf(":/")&&"//"!=f.slice(0,2)&&(f=0===f.indexOf("/")?location.href.match(/^.*?:\/\/[^\/]*/)[0]+f:location.href.match(/^[^\?]*\/(?:)/)[0]+f);if(!f){throw'The CKEditor installation path could not be automatically detected. Please set the global variable "CKEDITOR_BASEPATH" before creating editor instances.'}return f}(),getUrl:function(e){-1==e.indexOf(":/")&&0!==e.indexOf("/")&&(e=this.basePath+e);this.timestamp&&"/"!=e.charAt(e.length-1)&&!/[&?]t=/.test(e)&&(e+=(0<=e.indexOf("?")?"\x26":"?")+"t\x3d"+this.timestamp);return e},domReady:function(){function f(){try{document.addEventListener?(document.removeEventListener("DOMContentLoaded",f,!1),g()):document.attachEvent&&"complete"===document.readyState&&(document.detachEvent("onreadystatechange",f),g())}catch(h){}}function g(){for(var h;h=e.shift();){h()}}var e=[];return function(h){function i(){try{document.documentElement.doScroll("left")}catch(k){setTimeout(i,1);return}f()}e.push(h);"complete"===document.readyState&&setTimeout(f,1);if(1==e.length){if(document.addEventListener){document.addEventListener("DOMContentLoaded",f,!1),window.addEventListener("load",f,!1)}else{if(document.attachEvent){document.attachEvent("onreadystatechange",f);window.attachEvent("onload",f);h=!1;try{h=!window.frameElement}catch(j){}document.documentElement.doScroll&&h&&i()}}}}}()},d=window.CKEDITOR_GETURL;if(d){var a=b.getUrl;b.getUrl=function(e){return d.call(b,e)||a.call(b,e)}}return b}());CKEDITOR.event||(CKEDITOR.event=function(){},CKEDITOR.event.implementOn=function(b){var a=CKEDITOR.event.prototype,d;for(d in a){null==b[d]&&(b[d]=a[d])}},CKEDITOR.event.prototype=function(){function b(c){var e=a(this);return e[c]||(e[c]=new d(c))}var a=function(c){c=c.getPrivate&&c.getPrivate()||c._||(c._={});return c.events||(c.events={})},d=function(c){this.name=c;this.listeners=[]};d.prototype={getListenerIndex:function(e){for(var f=0,c=this.listeners;f<c.length;f++){if(c[f].fn==e){return f}}return -1}};return{define:function(c,e){var f=b.call(this,c);CKEDITOR.tools.extend(f,e,!0)},on:function(e,f,k,n,l){function t(m,i,h,j){m={name:e,sender:this,editor:m,data:i,listenerData:n,stop:h,cancel:j,removeListener:v};return !1===f.call(k,m)?!1:m.data}function v(){c.removeListener(e,f)}var g=b.call(this,e);if(0>g.getListenerIndex(f)){g=g.listeners;k||(k=this);isNaN(l)&&(l=10);var c=this;t.fn=f;t.priority=l;for(var u=g.length-1;0<=u;u--){if(g[u].priority<=l){return g.splice(u+1,0,t),{removeListener:v}}}g.unshift(t)}return{removeListener:v}},once:function(){var c=Array.prototype.slice.call(arguments),e=c[1];c[1]=function(f){f.removeListener();return e.apply(this,arguments)};return this.on.apply(this,c)},capture:function(){CKEDITOR.event.useCapture=1;var c=this.on.apply(this,arguments);CKEDITOR.event.useCapture=0;return c},fire:function(){var e=0,g=function(){e=1},c=0,f=function(){c=1};return function(k,n,h){var j=a(this)[k];k=e;var i=c;e=c=0;if(j){var q=j.listeners;if(q.length){for(var q=q.slice(0),v,t=0;t<q.length;t++){if(j.errorProof){try{v=q[t].call(this,h,n,g,f)}catch(u){}}else{v=q[t].call(this,h,n,g,f)}!1===v?c=1:"undefined"!=typeof v&&(n=v);if(e||c){break}}}}n=c?!1:"undefined"==typeof n?!0:n;e=k;c=i;return n}}(),fireOnce:function(e,f,c){f=this.fire(e,f,c);delete a(this)[e];return f},removeListener:function(e,g){var c=a(this)[e];if(c){var f=c.getListenerIndex(g);0<=f&&c.listeners.splice(f,1)}},removeAllListeners:function(){var c=a(this),e;for(e in c){delete c[e]}},hasListeners:function(c){return(c=a(this)[c])&&0<c.listeners.length}}}());CKEDITOR.editor||(CKEDITOR.editor=function(){CKEDITOR._.pending.push([this,arguments]);CKEDITOR.event.call(this)},CKEDITOR.editor.prototype.fire=function(a,d){a in {instanceReady:1,loaded:1}&&(this[a]=!0);return CKEDITOR.event.prototype.fire.call(this,a,d,this)},CKEDITOR.editor.prototype.fireOnce=function(a,d){a in {instanceReady:1,loaded:1}&&(this[a]=!0);return CKEDITOR.event.prototype.fireOnce.call(this,a,d,this)},CKEDITOR.event.implementOn(CKEDITOR.editor.prototype));CKEDITOR.env||(CKEDITOR.env=function(){var c=navigator.userAgent.toLowerCase(),b=c.match(/edge[ \/](\d+.?\d*)/),d=-1<c.indexOf("trident/"),d=!(!b&&!d),d={ie:d,edge:!!b,webkit:!d&&-1<c.indexOf(" applewebkit/"),air:-1<c.indexOf(" adobeair/"),mac:-1<c.indexOf("macintosh"),quirks:"BackCompat"==document.compatMode&&(!document.documentMode||10>document.documentMode),mobile:-1<c.indexOf("mobile"),iOS:/(ipad|iphone|ipod)/.test(c),isCustomDomain:function(){if(!this.ie){return !1}var e=document.domain,f=window.location.hostname;return e!=f&&e!="["+f+"]"},secure:"https:"==location.protocol};d.gecko="Gecko"==navigator.product&&!d.webkit&&!d.ie;d.webkit&&(-1<c.indexOf("chrome")?d.chrome=!0:d.safari=!0);var a=0;d.ie&&(a=b?parseFloat(b[1]):d.quirks||!document.documentMode?parseFloat(c.match(/msie (\d+)/)[1]):document.documentMode,d.ie9Compat=9==a,d.ie8Compat=8==a,d.ie7Compat=7==a,d.ie6Compat=7>a||d.quirks);d.gecko&&(b=c.match(/rv:([\d\.]+)/))&&(b=b[1].split("."),a=10000*b[0]+100*(b[1]||0)+1*(b[2]||0));d.air&&(a=parseFloat(c.match(/ adobeair\/(\d+)/)[1]));d.webkit&&(a=parseFloat(c.match(/ applewebkit\/(\d+)/)[1]));d.version=a;d.isCompatible=!(d.ie&&7>a)&&!(d.gecko&&40000>a)&&!(d.webkit&&534>a);d.hidpi=2<=window.devicePixelRatio;d.needsBrFiller=d.gecko||d.webkit||d.ie&&10<a;d.needsNbspFiller=d.ie&&11>a;d.cssClass="cke_browser_"+(d.ie?"ie":d.gecko?"gecko":d.webkit?"webkit":"unknown");d.quirks&&(d.cssClass+=" cke_browser_quirks");d.ie&&(d.cssClass+=" cke_browser_ie"+(d.quirks?"6 cke_browser_iequirks":d.version));d.air&&(d.cssClass+=" cke_browser_air");d.iOS&&(d.cssClass+=" cke_browser_ios");d.hidpi&&(d.cssClass+=" cke_hidpi");return d}());"unloaded"==CKEDITOR.status&&function(){CKEDITOR.event.implementOn(CKEDITOR);CKEDITOR.loadFullCore=function(){if("basic_ready"!=CKEDITOR.status){CKEDITOR.loadFullCore._load=1}else{delete CKEDITOR.loadFullCore;var a=document.createElement("script");a.type="text/javascript";a.src=CKEDITOR.basePath+"ckeditor.js";document.getElementsByTagName("head")[0].appendChild(a)}};CKEDITOR.loadFullCoreTimeout=0;CKEDITOR.add=function(a){(this._.pending||(this._.pending=[])).push(a)};(function(){CKEDITOR.domReady(function(){var a=CKEDITOR.loadFullCore,d=CKEDITOR.loadFullCoreTimeout;a&&(CKEDITOR.status="basic_ready",a&&a._load?a():d&&setTimeout(function(){CKEDITOR.loadFullCore&&CKEDITOR.loadFullCore()},1000*d))})})();CKEDITOR.status="basic_loaded"}();"use strict";CKEDITOR.VERBOSITY_WARN=1;CKEDITOR.VERBOSITY_ERROR=2;CKEDITOR.verbosity=CKEDITOR.VERBOSITY_WARN|CKEDITOR.VERBOSITY_ERROR;CKEDITOR.warn=function(a,d){CKEDITOR.verbosity&CKEDITOR.VERBOSITY_WARN&&CKEDITOR.fire("log",{type:"warn",errorCode:a,additionalData:d})};CKEDITOR.error=function(a,d){CKEDITOR.verbosity&CKEDITOR.VERBOSITY_ERROR&&CKEDITOR.fire("log",{type:"error",errorCode:a,additionalData:d})};CKEDITOR.on("log",function(b){if(window.console&&window.console.log){var a=console[b.data.type]?b.data.type:"log",d=b.data.errorCode;if(b=b.data.additionalData){console[a]("[CKEDITOR] Error code: "+d+".",b)}else{console[a]("[CKEDITOR] Error code: "+d+".")}console[a]("[CKEDITOR] For more information about this error go to http://docs.ckeditor.com/#!/guide/dev_errors-section-"+d)}},null,null,999);CKEDITOR.dom={};(function(){var a=[],d=CKEDITOR.env.gecko?"-moz-":CKEDITOR.env.webkit?"-webkit-":CKEDITOR.env.ie?"-ms-":"",b=/&/g,c=/>/g,e=/</g,g=/"/g,l=/&(lt|gt|amp|quot|nbsp|shy|#\d{1,5});/g,k={lt:"\x3c",gt:"\x3e",amp:"\x26",quot:'"',nbsp:"Â ",shy:""},n=function(f,h){return"#"==h[0]?String.fromCharCode(parseInt(h.slice(1),10)):k[h]};CKEDITOR.on("reset",function(){a=[]});CKEDITOR.tools={arrayCompare:function(h,f){if(!h&&!f){return !0}if(!h||!f||h.length!=f.length){return !1}for(var i=0;i<h.length;i++){if(h[i]!=f[i]){return !1}}return !0},getIndex:function(h,f){for(var i=0;i<h.length;++i){if(f(h[i])){return i}}return -1},clone:function(h){var f;if(h&&h instanceof Array){f=[];for(var i=0;i<h.length;i++){f[i]=CKEDITOR.tools.clone(h[i])}return f}if(null===h||"object"!=typeof h||h instanceof String||h instanceof Number||h instanceof Boolean||h instanceof Date||h instanceof RegExp||h.nodeType||h.window===h){return h}f=new h.constructor;for(i in h){f[i]=CKEDITOR.tools.clone(h[i])}return f},capitalize:function(f,h){return f.charAt(0).toUpperCase()+(h?f.slice(1):f.slice(1).toLowerCase())},extend:function(m){var j=arguments.length,o,h;"boolean"==typeof(o=arguments[j-1])?j--:"boolean"==typeof(o=arguments[j-2])&&(h=arguments[j-1],j-=2);for(var f=1;f<j;f++){var i=arguments[f],p;for(p in i){if(!0===o||null==m[p]){if(!h||p in h){m[p]=i[p]}}}}return m},prototypedCopy:function(f){var h=function(){};h.prototype=f;return new h},copy:function(h){var f={},i;for(i in h){f[i]=h[i]}return f},isArray:function(f){return"[object Array]"==Object.prototype.toString.call(f)},isEmpty:function(f){for(var h in f){if(f.hasOwnProperty(h)){return !1}}return !0},cssVendorPrefix:function(h,f,i){if(i){return d+h+":"+f+";"+h+":"+f}i={};i[h]=f;i[d+h]=f;return i},cssStyleToDomStyle:function(){var f=document.createElement("div").style,h="undefined"!=typeof f.cssFloat?"cssFloat":"undefined"!=typeof f.styleFloat?"styleFloat":"float";return function(i){return"float"==i?h:i.replace(/-./g,function(j){return j.substr(1).toUpperCase()})}}(),buildStyleHtml:function(i){i=[].concat(i);for(var h,j=[],f=0;f<i.length;f++){if(h=i[f]){/@import|[{}]/.test(h)?j.push("\x3cstyle\x3e"+h+"\x3c/style\x3e"):j.push('\x3clink type\x3d"text/css" rel\x3dstylesheet href\x3d"'+h+'"\x3e')}}return j.join("")},htmlEncode:function(f){return void 0===f||null===f?"":String(f).replace(b,"\x26amp;").replace(c,"\x26gt;").replace(e,"\x26lt;")},htmlDecode:function(f){return f.replace(l,n)},htmlEncodeAttr:function(f){return CKEDITOR.tools.htmlEncode(f).replace(g,"\x26quot;")},htmlDecodeAttr:function(f){return CKEDITOR.tools.htmlDecode(f)},transformPlainTextToHtml:function(p,m){var q=m==CKEDITOR.ENTER_BR,h=this.htmlEncode(p.replace(/\r\n/g,"\n")),h=h.replace(/\t/g,"\x26nbsp;\x26nbsp; \x26nbsp;"),f=m==CKEDITOR.ENTER_P?"p":"div";if(!q){var j=/\n{2}/g;if(j.test(h)){var o="\x3c"+f+"\x3e",i="\x3c/"+f+"\x3e",h=o+h.replace(j,function(){return i+o})+i}}h=h.replace(/\n/g,"\x3cbr\x3e");q||(h=h.replace(new RegExp("\x3cbr\x3e(?\x3d\x3c/"+f+"\x3e)"),function(r){return CKEDITOR.tools.repeat(r,2)}));h=h.replace(/^ | $/g,"\x26nbsp;");return h=h.replace(/(>|\s) /g,function(r,s){return s+"\x26nbsp;"}).replace(/ (?=<)/g,"\x26nbsp;")},getNextNumber:function(){var f=0;return function(){return ++f}}(),getNextId:function(){return"cke_"+this.getNextNumber()},getUniqueId:function(){for(var f="e",h=0;8>h;h++){f+=Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return f},override:function(h,f){var i=f(h);i.prototype=h.prototype;return i},setTimeout:function(i,f,j,m,h){h||(h=window);j||(j=h);return h.setTimeout(function(){m?i.apply(j,[].concat(m)):i.apply(j)},f||0)},trim:function(){var f=/(?:^[ \t\n\r]+)|(?:[ \t\n\r]+$)/g;return function(h){return h.replace(f,"")}}(),ltrim:function(){var f=/^[ \t\n\r]+/g;return function(h){return h.replace(f,"")}}(),rtrim:function(){var f=/[ \t\n\r]+$/g;return function(h){return h.replace(f,"")}}(),indexOf:function(i,h){if("function"==typeof h){for(var j=0,f=i.length;j<f;j++){if(h(i[j])){return j}}}else{if(i.indexOf){return i.indexOf(h)}j=0;for(f=i.length;j<f;j++){if(i[j]===h){return j}}}return -1},search:function(h,i){var f=CKEDITOR.tools.indexOf(h,i);return 0<=f?h[f]:null},bind:function(f,h){return function(){return f.apply(h,arguments)}},createClass:function(m){var o=m.$,h=m.base,f=m.privates||m._,j=m.proto;m=m.statics;!o&&(o=function(){h&&this.base.apply(this,arguments)});if(f){var i=o,o=function(){var q=this._||(this._={}),r;for(r in f){var p=f[r];q[r]="function"==typeof p?CKEDITOR.tools.bind(p,this):p}i.apply(this,arguments)}}h&&(o.prototype=this.prototypedCopy(h.prototype),o.prototype.constructor=o,o.base=h,o.baseProto=h.prototype,o.prototype.base=function(){this.base=h.prototype.base;h.apply(this,arguments);this.base=arguments.callee});j&&this.extend(o.prototype,j,!0);m&&this.extend(o,m,!0);return o},addFunction:function(f,h){return a.push(function(){return f.apply(h||this,arguments)})-1},removeFunction:function(f){a[f]=null},callFunction:function(f){var h=a[f];return h&&h.apply(window,Array.prototype.slice.call(arguments,1))},cssLength:function(){var f=/^-?\d+\.?\d*px$/,h;return function(i){h=CKEDITOR.tools.trim(i+"")+"px";return f.test(h)?h:i||""}}(),convertToPx:function(){var f;return function(h){f||(f=CKEDITOR.dom.element.createFromHtml('\x3cdiv style\x3d"position:absolute;left:-9999px;top:-9999px;margin:0px;padding:0px;border:0px;"\x3e\x3c/div\x3e',CKEDITOR.document),CKEDITOR.document.getBody().append(f));return/%$/.test(h)?h:(f.setStyle("width",h),f.$.clientWidth)}}(),repeat:function(f,h){return Array(h+1).join(f)},tryThese:function(){for(var i,j=0,h=arguments.length;j<h;j++){var f=arguments[j];try{i=f();break}catch(m){}}return i},genKey:function(){return Array.prototype.slice.call(arguments).join("-")},defer:function(f){return function(){var h=arguments,i=this;window.setTimeout(function(){f.apply(i,h)},0)}},normalizeCssText:function(i,j){var h=[],f,m=CKEDITOR.tools.parseCssText(i,!0,j);for(f in m){h.push(f+":"+m[f])}h.sort();return h.length?h.join(";")+";":""},convertRgbToHex:function(f){return f.replace(/(?:rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\))/gi,function(j,m,h,i){j=[m,h,i];for(m=0;3>m;m++){j[m]=("0"+parseInt(j[m],10).toString(16)).slice(-2)}return"#"+j.join("")})},parseCssText:function(i,j,f){var h={};f&&(f=new CKEDITOR.dom.element("span"),f.setAttribute("style",i),i=CKEDITOR.tools.convertRgbToHex(f.getAttribute("style")||""));if(!i||";"==i){return h}i.replace(/&quot;/g,'"').replace(/\s*([^:;\s]+)\s*:\s*([^;]+)\s*(?=;|$)/g,function(m,p,o){j&&(p=p.toLowerCase(),"font-family"==p&&(o=o.toLowerCase().replace(/["']/g,"").replace(/\s*,\s*/g,",")),o=CKEDITOR.tools.trim(o));h[p]=o});return h},writeCssText:function(i,j){var f,h=[];for(f in i){h.push(f+":"+i[f])}j&&h.sort();return h.join("; ")},objectCompare:function(i,j,f){var h;if(!i&&!j){return !0}if(!i||!j){return !1}for(h in i){if(i[h]!=j[h]){return !1}}if(!f){for(h in j){if(i[h]!=j[h]){return !1}}}return !0},objectKeys:function(h){var i=[],f;for(f in h){i.push(f)}return i},convertArrayToObject:function(i,j){var h={};1==arguments.length&&(j=!0);for(var f=0,m=i.length;f<m;++f){h[i[f]]=j}return h},fixDomain:function(){for(var f;;){try{f=window.parent.document.domain;break}catch(h){f=f?f.replace(/.+?(?:\.|$)/,""):document.domain;if(!f){break}document.domain=f}}return !!f},eventsBuffer:function(m,o,h){function f(){i=(new Date).getTime();j=!1;h?o.call(h):o()}var j,i=0;return{input:function(){if(!j){var p=(new Date).getTime()-i;p<m?j=setTimeout(f,m-p):f()}},reset:function(){j&&clearTimeout(j);j=i=0}}},enableHtml5Elements:function(i,j){for(var h="abbr article aside audio bdi canvas data datalist details figcaption figure footer header hgroup main mark meter nav output progress section summary time video".split(" "),f=h.length,m;f--;){m=i.createElement(h[f]),j&&i.appendChild(m)}},checkIfAnyArrayItemMatches:function(i,j){for(var f=0,h=i.length;f<h;++f){if(i[f].match(j)){return !0}}return !1},checkIfAnyObjectPropertyMatches:function(h,i){for(var f in h){if(f.match(i)){return !0}}return !1},transparentImageData:"data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw\x3d\x3d",getCookie:function(i){i=i.toLowerCase();for(var j=document.cookie.split(";"),h,f,m=0;m<j.length;m++){if(h=j[m].split("\x3d"),f=decodeURIComponent(CKEDITOR.tools.trim(h[0]).toLowerCase()),f===i){return decodeURIComponent(1<h.length?h[1]:"")}}return null},setCookie:function(f,h){document.cookie=encodeURIComponent(f)+"\x3d"+encodeURIComponent(h)+";path\x3d/"},getCsrfToken:function(){var i=CKEDITOR.tools.getCookie("ckCsrfToken");if(!i||40!=i.length){var i=[],j="";if(window.crypto&&window.crypto.getRandomValues){i=new Uint8Array(40),window.crypto.getRandomValues(i)}else{for(var f=0;40>f;f++){i.push(Math.floor(256*Math.random()))}}for(f=0;f<i.length;f++){var h="abcdefghijklmnopqrstuvwxyz0123456789".charAt(i[f]%36),j=j+(0.5<Math.random()?h.toUpperCase():h)}i=j;CKEDITOR.tools.setCookie("ckCsrfToken",i)}return i}}})();CKEDITOR.dtd=function(){var a=CKEDITOR.tools.extend,d=function(i,j){for(var h=CKEDITOR.tools.clone(i),f=1;f<arguments.length;f++){j=arguments[f];for(var m in j){delete h[m]}}return h},b={},c={},e={address:1,article:1,aside:1,blockquote:1,details:1,div:1,dl:1,fieldset:1,figure:1,footer:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,header:1,hgroup:1,hr:1,main:1,menu:1,nav:1,ol:1,p:1,pre:1,section:1,table:1,ul:1},g={command:1,link:1,meta:1,noscript:1,script:1,style:1},l={},k={"#":1},n={center:1,dir:1,noframes:1};a(b,{a:1,abbr:1,area:1,audio:1,b:1,bdi:1,bdo:1,br:1,button:1,canvas:1,cite:1,code:1,command:1,datalist:1,del:1,dfn:1,em:1,embed:1,i:1,iframe:1,img:1,input:1,ins:1,kbd:1,keygen:1,label:1,map:1,mark:1,meter:1,noscript:1,object:1,output:1,progress:1,q:1,ruby:1,s:1,samp:1,script:1,select:1,small:1,span:1,strong:1,sub:1,sup:1,textarea:1,time:1,u:1,"var":1,video:1,wbr:1},k,{acronym:1,applet:1,basefont:1,big:1,font:1,isindex:1,strike:1,style:1,tt:1});a(c,e,b,n);d={a:d(b,{a:1,button:1}),abbr:b,address:c,area:l,article:c,aside:c,audio:a({source:1,track:1},c),b:b,base:l,bdi:b,bdo:b,blockquote:c,body:c,br:l,button:d(b,{a:1,button:1}),canvas:b,caption:c,cite:b,code:b,col:l,colgroup:{col:1},command:l,datalist:a({option:1},b),dd:c,del:b,details:a({summary:1},c),dfn:b,div:c,dl:{dt:1,dd:1},dt:c,em:b,embed:l,fieldset:a({legend:1},c),figcaption:c,figure:a({figcaption:1},c),footer:c,form:c,h1:b,h2:b,h3:b,h4:b,h5:b,h6:b,head:a({title:1,base:1},g),header:c,hgroup:{h1:1,h2:1,h3:1,h4:1,h5:1,h6:1},hr:l,html:a({head:1,body:1},c,g),i:b,iframe:k,img:l,input:l,ins:b,kbd:b,keygen:l,label:b,legend:b,li:c,link:l,main:c,map:c,mark:b,menu:a({li:1},c),meta:l,meter:d(b,{meter:1}),nav:c,noscript:a({link:1,meta:1,style:1},b),object:a({param:1},b),ol:{li:1},optgroup:{option:1},option:k,output:b,p:b,param:l,pre:b,progress:d(b,{progress:1}),q:b,rp:b,rt:b,ruby:a({rp:1,rt:1},b),s:b,samp:b,script:k,section:c,select:{optgroup:1,option:1},small:b,source:l,span:b,strong:b,style:k,sub:b,summary:a({h1:1,h2:1,h3:1,h4:1,h5:1,h6:1},b),sup:b,table:{caption:1,colgroup:1,thead:1,tfoot:1,tbody:1,tr:1},tbody:{tr:1},td:c,textarea:k,tfoot:{tr:1},th:c,thead:{tr:1},time:d(b,{time:1}),title:k,tr:{th:1,td:1},track:l,u:b,ul:{li:1},"var":b,video:a({source:1,track:1},c),wbr:l,acronym:b,applet:a({param:1},c),basefont:l,big:b,center:c,dialog:l,dir:{li:1},font:b,isindex:l,noframes:c,strike:b,tt:b};a(d,{$block:a({audio:1,dd:1,dt:1,figcaption:1,li:1,video:1},e,n),$blockLimit:{article:1,aside:1,audio:1,body:1,caption:1,details:1,dir:1,div:1,dl:1,fieldset:1,figcaption:1,figure:1,footer:1,form:1,header:1,hgroup:1,main:1,menu:1,nav:1,ol:1,section:1,table:1,td:1,th:1,tr:1,ul:1,video:1},$cdata:{script:1,style:1},$editable:{address:1,article:1,aside:1,blockquote:1,body:1,details:1,div:1,fieldset:1,figcaption:1,footer:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,header:1,hgroup:1,main:1,nav:1,p:1,pre:1,section:1},$empty:{area:1,base:1,basefont:1,br:1,col:1,command:1,dialog:1,embed:1,hr:1,img:1,input:1,isindex:1,keygen:1,link:1,meta:1,param:1,source:1,track:1,wbr:1},$inline:b,$list:{dl:1,ol:1,ul:1},$listItem:{dd:1,dt:1,li:1},$nonBodyContent:a({body:1,head:1,html:1},d.head),$nonEditable:{applet:1,audio:1,button:1,embed:1,iframe:1,map:1,object:1,option:1,param:1,script:1,textarea:1,video:1},$object:{applet:1,audio:1,button:1,hr:1,iframe:1,img:1,input:1,object:1,select:1,table:1,textarea:1,video:1},$removeEmpty:{abbr:1,acronym:1,b:1,bdi:1,bdo:1,big:1,cite:1,code:1,del:1,dfn:1,em:1,font:1,i:1,ins:1,label:1,kbd:1,mark:1,meter:1,output:1,q:1,ruby:1,s:1,samp:1,small:1,span:1,strike:1,strong:1,sub:1,sup:1,time:1,tt:1,u:1,"var":1},$tabIndex:{a:1,area:1,button:1,input:1,object:1,select:1,textarea:1},$tableContent:{caption:1,col:1,colgroup:1,tbody:1,td:1,tfoot:1,th:1,thead:1,tr:1},$transparent:{a:1,audio:1,canvas:1,del:1,ins:1,map:1,noscript:1,object:1,video:1},$intermediate:{caption:1,colgroup:1,dd:1,dt:1,figcaption:1,legend:1,li:1,optgroup:1,option:1,rp:1,rt:1,summary:1,tbody:1,td:1,tfoot:1,th:1,thead:1,tr:1}});return d}();CKEDITOR.dom.event=function(a){this.$=a};CKEDITOR.dom.event.prototype={getKey:function(){return this.$.keyCode||this.$.which},getKeystroke:function(){var a=this.getKey();if(this.$.ctrlKey||this.$.metaKey){a+=CKEDITOR.CTRL}this.$.shiftKey&&(a+=CKEDITOR.SHIFT);this.$.altKey&&(a+=CKEDITOR.ALT);return a},preventDefault:function(a){var d=this.$;d.preventDefault?d.preventDefault():d.returnValue=!1;a&&this.stopPropagation()},stopPropagation:function(){var a=this.$;a.stopPropagation?a.stopPropagation():a.cancelBubble=!0},getTarget:function(){var a=this.$.target||this.$.srcElement;return a?new CKEDITOR.dom.node(a):null},getPhase:function(){return this.$.eventPhase||2},getPageOffset:function(){var a=this.getTarget().getDocument().$;return{x:this.$.pageX||this.$.clientX+(a.documentElement.scrollLeft||a.body.scrollLeft),y:this.$.pageY||this.$.clientY+(a.documentElement.scrollTop||a.body.scrollTop)}}};CKEDITOR.CTRL=1114112;CKEDITOR.SHIFT=2228224;CKEDITOR.ALT=4456448;CKEDITOR.EVENT_PHASE_CAPTURING=1;CKEDITOR.EVENT_PHASE_AT_TARGET=2;CKEDITOR.EVENT_PHASE_BUBBLING=3;CKEDITOR.dom.domObject=function(a){a&&(this.$=a)};CKEDITOR.dom.domObject.prototype=function(){var a=function(b,e){return function(c){"undefined"!=typeof CKEDITOR&&b.fire(e,new CKEDITOR.dom.event(c))}};return{getPrivate:function(){var b;(b=this.getCustomData("_"))||this.setCustomData("_",b={});return b},on:function(d){var b=this.getCustomData("_cke_nativeListeners");b||(b={},this.setCustomData("_cke_nativeListeners",b));b[d]||(b=b[d]=a(this,d),this.$.addEventListener?this.$.addEventListener(d,b,!!CKEDITOR.event.useCapture):this.$.attachEvent&&this.$.attachEvent("on"+d,b));return CKEDITOR.event.prototype.on.apply(this,arguments)},removeListener:function(c){CKEDITOR.event.prototype.removeListener.apply(this,arguments);if(!this.hasListeners(c)){var g=this.getCustomData("_cke_nativeListeners"),b=g&&g[c];b&&(this.$.removeEventListener?this.$.removeEventListener(c,b,!1):this.$.detachEvent&&this.$.detachEvent("on"+c,b),delete g[c])}},removeAllListeners:function(){var c=this.getCustomData("_cke_nativeListeners"),g;for(g in c){var b=c[g];this.$.detachEvent?this.$.detachEvent("on"+g,b):this.$.removeEventListener&&this.$.removeEventListener(g,b,!1);delete c[g]}CKEDITOR.event.prototype.removeAllListeners.call(this)}}}();(function(a){var d={};CKEDITOR.on("reset",function(){d={}});a.equals=function(c){try{return c&&c.$===this.$}catch(b){return !1}};a.setCustomData=function(e,b){var c=this.getUniqueId();(d[c]||(d[c]={}))[e]=b;return this};a.getCustomData=function(c){var b=this.$["data-cke-expando"];return(b=b&&d[b])&&c in b?b[c]:null};a.removeCustomData=function(g){var b=this.$["data-cke-expando"],b=b&&d[b],c,e;b&&(c=b[g],e=g in b,delete b[g]);return e?c:null};a.clearCustomData=function(){this.removeAllListeners();var b=this.$["data-cke-expando"];b&&delete d[b]};a.getUniqueId=function(){return this.$["data-cke-expando"]||(this.$["data-cke-expando"]=CKEDITOR.tools.getNextNumber())};CKEDITOR.event.implementOn(a)})(CKEDITOR.dom.domObject.prototype);CKEDITOR.dom.node=function(a){return a?new CKEDITOR.dom[a.nodeType==CKEDITOR.NODE_DOCUMENT?"document":a.nodeType==CKEDITOR.NODE_ELEMENT?"element":a.nodeType==CKEDITOR.NODE_TEXT?"text":a.nodeType==CKEDITOR.NODE_COMMENT?"comment":a.nodeType==CKEDITOR.NODE_DOCUMENT_FRAGMENT?"documentFragment":"domObject"](a):this};CKEDITOR.dom.node.prototype=new CKEDITOR.dom.domObject;CKEDITOR.NODE_ELEMENT=1;CKEDITOR.NODE_DOCUMENT=9;CKEDITOR.NODE_TEXT=3;CKEDITOR.NODE_COMMENT=8;CKEDITOR.NODE_DOCUMENT_FRAGMENT=11;CKEDITOR.POSITION_IDENTICAL=0;CKEDITOR.POSITION_DISCONNECTED=1;CKEDITOR.POSITION_FOLLOWING=2;CKEDITOR.POSITION_PRECEDING=4;CKEDITOR.POSITION_IS_CONTAINED=8;CKEDITOR.POSITION_CONTAINS=16;CKEDITOR.tools.extend(CKEDITOR.dom.node.prototype,{appendTo:function(a,d){a.append(this,d);return a},clone:function(d,b){function e(f){f["data-cke-expando"]&&(f["data-cke-expando"]=!1);if(f.nodeType==CKEDITOR.NODE_ELEMENT||f.nodeType==CKEDITOR.NODE_DOCUMENT_FRAGMENT){if(b||f.nodeType!=CKEDITOR.NODE_ELEMENT||f.removeAttribute("id",!1),d){f=f.childNodes;for(var g=0;g<f.length;g++){e(f[g])}}}}function a(f){if(f.type==CKEDITOR.NODE_ELEMENT||f.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT){if(f.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT){var g=f.getName();":"==g[0]&&f.renameNode(g.substring(1))}if(d){for(g=0;g<f.getChildCount();g++){a(f.getChild(g))}}}}var c=this.$.cloneNode(d);e(c);c=new CKEDITOR.dom.node(c);CKEDITOR.env.ie&&9>CKEDITOR.env.version&&(this.type==CKEDITOR.NODE_ELEMENT||this.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT)&&a(c);return c},hasPrevious:function(){return !!this.$.previousSibling},hasNext:function(){return !!this.$.nextSibling},insertAfter:function(a){a.$.parentNode.insertBefore(this.$,a.$.nextSibling);return a},insertBefore:function(a){a.$.parentNode.insertBefore(this.$,a.$);return a},insertBeforeMe:function(a){this.$.parentNode.insertBefore(a.$,this.$);return a},getAddress:function(d){for(var b=[],e=this.getDocument().$.documentElement,a=this.$;a&&a!=e;){var c=a.parentNode;c&&b.unshift(this.getIndex.call({$:a},d));a=c}return b},getDocument:function(){return new CKEDITOR.dom.document(this.$.ownerDocument||this.$.parentNode.ownerDocument)},getIndex:function(e){function b(f,h){var i=h?f.nextSibling:f.previousSibling;return i&&i.nodeType==CKEDITOR.NODE_TEXT?g(i)?b(i,h):i:null}function g(f){return !f.nodeValue||f.nodeValue==CKEDITOR.dom.selection.FILLING_CHAR_SEQUENCE}var a=this.$,c=-1,d;if(!this.$.parentNode||e&&a.nodeType==CKEDITOR.NODE_TEXT&&g(a)&&!b(a)&&!b(a,!0)){return -1}do{e&&a!=this.$&&a.nodeType==CKEDITOR.NODE_TEXT&&(d||g(a))||(c++,d=a.nodeType==CKEDITOR.NODE_TEXT)}while(a=a.previousSibling);return c},getNextSourceNode:function(d,b,e){if(e&&!e.call){var a=e;e=function(f){return !f.equals(a)}}d=!d&&this.getFirst&&this.getFirst();var c;if(!d){if(this.type==CKEDITOR.NODE_ELEMENT&&e&&!1===e(this,!0)){return null}d=this.getNext()}for(;!d&&(c=(c||this).getParent());){if(e&&!1===e(c,!0)){return null}d=c.getNext()}return !d||e&&!1===e(d)?null:b&&b!=d.type?d.getNextSourceNode(!1,b,e):d},getPreviousSourceNode:function(d,b,e){if(e&&!e.call){var a=e;e=function(f){return !f.equals(a)}}d=!d&&this.getLast&&this.getLast();var c;if(!d){if(this.type==CKEDITOR.NODE_ELEMENT&&e&&!1===e(this,!0)){return null}d=this.getPrevious()}for(;!d&&(c=(c||this).getParent());){if(e&&!1===e(c,!0)){return null}d=c.getPrevious()}return !d||e&&!1===e(d)?null:b&&d.type!=b?d.getPreviousSourceNode(!1,b,e):d},getPrevious:function(b){var a=this.$,d;do{d=(a=a.previousSibling)&&10!=a.nodeType&&new CKEDITOR.dom.node(a)}while(d&&b&&!b(d));return d},getNext:function(b){var a=this.$,d;do{d=(a=a.nextSibling)&&new CKEDITOR.dom.node(a)}while(d&&b&&!b(d));return d},getParent:function(a){var d=this.$.parentNode;return d&&(d.nodeType==CKEDITOR.NODE_ELEMENT||a&&d.nodeType==CKEDITOR.NODE_DOCUMENT_FRAGMENT)?new CKEDITOR.dom.node(d):null},getParents:function(b){var a=this,d=[];do{d[b?"push":"unshift"](a)}while(a=a.getParent());return d},getCommonAncestor:function(a){if(a.equals(this)){return this}if(a.contains&&a.contains(this)){return a}var d=this.contains?this:this.getParent();do{if(d.contains(a)){return d}}while(d=d.getParent());return null},getPosition:function(c){var b=this.$,d=c.$;if(b.compareDocumentPosition){return b.compareDocumentPosition(d)}if(b==d){return CKEDITOR.POSITION_IDENTICAL}if(this.type==CKEDITOR.NODE_ELEMENT&&c.type==CKEDITOR.NODE_ELEMENT){if(b.contains){if(b.contains(d)){return CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_PRECEDING}if(d.contains(b)){return CKEDITOR.POSITION_IS_CONTAINED+CKEDITOR.POSITION_FOLLOWING}}if("sourceIndex" in b){return 0>b.sourceIndex||0>d.sourceIndex?CKEDITOR.POSITION_DISCONNECTED:b.sourceIndex<d.sourceIndex?CKEDITOR.POSITION_PRECEDING:CKEDITOR.POSITION_FOLLOWING}}b=this.getAddress();c=c.getAddress();for(var d=Math.min(b.length,c.length),a=0;a<d;a++){if(b[a]!=c[a]){return b[a]<c[a]?CKEDITOR.POSITION_PRECEDING:CKEDITOR.POSITION_FOLLOWING}}return b.length<c.length?CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_PRECEDING:CKEDITOR.POSITION_IS_CONTAINED+CKEDITOR.POSITION_FOLLOWING},getAscendant:function(e,b){var g=this.$,a,c;b||(g=g.parentNode);"function"==typeof e?(c=!0,a=e):(c=!1,a=function(f){f="string"==typeof f.nodeName?f.nodeName.toLowerCase():"";return"string"==typeof e?f==e:f in e});for(;g;){if(a(c?new CKEDITOR.dom.node(g):g)){return new CKEDITOR.dom.node(g)}try{g=g.parentNode}catch(d){g=null}}return null},hasAscendant:function(b,a){var d=this.$;a||(d=d.parentNode);for(;d;){if(d.nodeName&&d.nodeName.toLowerCase()==b){return !0}d=d.parentNode}return !1},move:function(a,d){a.append(this.remove(),d)},remove:function(b){var a=this.$,d=a.parentNode;if(d){if(b){for(;b=a.firstChild;){d.insertBefore(a.removeChild(b),a)}}d.removeChild(a)}return this},replace:function(a){this.insertBefore(a);a.remove()},trim:function(){this.ltrim();this.rtrim()},ltrim:function(){for(var b;this.getFirst&&(b=this.getFirst());){if(b.type==CKEDITOR.NODE_TEXT){var a=CKEDITOR.tools.ltrim(b.getText()),d=b.getLength();if(a){a.length<d&&(b.split(d-a.length),this.$.removeChild(this.$.firstChild))}else{b.remove();continue}}break}},rtrim:function(){for(var b;this.getLast&&(b=this.getLast());){if(b.type==CKEDITOR.NODE_TEXT){var a=CKEDITOR.tools.rtrim(b.getText()),d=b.getLength();if(a){a.length<d&&(b.split(a.length),this.$.lastChild.parentNode.removeChild(this.$.lastChild))}else{b.remove();continue}}break}CKEDITOR.env.needsBrFiller&&(b=this.$.lastChild)&&1==b.type&&"br"==b.nodeName.toLowerCase()&&b.parentNode.removeChild(b)},isReadOnly:function(a){var d=this;this.type!=CKEDITOR.NODE_ELEMENT&&(d=this.getParent());CKEDITOR.env.edge&&d&&d.is("textarea","input")&&(a=!0);if(!a&&d&&"undefined"!=typeof d.$.isContentEditable){return !(d.$.isContentEditable||d.data("cke-editable"))}for(;d;){if(d.data("cke-editable")){return !1}if(d.hasAttribute("contenteditable")){return"false"==d.getAttribute("contenteditable")}d=d.getParent()}return !0}});CKEDITOR.dom.window=function(a){CKEDITOR.dom.domObject.call(this,a)};CKEDITOR.dom.window.prototype=new CKEDITOR.dom.domObject;CKEDITOR.tools.extend(CKEDITOR.dom.window.prototype,{focus:function(){this.$.focus()},getViewPaneSize:function(){var a=this.$.document,d="CSS1Compat"==a.compatMode;return{width:(d?a.documentElement.clientWidth:a.body.clientWidth)||0,height:(d?a.documentElement.clientHeight:a.body.clientHeight)||0}},getScrollPosition:function(){var a=this.$;if("pageXOffset" in a){return{x:a.pageXOffset||0,y:a.pageYOffset||0}}a=a.document;return{x:a.documentElement.scrollLeft||a.body.scrollLeft||0,y:a.documentElement.scrollTop||a.body.scrollTop||0}},getFrame:function(){var a=this.$.frameElement;return a?new CKEDITOR.dom.element.get(a):null}});CKEDITOR.dom.document=function(a){CKEDITOR.dom.domObject.call(this,a)};CKEDITOR.dom.document.prototype=new CKEDITOR.dom.domObject;CKEDITOR.tools.extend(CKEDITOR.dom.document.prototype,{type:CKEDITOR.NODE_DOCUMENT,appendStyleSheet:function(a){if(this.$.createStyleSheet){this.$.createStyleSheet(a)}else{var d=new CKEDITOR.dom.element("link");d.setAttributes({rel:"stylesheet",type:"text/css",href:a});this.getHead().append(d)}},appendStyleText:function(b){if(this.$.createStyleSheet){var a=this.$.createStyleSheet("");a.cssText=b}else{var d=new CKEDITOR.dom.element("style",this);d.append(new CKEDITOR.dom.text(b,this));this.getHead().append(d)}return a||d.$.sheet},createElement:function(b,a){var d=new CKEDITOR.dom.element(b,this);a&&(a.attributes&&d.setAttributes(a.attributes),a.styles&&d.setStyles(a.styles));return d},createText:function(a){return new CKEDITOR.dom.text(a,this)},focus:function(){this.getWindow().focus()},getActive:function(){var a;try{a=this.$.activeElement}catch(d){return null}return new CKEDITOR.dom.element(a)},getById:function(a){return(a=this.$.getElementById(a))?new CKEDITOR.dom.element(a):null},getByAddress:function(c,k){for(var e=this.$.documentElement,g=0;e&&g<c.length;g++){var l=c[g];if(k){for(var a=-1,d=0;d<e.childNodes.length;d++){var b=e.childNodes[d];if(!0!==k||3!=b.nodeType||!b.previousSibling||3!=b.previousSibling.nodeType){if(a++,a==l){e=b;break}}}}else{e=e.childNodes[l]}}return e?new CKEDITOR.dom.node(e):null},getElementsByTag:function(a,d){CKEDITOR.env.ie&&8>=document.documentMode||!d||(a=d+":"+a);return new CKEDITOR.dom.nodeList(this.$.getElementsByTagName(a))},getHead:function(){var a=this.$.getElementsByTagName("head")[0];return a=a?new CKEDITOR.dom.element(a):this.getDocumentElement().append(new CKEDITOR.dom.element("head"),!0)},getBody:function(){return new CKEDITOR.dom.element(this.$.body)},getDocumentElement:function(){return new CKEDITOR.dom.element(this.$.documentElement)},getWindow:function(){return new CKEDITOR.dom.window(this.$.parentWindow||this.$.defaultView)},write:function(a){this.$.open("text/html","replace");CKEDITOR.env.ie&&(a=a.replace(/(?:^\s*<!DOCTYPE[^>]*?>)|^/i,'$\x26\n\x3cscript data-cke-temp\x3d"1"\x3e('+CKEDITOR.tools.fixDomain+")();\x3c/script\x3e"));this.$.write(a);this.$.close()},find:function(a){return new CKEDITOR.dom.nodeList(this.$.querySelectorAll(a))},findOne:function(a){return(a=this.$.querySelector(a))?new CKEDITOR.dom.element(a):null},_getHtml5ShivFrag:function(){var a=this.getCustomData("html5ShivFrag");a||(a=this.$.createDocumentFragment(),CKEDITOR.tools.enableHtml5Elements(a,!0),this.setCustomData("html5ShivFrag",a));return a}});CKEDITOR.dom.nodeList=function(a){this.$=a};CKEDITOR.dom.nodeList.prototype={count:function(){return this.$.length},getItem:function(a){return 0>a||a>=this.$.length?null:(a=this.$[a])?new CKEDITOR.dom.node(a):null}};CKEDITOR.dom.element=function(a,d){"string"==typeof a&&(a=(d?d.$:document).createElement(a));CKEDITOR.dom.domObject.call(this,a)};CKEDITOR.dom.element.get=function(a){return(a="string"==typeof a?document.getElementById(a)||document.getElementsByName(a)[0]:a)&&(a.$?a:new CKEDITOR.dom.element(a))};CKEDITOR.dom.element.prototype=new CKEDITOR.dom.node;CKEDITOR.dom.element.createFromHtml=function(b,a){var d=new CKEDITOR.dom.element("div",a);d.setHtml(b);return d.getFirst().remove()};CKEDITOR.dom.element.setMarker=function(e,b,g,a){var c=b.getCustomData("list_marker_id")||b.setCustomData("list_marker_id",CKEDITOR.tools.getNextNumber()).getCustomData("list_marker_id"),d=b.getCustomData("list_marker_names")||b.setCustomData("list_marker_names",{}).getCustomData("list_marker_names");e[c]=b;d[g]=1;return b.setCustomData(g,a)};CKEDITOR.dom.element.clearAllMarkers=function(a){for(var d in a){CKEDITOR.dom.element.clearMarkers(a,a[d],1)}};CKEDITOR.dom.element.clearMarkers=function(e,b,g){var a=b.getCustomData("list_marker_names"),c=b.getCustomData("list_marker_id"),d;for(d in a){b.removeCustomData(d)}b.removeCustomData("list_marker_names");g&&(b.removeCustomData("list_marker_id"),delete e[c])};(function(){function d(f,h){return -1<(" "+f+" ").replace(c," ").indexOf(" "+h+" ")}function a(f){var h=!0;f.$.id||(f.$.id="cke_tmp_"+CKEDITOR.tools.getNextNumber(),h=!1);return function(){h||f.removeAttribute("id")}}function g(f,h){return"#"+f.$.id+" "+h.split(/,\s*/).join(", #"+f.$.id+" ")}function l(i){for(var j=0,f=0,h=e[i].length;f<h;f++){j+=parseInt(this.getComputedStyle(e[i][f])||0,10)||0}return j}var b=document.createElement("_").classList,b="undefined"!==typeof b&&null!==String(b.add).match(/\[Native code\]/gi),c=/[\n\t\r]/g;CKEDITOR.tools.extend(CKEDITOR.dom.element.prototype,{type:CKEDITOR.NODE_ELEMENT,addClass:b?function(f){this.$.classList.add(f);return this}:function(f){var h=this.$.className;h&&(d(h,f)||(h+=" "+f));this.$.className=h||f;return this},removeClass:b?function(f){var h=this.$;h.classList.remove(f);h.className||h.removeAttribute("class");return this}:function(f){var h=this.getAttribute("class");h&&d(h,f)&&((h=h.replace(new RegExp("(?:^|\\s+)"+f+"(?\x3d\\s|$)"),"").replace(/^\s+/,""))?this.setAttribute("class",h):this.removeAttribute("class"));return this},hasClass:function(f){return d(this.$.className,f)},append:function(f,h){"string"==typeof f&&(f=this.getDocument().createElement(f));h?this.$.insertBefore(f.$,this.$.firstChild):this.$.appendChild(f.$);return f},appendHtml:function(f){if(this.$.childNodes.length){var h=new CKEDITOR.dom.element("div",this.getDocument());h.setHtml(f);h.moveChildren(this)}else{this.setHtml(f)}},appendText:function(f){null!=this.$.text&&CKEDITOR.env.ie&&9>CKEDITOR.env.version?this.$.text+=f:this.append(new CKEDITOR.dom.text(f))},appendBogus:function(f){if(f||CKEDITOR.env.needsBrFiller){for(f=this.getLast();f&&f.type==CKEDITOR.NODE_TEXT&&!CKEDITOR.tools.rtrim(f.getText());){f=f.getPrevious()}f&&f.is&&f.is("br")||(f=this.getDocument().createElement("br"),CKEDITOR.env.gecko&&f.setAttribute("type","_moz"),this.append(f))}},breakParent:function(i,j){var f=new CKEDITOR.dom.range(this.getDocument());f.setStartAfter(this);f.setEndAfter(i);var h=f.extractContents(!1,j||!1);f.insertNode(this.remove());h.insertAfterNode(this)},contains:document.compareDocumentPosition?function(f){return !!(this.$.compareDocumentPosition(f.$)&16)}:function(f){var h=this.$;return f.type!=CKEDITOR.NODE_ELEMENT?h.contains(f.getParent().$):h!=f.$&&h.contains(f.$)},focus:function(){function f(){try{this.$.focus()}catch(h){}}return function(h){h?CKEDITOR.tools.setTimeout(f,100,this):f.call(this)}}(),getHtml:function(){var f=this.$.innerHTML;return CKEDITOR.env.ie?f.replace(/<\?[^>]*>/g,""):f},getOuterHtml:function(){if(this.$.outerHTML){return this.$.outerHTML.replace(/<\?[^>]*>/,"")}var f=this.$.ownerDocument.createElement("div");f.appendChild(this.$.cloneNode(!0));return f.innerHTML},getClientRect:function(){var f=CKEDITOR.tools.extend({},this.$.getBoundingClientRect());!f.width&&(f.width=f.right-f.left);!f.height&&(f.height=f.bottom-f.top);return f},setHtml:CKEDITOR.env.ie&&9>CKEDITOR.env.version?function(i){try{var j=this.$;if(this.getParent()){return j.innerHTML=i}var f=this.getDocument()._getHtml5ShivFrag();f.appendChild(j);j.innerHTML=i;f.removeChild(j);return i}catch(h){this.$.innerHTML="";j=new CKEDITOR.dom.element("body",this.getDocument());j.$.innerHTML=i;for(j=j.getChildren();j.count();){this.append(j.getItem(0))}return i}}:function(f){return this.$.innerHTML=f},setText:function(){var f=document.createElement("p");f.innerHTML="x";f=f.textContent;return function(h){this.$[f?"textContent":"innerText"]=h}}(),getAttribute:function(){var f=function(h){return this.$.getAttribute(h,2)};return CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)?function(h){switch(h){case"class":h="className";break;case"http-equiv":h="httpEquiv";break;case"name":return this.$.name;case"tabindex":return h=this.$.getAttribute(h,2),0!==h&&0===this.$.tabIndex&&(h=null),h;case"checked":return h=this.$.attributes.getNamedItem(h),(h.specified?h.nodeValue:this.$.checked)?"checked":null;case"hspace":case"value":return this.$[h];case"style":return this.$.style.cssText;case"contenteditable":case"contentEditable":return this.$.attributes.getNamedItem("contentEditable").specified?this.$.getAttribute("contentEditable"):null}return this.$.getAttribute(h,2)}:f}(),getChildren:function(){return new CKEDITOR.dom.nodeList(this.$.childNodes)},getComputedStyle:document.defaultView&&document.defaultView.getComputedStyle?function(f){var h=this.getWindow().$.getComputedStyle(this.$,null);return h?h.getPropertyValue(f):""}:function(f){return this.$.currentStyle[CKEDITOR.tools.cssStyleToDomStyle(f)]},getDtd:function(){var f=CKEDITOR.dtd[this.getName()];this.getDtd=function(){return f};return f},getElementsByTag:CKEDITOR.dom.document.prototype.getElementsByTag,getTabIndex:function(){var f=this.$.tabIndex;return 0!==f||CKEDITOR.dtd.$tabIndex[this.getName()]||0===parseInt(this.getAttribute("tabindex"),10)?f:-1},getText:function(){return this.$.textContent||this.$.innerText||""},getWindow:function(){return this.getDocument().getWindow()},getId:function(){return this.$.id||null},getNameAtt:function(){return this.$.name||null},getName:function(){var f=this.$.nodeName.toLowerCase();if(CKEDITOR.env.ie&&8>=document.documentMode){var h=this.$.scopeName;"HTML"!=h&&(f=h.toLowerCase()+":"+f)}this.getName=function(){return f};return this.getName()},getValue:function(){return this.$.value},getFirst:function(f){var h=this.$.firstChild;(h=h&&new CKEDITOR.dom.node(h))&&f&&!f(h)&&(h=h.getNext(f));return h},getLast:function(f){var h=this.$.lastChild;(h=h&&new CKEDITOR.dom.node(h))&&f&&!f(h)&&(h=h.getPrevious(f));return h},getStyle:function(f){return this.$.style[CKEDITOR.tools.cssStyleToDomStyle(f)]},is:function(){var f=this.getName();if("object"==typeof arguments[0]){return !!arguments[0][f]}for(var h=0;h<arguments.length;h++){if(arguments[h]==f){return !0}}return !1},isEditable:function(f){var h=this.getName();return this.isReadOnly()||"none"==this.getComputedStyle("display")||"hidden"==this.getComputedStyle("visibility")||CKEDITOR.dtd.$nonEditable[h]||CKEDITOR.dtd.$empty[h]||this.is("a")&&(this.data("cke-saved-name")||this.hasAttribute("name"))&&!this.getChildCount()?!1:!1!==f?(f=CKEDITOR.dtd[h]||CKEDITOR.dtd.span,!(!f||!f["#"])):!0},isIdentical:function(h){var i=this.clone(0,1);h=h.clone(0,1);i.removeAttributes(["_moz_dirty","data-cke-expando","data-cke-saved-href","data-cke-saved-name"]);h.removeAttributes(["_moz_dirty","data-cke-expando","data-cke-saved-href","data-cke-saved-name"]);if(i.$.isEqualNode){return i.$.style.cssText=CKEDITOR.tools.normalizeCssText(i.$.style.cssText),h.$.style.cssText=CKEDITOR.tools.normalizeCssText(h.$.style.cssText),i.$.isEqualNode(h.$)}i=i.getOuterHtml();h=h.getOuterHtml();if(CKEDITOR.env.ie&&9>CKEDITOR.env.version&&this.is("a")){var f=this.getParent();f.type==CKEDITOR.NODE_ELEMENT&&(f=f.clone(),f.setHtml(i),i=f.getHtml(),f.setHtml(h),h=f.getHtml())}return i==h},isVisible:function(){var h=(this.$.offsetHeight||this.$.offsetWidth)&&"hidden"!=this.getComputedStyle("visibility"),i,f;h&&CKEDITOR.env.webkit&&(i=this.getWindow(),!i.equals(CKEDITOR.document.getWindow())&&(f=i.$.frameElement)&&(h=(new CKEDITOR.dom.element(f)).isVisible()));return !!h},isEmptyInlineRemoveable:function(){if(!CKEDITOR.dtd.$removeEmpty[this.getName()]){return !1}for(var i=this.getChildren(),j=0,f=i.count();j<f;j++){var h=i.getItem(j);if(h.type!=CKEDITOR.NODE_ELEMENT||!h.data("cke-bookmark")){if(h.type==CKEDITOR.NODE_ELEMENT&&!h.isEmptyInlineRemoveable()||h.type==CKEDITOR.NODE_TEXT&&CKEDITOR.tools.trim(h.getText())){return !1}}}return !0},hasAttributes:CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)?function(){for(var h=this.$.attributes,i=0;i<h.length;i++){var f=h[i];switch(f.nodeName){case"class":if(this.getAttribute("class")){return !0}case"data-cke-expando":continue;default:if(f.specified){return !0}}}return !1}:function(){var h=this.$.attributes,i=h.length,f={"data-cke-expando":1,_moz_dirty:1};return 0<i&&(2<i||!f[h[0].nodeName]||2==i&&!f[h[1].nodeName])},hasAttribute:function(){function f(h){var i=this.$.attributes.getNamedItem(h);if("input"==this.getName()){switch(h){case"class":return 0<this.$.className.length;case"checked":return !!this.$.checked;case"value":return h=this.getAttribute("type"),"checkbox"==h||"radio"==h?"on"!=this.$.value:!!this.$.value}}return i?i.specified:!1}return CKEDITOR.env.ie?8>CKEDITOR.env.version?function(h){return"name"==h?!!this.$.name:f.call(this,h)}:f:function(h){return !!this.$.attributes.getNamedItem(h)}}(),hide:function(){this.setStyle("display","none")},moveChildren:function(i,j){var f=this.$;i=i.$;if(f!=i){var h;if(j){for(;h=f.lastChild;){i.insertBefore(f.removeChild(h),i.firstChild)}}else{for(;h=f.firstChild;){i.appendChild(f.removeChild(h))}}}},mergeSiblings:function(){function f(i,m,j){if(m&&m.type==CKEDITOR.NODE_ELEMENT){for(var h=[];m.data("cke-bookmark")||m.isEmptyInlineRemoveable();){if(h.push(m),m=j?m.getNext():m.getPrevious(),!m||m.type!=CKEDITOR.NODE_ELEMENT){return}}if(i.isIdentical(m)){for(var k=j?i.getLast():i.getFirst();h.length;){h.shift().move(i,!j)}m.moveChildren(i,!j);m.remove();k&&k.type==CKEDITOR.NODE_ELEMENT&&k.mergeSiblings()}}}return function(h){if(!1===h||CKEDITOR.dtd.$removeEmpty[this.getName()]||this.is("a")){f(this,this.getNext(),!0),f(this,this.getPrevious())}}}(),show:function(){this.setStyles({display:"",visibility:""})},setAttribute:function(){var f=function(h,i){this.$.setAttribute(h,i);return this};return CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)?function(h,i){"class"==h?this.$.className=i:"style"==h?this.$.style.cssText=i:"tabindex"==h?this.$.tabIndex=i:"checked"==h?this.$.checked=i:"contenteditable"==h?f.call(this,"contentEditable",i):f.apply(this,arguments);return this}:CKEDITOR.env.ie8Compat&&CKEDITOR.env.secure?function(h,i){if("src"==h&&i.match(/^http:\/\//)){try{f.apply(this,arguments)}catch(j){}}else{f.apply(this,arguments)}return this}:f}(),setAttributes:function(f){for(var h in f){this.setAttribute(h,f[h])}return this},setValue:function(f){this.$.value=f;return this},removeAttribute:function(){var f=function(h){this.$.removeAttribute(h)};return CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)?function(h){"class"==h?h="className":"tabindex"==h?h="tabIndex":"contenteditable"==h&&(h="contentEditable");this.$.removeAttribute(h)}:f}(),removeAttributes:function(f){if(CKEDITOR.tools.isArray(f)){for(var h=0;h<f.length;h++){this.removeAttribute(f[h])}}else{for(h in f){f.hasOwnProperty(h)&&this.removeAttribute(h)}}},removeStyle:function(f){var i=this.$.style;if(i.removeProperty||"border"!=f&&"margin"!=f&&"padding"!=f){i.removeProperty?i.removeProperty(f):i.removeAttribute(CKEDITOR.tools.cssStyleToDomStyle(f)),this.$.style.cssText||this.removeAttribute("style")}else{var h=["top","left","right","bottom"],m;"border"==f&&(m=["color","style","width"]);for(var i=[],j=0;j<h.length;j++){if(m){for(var k=0;k<m.length;k++){i.push([f,h[j],m[k]].join("-"))}}else{i.push([f,h[j]].join("-"))}}for(f=0;f<i.length;f++){this.removeStyle(i[f])}}},setStyle:function(f,h){this.$.style[CKEDITOR.tools.cssStyleToDomStyle(f)]=h;return this},setStyles:function(f){for(var h in f){this.setStyle(h,f[h])}return this},setOpacity:function(f){CKEDITOR.env.ie&&9>CKEDITOR.env.version?(f=Math.round(100*f),this.setStyle("filter",100<=f?"":"progid:DXImageTransform.Microsoft.Alpha(opacity\x3d"+f+")")):this.setStyle("opacity",f)},unselectable:function(){this.setStyles(CKEDITOR.tools.cssVendorPrefix("user-select","none"));if(CKEDITOR.env.ie){this.setAttribute("unselectable","on");for(var i,j=this.getElementsByTag("*"),f=0,h=j.count();f<h;f++){i=j.getItem(f),i.setAttribute("unselectable","on")}}},getPositionedAncestor:function(){for(var f=this;"html"!=f.getName();){if("static"!=f.getComputedStyle("position")){return f}f=f.getParent()}return null},getDocumentPosition:function(k){var m=0,q=0,C=this.getDocument(),u=C.getBody(),y="BackCompat"==C.$.compatMode;if(document.documentElement.getBoundingClientRect){var i=this.$.getBoundingClientRect(),f=C.$.documentElement,j=f.clientTop||u.$.clientTop||0,n=f.clientLeft||u.$.clientLeft||0,h=!0;CKEDITOR.env.ie&&(h=C.getDocumentElement().contains(this),C=C.getBody().contains(this),h=y&&C||!y&&h);h&&(CKEDITOR.env.webkit||CKEDITOR.env.ie&&12<=CKEDITOR.env.version?(m=u.$.scrollLeft||f.scrollLeft,q=u.$.scrollTop||f.scrollTop):(q=y?u.$:f,m=q.scrollLeft,q=q.scrollTop),m=i.left+m-n,q=i.top+q-j)}else{for(j=this,n=null;j&&"body"!=j.getName()&&"html"!=j.getName();){m+=j.$.offsetLeft-j.$.scrollLeft;q+=j.$.offsetTop-j.$.scrollTop;j.equals(this)||(m+=j.$.clientLeft||0,q+=j.$.clientTop||0);for(;n&&!n.equals(j);){m-=n.$.scrollLeft,q-=n.$.scrollTop,n=n.getParent()}n=j;j=(i=j.$.offsetParent)?new CKEDITOR.dom.element(i):null}}k&&(i=this.getWindow(),j=k.getWindow(),!i.equals(j)&&i.$.frameElement&&(k=(new CKEDITOR.dom.element(i.$.frameElement)).getDocumentPosition(k),m+=k.x,q+=k.y));document.documentElement.getBoundingClientRect||!CKEDITOR.env.gecko||y||(m+=this.$.clientLeft?1:0,q+=this.$.clientTop?1:0);return{x:m,y:q}},scrollIntoView:function(h){var j=this.getParent();if(j){do{if((j.$.clientWidth&&j.$.clientWidth<j.$.scrollWidth||j.$.clientHeight&&j.$.clientHeight<j.$.scrollHeight)&&!j.is("body")&&this.scrollIntoParent(j,h,1),j.is("html")){var i=j.getWindow();try{var f=i.$.frameElement;f&&(j=new CKEDITOR.dom.element(f))}catch(k){}}}while(j=j.getParent())}},scrollIntoParent:function(y,z,h){var n,j,m,u;function q(o,r){/body|html/.test(y.getName())?y.getWindow().$.scrollBy(o,r):(y.$.scrollLeft+=o,y.$.scrollTop+=r)}function k(s,v){var o={x:0,y:0};if(!s.is(J?"body":"html")){var r=s.$.getBoundingClientRect();o.x=r.left;o.y=r.top}r=s.getWindow();r.equals(v)||(r=k(CKEDITOR.dom.element.get(r.$.frameElement),v),o.x+=r.x,o.y+=r.y);return o}function K(o,r){return parseInt(o.getComputedStyle("margin-"+r)||0,10)||0}!y&&(y=this.getWindow());m=y.getDocument();var J="BackCompat"==m.$.compatMode;y instanceof CKEDITOR.dom.window&&(y=J?m.getBody():m.getDocumentElement());m=y.getWindow();j=k(this,m);var p=k(y,m),i=this.$.offsetHeight;n=this.$.offsetWidth;var t=y.$.clientHeight,f=y.$.clientWidth;m=j.x-K(this,"left")-p.x||0;u=j.y-K(this,"top")-p.y||0;n=j.x+n+K(this,"right")-(p.x+f)||0;j=j.y+i+K(this,"bottom")-(p.y+t)||0;(0>u||0<j)&&q(0,!0===z?u:!1===z?j:0>u?u:j);h&&(0>m||0<n)&&q(0>m?m:n,0)},setState:function(h,i,f){i=i||"cke";switch(h){case CKEDITOR.TRISTATE_ON:this.addClass(i+"_on");this.removeClass(i+"_off");this.removeClass(i+"_disabled");f&&this.setAttribute("aria-pressed",!0);f&&this.removeAttribute("aria-disabled");break;case CKEDITOR.TRISTATE_DISABLED:this.addClass(i+"_disabled");this.removeClass(i+"_off");this.removeClass(i+"_on");f&&this.setAttribute("aria-disabled",!0);f&&this.removeAttribute("aria-pressed");break;default:this.addClass(i+"_off"),this.removeClass(i+"_on"),this.removeClass(i+"_disabled"),f&&this.removeAttribute("aria-pressed"),f&&this.removeAttribute("aria-disabled")}},getFrameDocument:function(){var f=this.$;try{f.contentWindow.document}catch(h){f.src=f.src}return f&&new CKEDITOR.dom.document(f.contentWindow.document)},copyAttributes:function(f,j){var h=this.$.attributes;j=j||{};for(var m=0;m<h.length;m++){var i=h[m],k=i.nodeName.toLowerCase(),n;if(!(k in j)){if("checked"==k&&(n=this.getAttribute(k))){f.setAttribute(k,n)}else{if(!CKEDITOR.env.ie||this.hasAttribute(k)){n=this.getAttribute(k),null===n&&(n=i.nodeValue),f.setAttribute(k,n)}}}}""!==this.$.style.cssText&&(f.$.style.cssText=this.$.style.cssText)},renameNode:function(f){if(this.getName()!=f){var h=this.getDocument();f=new CKEDITOR.dom.element(f,h);this.copyAttributes(f);this.moveChildren(f);this.getParent(!0)&&this.$.parentNode.replaceChild(f.$,this.$);f.$["data-cke-expando"]=this.$["data-cke-expando"];this.$=f.$;delete this.getName}},getChild:function(){function f(h,i){var j=h.childNodes;if(0<=i&&i<j.length){return j[i]}}return function(h){var i=this.$;if(h.slice){for(h=h.slice();0<h.length&&i;){i=f(i,h.shift())}}else{i=f(i,h)}return i?new CKEDITOR.dom.node(i):null}}(),getChildCount:function(){return this.$.childNodes.length},disableContextMenu:function(){function f(h){return h.type==CKEDITOR.NODE_ELEMENT&&h.hasClass("cke_enable_context_menu")}this.on("contextmenu",function(h){h.data.getTarget().getAscendant(f,!0)||h.data.preventDefault()})},getDirection:function(f){return f?this.getComputedStyle("direction")||this.getDirection()||this.getParent()&&this.getParent().getDirection(1)||this.getDocument().$.dir||"ltr":this.getStyle("direction")||this.getAttribute("dir")},data:function(f,h){f="data-"+f;if(void 0===h){return this.getAttribute(f)}!1===h?this.removeAttribute(f):this.setAttribute(f,h);return null},getEditor:function(){var h=CKEDITOR.instances,i,f;for(i in h){if(f=h[i],f.element.equals(this)&&f.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO){return f}}return null},find:function(f){var h=a(this);f=new CKEDITOR.dom.nodeList(this.$.querySelectorAll(g(this,f)));h();return f},findOne:function(f){var h=a(this);f=this.$.querySelector(g(this,f));h();return f?new CKEDITOR.dom.element(f):null},forEach:function(h,j,i){if(!(i||j&&this.type!=j)){var f=h(this)}if(!1!==f){i=this.getChildren();for(var k=0;k<i.count();k++){f=i.getItem(k),f.type==CKEDITOR.NODE_ELEMENT?f.forEach(h,j):j&&f.type!=j||h(f)}}}});var e={width:["border-left-width","border-right-width","padding-left","padding-right"],height:["border-top-width","border-bottom-width","padding-top","padding-bottom"]};CKEDITOR.dom.element.prototype.setSize=function(h,i,f){"number"==typeof i&&(!f||CKEDITOR.env.ie&&CKEDITOR.env.quirks||(i-=l.call(this,h)),this.setStyle(h,i+"px"))};CKEDITOR.dom.element.prototype.getSize=function(h,i){var f=Math.max(this.$["offset"+CKEDITOR.tools.capitalize(h)],this.$["client"+CKEDITOR.tools.capitalize(h)])||0;i&&(f-=l.call(this,h));return f}})();CKEDITOR.dom.documentFragment=function(a){a=a||CKEDITOR.document;this.$=a.type==CKEDITOR.NODE_DOCUMENT?a.$.createDocumentFragment():a};CKEDITOR.tools.extend(CKEDITOR.dom.documentFragment.prototype,CKEDITOR.dom.element.prototype,{type:CKEDITOR.NODE_DOCUMENT_FRAGMENT,insertAfterNode:function(a){a=a.$;a.parentNode.insertBefore(this.$,a.nextSibling)},getHtml:function(){var a=new CKEDITOR.dom.element("div");this.clone(1,1).appendTo(a);return a.getHtml().replace(/\s*data-cke-expando=".*?"/g,"")}},!0,{append:1,appendBogus:1,clone:1,getFirst:1,getHtml:1,getLast:1,getParent:1,getNext:1,getPrevious:1,appendTo:1,moveChildren:1,insertBefore:1,insertAfterNode:1,replace:1,trim:1,type:1,ltrim:1,rtrim:1,getDocument:1,getChildCount:1,getChild:1,getChildren:1});(function(){function n(r,t){var z=this.range;if(this._.end){return null}if(!this._.start){this._.start=1;if(z.collapsed){return this.end(),null}z.optimize()}var O,C=z.startContainer;O=z.endContainer;var G=z.startOffset,q=z.endOffset,u,i=this.guard,v=this.type,s=r?"getPreviousSourceNode":"getNextSourceNode";if(!r&&!this._.guardLTR){var m=O.type==CKEDITOR.NODE_ELEMENT?O:O.getParent(),o=O.type==CKEDITOR.NODE_ELEMENT?O.getChild(q):O.getNext();this._.guardLTR=function(y,A){return(!A||!m.equals(y))&&(!o||!y.equals(o))&&(y.type!=CKEDITOR.NODE_ELEMENT||!A||!y.equals(z.root))}}if(r&&!this._.guardRTL){var p=C.type==CKEDITOR.NODE_ELEMENT?C:C.getParent(),h=C.type==CKEDITOR.NODE_ELEMENT?G?C.getChild(G-1):null:C.getPrevious();this._.guardRTL=function(y,A){return(!A||!p.equals(y))&&(!h||!y.equals(h))&&(y.type!=CKEDITOR.NODE_ELEMENT||!A||!y.equals(z.root))}}var j=r?this._.guardRTL:this._.guardLTR;u=i?function(y,A){return !1===j(y,A)?!1:i(y,A)}:j;this.current?O=this.current[s](!1,v,u):(r?O.type==CKEDITOR.NODE_ELEMENT&&(O=0<q?O.getChild(q-1):!1===u(O,!0)?null:O.getPreviousSourceNode(!0,v,u)):(O=C,O.type==CKEDITOR.NODE_ELEMENT&&((O=O.getChild(G))||(O=!1===u(C,!0)?null:C.getNextSourceNode(!0,v,u)))),O&&!1===u(O)&&(O=null));for(;O&&!this._.end;){this.current=O;if(!this.evaluator||!1!==this.evaluator(O)){if(!t){return O}}else{if(t&&this.evaluator){return !1}}O=O[s](!1,v,u)}this.end();return this.current=null}function b(h){for(var i,j=null;i=n.call(this,h);){j=i}return j}CKEDITOR.dom.walker=CKEDITOR.tools.createClass({$:function(h){this.range=h;this._={}},proto:{end:function(){this._.end=1},next:function(){return n.call(this)},previous:function(){return n.call(this,1)},checkForward:function(){return !1!==n.call(this,0,1)},checkBackward:function(){return !1!==n.call(this,1,1)},lastForward:function(){return b.call(this)},lastBackward:function(){return b.call(this,1)},reset:function(){delete this.current;this._={}}}});var x={block:1,"list-item":1,table:1,"table-row-group":1,"table-header-group":1,"table-footer-group":1,"table-row":1,"table-column-group":1,"table-column":1,"table-cell":1,"table-caption":1},a={absolute:1,fixed:1};CKEDITOR.dom.element.prototype.isBlockBoundary=function(h){return"none"!=this.getComputedStyle("float")||this.getComputedStyle("position") in a||!x[this.getComputedStyle("display")]?!!(this.is(CKEDITOR.dtd.$block)||h&&this.is(h)):!0};CKEDITOR.dom.walker.blockBoundary=function(h){return function(i){return !(i.type==CKEDITOR.NODE_ELEMENT&&i.isBlockBoundary(h))}};CKEDITOR.dom.walker.listItemBoundary=function(){return this.blockBoundary({br:1})};CKEDITOR.dom.walker.bookmark=function(i,j){function h(m){return m&&m.getName&&"span"==m.getName()&&m.data("cke-bookmark")}return function(o){var p,m;p=o&&o.type!=CKEDITOR.NODE_ELEMENT&&(m=o.getParent())&&h(m);p=i?p:p||h(o);return !!(j^p)}};CKEDITOR.dom.walker.whitespaces=function(h){return function(i){var j;i&&i.type==CKEDITOR.NODE_TEXT&&(j=!CKEDITOR.tools.trim(i.getText())||CKEDITOR.env.webkit&&i.getText()==CKEDITOR.dom.selection.FILLING_CHAR_SEQUENCE);return !!(h^j)}};CKEDITOR.dom.walker.invisible=function(i){var j=CKEDITOR.dom.walker.whitespaces(),h=CKEDITOR.env.webkit?1:0;return function(m){j(m)?m=1:(m.type==CKEDITOR.NODE_TEXT&&(m=m.getParent()),m=m.$.offsetWidth<=h);return !!(i^m)}};CKEDITOR.dom.walker.nodeType=function(h,i){return function(j){return !!(i^j.type==h)}};CKEDITOR.dom.walker.bogus=function(h){function i(j){return !e(j)&&!g(j)}return function(j){var m=CKEDITOR.env.needsBrFiller?j.is&&j.is("br"):j.getText&&c.test(j.getText());m&&(m=j.getParent(),j=j.getNext(i),m=m.isBlockBoundary()&&(!j||j.type==CKEDITOR.NODE_ELEMENT&&j.isBlockBoundary()));return !!(h^m)}};CKEDITOR.dom.walker.temp=function(h){return function(i){i.type!=CKEDITOR.NODE_ELEMENT&&(i=i.getParent());i=i&&i.hasAttribute("data-cke-temp");return !!(h^i)}};var c=/^[\t\r\n ]*(?:&nbsp;|\xa0)$/,e=CKEDITOR.dom.walker.whitespaces(),g=CKEDITOR.dom.walker.bookmark(),f=CKEDITOR.dom.walker.temp(),k=function(h){return g(h)||e(h)||h.type==CKEDITOR.NODE_ELEMENT&&h.is(CKEDITOR.dtd.$inline)&&!h.is(CKEDITOR.dtd.$empty)};CKEDITOR.dom.walker.ignored=function(h){return function(i){i=e(i)||g(i)||f(i);return !!(h^i)}};var l=CKEDITOR.dom.walker.ignored();CKEDITOR.dom.walker.empty=function(h){return function(i){for(var j=0,m=i.getChildCount();j<m;++j){if(!l(i.getChild(j))){return !!h}}return !h}};var d=CKEDITOR.dom.walker.empty(),w=CKEDITOR.dom.walker.validEmptyBlockContainers=CKEDITOR.tools.extend(function(i){var j={},h;for(h in i){CKEDITOR.dtd[h]["#"]&&(j[h]=1)}return j}(CKEDITOR.dtd.$block),{caption:1,td:1,th:1});CKEDITOR.dom.walker.editable=function(h){return function(i){i=l(i)?!1:i.type==CKEDITOR.NODE_TEXT||i.type==CKEDITOR.NODE_ELEMENT&&(i.is(CKEDITOR.dtd.$inline)||i.is("hr")||"false"==i.getAttribute("contenteditable")||!CKEDITOR.env.needsBrFiller&&i.is(w)&&d(i))?!0:!1;return !!(h^i)}};CKEDITOR.dom.element.prototype.getBogus=function(){var h=this;do{h=h.getPreviousSourceNode()}while(k(h));return h&&(CKEDITOR.env.needsBrFiller?h.is&&h.is("br"):h.getText&&c.test(h.getText()))?h:!1}})();CKEDITOR.dom.range=function(a){this.endOffset=this.endContainer=this.startOffset=this.startContainer=null;this.collapsed=!0;var d=a instanceof CKEDITOR.dom.document;this.document=d?a:a.getDocument();this.root=d?a.getBody():a};(function(){function a(f){f.collapsed=f.startContainer&&f.endContainer&&f.startContainer.equals(f.endContainer)&&f.startOffset==f.endOffset}function d(H,I,J,L,M){function ak(y,A,B,x){var u=B?y.getPrevious():y.getNext();if(x&&V){return u}Q||x?A.append(y.clone(!0,M),B):(y.remove(),s&&A.append(y));return u}function O(){var y,A,u,x=Math.min(m.length,h.length);for(y=0;y<x;y++){if(A=m[y],u=h[y],!A.equals(u)){return y}}return y-1}function Z(){var u=q-1,x=p&&ah&&!aj.equals(ag);u<i-1||u<C-1||x?(x?H.moveToPosition(ag,CKEDITOR.POSITION_BEFORE_START):C==u+1&&o?H.moveToPosition(h[u],CKEDITOR.POSITION_BEFORE_END):H.moveToPosition(h[u+1],CKEDITOR.POSITION_BEFORE_START),L&&(u=m[u+1])&&u.type==CKEDITOR.NODE_ELEMENT&&(x=CKEDITOR.dom.element.createFromHtml('\x3cspan data-cke-bookmark\x3d"1" style\x3d"display:none"\x3e\x26nbsp;\x3c/span\x3e',H.document),x.insertAfter(u),u.mergeSiblings(!1),H.moveToBookmark({startNode:x}))):H.collapse(!0)}H.optimizeBookmark();var V=0===I,s=1==I,Q=2==I;I=Q||s;var aj=H.startContainer,ag=H.endContainer,f=H.startOffset,al=H.endOffset,j,o,p,ah,E,w;if(Q&&ag.type==CKEDITOR.NODE_TEXT&&aj.equals(ag)){aj=H.document.createText(aj.substring(f,al)),J.append(aj)}else{ag.type==CKEDITOR.NODE_TEXT?Q?w=!0:ag=ag.split(al):0<ag.getChildCount()?al>=ag.getChildCount()?(ag=ag.getChild(al-1),o=!0):ag=ag.getChild(al):ah=o=!0;aj.type==CKEDITOR.NODE_TEXT?Q?E=!0:aj.split(f):0<aj.getChildCount()?0===f?(aj=aj.getChild(f),j=!0):aj=aj.getChild(f-1):p=j=!0;for(var m=aj.getParents(),h=ag.getParents(),q=O(),i=m.length-1,C=h.length-1,r=J,v,D,z,ai=-1,G=q;G<=i;G++){D=m[G];z=D.getNext();for(G!=i||D.equals(h[G])&&i<C?I&&(v=r.append(D.clone(0,M))):j?ak(D,r,!1,p):E&&r.append(H.document.createText(D.substring(f)));z;){if(z.equals(h[G])){ai=G;break}z=ak(z,r)}r=v}r=J;for(G=q;G<=C;G++){if(J=h[G],z=J.getPrevious(),J.equals(m[G])){I&&(r=r.getChild(0))}else{G!=C||J.equals(m[G])&&C<i?I&&(v=r.append(J.clone(0,M))):o?ak(J,r,!1,ah):w&&r.append(H.document.createText(J.substring(0,al)));if(G>ai){for(;z;){z=ak(z,r,!0)}}r=v}}Q||Z()}}function b(){var i=!1,j=CKEDITOR.dom.walker.whitespaces(),f=CKEDITOR.dom.walker.bookmark(!0),h=CKEDITOR.dom.walker.bogus();return function(m){return f(m)||j(m)?!0:h(m)&&!i?i=!0:m.type==CKEDITOR.NODE_TEXT&&(m.hasAscendant("pre")||CKEDITOR.tools.trim(m.getText()).length)||m.type==CKEDITOR.NODE_ELEMENT&&!m.is(g)?!1:!0}}function c(h){var i=CKEDITOR.dom.walker.whitespaces(),f=CKEDITOR.dom.walker.bookmark(1);return function(j){return f(j)||i(j)?!0:!h&&l(j)||j.type==CKEDITOR.NODE_ELEMENT&&j.is(CKEDITOR.dtd.$removeEmpty)}}function e(f){return function(){var h;return this[f?"getPreviousNode":"getNextNode"](function(i){!h&&t(i)&&(h=i);return n(i)&&!(l(i)&&i.equals(h))})}}var g={abbr:1,acronym:1,b:1,bdo:1,big:1,cite:1,code:1,del:1,dfn:1,em:1,font:1,i:1,ins:1,label:1,kbd:1,q:1,samp:1,small:1,span:1,strike:1,strong:1,sub:1,sup:1,tt:1,u:1,"var":1},l=CKEDITOR.dom.walker.bogus(),k=/^[\t\r\n ]*(?:&nbsp;|\xa0)$/,n=CKEDITOR.dom.walker.editable(),t=CKEDITOR.dom.walker.ignored(!0);CKEDITOR.dom.range.prototype={clone:function(){var f=new CKEDITOR.dom.range(this.root);f._setStartContainer(this.startContainer);f.startOffset=this.startOffset;f._setEndContainer(this.endContainer);f.endOffset=this.endOffset;f.collapsed=this.collapsed;return f},collapse:function(f){f?(this._setEndContainer(this.startContainer),this.endOffset=this.startOffset):(this._setStartContainer(this.endContainer),this.startOffset=this.endOffset);this.collapsed=!0},cloneContents:function(f){var h=new CKEDITOR.dom.documentFragment(this.document);this.collapsed||d(this,2,h,!1,"undefined"==typeof f?!0:f);return h},deleteContents:function(f){this.collapsed||d(this,0,null,f)},extractContents:function(h,i){var f=new CKEDITOR.dom.documentFragment(this.document);this.collapsed||d(this,1,f,h,"undefined"==typeof i?!0:i);return f},createBookmark:function(h){var m,i,j,o,f=this.collapsed;m=this.document.createElement("span");m.data("cke-bookmark",1);m.setStyle("display","none");m.setHtml("\x26nbsp;");h&&(j="cke_bm_"+CKEDITOR.tools.getNextNumber(),m.setAttribute("id",j+(f?"C":"S")));f||(i=m.clone(),i.setHtml("\x26nbsp;"),h&&i.setAttribute("id",j+"E"),o=this.clone(),o.collapse(),o.insertNode(i));o=this.clone();o.collapse(!0);o.insertNode(m);i?(this.setStartAfter(m),this.setEndBefore(i)):this.moveToPosition(m,CKEDITOR.POSITION_AFTER_END);return{startNode:h?j+(f?"C":"S"):m,endNode:h?j+"E":i,serializable:h,collapsed:f}},createBookmark2:function(){function h(m){var o=m.container,q=m.offset,j;j=o;var p=q;j=j.type!=CKEDITOR.NODE_ELEMENT||0===p||p==j.getChildCount()?0:j.getChild(p-1).type==CKEDITOR.NODE_TEXT&&j.getChild(p).type==CKEDITOR.NODE_TEXT;j&&(o=o.getChild(q-1),q=o.getLength());if(o.type==CKEDITOR.NODE_ELEMENT&&0<q){h:{for(j=o;q--;){if(p=j.getChild(q).getIndex(!0),0<=p){q=p;break h}}q=-1}q+=1}if(o.type==CKEDITOR.NODE_TEXT){j=o;for(p=0;(j=j.getPrevious())&&j.type==CKEDITOR.NODE_TEXT;){p+=j.getText().replace(CKEDITOR.dom.selection.FILLING_CHAR_SEQUENCE,"").length}j=p;o.getText()?q+=j:(p=o.getPrevious(f),j?(q=j,o=p?p.getNext():o.getParent().getFirst()):(o=o.getParent(),q=p?p.getIndex(!0)+1:0))}m.container=o;m.offset=q}function i(j,p){var o=p.getCustomData("cke-fillingChar");if(o){var m=j.container;o.equals(m)&&(j.offset-=CKEDITOR.dom.selection.FILLING_CHAR_SEQUENCE.length,0>=j.offset&&(j.offset=m.getIndex(),j.container=m.getParent()))}}var f=CKEDITOR.dom.walker.nodeType(CKEDITOR.NODE_TEXT,!0);return function(o){var p=this.collapsed,j={container:this.startContainer,offset:this.startOffset},m={container:this.endContainer,offset:this.endOffset};o&&(h(j),i(j,this.root),p||(h(m),i(m,this.root)));return{start:j.container.getAddress(o),end:p?null:m.container.getAddress(o),startOffset:j.offset,endOffset:m.offset,normalized:o,collapsed:p,is2:!0}}}(),moveToBookmark:function(i){if(i.is2){var j=this.document.getByAddress(i.start,i.normalized),f=i.startOffset,h=i.end&&this.document.getByAddress(i.end,i.normalized);i=i.endOffset;this.setStart(j,f);h?this.setEnd(h,i):this.collapse(!0)}else{j=(f=i.serializable)?this.document.getById(i.startNode):i.startNode,i=f?this.document.getById(i.endNode):i.endNode,this.setStartBefore(j),j.remove(),i?(this.setEndBefore(i),i.remove()):this.collapse(!0)}},getBoundaryNodes:function(){var h=this.startContainer,j=this.endContainer,i=this.startOffset,m=this.endOffset,f;if(h.type==CKEDITOR.NODE_ELEMENT){if(f=h.getChildCount(),f>i){h=h.getChild(i)}else{if(1>f){h=h.getPreviousSourceNode()}else{for(h=h.$;h.lastChild;){h=h.lastChild}h=new CKEDITOR.dom.node(h);h=h.getNextSourceNode()||h}}}if(j.type==CKEDITOR.NODE_ELEMENT){if(f=j.getChildCount(),f>m){j=j.getChild(m).getPreviousSourceNode(!0)}else{if(1>f){j=j.getPreviousSourceNode()}else{for(j=j.$;j.lastChild;){j=j.lastChild}j=new CKEDITOR.dom.node(j)}}}h.getPosition(j)&CKEDITOR.POSITION_FOLLOWING&&(h=j);return{startNode:h,endNode:j}},getCommonAncestor:function(i,j){var f=this.startContainer,h=this.endContainer,f=f.equals(h)?i&&f.type==CKEDITOR.NODE_ELEMENT&&this.startOffset==this.endOffset-1?f.getChild(this.startOffset):f:f.getCommonAncestor(h);return j&&!f.is?f.getParent():f},optimize:function(){var f=this.startContainer,h=this.startOffset;f.type!=CKEDITOR.NODE_ELEMENT&&(h?h>=f.getLength()&&this.setStartAfter(f):this.setStartBefore(f));f=this.endContainer;h=this.endOffset;f.type!=CKEDITOR.NODE_ELEMENT&&(h?h>=f.getLength()&&this.setEndAfter(f):this.setEndBefore(f))},optimizeBookmark:function(){var f=this.startContainer,h=this.endContainer;f.is&&f.is("span")&&f.data("cke-bookmark")&&this.setStartAt(f,CKEDITOR.POSITION_BEFORE_START);h&&h.is&&h.is("span")&&h.data("cke-bookmark")&&this.setEndAt(h,CKEDITOR.POSITION_AFTER_END)},trim:function(h,m){var i=this.startContainer,j=this.startOffset,o=this.collapsed;if((!h||o)&&i&&i.type==CKEDITOR.NODE_TEXT){if(j){if(j>=i.getLength()){j=i.getIndex()+1,i=i.getParent()}else{var f=i.split(j),j=i.getIndex()+1,i=i.getParent();this.startContainer.equals(this.endContainer)?this.setEnd(f,this.endOffset-this.startOffset):i.equals(this.endContainer)&&(this.endOffset+=1)}}else{j=i.getIndex(),i=i.getParent()}this.setStart(i,j);if(o){this.collapse(!0);return}}i=this.endContainer;j=this.endOffset;m||o||!i||i.type!=CKEDITOR.NODE_TEXT||(j?(j>=i.getLength()||i.split(j),j=i.getIndex()+1):j=i.getIndex(),i=i.getParent(),this.setEnd(i,j))},enlarge:function(Q,ae){function af(u){return u&&u.type==CKEDITOR.NODE_ELEMENT&&u.hasAttribute("contenteditable")?null:u}var ag=new RegExp(/[^\s\ufeff]/);switch(Q){case CKEDITOR.ENLARGE_INLINE:var ah=1;case CKEDITOR.ENLARGE_ELEMENT:var q=function(y,A){var u=new CKEDITOR.dom.range(j);u.setStart(y,A);u.setEndAt(j,CKEDITOR.POSITION_BEFORE_END);var u=new CKEDITOR.dom.walker(u),x;for(u.guard=function(B){return !(B.type==CKEDITOR.NODE_ELEMENT&&B.isBlockBoundary())};x=u.next();){if(x.type!=CKEDITOR.NODE_TEXT){return !1}z=x!=y?x.getText():x.substring(A);if(ag.test(z)){return !1}}return !0};if(this.collapsed){break}var f=this.getCommonAncestor(),j=this.root,i,D,h,p,m,s=!1,r,z;r=this.startContainer;var H=this.startOffset;r.type==CKEDITOR.NODE_TEXT?(H&&(r=!CKEDITOR.tools.trim(r.substring(0,H)).length&&r,s=!!r),r&&((p=r.getPrevious())||(h=r.getParent()))):(H&&(p=r.getChild(H-1)||r.getLast()),p||(h=r));for(h=af(h);h||p;){if(h&&!p){!m&&h.equals(f)&&(m=!0);if(ah?h.isBlockBoundary():!j.contains(h)){break}s&&"inline"==h.getComputedStyle("display")||(s=!1,m?i=h:this.setStartBefore(h));p=h.getPrevious()}for(;p;){if(r=!1,p.type==CKEDITOR.NODE_COMMENT){p=p.getPrevious()}else{if(p.type==CKEDITOR.NODE_TEXT){z=p.getText(),ag.test(z)&&(p=null),r=/[\s\ufeff]$/.test(z)}else{if((p.$.offsetWidth>(CKEDITOR.env.webkit?1:0)||ae&&p.is("br"))&&!p.data("cke-bookmark")){if(s&&CKEDITOR.dtd.$removeEmpty[p.getName()]){z=p.getText();if(ag.test(z)){p=null}else{for(var H=p.$.getElementsByTagName("*"),L=0,o;o=H[L++];){if(!CKEDITOR.dtd.$removeEmpty[o.nodeName.toLowerCase()]){p=null;break}}}p&&(r=!!z.length)}else{p=null}}}r&&(s?m?i=h:h&&this.setStartBefore(h):s=!0);if(p){r=p.getPrevious();if(!h&&!r){h=p;p=null;break}p=r}else{h=null}}}h&&(h=af(h.getParent()))}r=this.endContainer;H=this.endOffset;h=p=null;m=s=!1;r.type==CKEDITOR.NODE_TEXT?CKEDITOR.tools.trim(r.substring(H)).length?s=!0:(s=!r.getLength(),H==r.getLength()?(p=r.getNext())||(h=r.getParent()):q(r,H)&&(h=r.getParent())):(p=r.getChild(H))||(h=r);for(;h||p;){if(h&&!p){!m&&h.equals(f)&&(m=!0);if(ah?h.isBlockBoundary():!j.contains(h)){break}s&&"inline"==h.getComputedStyle("display")||(s=!1,m?D=h:h&&this.setEndAfter(h));p=h.getNext()}for(;p;){r=!1;if(p.type==CKEDITOR.NODE_TEXT){z=p.getText(),q(p,0)||(p=null),r=/^[\s\ufeff]/.test(z)}else{if(p.type==CKEDITOR.NODE_ELEMENT){if((0<p.$.offsetWidth||ae&&p.is("br"))&&!p.data("cke-bookmark")){if(s&&CKEDITOR.dtd.$removeEmpty[p.getName()]){z=p.getText();if(ag.test(z)){p=null}else{for(H=p.$.getElementsByTagName("*"),L=0;o=H[L++];){if(!CKEDITOR.dtd.$removeEmpty[o.nodeName.toLowerCase()]){p=null;break}}}p&&(r=!!z.length)}else{p=null}}}else{r=1}}r&&s&&(m?D=h:this.setEndAfter(h));if(p){r=p.getNext();if(!h&&!r){h=p;p=null;break}p=r}else{h=null}}h&&(h=af(h.getParent()))}i&&D&&(f=i.contains(D)?D:i,this.setStartBefore(f),this.setEndAfter(f));break;case CKEDITOR.ENLARGE_BLOCK_CONTENTS:case CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS:h=new CKEDITOR.dom.range(this.root);j=this.root;h.setStartAt(j,CKEDITOR.POSITION_AFTER_START);h.setEnd(this.startContainer,this.startOffset);h=new CKEDITOR.dom.walker(h);var G,I,C=CKEDITOR.dom.walker.blockBoundary(Q==CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS?{br:1}:null),v=null,M=function(u){if(u.type==CKEDITOR.NODE_ELEMENT&&"false"==u.getAttribute("contenteditable")){if(v){if(v.equals(u)){v=null;return}}else{v=u}}else{if(v){return}}var x=C(u);x||(G=u);return x},ah=function(u){var x=M(u);!x&&u.is&&u.is("br")&&(I=u);return x};h.guard=M;h=h.lastBackward();G=G||j;this.setStartAt(G,!G.is("br")&&(!h&&this.checkStartOfBlock()||h&&G.contains(h))?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_AFTER_END);if(Q==CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS){h=this.clone();h=new CKEDITOR.dom.walker(h);var w=CKEDITOR.dom.walker.whitespaces(),E=CKEDITOR.dom.walker.bookmark();h.evaluator=function(u){return !w(u)&&!E(u)};if((h=h.previous())&&h.type==CKEDITOR.NODE_ELEMENT&&h.is("br")){break}}h=this.clone();h.collapse();h.setEndAt(j,CKEDITOR.POSITION_BEFORE_END);h=new CKEDITOR.dom.walker(h);h.guard=Q==CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS?ah:M;G=v=I=null;h=h.lastForward();G=G||j;this.setEndAt(G,!h&&this.checkEndOfBlock()||h&&G.contains(h)?CKEDITOR.POSITION_BEFORE_END:CKEDITOR.POSITION_BEFORE_START);I&&this.setEndAfter(I)}},shrink:function(F,f,h){if(!this.collapsed){F=F||CKEDITOR.SHRINK_TEXT;var j=this.clone(),o=this.startContainer,m=this.endContainer,p=this.startOffset,s=this.endOffset,r=1,i=1;o&&o.type==CKEDITOR.NODE_TEXT&&(p?p>=o.getLength()?j.setStartAfter(o):(j.setStartBefore(o),r=0):j.setStartBefore(o));m&&m.type==CKEDITOR.NODE_TEXT&&(s?s>=m.getLength()?j.setEndAfter(m):(j.setEndAfter(m),i=0):j.setEndBefore(m));var j=new CKEDITOR.dom.walker(j),q=CKEDITOR.dom.walker.bookmark();j.evaluator=function(u){return u.type==(F==CKEDITOR.SHRINK_ELEMENT?CKEDITOR.NODE_ELEMENT:CKEDITOR.NODE_TEXT)};var z;j.guard=function(u,v){if(q(u)){return !0}if(F==CKEDITOR.SHRINK_ELEMENT&&u.type==CKEDITOR.NODE_TEXT||v&&u.equals(z)||!1===h&&u.type==CKEDITOR.NODE_ELEMENT&&u.isBlockBoundary()||u.type==CKEDITOR.NODE_ELEMENT&&u.hasAttribute("contenteditable")){return !1}v||u.type!=CKEDITOR.NODE_ELEMENT||(z=u);return !0};r&&(o=j[F==CKEDITOR.SHRINK_ELEMENT?"lastForward":"next"]())&&this.setStartAt(o,f?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_BEFORE_START);i&&(j.reset(),(j=j[F==CKEDITOR.SHRINK_ELEMENT?"lastBackward":"previous"]())&&this.setEndAt(j,f?CKEDITOR.POSITION_BEFORE_END:CKEDITOR.POSITION_AFTER_END));return !(!r&&!i)}},insertNode:function(h){this.optimizeBookmark();this.trim(!1,!0);var i=this.startContainer,f=i.getChild(this.startOffset);f?h.insertBefore(f):i.append(h);h.getParent()&&h.getParent().equals(this.endContainer)&&this.endOffset++;this.setStartBefore(h)},moveToPosition:function(f,h){this.setStartAt(f,h);this.collapse(!0)},moveToRange:function(f){this.setStart(f.startContainer,f.startOffset);this.setEnd(f.endContainer,f.endOffset)},selectNodeContents:function(f){this.setStart(f,0);this.setEnd(f,f.type==CKEDITOR.NODE_TEXT?f.getLength():f.getChildCount())},setStart:function(f,h){f.type==CKEDITOR.NODE_ELEMENT&&CKEDITOR.dtd.$empty[f.getName()]&&(h=f.getIndex(),f=f.getParent());this._setStartContainer(f);this.startOffset=h;this.endContainer||(this._setEndContainer(f),this.endOffset=h);a(this)},setEnd:function(f,h){f.type==CKEDITOR.NODE_ELEMENT&&CKEDITOR.dtd.$empty[f.getName()]&&(h=f.getIndex()+1,f=f.getParent());this._setEndContainer(f);this.endOffset=h;this.startContainer||(this._setStartContainer(f),this.startOffset=h);a(this)},setStartAfter:function(f){this.setStart(f.getParent(),f.getIndex()+1)},setStartBefore:function(f){this.setStart(f.getParent(),f.getIndex())},setEndAfter:function(f){this.setEnd(f.getParent(),f.getIndex()+1)},setEndBefore:function(f){this.setEnd(f.getParent(),f.getIndex())},setStartAt:function(f,h){switch(h){case CKEDITOR.POSITION_AFTER_START:this.setStart(f,0);break;case CKEDITOR.POSITION_BEFORE_END:f.type==CKEDITOR.NODE_TEXT?this.setStart(f,f.getLength()):this.setStart(f,f.getChildCount());break;case CKEDITOR.POSITION_BEFORE_START:this.setStartBefore(f);break;case CKEDITOR.POSITION_AFTER_END:this.setStartAfter(f)}a(this)},setEndAt:function(f,h){switch(h){case CKEDITOR.POSITION_AFTER_START:this.setEnd(f,0);break;case CKEDITOR.POSITION_BEFORE_END:f.type==CKEDITOR.NODE_TEXT?this.setEnd(f,f.getLength()):this.setEnd(f,f.getChildCount());break;case CKEDITOR.POSITION_BEFORE_START:this.setEndBefore(f);break;case CKEDITOR.POSITION_AFTER_END:this.setEndAfter(f)}a(this)},fixBlock:function(h,j){var i=this.createBookmark(),m=this.document.createElement(j);this.collapse(h);this.enlarge(CKEDITOR.ENLARGE_BLOCK_CONTENTS);this.extractContents().appendTo(m);m.trim();this.insertNode(m);var f=m.getBogus();f&&f.remove();m.appendBogus();this.moveToBookmark(i);return m},splitBlock:function(h,j){var f=new CKEDITOR.dom.elementPath(this.startContainer,this.root),i=new CKEDITOR.dom.elementPath(this.endContainer,this.root),m=f.block,o=i.block,p=null;if(!f.blockLimit.equals(i.blockLimit)){return null}"br"!=h&&(m||(m=this.fixBlock(!0,h),o=(new CKEDITOR.dom.elementPath(this.endContainer,this.root)).block),o||(o=this.fixBlock(!1,h)));f=m&&this.checkStartOfBlock();i=o&&this.checkEndOfBlock();this.deleteContents();m&&m.equals(o)&&(i?(p=new CKEDITOR.dom.elementPath(this.startContainer,this.root),this.moveToPosition(o,CKEDITOR.POSITION_AFTER_END),o=null):f?(p=new CKEDITOR.dom.elementPath(this.startContainer,this.root),this.moveToPosition(m,CKEDITOR.POSITION_BEFORE_START),m=null):(o=this.splitElement(m,j||!1),m.is("ul","ol")||m.appendBogus()));return{previousBlock:m,nextBlock:o,wasStartOfBlock:f,wasEndOfBlock:i,elementPath:p}},splitElement:function(i,j){if(!this.collapsed){return null}this.setEndAt(i,CKEDITOR.POSITION_BEFORE_END);var f=this.extractContents(!1,j||!1),h=i.clone(!1,j||!1);f.appendTo(h);h.insertAfter(i);this.moveToPosition(i,CKEDITOR.POSITION_AFTER_END);return h},removeEmptyBlocksAtEnd:function(){function h(j){return function(m){return i(m)||f(m)||m.type==CKEDITOR.NODE_ELEMENT&&m.isEmptyInlineRemoveable()||j.is("table")&&m.is("caption")?!1:!0}}var i=CKEDITOR.dom.walker.whitespaces(),f=CKEDITOR.dom.walker.bookmark(!1);return function(m){for(var p=this.createBookmark(),q=this[m?"endPath":"startPath"](),j=q.block||q.blockLimit,o;j&&!j.equals(q.root)&&!j.getFirst(h(j));){o=j.getParent(),this[m?"setEndAt":"setStartAt"](j,CKEDITOR.POSITION_AFTER_END),j.remove(1),j=o}this.moveToBookmark(p)}}(),startPath:function(){return new CKEDITOR.dom.elementPath(this.startContainer,this.root)},endPath:function(){return new CKEDITOR.dom.elementPath(this.endContainer,this.root)},checkBoundaryOfElement:function(i,j){var f=j==CKEDITOR.START,h=this.clone();h.collapse(f);h[f?"setStartAt":"setEndAt"](i,f?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_BEFORE_END);h=new CKEDITOR.dom.walker(h);h.evaluator=c(f);return h[f?"checkBackward":"checkForward"]()},checkStartOfBlock:function(){var f=this.startContainer,h=this.startOffset;CKEDITOR.env.ie&&h&&f.type==CKEDITOR.NODE_TEXT&&(f=CKEDITOR.tools.ltrim(f.substring(0,h)),k.test(f)&&this.trim(0,1));this.trim();f=new CKEDITOR.dom.elementPath(this.startContainer,this.root);h=this.clone();h.collapse(!0);h.setStartAt(f.block||f.blockLimit,CKEDITOR.POSITION_AFTER_START);f=new CKEDITOR.dom.walker(h);f.evaluator=b();return f.checkBackward()},checkEndOfBlock:function(){var f=this.endContainer,h=this.endOffset;CKEDITOR.env.ie&&f.type==CKEDITOR.NODE_TEXT&&(f=CKEDITOR.tools.rtrim(f.substring(h)),k.test(f)&&this.trim(1,0));this.trim();f=new CKEDITOR.dom.elementPath(this.endContainer,this.root);h=this.clone();h.collapse(!1);h.setEndAt(f.block||f.blockLimit,CKEDITOR.POSITION_BEFORE_END);f=new CKEDITOR.dom.walker(h);f.evaluator=b();return f.checkForward()},getPreviousNode:function(i,j,f){var h=this.clone();h.collapse(1);h.setStartAt(f||this.root,CKEDITOR.POSITION_AFTER_START);f=new CKEDITOR.dom.walker(h);f.evaluator=i;f.guard=j;return f.previous()},getNextNode:function(i,j,f){var h=this.clone();h.collapse();h.setEndAt(f||this.root,CKEDITOR.POSITION_BEFORE_END);f=new CKEDITOR.dom.walker(h);f.evaluator=i;f.guard=j;return f.next()},checkReadOnly:function(){function f(h,i){for(;h;){if(h.type==CKEDITOR.NODE_ELEMENT){if("false"==h.getAttribute("contentEditable")&&!h.data("cke-editable")){return 0}if(h.is("html")||"true"==h.getAttribute("contentEditable")&&(h.contains(i)||h.equals(i))){break}}h=h.getParent()}return 1}return function(){var h=this.startContainer,i=this.endContainer;return !(f(h,i)&&f(i,h))}}(),moveToElementEditablePosition:function(h,m){if(h.type==CKEDITOR.NODE_ELEMENT&&!h.isEditable(!1)){return this.moveToPosition(h,m?CKEDITOR.POSITION_AFTER_END:CKEDITOR.POSITION_BEFORE_START),!0}for(var i=0;h;){if(h.type==CKEDITOR.NODE_TEXT){m&&this.endContainer&&this.checkEndOfBlock()&&k.test(h.getText())?this.moveToPosition(h,CKEDITOR.POSITION_BEFORE_START):this.moveToPosition(h,m?CKEDITOR.POSITION_AFTER_END:CKEDITOR.POSITION_BEFORE_START);i=1;break}if(h.type==CKEDITOR.NODE_ELEMENT){if(h.isEditable()){this.moveToPosition(h,m?CKEDITOR.POSITION_BEFORE_END:CKEDITOR.POSITION_AFTER_START),i=1}else{if(m&&h.is("br")&&this.endContainer&&this.checkEndOfBlock()){this.moveToPosition(h,CKEDITOR.POSITION_BEFORE_START)}else{if("false"==h.getAttribute("contenteditable")&&h.is(CKEDITOR.dtd.$block)){return this.setStartBefore(h),this.setEndAfter(h),!0}}}}var j=h,o=i,f=void 0;j.type==CKEDITOR.NODE_ELEMENT&&j.isEditable(!1)&&(f=j[m?"getLast":"getFirst"](t));o||f||(f=j[m?"getPrevious":"getNext"](t));h=f}return !!i},moveToClosestEditablePosition:function(h,j){var f,i=0,m,o,p=[CKEDITOR.POSITION_AFTER_END,CKEDITOR.POSITION_BEFORE_START];h?(f=new CKEDITOR.dom.range(this.root),f.moveToPosition(h,p[j?0:1])):f=this.clone();if(h&&!h.is(CKEDITOR.dtd.$block)){i=1}else{if(m=f[j?"getNextEditableNode":"getPreviousEditableNode"]()){i=1,(o=m.type==CKEDITOR.NODE_ELEMENT)&&m.is(CKEDITOR.dtd.$block)&&"false"==m.getAttribute("contenteditable")?(f.setStartAt(m,CKEDITOR.POSITION_BEFORE_START),f.setEndAt(m,CKEDITOR.POSITION_AFTER_END)):!CKEDITOR.env.needsBrFiller&&o&&m.is(CKEDITOR.dom.walker.validEmptyBlockContainers)?(f.setEnd(m,0),f.collapse()):f.moveToPosition(m,p[j?1:0])}}i&&this.moveToRange(f);return !!i},moveToElementEditStart:function(f){return this.moveToElementEditablePosition(f)},moveToElementEditEnd:function(f){return this.moveToElementEditablePosition(f,!0)},getEnclosedNode:function(){var i=this.clone();i.optimize();if(i.startContainer.type!=CKEDITOR.NODE_ELEMENT||i.endContainer.type!=CKEDITOR.NODE_ELEMENT){return null}var i=new CKEDITOR.dom.walker(i),j=CKEDITOR.dom.walker.bookmark(!1,!0),f=CKEDITOR.dom.walker.whitespaces(!0);i.evaluator=function(m){return f(m)&&j(m)};var h=i.next();i.reset();return h&&h.equals(i.previous())?h:null},getTouchedStartNode:function(){var f=this.startContainer;return this.collapsed||f.type!=CKEDITOR.NODE_ELEMENT?f:f.getChild(this.startOffset)||f},getTouchedEndNode:function(){var f=this.endContainer;return this.collapsed||f.type!=CKEDITOR.NODE_ELEMENT?f:f.getChild(this.endOffset-1)||f},getNextEditableNode:e(),getPreviousEditableNode:e(1),scrollIntoView:function(){var h=new CKEDITOR.dom.element.createFromHtml("\x3cspan\x3e\x26nbsp;\x3c/span\x3e",this.document),j,i,m,f=this.clone();f.optimize();(m=f.startContainer.type==CKEDITOR.NODE_TEXT)?(i=f.startContainer.getText(),j=f.startContainer.split(f.startOffset),h.insertAfter(f.startContainer)):f.insertNode(h);h.scrollIntoView();m&&(f.startContainer.setText(i),j.remove());h.remove()},_setStartContainer:function(f){this.startContainer=f},_setEndContainer:function(f){this.endContainer=f}}})();CKEDITOR.POSITION_AFTER_START=1;CKEDITOR.POSITION_BEFORE_END=2;CKEDITOR.POSITION_BEFORE_START=3;CKEDITOR.POSITION_AFTER_END=4;CKEDITOR.ENLARGE_ELEMENT=1;CKEDITOR.ENLARGE_BLOCK_CONTENTS=2;CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS=3;CKEDITOR.ENLARGE_INLINE=4;CKEDITOR.START=1;CKEDITOR.END=2;CKEDITOR.SHRINK_ELEMENT=1;CKEDITOR.SHRINK_TEXT=2;"use strict";(function(){function a(f){1>arguments.length||(this.range=f,this.forceBrBreak=0,this.enlargeBr=1,this.enforceRealBlocks=0,this._||(this._={}))}function d(f){var h=[];f.forEach(function(i){if("true"==i.getAttribute("contenteditable")){return h.push(i),!1}},CKEDITOR.NODE_ELEMENT,!0);return h}function b(j,i,m,h){j:{null==h&&(h=d(m));for(var f;f=h.shift();){if(f.getDtd().p){h={element:f,remaining:h};break j}}h=null}if(!h){return 0}if((f=CKEDITOR.filter.instances[h.element.data("cke-filter")])&&!f.check(i)){return b(j,i,m,h.remaining)}i=new CKEDITOR.dom.range(h.element);i.selectNodeContents(h.element);i=i.createIterator();i.enlargeBr=j.enlargeBr;i.enforceRealBlocks=j.enforceRealBlocks;i.activeFilter=i.filter=f;j._.nestedEditable={element:h.element,container:m,remaining:h.remaining,iterator:i};return 1}function c(h,i,f){if(!i){return !1}h=h.clone();h.collapse(!f);return h.checkBoundaryOfElement(i,f?CKEDITOR.START:CKEDITOR.END)}var e=/^[\r\n\t ]+$/,g=CKEDITOR.dom.walker.bookmark(!1,!0),l=CKEDITOR.dom.walker.whitespaces(!0),k=function(f){return g(f)&&l(f)},n={dd:1,dt:1,li:1};a.prototype={getNextParagraph:function(r){var z,j,m,h,o;r=r||"p";if(this._.nestedEditable){if(z=this._.nestedEditable.iterator.getNextParagraph(r)){return this.activeFilter=this._.nestedEditable.iterator.activeFilter,z}this.activeFilter=this.filter;if(b(this,r,this._.nestedEditable.container,this._.nestedEditable.remaining)){return this.activeFilter=this._.nestedEditable.iterator.activeFilter,this._.nestedEditable.iterator.getNextParagraph(r)}this._.nestedEditable=null}if(!this.range.root.getDtd()[r]){return null}if(!this._.started){var q=this.range.clone();j=q.startPath();var t=q.endPath(),y=!q.collapsed&&c(q,j.block),f=!q.collapsed&&c(q,t.block,1);q.shrink(CKEDITOR.SHRINK_ELEMENT,!0);y&&q.setStartAt(j.block,CKEDITOR.POSITION_BEFORE_END);f&&q.setEndAt(t.block,CKEDITOR.POSITION_AFTER_START);j=q.endContainer.hasAscendant("pre",!0)||q.startContainer.hasAscendant("pre",!0);q.enlarge(this.forceBrBreak&&!j||!this.enlargeBr?CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS:CKEDITOR.ENLARGE_BLOCK_CONTENTS);q.collapsed||(j=new CKEDITOR.dom.walker(q.clone()),t=CKEDITOR.dom.walker.bookmark(!0,!0),j.evaluator=t,this._.nextNode=j.next(),j=new CKEDITOR.dom.walker(q.clone()),j.evaluator=t,j=j.previous(),this._.lastNode=j.getNextSourceNode(!0,null,q.root),this._.lastNode&&this._.lastNode.type==CKEDITOR.NODE_TEXT&&!CKEDITOR.tools.trim(this._.lastNode.getText())&&this._.lastNode.getParent().isBlockBoundary()&&(t=this.range.clone(),t.moveToPosition(this._.lastNode,CKEDITOR.POSITION_AFTER_END),t.checkEndOfBlock()&&(t=new CKEDITOR.dom.elementPath(t.endContainer,t.root),this._.lastNode=(t.block||t.blockLimit).getNextSourceNode(!0))),this._.lastNode&&q.root.contains(this._.lastNode)||(this._.lastNode=this._.docEndMarker=q.document.createText(""),this._.lastNode.insertAfter(j)),q=null);this._.started=1;j=q}t=this._.nextNode;q=this._.lastNode;for(this._.nextNode=null;t;){var y=0,f=t.hasAscendant("pre"),u=t.type!=CKEDITOR.NODE_ELEMENT,i=0;if(u){t.type==CKEDITOR.NODE_TEXT&&e.test(t.getText())&&(u=0)}else{var p=t.getName();if(CKEDITOR.dtd.$block[p]&&"false"==t.getAttribute("contenteditable")){z=t;b(this,r,z);break}else{if(t.isBlockBoundary(this.forceBrBreak&&!f&&{br:1})){if("br"==p){u=1}else{if(!j&&!t.getChildCount()&&"hr"!=p){z=t;m=t.equals(q);break}}j&&(j.setEndAt(t,CKEDITOR.POSITION_BEFORE_START),"br"!=p&&(this._.nextNode=t));y=1}else{if(t.getFirst()){j||(j=this.range.clone(),j.setStartAt(t,CKEDITOR.POSITION_BEFORE_START));t=t.getFirst();continue}u=1}}}u&&!j&&(j=this.range.clone(),j.setStartAt(t,CKEDITOR.POSITION_BEFORE_START));m=(!y||u)&&t.equals(q);if(j&&!y){for(;!t.getNext(k)&&!m;){p=t.getParent();if(p.isBlockBoundary(this.forceBrBreak&&!f&&{br:1})){y=1;u=0;m||p.equals(q);j.setEndAt(p,CKEDITOR.POSITION_BEFORE_END);break}t=p;u=1;m=t.equals(q);i=1}}u&&j.setEndAt(t,CKEDITOR.POSITION_AFTER_END);t=this._getNextSourceNode(t,i,q);if((m=!t)||y&&j){break}}if(!z){if(!j){return this._.docEndMarker&&this._.docEndMarker.remove(),this._.nextNode=null}z=new CKEDITOR.dom.elementPath(j.startContainer,j.root);t=z.blockLimit;y={div:1,th:1,td:1};z=z.block;!z&&t&&!this.enforceRealBlocks&&y[t.getName()]&&j.checkStartOfBlock()&&j.checkEndOfBlock()&&!t.equals(j.root)?z=t:!z||this.enforceRealBlocks&&z.is(n)?(z=this.range.document.createElement(r),j.extractContents().appendTo(z),z.trim(),j.insertNode(z),h=o=!0):"li"!=z.getName()?j.checkStartOfBlock()&&j.checkEndOfBlock()||(z=z.clone(!1),j.extractContents().appendTo(z),z.trim(),o=j.splitBlock(),h=!o.wasStartOfBlock,o=!o.wasEndOfBlock,j.insertNode(z)):m||(this._.nextNode=z.equals(q)?null:this._getNextSourceNode(j.getBoundaryNodes().endNode,1,q))}h&&(h=z.getPrevious())&&h.type==CKEDITOR.NODE_ELEMENT&&("br"==h.getName()?h.remove():h.getLast()&&"br"==h.getLast().$.nodeName.toLowerCase()&&h.getLast().remove());o&&(h=z.getLast())&&h.type==CKEDITOR.NODE_ELEMENT&&"br"==h.getName()&&(!CKEDITOR.env.needsBrFiller||h.getPrevious(g)||h.getNext(g))&&h.remove();this._.nextNode||(this._.nextNode=m||z.equals(q)||!q?null:this._getNextSourceNode(z,1,q));return z},_getNextSourceNode:function(h,j,i){function m(o){return !(o.equals(i)||o.equals(f))}var f=this.range.root;for(h=h.getNextSourceNode(j,null,m);!g(h);){h=h.getNextSourceNode(j,null,m)}return h}};CKEDITOR.dom.range.prototype.createIterator=function(){return new a(this)}})();CKEDITOR.command=function(b,a){this.uiItems=[];this.exec=function(c){if(this.state==CKEDITOR.TRISTATE_DISABLED||!this.checkAllowed()){return !1}this.editorFocus&&b.focus();return !1===this.fire("exec")?!0:!1!==a.exec.call(this,b,c)};this.refresh=function(c,e){if(!this.readOnly&&c.readOnly){return !0}if(this.context&&!e.isContextFor(this.context)||!this.checkAllowed(!0)){return this.disable(),!0}this.startDisabled||this.enable();this.modes&&!this.modes[c.mode]&&this.disable();return !1===this.fire("refresh",{editor:c,path:e})?!0:a.refresh&&!1!==a.refresh.apply(this,arguments)};var d;this.checkAllowed=function(c){return c||"boolean"!=typeof d?d=b.activeFilter.checkFeature(this):d};CKEDITOR.tools.extend(this,a,{modes:{wysiwyg:1},editorFocus:1,contextSensitive:!!a.context,state:CKEDITOR.TRISTATE_DISABLED});CKEDITOR.event.call(this)};CKEDITOR.command.prototype={enable:function(){this.state==CKEDITOR.TRISTATE_DISABLED&&this.checkAllowed()&&this.setState(this.preserveState&&"undefined"!=typeof this.previousState?this.previousState:CKEDITOR.TRISTATE_OFF)},disable:function(){this.setState(CKEDITOR.TRISTATE_DISABLED)},setState:function(a){if(this.state==a||a!=CKEDITOR.TRISTATE_DISABLED&&!this.checkAllowed()){return !1}this.previousState=this.state;this.state=a;this.fire("state");return !0},toggleState:function(){this.state==CKEDITOR.TRISTATE_OFF?this.setState(CKEDITOR.TRISTATE_ON):this.state==CKEDITOR.TRISTATE_ON&&this.setState(CKEDITOR.TRISTATE_OFF)}};CKEDITOR.event.implementOn(CKEDITOR.command.prototype);CKEDITOR.ENTER_P=1;CKEDITOR.ENTER_BR=2;CKEDITOR.ENTER_DIV=3;CKEDITOR.config={customConfig:"config.js",autoUpdateElement:!0,language:"",defaultLanguage:"en",contentsLangDirection:"",enterMode:CKEDITOR.ENTER_P,forceEnterMode:!1,shiftEnterMode:CKEDITOR.ENTER_BR,docType:"\x3c!DOCTYPE html\x3e",bodyId:"",bodyClass:"",fullPage:!1,height:200,contentsCss:CKEDITOR.getUrl("contents.css"),extraPlugins:"",removePlugins:"",protectedSource:[],tabIndex:0,width:"",baseFloatZIndex:10000,blockedKeystrokes:[CKEDITOR.CTRL+66,CKEDITOR.CTRL+73,CKEDITOR.CTRL+85]};(function(){function e(i,j,o,s,O){var Y,N;i=[];for(Y in j){N=j[Y];N="boolean"==typeof N?{}:"function"==typeof N?{match:N}:w(N);"$"!=Y.charAt(0)&&(N.elements=Y);o&&(N.featureName=o.toLowerCase());var aa=N;aa.elements=y(aa.elements,/\s+/)||null;aa.propertiesOnly=aa.propertiesOnly||!0===aa.elements;var T=/\s*,\s*/,P=void 0;for(P in Q){aa[P]=y(aa[P],T)||null;var S=aa,W=G[P],ab=y(aa[G[P]],T),V=aa[P],U=[],X=!0,ac=void 0;ab?X=!1:ab={};for(ac in V){"!"==ac.charAt(0)&&(ac=ac.slice(1),U.push(ac),ab[ac]=!0,X=!1)}for(;ac=U.pop();){V[ac]=V["!"+ac],delete V["!"+ac]}S[W]=(X?!1:ab)||null}aa.match=aa.match||null;s.push(N);i.push(N)}j=O.elements;O=O.generic;var Z;o=0;for(s=i.length;o<s;++o){Y=w(i[o]);N=!0===Y.classes||!0===Y.styles||!0===Y.attributes;aa=Y;P=W=T=void 0;for(T in Q){aa[T]=h(aa[T])}S=!0;for(P in G){T=G[P];W=aa[T];ab=[];V=void 0;for(V in W){-1<V.indexOf("*")?ab.push(new RegExp("^"+V.replace(/\*/g,".*")+"$")):ab.push(V)}W=ab;W.length&&(aa[T]=W,S=!1)}aa.nothingRequired=S;aa.noProperties=!(aa.attributes||aa.classes||aa.styles);if(!0===Y.elements||null===Y.elements){O[N?"unshift":"push"](Y)}else{for(Z in aa=Y.elements,delete Y.elements,aa){if(j[Z]){j[Z][N?"unshift":"push"](Y)}else{j[Z]=[Y]}}}}}function m(O,N,P,s){if(!O.match||O.match(N)){if(s||x(O,N)){if(O.propertiesOnly||(P.valid=!0),P.allAttributes||(P.allAttributes=g(O.attributes,N.attributes,P.validAttributes)),P.allStyles||(P.allStyles=g(O.styles,N.styles,P.validStyles)),!P.allClasses){O=O.classes;N=N.classes;s=P.validClasses;if(O){if(!0===O){O=!0}else{for(var j=0,o=N.length,i;j<o;++j){i=N[j],s[i]||(s[i]=O(i))}O=!1}}else{O=!1}P.allClasses=O}}}}function g(o,s,i){if(!o){return !1}if(!0===o){return !0}for(var j in s){i[j]||(i[j]=o(j))}return !1}function k(N,O,i){if(!N.match||N.match(O)){if(N.noProperties){return !1}i.hadInvalidAttribute=p(N.attributes,O.attributes)||i.hadInvalidAttribute;i.hadInvalidStyle=p(N.styles,O.styles)||i.hadInvalidStyle;N=N.classes;O=O.classes;if(N){for(var j=!1,s=!0===N,o=O.length;o--;){if(s||N(O[o])){O.splice(o,1),j=!0}}N=j}else{N=!1}i.hadInvalidClass=N||i.hadInvalidClass}}function p(s,N){if(!s){return !1}var i=!1,j=!0===s,o;for(o in N){if(j||s(o)){delete N[o],i=!0}}return i}function u(j,o,i){if(j.disabled||j.customConfig&&!i||!o){return !1}j._.cachedChecks={};return !0}function y(s,N){if(!s){return !1}if(!0===s){return s}if("string"==typeof s){return s=R(s),"*"==s?!0:CKEDITOR.tools.convertArrayToObject(s.split(N))}if(CKEDITOR.tools.isArray(s)){return s.length?CKEDITOR.tools.convertArrayToObject(s):!1}var i={},j=0,o;for(o in s){i[o]=s[o],j++}return j?i:!1}function x(N,O){if(N.nothingRequired){return !0}var i,j,s,o;if(s=N.requiredClasses){for(o=O.classes,i=0;i<s.length;++i){if(j=s[i],"string"==typeof j){if(-1==CKEDITOR.tools.indexOf(o,j)){return !1}}else{if(!CKEDITOR.tools.checkIfAnyArrayItemMatches(o,j)){return !1}}}}return A(O.styles,N.requiredStyles)&&A(O.attributes,N.requiredAttributes)}function A(o,s){if(!s){return !0}for(var i=0,j;i<s.length;++i){if(j=s[i],"string"==typeof j){if(!(j in o)){return !1}}else{if(!CKEDITOR.tools.checkIfAnyObjectPropertyMatches(o,j)){return !1}}}return !0}function H(i){if(!i){return{}}i=i.split(/\s*,\s*/).sort();for(var j={};i.length;){j[i.shift()]="cke-test"}return j}function q(s){var O,N,P,o,i={},j=1;for(s=R(s);O=s.match(d);){(N=O[2])?(P=I(N,"styles"),o=I(N,"attrs"),N=I(N,"classes")):P=o=N=null,i["$"+j++]={elements:O[1],classes:N,styles:P,attributes:o},s=s.slice(O[0].length)}return i}function I(j,o){var i=j.match(r[o]);return i?R(i[1]):null}function a(j){var o=j.styleBackup=j.attributes.style,i=j.classBackup=j.attributes["class"];j.styles||(j.styles=CKEDITOR.tools.parseCssText(o||"",1));j.classes||(j.classes=i?i.split(/\s+/):[])}function F(T,i,N,j){var Y=0,O;j.toHtml&&(i.name=i.name.replace(f,"$1"));if(j.doCallbacks&&T.elementCallbacks){T:{O=T.elementCallbacks;for(var s=0,o=O.length,ad;s<o;++s){if(ad=O[s](i)){O=ad;break T}}O=void 0}if(O){return O}}if(j.doTransform&&(O=T._.transformations[i.name])){a(i);for(s=0;s<O.length;++s){B(T,i,O[s])}C(i)}if(j.doFilter){T:{s=i.name;o=T._;T=o.allowedRules.elements[s];O=o.allowedRules.generic;s=o.disallowedRules.elements[s];o=o.disallowedRules.generic;ad=j.skipRequired;var P={valid:!1,validAttributes:{},validClasses:{},validStyles:{},allAttributes:!1,allClasses:!1,allStyles:!1,hadInvalidAttribute:!1,hadInvalidClass:!1,hadInvalidStyle:!1},V,W;if(T||O){a(i);if(s){for(V=0,W=s.length;V<W;++V){if(!1===k(s[V],i,P)){T=null;break T}}}if(o){for(V=0,W=o.length;V<W;++V){k(o[V],i,P)}}if(T){for(V=0,W=T.length;V<W;++V){m(T[V],i,P,ad)}}if(O){for(V=0,W=O.length;V<W;++V){m(O[V],i,P,ad)}}T=P}else{T=null}}if(!T||!T.valid){return N.push(i),1}W=T.validAttributes;var X=T.validStyles;O=T.validClasses;var s=i.attributes,U=i.styles,o=i.classes;ad=i.classBackup;var ab=i.styleBackup,S,Z,ac=[],P=[],aa=/^data-cke-/;V=!1;delete s.style;delete s["class"];delete i.classBackup;delete i.styleBackup;if(!T.allAttributes){for(S in s){W[S]||(aa.test(S)?S==(Z=S.replace(/^data-cke-saved-/,""))||W[Z]||(delete s[S],V=!0):(delete s[S],V=!0))}}if(!T.allStyles||T.hadInvalidStyle){for(S in U){T.allStyles||X[S]?ac.push(S+":"+U[S]):V=!0}ac.length&&(s.style=ac.sort().join("; "))}else{ab&&(s.style=ab)}if(!T.allClasses||T.hadInvalidClass){for(S=0;S<o.length;++S){(T.allClasses||O[o[S]])&&P.push(o[S])}P.length&&(s["class"]=P.sort().join(" "));ad&&P.length<ad.split(/\s+/).length&&(V=!0)}else{ad&&(s["class"]=ad)}V&&(Y=1);if(!j.skipFinalValidation&&!J(i)){return N.push(i),1}}j.toHtml&&(i.name=i.name.replace(L,"cke:$1"));return Y}function b(j){var o=[],i;for(i in j){-1<i.indexOf("*")&&o.push(i.replace(/\*/g,".*"))}return o.length?new RegExp("^(?:"+o.join("|")+")$"):null}function C(j){var o=j.attributes,i;delete o.style;delete o["class"];if(i=CKEDITOR.tools.writeCssText(j.styles,!0)){o.style=i}j.classes.length&&(o["class"]=j.classes.sort().join(" "))}function J(i){switch(i.name){case"a":if(!(i.children.length||i.attributes.name||i.attributes.id)){return !1}break;case"img":if(!i.attributes.src){return !1}}return !0}function h(i){if(!i){return !1}if(!0===i){return !0}var j=b(i);return function(o){return o in i||j&&o.match(j)}}function E(){return new CKEDITOR.htmlParser.element("br")}function K(i){return i.type==CKEDITOR.NODE_ELEMENT&&("br"==i.name||n.$block[i.name])}function v(O,P,S){var T=O.name;if(n.$empty[T]||!O.children.length){"hr"==T&&"br"==P?O.replaceWith(E()):(O.parent&&S.push({check:"it",el:O.parent}),O.remove())}else{if(n.$block[T]||"tr"==T){if("br"==P){O.previous&&!K(O.previous)&&(P=E(),P.insertBefore(O)),O.next&&!K(O.next)&&(P=E(),P.insertAfter(O)),O.replaceWithChildren()}else{var T=O.children,j;P:{j=n[P];for(var s=0,U=T.length,o;s<U;++s){if(o=T[s],o.type==CKEDITOR.NODE_ELEMENT&&!j[o.name]){j=!1;break P}}j=!0}if(j){O.name=P,O.attributes={},S.push({check:"parent-down",el:O})}else{j=O.parent;for(var s=j.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT||"body"==j.name,N,i,U=T.length;0<U;){o=T[--U],s&&(o.type==CKEDITOR.NODE_TEXT||o.type==CKEDITOR.NODE_ELEMENT&&n.$inline[o.name])?(N||(N=new CKEDITOR.htmlParser.element(P),N.insertAfter(O),S.push({check:"parent-down",el:N})),N.add(o,0)):(N=null,i=n[j.name]||n.span,o.insertAfter(O),j.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT||o.type!=CKEDITOR.NODE_ELEMENT||i[o.name]||S.push({check:"el-up",el:o}))}O.remove()}}}else{T in {style:1,script:1}?O.remove():(O.parent&&S.push({check:"it",el:O.parent}),O.replaceWithChildren())}}}function B(s,N,i){var j,o;for(j=0;j<i.length;++j){if(o=i[j],!(o.check&&!s.check(o.check,!1)||o.left&&!o.left(N))){o.right(N,t);break}}}function z(P,S){var T=S.getDefinition(),i=T.attributes,o=T.styles,N,j,s,O;if(P.name!=T.element){return !1}for(N in i){if("class"==N){for(T=i[N].split(/\s+/),s=P.classes.join("|");O=T.pop();){if(-1==s.indexOf(O)){return !1}}}else{if(P.attributes[N]!=i[N]){return !1}}}for(j in o){if(P.styles[j]!=o[j]){return !1}}return !0}function c(o,s){var i,j;"string"==typeof o?i=o:o instanceof CKEDITOR.style?j=o:(i=o[0],j=o[1]);return[{element:i,left:j,right:function(N,O){O.transform(N,s)}}]}function D(i){return function(j){return z(j,i)}}function l(i){return function(j,o){o[i](j)}}var n=CKEDITOR.dtd,w=CKEDITOR.tools.copy,R=CKEDITOR.tools.trim,M=["","p","br","div"];CKEDITOR.FILTER_SKIP_TREE=2;CKEDITOR.filter=function(i){this.allowedContent=[];this.disallowedContent=[];this.elementCallbacks=null;this.disabled=!1;this.editor=null;this.id=CKEDITOR.tools.getNextNumber();this._={allowedRules:{elements:{},generic:[]},disallowedRules:{elements:{},generic:[]},transformations:{},cachedTests:{}};CKEDITOR.filter.instances[this.id]=this;if(i instanceof CKEDITOR.editor){i=this.editor=i;this.customConfig=!0;var j=i.config.allowedContent;!0===j?this.disabled=!0:(j||(this.customConfig=!1),this.allow(j,"config",1),this.allow(i.config.extraAllowedContent,"extra",1),this.allow(M[i.enterMode]+" "+M[i.shiftEnterMode],"default",1),this.disallow(i.config.disallowedContent))}else{this.customConfig=!1,this.allow(i,"default",1)}};CKEDITOR.filter.instances={};CKEDITOR.filter.prototype={allow:function(i,j,o){if(!u(this,i,o)){return !1}var N,s;if("string"==typeof i){i=q(i)}else{if(i instanceof CKEDITOR.style){if(i.toAllowedContentRules){return this.allow(i.toAllowedContentRules(this.editor),j,o)}N=i.getDefinition();i={};o=N.attributes;i[N.element]=N={styles:N.styles,requiredStyles:N.styles&&CKEDITOR.tools.objectKeys(N.styles)};o&&(o=w(o),N.classes=o["class"]?o["class"].split(/\s+/):null,N.requiredClasses=N.classes,delete o["class"],N.attributes=o,N.requiredAttributes=o&&CKEDITOR.tools.objectKeys(o))}else{if(CKEDITOR.tools.isArray(i)){for(N=0;N<i.length;++N){s=this.allow(i[N],j,o)}return s}}}e(this,i,j,this.allowedContent,this._.allowedRules);return !0},applyTo:function(i,j,P,T){if(this.disabled){return !1}var s=this,U=[],o=this.editor&&this.editor.config.protectedSource,O,W=!1,V={doFilter:!P,doTransform:!0,doCallbacks:!0,toHtml:j};i.forEach(function(Y){if(Y.type==CKEDITOR.NODE_ELEMENT){if("off"==Y.attributes["data-cke-filter"]){return !1}if(!j||"span"!=Y.name||!~CKEDITOR.tools.objectKeys(Y.attributes).join("|").indexOf("data-cke-")){if(O=F(s,Y,U,V),O&1){W=!0}else{if(O&2){return !1}}}}else{if(Y.type==CKEDITOR.NODE_COMMENT&&Y.value.match(/^\{cke_protected\}(?!\{C\})/)){var ac;Y:{var X=decodeURIComponent(Y.value.replace(/^\{cke_protected\}/,""));ac=[];var ab,aa,Z;if(o){for(aa=0;aa<o.length;++aa){if((Z=X.match(o[aa]))&&Z[0].length==X.length){ac=!0;break Y}}}X=CKEDITOR.htmlParser.fragment.fromHtml(X);1==X.children.length&&(ab=X.children[0]).type==CKEDITOR.NODE_ELEMENT&&F(s,ab,ac,V);ac=!ac.length}ac||U.push(Y)}}},null,!0);U.length&&(W=!0);var N;i=[];T=M[T||(this.editor?this.editor.enterMode:CKEDITOR.ENTER_P)];for(var S;P=U.pop();){P.type==CKEDITOR.NODE_ELEMENT?v(P,T,i):P.remove()}for(;N=i.pop();){if(P=N.el,P.parent){switch(S=n[P.parent.name]||n.span,N.check){case"it":n.$removeEmpty[P.name]&&!P.children.length?v(P,T,i):J(P)||v(P,T,i);break;case"el-up":P.parent.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT||S[P.name]||v(P,T,i);break;case"parent-down":P.parent.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT||S[P.name]||v(P.parent,T,i)}}}return W},checkFeature:function(i){if(this.disabled||!i){return !0}i.toFeature&&(i=i.toFeature(this.editor));return !i.requiredContent||this.check(i.requiredContent)},disable:function(){this.disabled=!0},disallow:function(i){if(!u(this,i,!0)){return !1}"string"==typeof i&&(i=q(i));e(this,i,null,this.disallowedContent,this._.disallowedRules);return !0},addContentForms:function(s){if(!this.disabled&&s){var N,i,j=[],o;for(N=0;N<s.length&&!o;++N){i=s[N],("string"==typeof i||i instanceof CKEDITOR.style)&&this.check(i)&&(o=i)}if(o){for(N=0;N<s.length;++N){j.push(c(s[N],o))}this.addTransformations(j)}}},addElementCallback:function(i){this.elementCallbacks||(this.elementCallbacks=[]);this.elementCallbacks.push(i)},addFeature:function(i){if(this.disabled||!i){return !0}i.toFeature&&(i=i.toFeature(this.editor));this.allow(i.allowedContent,i.name);this.addTransformations(i.contentTransformations);this.addContentForms(i.contentForms);return i.requiredContent&&(this.customConfig||this.disallowedContent.length)?this.check(i.requiredContent):!0},addTransformations:function(N){var O,P;if(!this.disabled&&N){var S=this._.transformations,i;for(i=0;i<N.length;++i){O=N[i];var o=void 0,T=void 0,j=void 0,V=void 0,s=void 0,U=void 0;P=[];for(T=0;T<O.length;++T){j=O[T],"string"==typeof j?(j=j.split(/\s*:\s*/),V=j[0],s=null,U=j[1]):(V=j.check,s=j.left,U=j.right),o||(o=j,o=o.element?o.element:V?V.match(/^([a-z0-9]+)/i)[0]:o.left.getDefinition().element),s instanceof CKEDITOR.style&&(s=D(s)),P.push({check:V==o?null:V,left:s,right:"string"==typeof U?l(U):U})}O=o;S[O]||(S[O]=[]);S[O].push(P)}}},check:function(P,S,T){if(this.disabled){return !0}if(CKEDITOR.tools.isArray(P)){for(var i=P.length;i--;){if(this.check(P[i],S,T)){return !0}}return !1}var s,j;if("string"==typeof P){j=P+"\x3c"+(!1===S?"0":"1")+(T?"1":"0")+"\x3e";if(j in this._.cachedChecks){return this._.cachedChecks[j]}i=q(P).$1;s=i.styles;var N=i.classes;i.name=i.elements;i.classes=N=N?N.split(/\s*,\s*/):[];i.styles=H(s);i.attributes=H(i.attributes);i.children=[];N.length&&(i.attributes["class"]=N.join(" "));s&&(i.attributes.style=CKEDITOR.tools.writeCssText(i.styles));s=i}else{i=P.getDefinition(),s=i.styles,N=i.attributes||{},s?(s=w(s),N.style=CKEDITOR.tools.writeCssText(s,!0)):s={},s={name:i.element,attributes:N,classes:N["class"]?N["class"].split(/\s+/):[],styles:s,children:[]}}var N=CKEDITOR.tools.clone(s),O=[],o;if(!1!==S&&(o=this._.transformations[s.name])){for(i=0;i<o.length;++i){B(this,s,o[i])}C(s)}F(this,N,O,{doFilter:!0,doTransform:!1!==S,skipRequired:!T,skipFinalValidation:!T});S=0<O.length?!1:CKEDITOR.tools.objectCompare(s.attributes,N.attributes,!0)?!0:!1;"string"==typeof P&&(this._.cachedChecks[j]=S);return S},getAllowedEnterMode:function(){var i=["p","div","br"],j={p:CKEDITOR.ENTER_P,div:CKEDITOR.ENTER_DIV,br:CKEDITOR.ENTER_BR};return function(N,O){var s=i.slice(),o;if(this.check(M[N])){return N}for(O||(s=s.reverse());o=s.pop();){if(this.check(o)){return j[o]}}return CKEDITOR.ENTER_BR}}(),destroy:function(){delete CKEDITOR.filter.instances[this.id];delete this._;delete this.allowedContent;delete this.disallowedContent}};var Q={styles:1,attributes:1,classes:1},G={styles:"requiredStyles",attributes:"requiredAttributes",classes:"requiredClasses"},d=/^([a-z0-9\-*\s]+)((?:\s*\{[!\w\-,\s\*]+\}\s*|\s*\[[!\w\-,\s\*]+\]\s*|\s*\([!\w\-,\s\*]+\)\s*){0,3})(?:;\s*|$)/i,r={styles:/{([^}]+)}/,attrs:/\[([^\]]+)\]/,classes:/\(([^\)]+)\)/},f=/^cke:(object|embed|param)$/,L=/^(object|embed|param)$/,t=CKEDITOR.filter.transformationsTools={sizeToStyle:function(i){this.lengthToStyle(i,"width");this.lengthToStyle(i,"height")},sizeToAttribute:function(i){this.lengthToAttribute(i,"width");this.lengthToAttribute(i,"height")},lengthToStyle:function(o,s,i){i=i||s;if(!(i in o.styles)){var j=o.attributes[s];j&&(/^\d+$/.test(j)&&(j+="px"),o.styles[i]=j)}delete o.attributes[s]},lengthToAttribute:function(s,N,i){i=i||N;if(!(i in s.attributes)){var j=s.styles[N],o=j&&j.match(/^(\d+)(?:\.\d*)?px$/);o?s.attributes[i]=o[1]:"cke-test"==j&&(s.attributes[i]="cke-test")}delete s.styles[N]},alignmentToStyle:function(i){if(!("float" in i.styles)){var j=i.attributes.align;if("left"==j||"right"==j){i.styles["float"]=j}}delete i.attributes.align},alignmentToAttribute:function(i){if(!("align" in i.attributes)){var j=i.styles["float"];if("left"==j||"right"==j){i.attributes.align=j}}delete i.styles["float"]},matchesStyle:z,transform:function(P,S){if("string"==typeof S){P.name=S}else{var T=S.getDefinition(),i=T.styles,o=T.attributes,N,s,j,O;P.name=T.element;for(N in o){if("class"==N){for(T=P.classes.join("|"),j=o[N].split(/\s+/);O=j.pop();){-1==T.indexOf(O)&&P.classes.push(O)}}else{P.attributes[N]=o[N]}}for(s in i){P.styles[s]=i[s]}}}}})();(function(){CKEDITOR.focusManager=function(a){if(a.focusManager){return a.focusManager}this.hasFocus=!1;this.currentActive=null;this._={editor:a};return this};CKEDITOR.focusManager._={blurDelay:200};CKEDITOR.focusManager.prototype={focus:function(a){this._.timer&&clearTimeout(this._.timer);a&&(this.currentActive=a);this.hasFocus||this._.locked||((a=CKEDITOR.currentInstance)&&a.focusManager.blur(1),this.hasFocus=!0,(a=this._.editor.container)&&a.addClass("cke_focus"),this._.editor.fire("focus"))},lock:function(){this._.locked=1},unlock:function(){delete this._.locked},blur:function(b){function a(){if(this.hasFocus){this.hasFocus=!1;var c=this._.editor.container;c&&c.removeClass("cke_focus");this._.editor.fire("blur")}}if(!this._.locked){this._.timer&&clearTimeout(this._.timer);var d=CKEDITOR.focusManager._.blurDelay;b||!d?a.call(this):this._.timer=CKEDITOR.tools.setTimeout(function(){delete this._.timer;a.call(this)},d,this)}},add:function(d,b){var e=d.getCustomData("focusmanager");if(!e||e!=this){e&&e.remove(d);var e="focus",a="blur";b&&(CKEDITOR.env.ie?(e="focusin",a="focusout"):CKEDITOR.event.useCapture=1);var c={blur:function(){d.equals(this.currentActive)&&this.blur()},focus:function(){this.focus(d)}};d.on(e,c.focus,this);d.on(a,c.blur,this);b&&(CKEDITOR.event.useCapture=0);d.setCustomData("focusmanager",this);d.setCustomData("focusmanager_handlers",c)}},remove:function(a){a.removeCustomData("focusmanager");var d=a.removeCustomData("focusmanager_handlers");a.removeListener("blur",d.blur);a.removeListener("focus",d.focus)}}})();CKEDITOR.keystrokeHandler=function(a){if(a.keystrokeHandler){return a.keystrokeHandler}this.keystrokes={};this.blockedKeystrokes={};this._={editor:a};return this};(function(){var b,a=function(c){c=c.data;var e=c.getKeystroke(),f=this.keystrokes[e],g=this._.editor;b=!1===g.fire("key",{keyCode:e,domEvent:c});b||(f&&(b=!1!==g.execCommand(f,{from:"keystrokeHandler"})),b||(b=!!this.blockedKeystrokes[e]));b&&c.preventDefault(!0);return !b},d=function(c){b&&(b=!1,c.data.preventDefault(!0))};CKEDITOR.keystrokeHandler.prototype={attach:function(c){c.on("keydown",a,this);if(CKEDITOR.env.gecko&&CKEDITOR.env.mac){c.on("keypress",d,this)}}}})();(function(){CKEDITOR.lang={languages:{af:1,ar:1,bg:1,bn:1,bs:1,ca:1,cs:1,cy:1,da:1,de:1,"de-ch":1,el:1,"en-au":1,"en-ca":1,"en-gb":1,en:1,eo:1,es:1,et:1,eu:1,fa:1,fi:1,fo:1,"fr-ca":1,fr:1,gl:1,gu:1,he:1,hi:1,hr:1,hu:1,id:1,is:1,it:1,ja:1,ka:1,km:1,ko:1,ku:1,lt:1,lv:1,mk:1,mn:1,ms:1,nb:1,nl:1,no:1,pl:1,"pt-br":1,pt:1,ro:1,ru:1,si:1,sk:1,sl:1,sq:1,"sr-latn":1,sr:1,sv:1,th:1,tr:1,tt:1,ug:1,uk:1,vi:1,"zh-cn":1,zh:1},rtl:{ar:1,fa:1,he:1,ku:1,ug:1},load:function(c,b,d){c&&CKEDITOR.lang.languages[c]||(c=this.detect(b,c));var a=this;b=function(){a[c].dir=a.rtl[c]?"rtl":"ltr";d(c,a[c])};this[c]?b():CKEDITOR.scriptLoader.load(CKEDITOR.getUrl("lang/"+c+".js"),b,this)},detect:function(d,b){var e=this.languages;b=b||navigator.userLanguage||navigator.language||d;var a=b.toLowerCase().match(/([a-z]+)(?:-([a-z]+))?/),c=a[1],a=a[2];e[c+"-"+a]?c=c+"-"+a:e[c]||(c=null);CKEDITOR.lang.detect=c?function(){return c}:function(f){return f};return c||d}}})();CKEDITOR.scriptLoader=function(){var a={},d={};return{load:function(b,c,e,g){var l="string"==typeof b;l&&(b=[b]);e||(e=CKEDITOR);var k=b.length,n=[],y=[],f=function(h){c&&(l?c.call(e,h):c.call(e,n,y))};if(0===k){f(!0)}else{var z=function(h,i){(i?n:y).push(h);0>=--k&&(g&&CKEDITOR.document.getDocumentElement().removeStyle("cursor"),f(i))},u=function(j,m){a[j]=1;var h=d[j];delete d[j];for(var i=0;i<h.length;i++){h[i](j,m)}},x=function(j){if(a[j]){z(j,!0)}else{var h=d[j]||(d[j]=[]);h.push(z);if(!(1<h.length)){var i=new CKEDITOR.dom.element("script");i.setAttributes({type:"text/javascript",src:j});c&&(CKEDITOR.env.ie&&11>CKEDITOR.env.version?i.$.onreadystatechange=function(){if("loaded"==i.$.readyState||"complete"==i.$.readyState){i.$.onreadystatechange=null,u(j,!0)}}:(i.$.onload=function(){setTimeout(function(){u(j,!0)},0)},i.$.onerror=function(){u(j,!1)}));i.appendTo(CKEDITOR.document.getHead())}}};g&&CKEDITOR.document.getDocumentElement().setStyle("cursor","wait");for(var w=0;w<k;w++){x(b[w])}}},queue:function(){function c(){var e;(e=b[0])&&this.load(e.scriptUrl,e.callback,CKEDITOR,0)}var b=[];return function(g,i){var e=this;b.push({scriptUrl:g,callback:function(){i&&i.apply(this,arguments);b.shift();c.call(e)}});1==b.length&&c.call(this)}}()}}();CKEDITOR.resourceManager=function(a,d){this.basePath=a;this.fileName=d;this.registered={};this.loaded={};this.externals={};this._={waitingList:{}}};CKEDITOR.resourceManager.prototype={add:function(b,a){if(this.registered[b]){throw Error('[CKEDITOR.resourceManager.add] The resource name "'+b+'" is already registered.')}var d=this.registered[b]=a||{};d.name=b;d.path=this.getPath(b);CKEDITOR.fire(b+CKEDITOR.tools.capitalize(this.fileName)+"Ready",d);return this.get(b)},get:function(a){return this.registered[a]||null},getPath:function(a){var d=this.externals[a];return CKEDITOR.getUrl(d&&d.dir||this.basePath+a+"/")},getFilePath:function(a){var d=this.externals[a];return CKEDITOR.getUrl(this.getPath(a)+(d?d.file:this.fileName+".js"))},addExternal:function(d,b,e){d=d.split(",");for(var a=0;a<d.length;a++){var c=d[a];e||(b=b.replace(/[^\/]+$/,function(f){e=f;return""}));this.externals[c]={dir:b,file:e||this.fileName+".js"}}},load:function(n,b,v){CKEDITOR.tools.isArray(n)||(n=n?[n]:[]);for(var a=this.loaded,c=this.registered,e=[],g={},f={},k=0;k<n.length;k++){var l=n[k];if(l){if(a[l]||c[l]){f[l]=this.get(l)}else{var d=this.getFilePath(l);e.push(d);d in g||(g[d]=[]);g[d].push(l)}}}CKEDITOR.scriptLoader.load(e,function(h,i){if(i.length){throw Error('[CKEDITOR.resourceManager.load] Resource name "'+g[i[0]].join(",")+'" was not found at "'+i[0]+'".')}for(var p=0;p<h.length;p++){for(var j=g[h[p]],m=0;m<j.length;m++){var o=j[m];f[o]=this.get(o);a[o]=1}}b.call(v,f)},this)}};CKEDITOR.plugins=new CKEDITOR.resourceManager("plugins/","plugin");CKEDITOR.plugins.load=CKEDITOR.tools.override(CKEDITOR.plugins.load,function(a){var d={};return function(b,c,e){var g={},j=function(f){a.call(this,f,function(i){CKEDITOR.tools.extend(g,i);var k=[],s;for(s in i){var h=i[s],q=h&&h.requires;if(!d[s]){if(h.icons){for(var t=h.icons.split(","),r=t.length;r--;){CKEDITOR.skin.addIcon(t[r],h.path+"icons/"+(CKEDITOR.env.hidpi&&h.hidpi?"hidpi/":"")+t[r]+".png")}}d[s]=1}if(q){for(q.split&&(q=q.split(",")),h=0;h<q.length;h++){g[q[h]]||k.push(q[h])}}}if(k.length){j.call(this,k)}else{for(s in g){h=g[s],h.onLoad&&!h.onLoad._called&&(!1===h.onLoad()&&delete g[s],h.onLoad._called=1)}c&&c.call(e||window,g)}},this)};j.call(this,b)}});CKEDITOR.plugins.setLang=function(c,b,d){var a=this.get(c);c=a.langEntries||(a.langEntries={});a=a.lang||(a.lang=[]);a.split&&(a=a.split(","));-1==CKEDITOR.tools.indexOf(a,b)&&a.push(b);c[b]=d};CKEDITOR.ui=function(a){if(a.ui){return a.ui}this.items={};this.instances={};this.editor=a;this._={handlers:{}};return this};CKEDITOR.ui.prototype={add:function(c,b,d){d.name=c.toLowerCase();var a=this.items[c]={type:b,command:d.command||null,args:Array.prototype.slice.call(arguments,2)};CKEDITOR.tools.extend(a,d)},get:function(a){return this.instances[a]},create:function(c){var b=this.items[c],d=b&&this._.handlers[b.type],a=b&&b.command&&this.editor.getCommand(b.command),d=d&&d.create.apply(this,b.args);this.instances[c]=d;a&&a.uiItems.push(d);d&&!d.type&&(d.type=b.type);return d},addHandler:function(a,d){this._.handlers[a]=d},space:function(a){return CKEDITOR.document.getById(this.spaceId(a))},spaceId:function(a){return this.editor.id+"_"+a}};CKEDITOR.event.implementOn(CKEDITOR.ui);(function(){function u(h,i,j){CKEDITOR.event.call(this);h=h&&CKEDITOR.tools.clone(h);if(void 0!==i){if(!(i instanceof CKEDITOR.dom.element)){throw Error("Expect element of type CKEDITOR.dom.element.")}if(!j){throw Error("One of the element modes must be specified.")}if(CKEDITOR.env.ie&&CKEDITOR.env.quirks&&j==CKEDITOR.ELEMENT_MODE_INLINE){throw Error("Inline element mode is not supported on IE quirks.")}if(!x(i,j)){throw Error('The specified element mode is not supported on element: "'+i.getName()+'".')}this.element=i;this.elementMode=j;this.name=this.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO&&(i.getId()||i.getNameAtt())}else{this.elementMode=CKEDITOR.ELEMENT_MODE_NONE}this._={};this.commands={};this.templates={};this.name=this.name||B();this.id=CKEDITOR.tools.getNextId();this.status="unloaded";this.config=CKEDITOR.tools.prototypedCopy(CKEDITOR.config);this.ui=new CKEDITOR.ui(this);this.focusManager=new CKEDITOR.focusManager(this);this.keystrokeHandler=new CKEDITOR.keystrokeHandler(this);this.on("readOnly",A);this.on("selectionChange",function(m){e(this,m.data.path)});this.on("activeFilterChange",function(){e(this,this.elementPath(),!0)});this.on("mode",A);this.on("instanceReady",function(){this.config.startupFocus&&this.focus()});CKEDITOR.fire("instanceCreated",null,this);CKEDITOR.add(this);CKEDITOR.tools.setTimeout(function(){"destroyed"!==this.status?f(this,h):CKEDITOR.warn("editor-incorrect-destroy")},0,this)}function B(){do{var h="editor"+ ++a}while(CKEDITOR.instances[h]);return h}function x(h,i){return i==CKEDITOR.ELEMENT_MODE_INLINE?h.is(CKEDITOR.dtd.$editable)||h.is("textarea"):i==CKEDITOR.ELEMENT_MODE_REPLACE?!h.is(CKEDITOR.dtd.$nonBodyContent):1}function A(){var h=this.commands,i;for(i in h){b(this,h[i])}}function b(h,i){i[i.startDisabled?"disable":h.readOnly&&!i.readOnly?"disable":i.modes[h.mode]?"enable":"disable"]()}function e(m,o,j){if(o){var p,h,i=m.commands;for(h in i){p=i[h],(j||p.contextSensitive)&&p.refresh(m,o)}}}function g(i){var j=i.config.customConfig;if(!j){return !1}var j=CKEDITOR.getUrl(j),h=n[j]||(n[j]={});h.fn?(h.fn.call(i,i.config),CKEDITOR.getUrl(i.config.customConfig)!=j&&g(i)||i.fireOnce("customConfigLoaded")):CKEDITOR.scriptLoader.queue(j,function(){h.fn=CKEDITOR.editorConfig?CKEDITOR.editorConfig:function(){};g(i)});return !0}function f(h,i){h.on("customConfigLoaded",function(){if(i){if(i.on){for(var j in i.on){h.on(j,i.on[j])}}CKEDITOR.tools.extend(h.config,i,!0);delete h.config.on}j=h.config;h.readOnly=j.readOnly?!0:h.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?h.element.is("textarea")?h.element.hasAttribute("disabled")||h.element.hasAttribute("readonly"):h.element.isReadOnly():h.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE?h.element.hasAttribute("disabled")||h.element.hasAttribute("readonly"):!1;h.blockless=h.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?!(h.element.is("textarea")||CKEDITOR.dtd[h.element.getName()].p):!1;h.tabIndex=j.tabIndex||h.element&&h.element.getAttribute("tabindex")||0;h.activeEnterMode=h.enterMode=h.blockless?CKEDITOR.ENTER_BR:j.enterMode;h.activeShiftEnterMode=h.shiftEnterMode=h.blockless?CKEDITOR.ENTER_BR:j.shiftEnterMode;j.skin&&(CKEDITOR.skinName=j.skin);h.fireOnce("configLoaded");h.dataProcessor=new CKEDITOR.htmlDataProcessor(h);h.filter=h.activeFilter=new CKEDITOR.filter(h);k(h)});i&&null!=i.customConfig&&(h.config.customConfig=i.customConfig);g(h)||h.fireOnce("customConfigLoaded")}function k(h){CKEDITOR.skin.loadPart("editor",function(){d(h)})}function d(h){CKEDITOR.lang.load(h.config.language,h.config.defaultLanguage,function(i,j){var m=h.config.title;h.langCode=i;h.lang=CKEDITOR.tools.prototypedCopy(j);h.title="string"==typeof m||!1===m?m:[h.lang.editor,h.name].join(", ");h.config.contentsLangDirection||(h.config.contentsLangDirection=h.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?h.element.getDirection(1):h.lang.dir);h.fire("langLoaded");c(h)})}function c(h){h.getStylesSet(function(i){h.once("loaded",function(){h.fire("stylesSet",{styles:i})},null,null,1);w(h)})}function w(o){var p=o.config,i=p.plugins,m=p.extraPlugins,q=p.removePlugins;if(m){var j=new RegExp("(?:^|,)(?:"+m.replace(/\s*,\s*/g,"|")+")(?\x3d,|$)","g"),i=i.replace(j,""),i=i+(","+m)}if(q){var h=new RegExp("(?:^|,)(?:"+q.replace(/\s*,\s*/g,"|")+")(?\x3d,|$)","g"),i=i.replace(h,"")}CKEDITOR.env.air&&(i+=",adobeair");CKEDITOR.plugins.load(i.split(","),function(D){var J=[],y=[],K=[];o.plugins=D;for(var s in D){var r=D[s],C=r.lang,v=null,t=r.requires,z;CKEDITOR.tools.isArray(t)&&(t=t.join(","));if(t&&(z=t.match(h))){for(;t=z.pop();){CKEDITOR.error("editor-plugin-required",{plugin:t.replace(",",""),requiredBy:s})}}C&&!o.lang[s]&&(C.split&&(C=C.split(",")),0<=CKEDITOR.tools.indexOf(C,o.langCode)?v=o.langCode:(v=o.langCode.replace(/-.*/,""),v=v!=o.langCode&&0<=CKEDITOR.tools.indexOf(C,v)?v:0<=CKEDITOR.tools.indexOf(C,"en")?"en":C[0]),r.langEntries&&r.langEntries[v]?(o.lang[s]=r.langEntries[v],v=null):K.push(CKEDITOR.getUrl(r.path+"lang/"+v+".js")));y.push(v);J.push(r)}CKEDITOR.scriptLoader.load(K,function(){for(var E=["beforeInit","init","afterInit"],F=0;F<E.length;F++){for(var G=0;G<J.length;G++){var H=J[G];0===F&&y[G]&&H.lang&&H.langEntries&&(o.lang[H.name]=H.langEntries[y[G]]);if(H[E[F]]){H[E[F]](o)}}}o.fireOnce("pluginsLoaded");p.keystrokes&&o.setKeystroke(o.config.keystrokes);for(G=0;G<o.config.blockedKeystrokes.length;G++){o.keystrokeHandler.blockedKeystrokes[o.config.blockedKeystrokes[G]]=1}o.status="loaded";o.fireOnce("loaded");CKEDITOR.fire("instanceLoaded",null,o)})})}function l(){var h=this.element;if(h&&this.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO){var i=this.getData();this.config.htmlEncodeOutput&&(i=CKEDITOR.tools.htmlEncode(i));h.is("textarea")?h.setValue(i):h.setHtml(i);return !0}return !1}u.prototype=CKEDITOR.editor.prototype;CKEDITOR.editor=u;var a=0,n={};CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{addCommand:function(i,j){j.name=i.toLowerCase();var h=new CKEDITOR.command(this,j);this.mode&&b(this,h);return this.commands[i]=h},_attachToForm:function(){function j(p){o.updateElement();o._.required&&!h.getValue()&&!1===o.fire("required")&&p.data.preventDefault()}function m(p){return !!(p&&p.call&&p.apply)}var o=this,h=o.element,i=new CKEDITOR.dom.element(h.$.form);h.is("textarea")&&i&&(i.on("submit",j),m(i.$.submit)&&(i.$.submit=CKEDITOR.tools.override(i.$.submit,function(p){return function(){j();p.apply?p.apply(this):p()}})),o.on("destroy",function(){i.removeListener("submit",j)}))},destroy:function(h){this.fire("beforeDestroy");!h&&l.call(this);this.editable(null);this.filter&&(this.filter.destroy(),delete this.filter);delete this.activeFilter;this.status="destroyed";this.fire("destroy");this.removeAllListeners();CKEDITOR.remove(this);CKEDITOR.fire("instanceDestroyed",null,this)},elementPath:function(h){if(!h){h=this.getSelection();if(!h){return null}h=h.getStartElement()}return h?new CKEDITOR.dom.elementPath(h,this.editable()):null},createRange:function(){var h=this.editable();return h?new CKEDITOR.dom.range(h):null},execCommand:function(j,m){var h=this.getCommand(j),i={name:j,commandData:m,command:h};return h&&h.state!=CKEDITOR.TRISTATE_DISABLED&&!1!==this.fire("beforeCommandExec",i)&&(i.returnValue=h.exec(i.commandData),!h.async&&!1!==this.fire("afterCommandExec",i))?i.returnValue:!1},getCommand:function(h){return this.commands[h]},getData:function(h){!h&&this.fire("beforeGetData");var i=this._.data;"string"!=typeof i&&(i=(i=this.element)&&this.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE?i.is("textarea")?i.getValue():i.getHtml():"");i={dataValue:i};!h&&this.fire("getData",i);return i.dataValue},getSnapshot:function(){var h=this.fire("getSnapshot");"string"!=typeof h&&(h=(h=this.element)&&this.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE?h.is("textarea")?h.getValue():h.getHtml():"");return h},loadSnapshot:function(h){this.fire("loadSnapshot",h)},setData:function(j,m,o){var h=!0,i=m;m&&"object"==typeof m&&(o=m.internal,i=m.callback,h=!m.noSnapshot);!o&&h&&this.fire("saveSnapshot");if(i||!o){this.once("dataReady",function(p){!o&&h&&this.fire("saveSnapshot");i&&i.call(p.editor)})}j={dataValue:j};!o&&this.fire("setData",j);this._.data=j.dataValue;!o&&this.fire("afterSetData",j)},setReadOnly:function(h){h=null==h||h;this.readOnly!=h&&(this.readOnly=h,this.keystrokeHandler.blockedKeystrokes[8]=+h,this.editable().setReadOnly(h),this.fire("readOnly"))},insertHtml:function(i,j,h){this.fire("insertHtml",{dataValue:i,mode:j,range:h})},insertText:function(h){this.fire("insertText",h)},insertElement:function(h){this.fire("insertElement",h)},getSelectedHtml:function(t){var h=this.editable(),i=this.getSelection(),i=i&&i.getRanges();if(!h||!i||0===i.length){return null}for(var q=new CKEDITOR.dom.documentFragment,r,j,o,m=0;m<i.length;m++){var s=i[m],p=s.startContainer;p.getName&&"tr"==p.getName()?(r||(r=p.getAscendant("table").clone(),r.append(p.getAscendant("tbody").clone()),q.append(r),r=r.findOne("tbody")),j&&j.equals(p)||(j=p,o=p.clone(),r.append(o)),o.append(s.cloneContents())):q.append(s.cloneContents())}h=r?q:h.getHtmlFromRange(i[0]);return t?h.getHtml():h},extractSelectedHtml:function(j,m){var h=this.editable(),i=this.getSelection().getRanges();if(!h||0===i.length){return null}i=i[0];h=h.extractHtmlFromRange(i,m);m||this.getSelection().selectRanges([i]);return j?h.getHtml():h},focus:function(){this.fire("beforeFocus")},checkDirty:function(){return"ready"==this.status&&this._.previousValue!==this.getSnapshot()},resetDirty:function(){this._.previousValue=this.getSnapshot()},updateElement:function(){return l.call(this)},setKeystroke:function(){for(var j=this.keystrokeHandler.keystrokes,m=CKEDITOR.tools.isArray(arguments[0])?arguments[0]:[[].slice.call(arguments,0)],o,h,i=m.length;i--;){o=m[i],h=0,CKEDITOR.tools.isArray(o)&&(h=o[1],o=o[0]),h?j[o]=h:delete j[o]}},addFeature:function(h){return this.filter.addFeature(h)},setActiveFilter:function(h){h||(h=this.filter);this.activeFilter!==h&&(this.activeFilter=h,this.fire("activeFilterChange"),h===this.filter?this.setActiveEnterMode(null,null):this.setActiveEnterMode(h.getAllowedEnterMode(this.enterMode),h.getAllowedEnterMode(this.shiftEnterMode,!0)))},setActiveEnterMode:function(h,i){h=h?this.blockless?CKEDITOR.ENTER_BR:h:this.enterMode;i=i?this.blockless?CKEDITOR.ENTER_BR:i:this.shiftEnterMode;if(this.activeEnterMode!=h||this.activeShiftEnterMode!=i){this.activeEnterMode=h,this.activeShiftEnterMode=i,this.fire("activeEnterModeChange")}},showNotification:function(h){alert(h)}})})();CKEDITOR.ELEMENT_MODE_NONE=0;CKEDITOR.ELEMENT_MODE_REPLACE=1;CKEDITOR.ELEMENT_MODE_APPENDTO=2;CKEDITOR.ELEMENT_MODE_INLINE=3;CKEDITOR.htmlParser=function(){this._={htmlPartsRegex:/<(?:(?:\/([^>]+)>)|(?:!--([\S|\s]*?)--\x3e)|(?:([^\/\s>]+)((?:\s+[\w\-:.]+(?:\s*=\s*?(?:(?:"[^"]*")|(?:'[^']*')|[^\s"'\/>]+))?)*)[\S\s]*?(\/?)>))/g}};(function(){var a=/([\w\-:.]+)(?:(?:\s*=\s*(?:(?:"([^"]*)")|(?:'([^']*)')|([^\s>]+)))|(?=\s|$))/g,d={checked:1,compact:1,declare:1,defer:1,disabled:1,ismap:1,multiple:1,nohref:1,noresize:1,noshade:1,nowrap:1,readonly:1,selected:1};CKEDITOR.htmlParser.prototype={onTagOpen:function(){},onTagClose:function(){},onText:function(){},onCDATA:function(){},onComment:function(){},parse:function(c){for(var e,f,k=0,n;e=this._.htmlPartsRegex.exec(c);){f=e.index;if(f>k){if(k=c.substring(k,f),n){n.push(k)}else{this.onText(k)}}k=this._.htmlPartsRegex.lastIndex;if(f=e[1]){if(f=f.toLowerCase(),n&&CKEDITOR.dtd.$cdata[f]&&(this.onCDATA(n.join("")),n=null),!n){this.onTagClose(f);continue}}if(n){n.push(e[0])}else{if(f=e[3]){if(f=f.toLowerCase(),!/="/.test(f)){var l={},r,b=e[4];e=!!e[5];if(b){for(;r=a.exec(b);){var g=r[1].toLowerCase();r=r[2]||r[3]||r[4]||"";l[g]=!r&&d[g]?g:CKEDITOR.tools.htmlDecodeAttr(r)}}this.onTagOpen(f,l,e);!n&&CKEDITOR.dtd.$cdata[f]&&(n=[])}}else{if(f=e[2]){this.onComment(f)}}}}if(c.length>k){this.onText(c.substring(k,c.length))}}}})();CKEDITOR.htmlParser.basicWriter=CKEDITOR.tools.createClass({$:function(){this._={output:[]}},proto:{openTag:function(a){this._.output.push("\x3c",a)},openTagClose:function(a,d){d?this._.output.push(" /\x3e"):this._.output.push("\x3e")},attribute:function(a,d){"string"==typeof d&&(d=CKEDITOR.tools.htmlEncodeAttr(d));this._.output.push(" ",a,'\x3d"',d,'"')},closeTag:function(a){this._.output.push("\x3c/",a,"\x3e")},text:function(a){this._.output.push(a)},comment:function(a){this._.output.push("\x3c!--",a,"--\x3e")},write:function(a){this._.output.push(a)},reset:function(){this._.output=[];this._.indent=!1},getHtml:function(a){var d=this._.output.join("");a&&this.reset();return d}}});"use strict";(function(){CKEDITOR.htmlParser.node=function(){};CKEDITOR.htmlParser.node.prototype={remove:function(){var c=this.parent.children,b=CKEDITOR.tools.indexOf(c,this),d=this.previous,a=this.next;d&&(d.next=a);a&&(a.previous=d);c.splice(b,1);this.parent=null},replaceWith:function(d){var b=this.parent.children,e=CKEDITOR.tools.indexOf(b,this),a=d.previous=this.previous,c=d.next=this.next;a&&(a.next=d);c&&(c.previous=d);b[e]=d;d.parent=this.parent;this.parent=null},insertAfter:function(c){var b=c.parent.children,d=CKEDITOR.tools.indexOf(b,c),a=c.next;b.splice(d+1,0,this);this.next=c.next;this.previous=c;c.next=this;a&&(a.previous=this);this.parent=c.parent},insertBefore:function(b){var a=b.parent.children,d=CKEDITOR.tools.indexOf(a,b);a.splice(d,0,this);this.next=b;(this.previous=b.previous)&&(b.previous.next=this);b.previous=this;this.parent=b.parent},getAscendant:function(b){var a="function"==typeof b?b:"string"==typeof b?function(c){return c.name==b}:function(c){return c.name in b},d=this.parent;for(;d&&d.type==CKEDITOR.NODE_ELEMENT;){if(a(d)){return d}d=d.parent}return null},wrapWith:function(a){this.replaceWith(a);a.add(this);return a},getIndex:function(){return CKEDITOR.tools.indexOf(this.parent.children,this)},getFilterContext:function(a){return a||{}}}})();"use strict";CKEDITOR.htmlParser.comment=function(a){this.value=a;this._={isBlockLike:!1}};CKEDITOR.htmlParser.comment.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_COMMENT,filter:function(b,a){var d=this.value;if(!(d=b.onComment(a,d,this))){return this.remove(),!1}if("string"!=typeof d){return this.replaceWith(d),!1}this.value=d;return !0},writeHtml:function(a,d){d&&this.filter(d);a.comment(this.value)}});"use strict";(function(){CKEDITOR.htmlParser.text=function(a){this.value=a;this._={isBlockLike:!1}};CKEDITOR.htmlParser.text.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_TEXT,filter:function(a,d){if(!(this.value=a.onText(d,this.value,this))){return this.remove(),!1}},writeHtml:function(a,d){d&&this.filter(d);a.text(this.value)}})})();"use strict";(function(){CKEDITOR.htmlParser.cdata=function(a){this.value=a};CKEDITOR.htmlParser.cdata.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_TEXT,filter:function(){},writeHtml:function(a){a.write(this.value)}})})();"use strict";CKEDITOR.htmlParser.fragment=function(){this.children=[];this.parent=null;this._={isBlockLike:!0,hasInlineStarted:!1}};(function(){function d(f){return f.attributes["data-cke-survive"]?!1:"a"==f.name&&f.attributes.href||CKEDITOR.dtd.$removeEmpty[f.name]}var b=CKEDITOR.tools.extend({table:1,ul:1,ol:1,dl:1},CKEDITOR.dtd.table,CKEDITOR.dtd.ul,CKEDITOR.dtd.ol,CKEDITOR.dtd.dl),e={ol:1,ul:1},a=CKEDITOR.tools.extend({},{html:1},CKEDITOR.dtd.html,CKEDITOR.dtd.body,CKEDITOR.dtd.head,{style:1,script:1}),c={ul:"li",ol:"li",dl:"dd",table:"tbody",tbody:"tr",thead:"tr",tfoot:"tr",tr:"td"};CKEDITOR.htmlParser.fragment.fromHtml=function(i,l,k){function n(o){var p;if(0<x.length){for(var m=0;m<x.length;m++){var r=x[m],B=r.name,s=CKEDITOR.dtd[B],v=y.name&&CKEDITOR.dtd[y.name];v&&!v[B]||o&&s&&!s[o]&&CKEDITOR.dtd[o]?B==y.name&&(h(y,y.parent,1),m--):(p||(f(),p=1),r=r.clone(),r.parent=y,y=r,x.splice(m,1),m--)}}}function f(){for(;w.length;){h(w.shift(),y)}}function g(m){if(m._.isBlockLike&&"pre"!=m.name&&"textarea"!=m.name){var o=m.children.length,p=m.children[o-1],r;p&&p.type==CKEDITOR.NODE_TEXT&&((r=CKEDITOR.tools.rtrim(p.value))?p.value=r:m.children.length=o-1)}}function h(o,p,r){p=p||y||u;var m=y;void 0===o.previous&&(q(p,o)&&(y=p,t.onTagOpen(k,{}),o.returnPoint=p=y),g(o),d(o)&&!o.children.length||p.add(o),"pre"==o.name&&(j=!1),"textarea"==o.name&&(z=!1));o.returnPoint?(y=o.returnPoint,delete o.returnPoint):y=r?p:m}function q(m,o){if((m==u||"body"==m.name)&&k&&(!m.name||CKEDITOR.dtd[m.name][k])){var p,r;return(p=o.attributes&&(r=o.attributes["data-cke-real-element-type"])?r:o.name)&&p in CKEDITOR.dtd.$inline&&!(p in CKEDITOR.dtd.head)&&!o.isOrphan||o.type==CKEDITOR.NODE_TEXT}}function A(m,o){return m in CKEDITOR.dtd.$listItem||m in CKEDITOR.dtd.$tableContent?m==o||"dt"==m&&"dd"==o||"dd"==m&&"dt"==o:!1}var t=new CKEDITOR.htmlParser,u=l instanceof CKEDITOR.htmlParser.element?l:"string"==typeof l?new CKEDITOR.htmlParser.element(l):new CKEDITOR.htmlParser.fragment,x=[],w=[],y=u,z="textarea"==u.name,j="pre"==u.name;t.onTagOpen=function(p,o,m,r){o=new CKEDITOR.htmlParser.element(p,o);o.isUnknown&&m&&(o.isEmpty=!0);o.isOptionalClose=r;if(d(o)){x.push(o)}else{if("pre"==p){j=!0}else{if("br"==p&&j){y.add(new CKEDITOR.htmlParser.text("\n"));return}"textarea"==p&&(z=!0)}if("br"==p){w.push(o)}else{for(;!(r=(m=y.name)?CKEDITOR.dtd[m]||(y._.isBlockLike?CKEDITOR.dtd.div:CKEDITOR.dtd.span):a,o.isUnknown||y.isUnknown||r[p]);){if(y.isOptionalClose){t.onTagClose(m)}else{if(p in e&&m in e){m=y.children,(m=m[m.length-1])&&"li"==m.name||h(m=new CKEDITOR.htmlParser.element("li"),y),!o.returnPoint&&(o.returnPoint=y),y=m}else{if(p in CKEDITOR.dtd.$listItem&&!A(p,m)){t.onTagOpen("li"==p?"ul":"dl",{},0,1)}else{if(m in b&&!A(p,m)){!o.returnPoint&&(o.returnPoint=y),y=y.parent}else{if(m in CKEDITOR.dtd.$inline&&x.unshift(y),y.parent){h(y,y.parent,1)}else{o.isOrphan=1;break}}}}}}n(p);f();o.parent=y;o.isEmpty?h(o):y=o}}};t.onTagClose=function(m){for(var o=x.length-1;0<=o;o--){if(m==x[o].name){x.splice(o,1);return}}for(var p=[],r=[],v=y;v!=u&&v.name!=m;){v._.isBlockLike||r.unshift(v),p.push(v),v=v.returnPoint||v.parent}if(v!=u){for(o=0;o<p.length;o++){var s=p[o];h(s,s.parent)}y=v;v._.isBlockLike&&f();h(v,v.parent);v==y&&(y=y.parent);x=x.concat(r)}"body"==m&&(k=!1)};t.onText=function(m){if(!(y._.hasInlineStarted&&!w.length||j||z)&&(m=CKEDITOR.tools.ltrim(m),0===m.length)){return}var o=y.name,p=o?CKEDITOR.dtd[o]||(y._.isBlockLike?CKEDITOR.dtd.div:CKEDITOR.dtd.span):a;if(!z&&!p["#"]&&o in b){t.onTagOpen(c[o]||""),t.onText(m)}else{f();n();j||z||(m=m.replace(/[\t\r\n ]{2,}|[\t\r\n]/g," "));m=new CKEDITOR.htmlParser.text(m);if(q(y,m)){this.onTagOpen(k,{},0,1)}y.add(m)}};t.onCDATA=function(m){y.add(new CKEDITOR.htmlParser.cdata(m))};t.onComment=function(m){f();n();y.add(new CKEDITOR.htmlParser.comment(m))};t.parse(i);for(f();y!=u;){h(y,y.parent,1)}g(u);return u};CKEDITOR.htmlParser.fragment.prototype={type:CKEDITOR.NODE_DOCUMENT_FRAGMENT,add:function(g,h){isNaN(h)&&(h=this.children.length);var f=0<h?this.children[h-1]:null;if(f){if(g._.isBlockLike&&f.type==CKEDITOR.NODE_TEXT&&(f.value=CKEDITOR.tools.rtrim(f.value),0===f.value.length)){this.children.pop();this.add(g);return}f.next=g}g.previous=f;g.parent=this;this.children.splice(h,0,g);this._.hasInlineStarted||(this._.hasInlineStarted=g.type==CKEDITOR.NODE_TEXT||g.type==CKEDITOR.NODE_ELEMENT&&!g._.isBlockLike)},filter:function(f,g){g=this.getFilterContext(g);f.onRoot(g,this);this.filterChildren(f,!1,g)},filterChildren:function(g,h,f){if(this.childrenFilteredBy!=g.id){f=this.getFilterContext(f);if(h&&!this.parent){g.onRoot(f,this)}this.childrenFilteredBy=g.id;for(h=0;h<this.children.length;h++){!1===this.children[h].filter(g,f)&&h--}}},writeHtml:function(f,g){g&&this.filter(g);this.writeChildrenHtml(f)},writeChildrenHtml:function(h,i,f){var g=this.getFilterContext();if(f&&!this.parent&&i){i.onRoot(g,this)}i&&this.filterChildren(i,!1,g);i=0;f=this.children;for(g=f.length;i<g;i++){f[i].writeHtml(h)}},forEach:function(g,h,i){if(!(i||h&&this.type!=h)){var j=g(this)}if(!1!==j){i=this.children;for(var f=0;f<i.length;f++){j=i[f],j.type==CKEDITOR.NODE_ELEMENT?j.forEach(g,h):h&&j.type!=h||g(j)}}},getFilterContext:function(f){return f||{}}}})();"use strict";(function(){function a(){this.rules=[]}function d(b,c,g,k){var m,l;for(m in c){(l=b[m])||(l=b[m]=new a),l.add(c[m],g,k)}}CKEDITOR.htmlParser.filter=CKEDITOR.tools.createClass({$:function(b){this.id=CKEDITOR.tools.getNextNumber();this.elementNameRules=new a;this.attributeNameRules=new a;this.elementsRules={};this.attributesRules={};this.textRules=new a;this.commentRules=new a;this.rootRules=new a;b&&this.addRules(b,10)},proto:{addRules:function(e,b){var c;"number"==typeof b?c=b:b&&"priority" in b&&(c=b.priority);"number"!=typeof c&&(c=10);"object"!=typeof b&&(b={});e.elementNames&&this.elementNameRules.addMany(e.elementNames,c,b);e.attributeNames&&this.attributeNameRules.addMany(e.attributeNames,c,b);e.elements&&d(this.elementsRules,e.elements,c,b);e.attributes&&d(this.attributesRules,e.attributes,c,b);e.text&&this.textRules.add(e.text,c,b);e.comment&&this.commentRules.add(e.comment,c,b);e.root&&this.rootRules.add(e.root,c,b)},applyTo:function(b){b.filter(this)},onElementName:function(c,b){return this.elementNameRules.execOnName(c,b)},onAttributeName:function(c,b){return this.attributeNameRules.execOnName(c,b)},onText:function(h,b,c){return this.textRules.exec(h,b,c)},onComment:function(h,b,c){return this.commentRules.exec(h,b,c)},onRoot:function(c,b){return this.rootRules.exec(c,b)},onElement:function(k,b){for(var c=[this.elementsRules["^"],this.elementsRules[b.name],this.elementsRules.$],g,l=0;3>l;l++){if(g=c[l]){g=g.exec(k,b,this);if(!1===g){return null}if(g&&g!=b){return this.onNode(k,g)}if(b.parent&&!b.name){break}}}return b},onNode:function(h,b){var c=b.type;return c==CKEDITOR.NODE_ELEMENT?this.onElement(h,b):c==CKEDITOR.NODE_TEXT?new CKEDITOR.htmlParser.text(this.onText(h,b.value)):c==CKEDITOR.NODE_COMMENT?new CKEDITOR.htmlParser.comment(this.onComment(h,b.value)):null},onAttribute:function(j,b,c,g){return(c=this.attributesRules[c])?c.exec(j,g,b,this):g}}});CKEDITOR.htmlParser.filterRulesGroup=a;a.prototype={add:function(h,b,c){this.rules.splice(this.findIndex(b),0,{value:h,priority:b,options:c})},addMany:function(l,b,c){for(var g=[this.findIndex(b),0],n=0,k=l.length;n<k;n++){g.push({value:l[n],priority:b,options:c})}this.rules.splice.apply(this.rules,g)},findIndex:function(h){for(var b=this.rules,c=b.length-1;0<=c&&h<b[c].priority;){c--}return c+1},exec:function(b,f){var g=f instanceof CKEDITOR.htmlParser.node||f instanceof CKEDITOR.htmlParser.fragment,l=Array.prototype.slice.call(arguments,1),t=this.rules,n=t.length,u,v,k,c;for(c=0;c<n;c++){if(g&&(u=f.type,v=f.name),k=t[c],!(b.nonEditable&&!k.options.applyToAll||b.nestedEditable&&k.options.excludeNestedEditable)){k=k.value.apply(null,l);if(!1===k||g&&k&&(k.name!=v||k.type!=u)){return k}null!=k&&(l[0]=f=k)}}return f},execOnName:function(l,b){for(var c=0,g=this.rules,n=g.length,k;b&&c<n;c++){k=g[c],l.nonEditable&&!k.options.applyToAll||l.nestedEditable&&k.options.excludeNestedEditable||(b=b.replace(k.value[0],k.value[1]))}return b}}})();(function(){function u(j,s){function J(P){return P||CKEDITOR.env.needsNbspFiller?new CKEDITOR.htmlParser.text("Â "):new CKEDITOR.htmlParser.element("br",{"data-cke-bogus":1})}function L(S,P){return function(X){if(X.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT){var U=[],V=v(X),W,T;if(V){for(E(V,1)&&U.push(V);V;){C(V)&&(W=w(V))&&E(W)&&((T=w(W))&&!C(T)?U.push(W):(J(o).insertAfter(W),W.remove())),V=V.previous}}for(V=0;V<U.length;V++){U[V].remove()}if(U=!S||!1!==("function"==typeof P?P(X):P)){o||CKEDITOR.env.needsBrFiller||X.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT?o||CKEDITOR.env.needsBrFiller||!(7<document.documentMode||X.name in CKEDITOR.dtd.tr||X.name in CKEDITOR.dtd.$listItem)?(U=v(X),U=!U||"form"==X.name&&"input"==U.name):U=!1:U=!1}U&&X.add(J(S))}}}function E(S,T){if((!o||CKEDITOR.env.needsBrFiller)&&S.type==CKEDITOR.NODE_ELEMENT&&"br"==S.name&&!S.attributes["data-cke-eol"]){return !0}var P;return S.type==CKEDITOR.NODE_TEXT&&(P=S.value.match(p))&&(P.index&&((new CKEDITOR.htmlParser.text(S.value.substring(0,P.index))).insertBefore(S),S.value=P[0]),!CKEDITOR.env.needsBrFiller&&o&&(!T||S.parent.name in i)||!o&&((P=S.previous)&&"br"==P.name||!P||C(P)))?!0:!1}var O={elements:{}},o="html"==s,i=CKEDITOR.tools.extend({},D),N;for(N in i){"#" in d[N]||delete i[N]}for(N in i){O.elements[N]=L(o,j.config.fillEmptyBlocks)}O.root=L(o,!1);O.elements.br=function(P){return function(T){if(T.parent.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT){var S=T.attributes;if("data-cke-bogus" in S||"data-cke-eol" in S){delete S["data-cke-bogus"]}else{for(S=T.next;S&&y(S);){S=S.next}var U=w(T);!S&&C(T.parent)?G(T.parent,J(P)):C(S)&&U&&!C(U)&&J(P).insertBefore(S)}}}}(o);return O}function x(i,j){return i!=CKEDITOR.ENTER_BR&&!1!==j?i==CKEDITOR.ENTER_DIV?"div":"p":!1}function v(i){for(i=i.children[i.children.length-1];i&&y(i);){i=i.previous}return i}function w(i){for(i=i.previous;i&&y(i);){i=i.previous}return i}function y(i){return i.type==CKEDITOR.NODE_TEXT&&!CKEDITOR.tools.trim(i.value)||i.type==CKEDITOR.NODE_ELEMENT&&i.attributes["data-cke-bookmark"]}function C(i){return i&&(i.type==CKEDITOR.NODE_ELEMENT&&i.name in D||i.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT)}function G(j,o){var i=j.children[j.children.length-1];j.children.push(o);o.parent=j;i&&(i.next=o,o.previous=i)}function F(i){i=i.attributes;"false"!=i.contenteditable&&(i["data-cke-editable"]=i.contenteditable?"true":1);i.contenteditable="false"}function I(i){i=i.attributes;switch(i["data-cke-editable"]){case"true":i.contenteditable="true";break;case"1":delete i.contenteditable}}function k(i){return i.replace(g,function(o,s,j){return"\x3c"+s+j.replace(l,function(E,J){return r.test(J)&&-1==j.indexOf("data-cke-saved-"+J)?" data-cke-saved-"+E+" data-cke-"+CKEDITOR.rnd+"-"+E:E})+"\x3e"})}function A(i,j){return i.replace(j,function(s,E,o){0===s.indexOf("\x3ctextarea")&&(s=E+e(o).replace(/</g,"\x26lt;").replace(/>/g,"\x26gt;")+"\x3c/textarea\x3e");return"\x3ccke:encoded\x3e"+encodeURIComponent(s)+"\x3c/cke:encoded\x3e"})}function m(i){return i.replace(z,function(j,o){return decodeURIComponent(o)})}function K(i){return i.replace(/\x3c!--(?!{cke_protected})[\s\S]+?--\x3e/g,function(j){return"\x3c!--"+f+"{C}"+encodeURIComponent(j).replace(/--/g,"%2D%2D")+"--\x3e"})}function e(i){return i.replace(/\x3c!--\{cke_protected\}\{C\}([\s\S]+?)--\x3e/g,function(j,o){return decodeURIComponent(o)})}function R(j,o){var i=o._.dataStore;return j.replace(/\x3c!--\{cke_protected\}([\s\S]+?)--\x3e/g,function(s,E){return decodeURIComponent(E)}).replace(/\{cke_protected_(\d+)\}/g,function(s,E){return i&&i[E]||""})}function Q(s,J){var E=[],L=J.config.protectedSource,o=J._.dataStore||(J._.dataStore={id:1}),i=/<\!--\{cke_temp(comment)?\}(\d*?)--\x3e/g,L=[/<script[\s\S]*?(<\/script>|$)/gi,/<noscript[\s\S]*?<\/noscript>/gi,/<meta[\s\S]*?\/?>/gi].concat(L);s=s.replace(/\x3c!--[\s\S]*?--\x3e/g,function(N){return"\x3c!--{cke_tempcomment}"+(E.push(N)-1)+"--\x3e"});for(var j=0;j<L.length;j++){s=s.replace(L[j],function(N){N=N.replace(i,function(P,S,O){return E[O]});return/cke_temp(comment)?/.test(N)?N:"\x3c!--{cke_temp}"+(E.push(N)-1)+"--\x3e"})}s=s.replace(i,function(O,P,N){return"\x3c!--"+f+(P?"{C}":"")+encodeURIComponent(E[N]).replace(/--/g,"%2D%2D")+"--\x3e"});s=s.replace(/<\w+(?:\s+(?:(?:[^\s=>]+\s*=\s*(?:[^'"\s>]+|'[^']*'|"[^"]*"))|[^\s=\/>]+))+\s*\/?>/g,function(N){return N.replace(/\x3c!--\{cke_protected\}([^>]*)--\x3e/g,function(O,P){o[o.id]=decodeURIComponent(P);return"{cke_protected_"+o.id+++"}"})});return s=s.replace(/<(title|iframe|textarea)([^>]*)>([\s\S]*?)<\/\1>/g,function(N,O,S,P){return"\x3c"+O+S+"\x3e"+R(e(P),J)+"\x3c/"+O+"\x3e"})}CKEDITOR.htmlDataProcessor=function(i){var j,s,o=this;this.editor=i;this.dataFilter=j=new CKEDITOR.htmlParser.filter;this.htmlFilter=s=new CKEDITOR.htmlParser.filter;this.writer=new CKEDITOR.htmlParser.basicWriter;j.addRules(M);j.addRules(H,{applyToAll:!0});j.addRules(u(i,"data"),{applyToAll:!0});s.addRules(a);s.addRules(b,{applyToAll:!0});s.addRules(u(i,"html"),{applyToAll:!0});i.on("toHtml",function(J){J=J.data;var E=J.dataValue,N,E=Q(E,i),E=A(E,t),E=k(E),E=A(E,B),E=E.replace(h,"$1cke:$2"),E=E.replace(n,"\x3ccke:$1$2\x3e\x3c/cke:$1\x3e"),E=E.replace(/(<pre\b[^>]*>)(\r\n|\n)/g,"$1$2$2"),E=E.replace(/([^a-z0-9<\-])(on\w{3,})(?!>)/gi,"$1data-cke-"+CKEDITOR.rnd+"-$2");N=J.context||i.editable().getName();var L;CKEDITOR.env.ie&&9>CKEDITOR.env.version&&"pre"==N&&(N="div",E="\x3cpre\x3e"+E+"\x3c/pre\x3e",L=1);N=i.document.createElement(N);N.setHtml("a"+E);E=N.getHtml().substr(1);E=E.replace(new RegExp("data-cke-"+CKEDITOR.rnd+"-","ig"),"");L&&(E=E.replace(/^<pre>|<\/pre>$/gi,""));E=E.replace(c,"$1$2");E=m(E);E=e(E);N=!1===J.fixForBody?!1:x(J.enterMode,i.config.autoParagraph);E=CKEDITOR.htmlParser.fragment.fromHtml(E,J.context,N);N&&(L=E,!L.children.length&&CKEDITOR.dtd[L.name][N]&&(N=new CKEDITOR.htmlParser.element(N),L.add(N)));J.dataValue=E},null,null,5);i.on("toHtml",function(E){E.data.filter.applyTo(E.data.dataValue,!0,E.data.dontFilter,E.data.enterMode)&&i.fire("dataFiltered")},null,null,6);i.on("toHtml",function(E){E.data.dataValue.filterChildren(o.dataFilter,!0)},null,null,10);i.on("toHtml",function(J){J=J.data;var L=J.dataValue,E=new CKEDITOR.htmlParser.basicWriter;L.writeChildrenHtml(E);L=E.getHtml(!0);J.dataValue=K(L)},null,null,15);i.on("toDataFormat",function(E){var J=E.data.dataValue;E.data.enterMode!=CKEDITOR.ENTER_BR&&(J=J.replace(/^<br *\/?>/i,""));E.data.dataValue=CKEDITOR.htmlParser.fragment.fromHtml(J,E.data.context,x(E.data.enterMode,i.config.autoParagraph))},null,null,5);i.on("toDataFormat",function(E){E.data.dataValue.filterChildren(o.htmlFilter,!0)},null,null,10);i.on("toDataFormat",function(E){E.data.filter.applyTo(E.data.dataValue,!1,!0)},null,null,11);i.on("toDataFormat",function(E){var J=E.data.dataValue,L=o.writer;L.reset();J.writeChildrenHtml(L);J=L.getHtml(!0);J=e(J);J=R(J,i);E.data.dataValue=J},null,null,15)};CKEDITOR.htmlDataProcessor.prototype={toHtml:function(L,N,O,i){var s=this.editor,j,J,E,o;N&&"object"==typeof N?(j=N.context,O=N.fixForBody,i=N.dontFilter,J=N.filter,E=N.enterMode,o=N.protectedWhitespaces):j=N;j||null===j||(j=s.editable().getName());return s.fire("toHtml",{dataValue:L,context:j,fixForBody:O,dontFilter:i,filter:J||s.filter,enterMode:E||s.enterMode,protectedWhitespaces:o}).dataValue},toDataFormat:function(s,E){var i,j,o;E&&(i=E.context,j=E.filter,o=E.enterMode);i||null===i||(i=this.editor.editable().getName());return this.editor.fire("toDataFormat",{dataValue:s,filter:j||this.editor.filter,context:i,enterMode:o||this.editor.enterMode}).dataValue}};var p=/(?:&nbsp;|\xa0)$/,f="{cke_protected}",d=CKEDITOR.dtd,q="caption colgroup col thead tfoot tbody".split(" "),D=CKEDITOR.tools.extend({},d.$blockLimit,d.$block),M={elements:{input:F,textarea:F}},H={attributeNames:[[/^on/,"data-cke-pa-on"],[/^data-cke-expando$/,""]]},a={elements:{embed:function(j){var o=j.parent;if(o&&"object"==o.name){var i=o.attributes.width,o=o.attributes.height;i&&(j.attributes.width=i);o&&(j.attributes.height=o)}},a:function(i){var j=i.attributes;if(!(i.children.length||j.name||j.id||i.attributes["data-cke-saved-name"])){return !1}}}},b={elementNames:[[/^cke:/,""],[/^\?xml:namespace$/,""]],attributeNames:[[/^data-cke-(saved|pa)-/,""],[/^data-cke-.*/,""],["hidefocus",""]],elements:{$:function(s){var E=s.attributes;if(E){if(E["data-cke-temp"]){return !1}for(var i=["name","href","src"],j,o=0;o<i.length;o++){j="data-cke-saved-"+i[o],j in E&&delete E[i[o]]}}return s},table:function(i){i.children.slice(0).sort(function(s,E){var j,o;s.type==CKEDITOR.NODE_ELEMENT&&E.type==s.type&&(j=CKEDITOR.tools.indexOf(q,s.name),o=CKEDITOR.tools.indexOf(q,E.name));-1<j&&-1<o&&j!=o||(j=s.parent?s.getIndex():-1,o=E.parent?E.getIndex():-1);return j>o?1:-1})},param:function(i){i.children=[];i.isEmpty=!0;return i},span:function(i){"Apple-style-span"==i.attributes["class"]&&delete i.name},html:function(i){delete i.attributes.contenteditable;delete i.attributes["class"]},body:function(i){delete i.attributes.spellcheck;delete i.attributes.contenteditable},style:function(i){var j=i.children[0];j&&j.value&&(j.value=CKEDITOR.tools.trim(j.value));i.attributes.type||(i.attributes.type="text/css")},title:function(i){var j=i.children[0];!j&&G(i,j=new CKEDITOR.htmlParser.text);j.value=i.attributes["data-cke-title"]||""},input:I,textarea:I},attributes:{"class":function(i){return CKEDITOR.tools.ltrim(i.replace(/(?:^|\s+)cke_[^\s]*/g,""))||!1}}};CKEDITOR.env.ie&&(b.attributes.style=function(i){return i.replace(/(^|;)([^\:]+)/g,function(j){return j.toLowerCase()})});var g=/<(a|area|img|input|source)\b([^>]*)>/gi,l=/([\w-:]+)\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|(?:[^ "'>]+))/gi,r=/^(href|src|name)$/i,B=/(?:<style(?=[ >])[^>]*>[\s\S]*?<\/style>)|(?:<(:?link|meta|base)[^>]*>)/gi,t=/(<textarea(?=[ >])[^>]*>)([\s\S]*?)(?:<\/textarea>)/gi,z=/<cke:encoded>([^<]*)<\/cke:encoded>/gi,h=/(<\/?)((?:object|embed|param|html|body|head|title)[^>]*>)/gi,c=/(<\/?)cke:((?:html|body|head|title)[^>]*>)/gi,n=/<cke:(param|embed)([^>]*?)\/?>(?!\s*<\/cke:\1)/gi})();"use strict";CKEDITOR.htmlParser.element=function(c,b){this.name=c;this.attributes=b||{};this.children=[];var d=c||"",a=d.match(/^cke:(.*)/);a&&(d=a[1]);d=!!(CKEDITOR.dtd.$nonBodyContent[d]||CKEDITOR.dtd.$block[d]||CKEDITOR.dtd.$listItem[d]||CKEDITOR.dtd.$tableContent[d]||CKEDITOR.dtd.$nonEditable[d]||"br"==d);this.isEmpty=!!CKEDITOR.dtd.$empty[c];this.isUnknown=!CKEDITOR.dtd[c];this._={isBlockLike:d,hasInlineStarted:this.isEmpty||!d}};CKEDITOR.htmlParser.cssStyle=function(a){var d={};((a instanceof CKEDITOR.htmlParser.element?a.attributes.style:a)||"").replace(/&quot;/g,'"').replace(/\s*([^ :;]+)\s*:\s*([^;]+)\s*(?=;|$)/g,function(e,b,c){"font-family"==b&&(c=c.replace(/["']/g,""));d[b.toLowerCase()]=c});return{rules:d,populate:function(c){var b=this.toString();b&&(c instanceof CKEDITOR.dom.element?c.setAttribute("style",b):c instanceof CKEDITOR.htmlParser.element?c.attributes.style=b:c.style=b)},toString:function(){var c=[],b;for(b in d){d[b]&&c.push(b,":",d[b],";")}return c.join("")}}};(function(){function b(c){return function(e){return e.type==CKEDITOR.NODE_ELEMENT&&("string"==typeof c?e.name==c:e.name in c)}}var a=function(c,e){c=c[0];e=e[0];return c<e?-1:c>e?1:0},d=CKEDITOR.htmlParser.fragment.prototype;CKEDITOR.htmlParser.element.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_ELEMENT,add:d.add,clone:function(){return new CKEDITOR.htmlParser.element(this.name,this.attributes)},filter:function(e,l){var q=this,f,c;l=q.getFilterContext(l);if(l.off){return !0}if(!q.parent){e.onRoot(l,q)}for(;;){f=q.name;if(!(c=e.onElementName(l,f))){return this.remove(),!1}q.name=c;if(!(q=e.onElement(l,q))){return this.remove(),!1}if(q!==this){return this.replaceWith(q),!1}if(q.name==f){break}if(q.type!=CKEDITOR.NODE_ELEMENT){return this.replaceWith(q),!1}if(!q.name){return this.replaceWithChildren(),!1}}f=q.attributes;var n,k;for(n in f){for(c=f[n];;){if(k=e.onAttributeName(l,n)){if(k!=n){delete f[n],n=k}else{break}}else{delete f[n];break}}k&&(!1===(c=e.onAttribute(l,q,k,c))?delete f[k]:f[k]=c)}q.isEmpty||this.filterChildren(e,!1,l);return !0},filterChildren:d.filterChildren,writeHtml:function(e,n){n&&this.filter(n);var l=this.name,f=[],c=this.attributes,k,g;e.openTag(l,c);for(k in c){f.push([k,c[k]])}e.sortAttributes&&f.sort(a);k=0;for(g=f.length;k<g;k++){c=f[k],e.attribute(c[0],c[1])}e.openTagClose(l,this.isEmpty);this.writeChildrenHtml(e);this.isEmpty||e.closeTag(l)},writeChildrenHtml:d.writeChildrenHtml,replaceWithChildren:function(){for(var c=this.children,e=c.length;e;){c[--e].insertAfter(this)}this.remove()},forEach:d.forEach,getFirst:function(c){if(!c){return this.children.length?this.children[0]:null}"function"!=typeof c&&(c=b(c));for(var e=0,f=this.children.length;e<f;++e){if(c(this.children[e])){return this.children[e]}}return null},getHtml:function(){var c=new CKEDITOR.htmlParser.basicWriter;this.writeChildrenHtml(c);return c.getHtml()},setHtml:function(e){e=this.children=CKEDITOR.htmlParser.fragment.fromHtml(e).children;for(var f=0,c=e.length;f<c;++f){e[f].parent=this}},getOuterHtml:function(){var c=new CKEDITOR.htmlParser.basicWriter;this.writeHtml(c);return c.getHtml()},split:function(e){for(var k=this.children.splice(e,this.children.length-e),c=this.clone(),f=0;f<k.length;++f){k[f].parent=c}c.children=k;k[0]&&(k[0].previous=null);0<e&&(this.children[e-1].next=null);this.parent.add(c,this.getIndex()+1);return c},addClass:function(c){if(!this.hasClass(c)){var e=this.attributes["class"]||"";this.attributes["class"]=e+(e?" ":"")+c}},removeClass:function(c){var e=this.attributes["class"];e&&((e=CKEDITOR.tools.trim(e.replace(new RegExp("(?:\\s+|^)"+c+"(?:\\s+|$)")," ")))?this.attributes["class"]=e:delete this.attributes["class"])},hasClass:function(c){var e=this.attributes["class"];return e?(new RegExp("(?:^|\\s)"+c+"(?\x3d\\s|$)")).test(e):!1},getFilterContext:function(e){var f=[];e||(e={off:!1,nonEditable:!1,nestedEditable:!1});e.off||"off"!=this.attributes["data-cke-processor"]||f.push("off",!0);e.nonEditable||"false"!=this.attributes.contenteditable?e.nonEditable&&!e.nestedEditable&&"true"==this.attributes.contenteditable&&f.push("nestedEditable",!0):f.push("nonEditable",!0);if(f.length){e=CKEDITOR.tools.copy(e);for(var c=0;c<f.length;c+=2){e[f[c]]=f[c+1]}}return e}},!0)})();(function(){var d={},b=/{([^}]+)}/g,e=/([\\'])/g,a=/\n/g,c=/\r/g;CKEDITOR.template=function(f){if(d[f]){this.output=d[f]}else{var g=f.replace(e,"\\$1").replace(a,"\\n").replace(c,"\\r").replace(b,function(h,i){return"',data['"+i+"']\x3d\x3dundefined?'{"+i+"}':data['"+i+"'],'"});this.output=d[f]=Function("data","buffer","return buffer?buffer.push('"+g+"'):['"+g+"'].join('');")}}})();delete CKEDITOR.loadFullCore;CKEDITOR.instances={};CKEDITOR.document=new CKEDITOR.dom.document(document);CKEDITOR.add=function(a){CKEDITOR.instances[a.name]=a;a.on("focus",function(){CKEDITOR.currentInstance!=a&&(CKEDITOR.currentInstance=a,CKEDITOR.fire("currentInstance"))});a.on("blur",function(){CKEDITOR.currentInstance==a&&(CKEDITOR.currentInstance=null,CKEDITOR.fire("currentInstance"))});CKEDITOR.fire("instance",null,a)};CKEDITOR.remove=function(a){delete CKEDITOR.instances[a.name]};(function(){var a={};CKEDITOR.addTemplate=function(d,b){var c=a[d];if(c){return c}c={name:d,source:b};CKEDITOR.fire("template",c);return a[d]=new CKEDITOR.template(c.source)};CKEDITOR.getTemplate=function(b){return a[b]}})();(function(){var a=[];CKEDITOR.addCss=function(b){a.push(b)};CKEDITOR.getCss=function(){return a.join("\n")}})();CKEDITOR.on("instanceDestroyed",function(){CKEDITOR.tools.isEmpty(this.instances)&&CKEDITOR.fire("reset")});CKEDITOR.TRISTATE_ON=1;CKEDITOR.TRISTATE_OFF=2;CKEDITOR.TRISTATE_DISABLED=0;(function(){CKEDITOR.inline=function(c,b){if(!CKEDITOR.env.isCompatible){return null}c=CKEDITOR.dom.element.get(c);if(c.getEditor()){throw'The editor instance "'+c.getEditor().name+'" is already attached to the provided element.'}var d=new CKEDITOR.editor(b,c,CKEDITOR.ELEMENT_MODE_INLINE),a=c.is("textarea")?c:null;a?(d.setData(a.getValue(),null,!0),c=CKEDITOR.dom.element.createFromHtml('\x3cdiv contenteditable\x3d"'+!!d.readOnly+'" class\x3d"cke_textarea_inline"\x3e'+a.getValue()+"\x3c/div\x3e",CKEDITOR.document),c.insertAfter(a),a.hide(),a.$.form&&d._attachToForm()):d.setData(c.getHtml(),null,!0);d.on("loaded",function(){d.fire("uiReady");d.editable(c);d.container=c;d.ui.contentsElement=c;d.setData(d.getData(1));d.resetDirty();d.fire("contentDom");d.mode="wysiwyg";d.fire("mode");d.status="ready";d.fireOnce("instanceReady");CKEDITOR.fire("instanceReady",null,d)},null,null,10000);d.on("destroy",function(){a&&(d.container.clearCustomData(),d.container.remove(),a.show());d.element.clearCustomData();delete d.element});return d};CKEDITOR.inlineAll=function(){var e,b,g;for(g in CKEDITOR.dtd.$editable){for(var a=CKEDITOR.document.getElementsByTag(g),c=0,d=a.count();c<d;c++){e=a.getItem(c),"true"==e.getAttribute("contenteditable")&&(b={element:e,config:{}},!1!==CKEDITOR.fire("inline",b)&&CKEDITOR.inline(e,b.config))}}};CKEDITOR.domReady(function(){!CKEDITOR.disableAutoInline&&CKEDITOR.inlineAll()})})();CKEDITOR.replaceClass="ckeditor";(function(){function b(k,e,f,c){if(!CKEDITOR.env.isCompatible){return null}k=CKEDITOR.dom.element.get(k);if(k.getEditor()){throw'The editor instance "'+k.getEditor().name+'" is already attached to the provided element.'}var g=new CKEDITOR.editor(e,k,c);c==CKEDITOR.ELEMENT_MODE_REPLACE&&(k.setStyle("visibility","hidden"),g._.required=k.hasAttribute("required"),k.removeAttribute("required"));f&&g.setData(f,null,!0);g.on("loaded",function(){d(g);c==CKEDITOR.ELEMENT_MODE_REPLACE&&g.config.autoUpdateElement&&k.$.form&&g._attachToForm();g.setMode(g.config.startupMode,function(){g.resetDirty();g.status="ready";g.fireOnce("instanceReady");CKEDITOR.fire("instanceReady",null,g)})});g.on("destroy",a);return g}function a(){var c=this.container,e=this.element;c&&(c.clearCustomData(),c.remove());e&&(e.clearCustomData(),this.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE&&(e.show(),this._.required&&e.setAttribute("required","required")),delete this.element)}function d(e){var l=e.name,q=e.element,f=e.elementMode,c=e.fire("uiSpace",{space:"top",html:""}).html,n=e.fire("uiSpace",{space:"bottom",html:""}).html,k=new CKEDITOR.template('\x3c{outerEl} id\x3d"cke_{name}" class\x3d"{id} cke cke_reset cke_chrome cke_editor_{name} cke_{langDir} '+CKEDITOR.env.cssClass+'"  dir\x3d"{langDir}" lang\x3d"{langCode}" role\x3d"application"'+(e.title?' aria-labelledby\x3d"cke_{name}_arialbl"':"")+"\x3e"+(e.title?'\x3cspan id\x3d"cke_{name}_arialbl" class\x3d"cke_voice_label"\x3e{voiceLabel}\x3c/span\x3e':"")+'\x3c{outerEl} class\x3d"cke_inner cke_reset" role\x3d"presentation"\x3e{topHtml}\x3c{outerEl} id\x3d"{contentId}" class\x3d"cke_contents cke_reset" role\x3d"presentation"\x3e\x3c/{outerEl}\x3e{bottomHtml}\x3c/{outerEl}\x3e\x3c/{outerEl}\x3e'),l=CKEDITOR.dom.element.createFromHtml(k.output({id:e.id,name:l,langDir:e.lang.dir,langCode:e.langCode,voiceLabel:e.title,topHtml:c?'\x3cspan id\x3d"'+e.ui.spaceId("top")+'" class\x3d"cke_top cke_reset_all" role\x3d"presentation" style\x3d"height:auto"\x3e'+c+"\x3c/span\x3e":"",contentId:e.ui.spaceId("contents"),bottomHtml:n?'\x3cspan id\x3d"'+e.ui.spaceId("bottom")+'" class\x3d"cke_bottom cke_reset_all" role\x3d"presentation"\x3e'+n+"\x3c/span\x3e":"",outerEl:CKEDITOR.env.ie?"span":"div"}));f==CKEDITOR.ELEMENT_MODE_REPLACE?(q.hide(),l.insertAfter(q)):q.append(l);e.container=l;e.ui.contentsElement=e.ui.space("contents");c&&e.ui.space("top").unselectable();n&&e.ui.space("bottom").unselectable();q=e.config.width;f=e.config.height;q&&l.setStyle("width",CKEDITOR.tools.cssLength(q));f&&e.ui.space("contents").setStyle("height",CKEDITOR.tools.cssLength(f));l.disableContextMenu();CKEDITOR.env.webkit&&l.on("focus",function(){e.focus()});e.fireOnce("uiReady")}CKEDITOR.replace=function(c,e){return b(c,e,null,CKEDITOR.ELEMENT_MODE_REPLACE)};CKEDITOR.appendTo=function(c,e,f){return b(c,e,f,CKEDITOR.ELEMENT_MODE_APPENDTO)};CKEDITOR.replaceAll=function(){for(var e=document.getElementsByTagName("textarea"),k=0;k<e.length;k++){var c=null,f=e[k];if(f.name||f.id){if("string"==typeof arguments[0]){if(!(new RegExp("(?:^|\\s)"+arguments[0]+"(?:$|\\s)")).test(f.className)){continue}}else{if("function"==typeof arguments[0]&&(c={},!1===arguments[0](f,c))){continue}}this.replace(f,c)}}};CKEDITOR.editor.prototype.addMode=function(c,e){(this._.modes||(this._.modes={}))[c]=e};CKEDITOR.editor.prototype.setMode=function(e,l){var q=this,f=this._.modes;if(e!=q.mode&&f&&f[e]){q.fire("beforeSetMode",e);if(q.mode){var c=q.checkDirty(),f=q._.previousModeData,n,k=0;q.fire("beforeModeUnload");q.editable(0);q._.previousMode=q.mode;q._.previousModeData=n=q.getData(1);"source"==q.mode&&f==n&&(q.fire("lockSnapshot",{forceUpdate:!0}),k=1);q.ui.space("contents").setHtml("");q.mode=""}else{q._.previousModeData=q.getData(1)}this._.modes[e](function(){q.mode=e;void 0!==c&&!c&&q.resetDirty();k?q.fire("unlockSnapshot"):"wysiwyg"==e&&q.fire("saveSnapshot");setTimeout(function(){q.fire("mode");l&&l.call(q)},0)})}};CKEDITOR.editor.prototype.resize=function(e,l,r,f){var c=this.container,n=this.ui.space("contents"),k=CKEDITOR.env.webkit&&this.document&&this.document.getWindow().$.frameElement;f=f?this.container.getFirst(function(g){return g.type==CKEDITOR.NODE_ELEMENT&&g.hasClass("cke_inner")}):c;f.setSize("width",e,!0);k&&(k.style.width="1%");var s=(f.$.offsetHeight||0)-(n.$.clientHeight||0),c=Math.max(l-(r?0:s),0);l=r?l+s:l;n.setStyle("height",c+"px");k&&(k.style.width="100%");this.fire("resize",{outerHeight:l,contentsHeight:c,outerWidth:e||f.getSize("width")})};CKEDITOR.editor.prototype.getResizable=function(c){return c?this.ui.space("contents"):this.container};CKEDITOR.domReady(function(){CKEDITOR.replaceClass&&CKEDITOR.replaceAll(CKEDITOR.replaceClass)})})();CKEDITOR.config.startupMode="wysiwyg";(function(){function a(i){var o=i.editor,j=i.data.path,r=j.blockLimit,m=i.data.selection,p=m.getRanges()[0],h;if(CKEDITOR.env.gecko||CKEDITOR.env.ie&&CKEDITOR.env.needsBrFiller){if(m=e(m,j)){m.appendBogus(),h=CKEDITOR.env.ie}}t(o,j.block,r)&&p.collapsed&&!p.getCommonAncestor().isReadOnly()&&(j=p.clone(),j.enlarge(CKEDITOR.ENLARGE_BLOCK_CONTENTS),r=new CKEDITOR.dom.walker(j),r.guard=function(s){return !d(s)||s.type==CKEDITOR.NODE_COMMENT||s.isReadOnly()},!r.checkForward()||j.checkStartOfBlock()&&j.checkEndOfBlock())&&(o=p.fixBlock(!0,o.activeEnterMode==CKEDITOR.ENTER_DIV?"div":"p"),CKEDITOR.env.needsBrFiller||(o=o.getFirst(d))&&o.type==CKEDITOR.NODE_TEXT&&CKEDITOR.tools.trim(o.getText()).match(/^(?:&nbsp;|\xa0)$/)&&o.remove(),h=1,i.cancel());h&&p.select()}function e(j,m){if(j.isFake){return 0}var h=m.block||m.blockLimit,i=h&&h.getLast(d);if(!(!h||!h.isBlockBoundary()||i&&i.type==CKEDITOR.NODE_ELEMENT&&i.isBlockBoundary()||h.is("pre")||h.getBogus())){return h}}function b(h){var i=h.data.getTarget();i.is("input")&&(i=i.getAttribute("type"),"submit"!=i&&"reset"!=i||h.data.preventDefault())}function d(h){return g(h)&&B(h)}function f(h,i){return function(j){var m=j.data.$.toElement||j.data.$.fromElement||j.data.$.relatedTarget;(m=m&&m.nodeType==CKEDITOR.NODE_ELEMENT?new CKEDITOR.dom.element(m):null)&&(i.equals(m)||i.contains(m))||h.call(this,j)}}function l(j){function p(r){return function(s,v){v&&s.type==CKEDITOR.NODE_ELEMENT&&s.is(h)&&(m=s);if(!(v||!d(s)||r&&x(s))){return !1}}}var m,o=j.getRanges()[0];j=j.root;var h={table:1,ul:1,ol:1,dl:1};if(o.startPath().contains(h)){var i=o.clone();i.collapse(1);i.setStartAt(j,CKEDITOR.POSITION_AFTER_START);j=new CKEDITOR.dom.walker(i);j.guard=p();j.checkBackward();if(m){return i=o.clone(),i.collapse(),i.setEndAt(m,CKEDITOR.POSITION_AFTER_END),j=new CKEDITOR.dom.walker(i),j.guard=p(!0),m=!1,j.checkForward(),m}}return null}function t(i,j,h){return !1!==i.config.autoParagraph&&i.activeEnterMode!=CKEDITOR.ENTER_BR&&(i.editable().equals(h)&&!j||j&&"true"==j.getAttribute("contenteditable"))}function q(h){return h.activeEnterMode!=CKEDITOR.ENTER_BR&&!1!==h.config.autoParagraph?h.activeEnterMode==CKEDITOR.ENTER_DIV?"div":"p":!1}function c(h){var i=h.editor;i.getSelection().scrollIntoView();setTimeout(function(){i.fire("saveSnapshot")},0)}function A(j,m,h){var i=j.getCommonAncestor(m);for(m=j=h?m:j;(j=j.getParent())&&!i.equals(j)&&1==j.getChildCount();){m=j}m.remove()}CKEDITOR.editable=CKEDITOR.tools.createClass({base:CKEDITOR.dom.element,$:function(h,i){this.base(i.$||i);this.editor=h;this.status="unloaded";this.hasFocus=!1;this.setup()},proto:{focus:function(){var h;if(CKEDITOR.env.webkit&&!this.hasFocus&&(h=this.editor._.previousActive||this.getDocument().getActive(),this.contains(h))){h.focus();return}try{this.$[CKEDITOR.env.ie&&this.getDocument().equals(CKEDITOR.document)?"setActive":"focus"]()}catch(i){if(!CKEDITOR.env.ie){throw i}}CKEDITOR.env.safari&&!this.isInline()&&(h=CKEDITOR.document.getActive(),h.equals(this.getWindow().getFrame())||this.getWindow().focus())},on:function(i,j){var h=Array.prototype.slice.call(arguments,0);CKEDITOR.env.ie&&/^focus|blur$/.exec(i)&&(i="focus"==i?"focusin":"focusout",j=f(j,this),h[0]=i,h[1]=j);return CKEDITOR.dom.element.prototype.on.apply(this,h)},attachListener:function(h){!this._.listeners&&(this._.listeners=[]);var i=Array.prototype.slice.call(arguments,1),i=h.on.apply(h,i);this._.listeners.push(i);return i},clearListeners:function(){var h=this._.listeners;try{for(;h.length;){h.pop().removeListener()}}catch(i){}},restoreAttrs:function(){var i=this._.attrChanges,j,h;for(h in i){i.hasOwnProperty(h)&&(j=i[h],null!==j?this.setAttribute(h,j):this.removeAttribute(h))}},attachClass:function(h){var i=this.getCustomData("classes");this.hasClass(h)||(!i&&(i=[]),i.push(h),this.setCustomData("classes",i),this.addClass(h))},changeAttr:function(i,j){var h=this.getAttribute(i);j!==h&&(!this._.attrChanges&&(this._.attrChanges={}),i in this._.attrChanges||(this._.attrChanges[i]=h),this.setAttribute(i,j))},insertText:function(h){this.editor.focus();this.insertHtml(this.transformPlainTextToHtml(h),"text")},transformPlainTextToHtml:function(h){var i=this.editor.getSelection().getStartElement().hasAscendant("pre",!0)?CKEDITOR.ENTER_BR:this.editor.activeEnterMode;return CKEDITOR.tools.transformPlainTextToHtml(h,i)},insertHtml:function(j,m,h){var i=this.editor;i.focus();i.fire("saveSnapshot");h||(h=i.getSelection().getRanges()[0]);n(this,m||"html",j,h);h.select();c(this);this.editor.fire("afterInsertHtml",{})},insertHtmlIntoRange:function(i,j,h){n(this,h||"html",i,j);this.editor.fire("afterInsertHtml",{intoRange:j})},insertElement:function(j,o){var m=this.editor;m.focus();m.fire("saveSnapshot");var h=m.activeEnterMode,m=m.getSelection(),i=j.getName(),i=CKEDITOR.dtd.$block[i];o||(o=m.getRanges()[0]);this.insertElementIntoRange(j,o)&&(o.moveToPosition(j,CKEDITOR.POSITION_AFTER_END),i&&((i=j.getNext(function(p){return d(p)&&!x(p)}))&&i.type==CKEDITOR.NODE_ELEMENT&&i.is(CKEDITOR.dtd.$block)?i.getDtd()["#"]?o.moveToElementEditStart(i):o.moveToElementEditEnd(j):i||h==CKEDITOR.ENTER_BR||(i=o.fixBlock(!0,h==CKEDITOR.ENTER_DIV?"div":"p"),o.moveToElementEditStart(i))));m.selectRanges([o]);c(this)},insertElementIntoSelection:function(h){this.insertElement(h)},insertElementIntoRange:function(p,j){var s=this.editor,h=s.config.enterMode,i=p.getName(),m=CKEDITOR.dtd.$block[i];if(j.checkReadOnly()){return !1}j.deleteContents(1);j.startContainer.type==CKEDITOR.NODE_ELEMENT&&j.startContainer.is({tr:1,table:1,tbody:1,thead:1,tfoot:1})&&F(j);var o,r;if(m){for(;(o=j.getCommonAncestor(0,1))&&(r=CKEDITOR.dtd[o.getName()])&&(!r||!r[i]);){o.getName() in CKEDITOR.dtd.span?j.splitElement(o):j.checkStartOfBlock()&&j.checkEndOfBlock()?(j.setStartBefore(o),j.collapse(!0),o.remove()):j.splitBlock(h==CKEDITOR.ENTER_DIV?"div":"p",s.editable())}}j.insertNode(p);return !0},setData:function(h,i){i||(h=this.editor.dataProcessor.toHtml(h));this.setHtml(h);this.fixInitialSelection();"unloaded"==this.status&&(this.status="ready");this.editor.fire("dataReady")},getData:function(h){var i=this.getHtml();h||(i=this.editor.dataProcessor.toDataFormat(i));return i},setReadOnly:function(h){this.setAttribute("contenteditable",!h)},detach:function(){this.removeClass("cke_editable");this.status="detached";var h=this.editor;this._.detach();delete h.document;delete h.window},isInline:function(){return this.getDocument().equals(CKEDITOR.document)},fixInitialSelection:function(){function i(){var m=h.getDocument().$,o=m.getSelection(),p;i:if(o.anchorNode&&o.anchorNode==h.$){p=!0}else{if(CKEDITOR.env.webkit&&(p=h.getDocument().getActive())&&p.equals(h)&&!o.anchorNode){p=!0;break i}p=void 0}p&&(p=new CKEDITOR.dom.range(h),p.moveToElementEditStart(h),m=m.createRange(),m.setStart(p.startContainer.$,p.startOffset),m.collapse(!0),o.removeAllRanges(),o.addRange(m))}function j(){var m=h.getDocument().$,o=m.selection,p=h.getDocument().getActive();"None"==o.type&&p.equals(h)&&(o=new CKEDITOR.dom.range(h),m=m.body.createTextRange(),o.moveToElementEditStart(h),o=o.startContainer,o.type!=CKEDITOR.NODE_ELEMENT&&(o=o.getParent()),m.moveToElementText(o.$),m.collapse(!0),m.select())}var h=this;if(CKEDITOR.env.ie&&(9>CKEDITOR.env.version||CKEDITOR.env.quirks)){this.hasFocus&&(this.focus(),j())}else{if(this.hasFocus){this.focus(),i()}else{this.once("focus",function(){i()},null,null,-999)}}},getHtmlFromRange:function(h){if(h.collapsed){return new CKEDITOR.dom.documentFragment(h.document)}h={doc:this.getDocument(),range:h.clone()};y.eol.detect(h,this);y.bogus.exclude(h);y.cell.shrink(h);h.fragment=h.range.cloneContents();y.tree.rebuild(h,this);y.eol.fix(h,this);return new CKEDITOR.dom.documentFragment(h.fragment.$)},extractHtmlFromRange:function(i,j){var h=w,m={range:i,doc:i.document},o=this.getHtmlFromRange(i);if(i.collapsed){return i.optimize(),o}i.enlarge(CKEDITOR.ENLARGE_INLINE,1);h.table.detectPurge(m);m.bookmark=i.createBookmark();delete m.range;var p=this.editor.createRange();p.moveToPosition(m.bookmark.startNode,CKEDITOR.POSITION_BEFORE_START);m.targetBookmark=p.createBookmark();h.list.detectMerge(m,this);h.table.detectRanges(m,this);h.block.detectMerge(m,this);m.tableContentsRanges?(h.table.deleteRanges(m),i.moveToBookmark(m.bookmark),m.range=i):(i.moveToBookmark(m.bookmark),m.range=i,i.extractContents(h.detectExtractMerge(m)));i.moveToBookmark(m.targetBookmark);i.optimize();h.fixUneditableRangePosition(i);h.list.merge(m,this);h.table.purge(m,this);h.block.merge(m,this);if(j){h=i.startPath();if(m=i.checkStartOfBlock()&&i.checkEndOfBlock()&&h.block&&!i.root.equals(h.block)){i:{var m=h.block.getElementsByTag("span"),p=0,r;if(m){for(;r=m.getItem(p++);){if(!B(r)){m=!0;break i}}}m=!1}m=!m}m&&(i.moveToPosition(h.block,CKEDITOR.POSITION_BEFORE_START),h.block.remove())}else{h.autoParagraph(this.editor,i),k(i.startContainer)&&i.startContainer.appendBogus()}i.startContainer.mergeSiblings();return o},setup:function(){var m=this.editor;this.attachListener(m,"beforeGetData",function(){var p=this.getData();this.is("textarea")||!1!==m.config.ignoreEmptyParagraph&&(p=p.replace(u,function(r,s){return s}));m.setData(p,null,1)},this);this.attachListener(m,"getSnapshot",function(p){p.data=this.getData(1)},this);this.attachListener(m,"afterSetData",function(){this.setData(m.getData(1))},this);this.attachListener(m,"loadSnapshot",function(p){this.setData(p.data,1)},this);this.attachListener(m,"beforeFocus",function(){var p=m.getSelection();(p=p&&p.getNative())&&"Control"==p.type||this.focus()},this);this.attachListener(m,"insertHtml",function(p){this.insertHtml(p.data.dataValue,p.data.mode,p.data.range)},this);this.attachListener(m,"insertElement",function(p){this.insertElement(p.data)},this);this.attachListener(m,"insertText",function(p){this.insertText(p.data)},this);this.setReadOnly(m.readOnly);this.attachClass("cke_editable");m.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?this.attachClass("cke_editable_inline"):m.elementMode!=CKEDITOR.ELEMENT_MODE_REPLACE&&m.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO||this.attachClass("cke_editable_themed");this.attachClass("cke_contents_"+m.config.contentsLangDirection);m.keystrokeHandler.blockedKeystrokes[8]=+m.readOnly;m.keystrokeHandler.attach(this);this.on("blur",function(){this.hasFocus=!1},null,null,-1);this.on("focus",function(){this.hasFocus=!0},null,null,-1);m.focusManager.add(this);this.equals(CKEDITOR.document.getActive())&&(this.hasFocus=!0,m.once("contentDom",function(){m.focusManager.focus(this)},this));this.isInline()&&this.changeAttr("tabindex",m.tabIndex);if(!this.is("textarea")){m.document=this.getDocument();m.window=this.getWindow();var i=m.document;this.changeAttr("spellcheck",!m.config.disableNativeSpellChecker);var j=m.config.contentsLangDirection;this.getDirection(1)!=j&&this.changeAttr("dir",j);var h=CKEDITOR.getCss();h&&(j=i.getHead(),j.getCustomData("stylesheet")||(h=i.appendStyleText(h),h=new CKEDITOR.dom.element(h.ownerNode||h.owningElement),j.setCustomData("stylesheet",h),h.data("cke-temp",1)));j=i.getCustomData("stylesheet_ref")||0;i.setCustomData("stylesheet_ref",j+1);this.setCustomData("cke_includeReadonly",!m.config.disableReadonlyStyling);this.attachListener(this,"click",function(p){p=p.data;var r=(new CKEDITOR.dom.elementPath(p.getTarget(),this)).contains("a");r&&2!=p.$.button&&r.isReadOnly()&&p.preventDefault()});var o={8:1,46:1};this.attachListener(m,"key",function(C){if(m.readOnly){return !0}var D=C.data.domEvent.getKey(),E;if(D in o){C=m.getSelection();var p,G=C.getRanges()[0],s=G.startPath(),z,v,r,D=8==D;CKEDITOR.env.ie&&11>CKEDITOR.env.version&&(p=C.getSelectedElement())||(p=l(C))?(m.fire("saveSnapshot"),G.moveToPosition(p,CKEDITOR.POSITION_BEFORE_START),p.remove(),G.select(),m.fire("saveSnapshot"),E=1):G.collapsed&&((z=s.block)&&(r=z[D?"getPrevious":"getNext"](g))&&r.type==CKEDITOR.NODE_ELEMENT&&r.is("table")&&G[D?"checkStartOfBlock":"checkEndOfBlock"]()?(m.fire("saveSnapshot"),G[D?"checkEndOfBlock":"checkStartOfBlock"]()&&z.remove(),G["moveToElementEdit"+(D?"End":"Start")](r),G.select(),m.fire("saveSnapshot"),E=1):s.blockLimit&&s.blockLimit.is("td")&&(v=s.blockLimit.getAscendant("table"))&&G.checkBoundaryOfElement(v,D?CKEDITOR.START:CKEDITOR.END)&&(r=v[D?"getPrevious":"getNext"](g))?(m.fire("saveSnapshot"),G["moveToElementEdit"+(D?"End":"Start")](r),G.checkStartOfBlock()&&G.checkEndOfBlock()?r.remove():G.select(),m.fire("saveSnapshot"),E=1):(v=s.contains(["td","th","caption"]))&&G.checkBoundaryOfElement(v,D?CKEDITOR.START:CKEDITOR.END)&&(E=1))}return !E});m.blockless&&CKEDITOR.env.ie&&CKEDITOR.env.needsBrFiller&&this.attachListener(this,"keyup",function(p){p.data.getKeystroke() in o&&!this.getFirst(d)&&(this.appendBogus(),p=m.createRange(),p.moveToPosition(this,CKEDITOR.POSITION_AFTER_START),p.select())});this.attachListener(this,"dblclick",function(p){if(m.readOnly){return !1}p={element:p.data.getTarget()};m.fire("doubleclick",p)});CKEDITOR.env.ie&&this.attachListener(this,"click",b);CKEDITOR.env.ie&&!CKEDITOR.env.edge||this.attachListener(this,"mousedown",function(p){var r=p.data.getTarget();r.is("img","hr","input","textarea","select")&&!r.isReadOnly()&&(m.getSelection().selectElement(r),r.is("input","textarea","select")&&p.data.preventDefault())});CKEDITOR.env.edge&&this.attachListener(this,"mouseup",function(p){(p=p.data.getTarget())&&p.is("img")&&m.getSelection().selectElement(p)});CKEDITOR.env.gecko&&this.attachListener(this,"mouseup",function(p){if(2==p.data.$.button&&(p=p.data.getTarget(),!p.getOuterHtml().replace(u,""))){var r=m.createRange();r.moveToElementEditStart(p);r.select(!0)}});CKEDITOR.env.webkit&&(this.attachListener(this,"click",function(p){p.data.getTarget().is("input","select")&&p.data.preventDefault()}),this.attachListener(this,"mouseup",function(p){p.data.getTarget().is("input","textarea")&&p.data.preventDefault()}));CKEDITOR.env.webkit&&this.attachListener(m,"key",function(r){if(m.readOnly){return !0}r=r.data.domEvent.getKey();if(r in o){var s=8==r,v=m.getSelection().getRanges()[0];r=v.startPath();if(v.collapsed){m:{var C=r.block;if(C&&v[s?"checkStartOfBlock":"checkEndOfBlock"]()&&v.moveToClosestEditablePosition(C,!s)&&v.collapsed){if(v.startContainer.type==CKEDITOR.NODE_ELEMENT){var z=v.startContainer.getChild(v.startOffset-(s?1:0));if(z&&z.type==CKEDITOR.NODE_ELEMENT&&z.is("hr")){m.fire("saveSnapshot");z.remove();r=!0;break m}}v=v.startPath().block;if(!v||v&&v.contains(C)){r=void 0}else{m.fire("saveSnapshot");var p;(p=(s?v:C).getBogus())&&p.remove();p=m.getSelection();z=p.createBookmarks();(s?C:v).moveChildren(s?v:C,!1);r.lastElement.mergeSiblings();A(C,v,!s);p.selectBookmarks(z);r=!0}}else{r=!1}}}else{s=v,p=r.block,v=s.endPath().block,p&&v&&!p.equals(v)?(m.fire("saveSnapshot"),(C=p.getBogus())&&C.remove(),s.enlarge(CKEDITOR.ENLARGE_INLINE),s.deleteContents(),v.getParent()&&(v.moveChildren(p,!1),r.lastElement.mergeSiblings(),A(p,v,!0)),s=m.getSelection().getRanges()[0],s.collapse(1),s.optimize(),""===s.startContainer.getHtml()&&s.startContainer.appendBogus(),s.select(),r=!0):r=!1}if(!r){return}m.getSelection().scrollIntoView();m.fire("saveSnapshot");return !1}},this,null,100)}}},_:{detach:function(){this.editor.setData(this.editor.getData(),0,1);this.clearListeners();this.restoreAttrs();var i;if(i=this.removeCustomData("classes")){for(;i.length;){this.removeClass(i.pop())}}if(!this.is("textarea")){i=this.getDocument();var j=i.getHead();if(j.getCustomData("stylesheet")){var h=i.getCustomData("stylesheet_ref");--h?i.setCustomData("stylesheet_ref",h):(i.removeCustomData("stylesheet_ref"),j.removeCustomData("stylesheet").remove())}}this.editor.fire("contentDomUnload");delete this.editor}}});CKEDITOR.editor.prototype.editable=function(h){var i=this._.editable;if(i&&h){return 0}arguments.length&&(i=this._.editable=h?h instanceof CKEDITOR.editable?h:new CKEDITOR.editable(this,h):(i&&i.detach(),null));return i};CKEDITOR.on("instanceLoaded",function(h){var i=h.editor;i.on("insertElement",function(j){j=j.data;j.type==CKEDITOR.NODE_ELEMENT&&(j.is("input")||j.is("textarea"))&&("false"!=j.getAttribute("contentEditable")&&j.data("cke-editable",j.hasAttribute("contenteditable")?"true":"1"),j.setAttribute("contentEditable",!1))});i.on("selectionChange",function(m){if(!i.readOnly){var j=i.getSelection();j&&!j.isLocked&&(j=i.checkDirty(),i.fire("lockSnapshot"),a(m),i.fire("unlockSnapshot"),!j&&i.resetDirty())}})});CKEDITOR.on("instanceCreated",function(h){var i=h.editor;i.on("mode",function(){var j=i.editable();if(j&&j.isInline()){var m=i.title;j.changeAttr("role","textbox");j.changeAttr("aria-label",m);m&&j.changeAttr("title",m);var o=i.fire("ariaEditorHelpLabel",{}).label;if(o&&(m=this.ui.space(this.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?"top":"contents"))){var p=CKEDITOR.tools.getNextId(),o=CKEDITOR.dom.element.createFromHtml('\x3cspan id\x3d"'+p+'" class\x3d"cke_voice_label"\x3e'+o+"\x3c/span\x3e");m.append(o);j.changeAttr("aria-describedby",p)}}})});CKEDITOR.addCss(".cke_editable{cursor:text}.cke_editable img,.cke_editable input,.cke_editable textarea{cursor:default}");var g=CKEDITOR.dom.walker.whitespaces(!0),B=CKEDITOR.dom.walker.bookmark(!1,!0),k=CKEDITOR.dom.walker.empty(),x=CKEDITOR.dom.walker.bogus(),u=/(^|<body\b[^>]*>)\s*<(p|div|address|h\d|center|pre)[^>]*>\s*(?:<br[^>]*>|&nbsp;|\u00A0|&#160;)?\s*(:?<\/\2>)?\s*(?=$|<\/body>)/gi,n=function(){function h(D){return D.type==CKEDITOR.NODE_ELEMENT}function i(I,J){var K,ab,L,D,N=[],aa=J.range.startContainer;K=J.range.startPath();for(var aa=p[aa.getName()],ae=0,Z=I.getChildren(),ad=Z.count(),E=-1,ac=-1,G=0,H=K.contains(p.$list);ae<ad;++ae){K=Z.getItem(ae),h(K)?(L=K.getName(),H&&L in CKEDITOR.dtd.$list?N=N.concat(i(K,J)):(D=!!aa[L],"br"!=L||!K.data("cke-eol")||ae&&ae!=ad-1||(G=(ab=ae?N[ae-1].node:Z.getItem(ae+1))&&(!h(ab)||!ab.is("br")),ab=ab&&h(ab)&&p.$block[ab.getName()]),-1!=E||D||(E=ae),D||(ac=ae),N.push({isElement:1,isLineBreak:G,isBlock:K.isBlockBoundary(),hasBlockSibling:ab,node:K,name:L,allowed:D}),ab=G=0)):N.push({isElement:0,node:K,allowed:1})}-1<E&&(N[E].firstNotAllowed=1);-1<ac&&(N[ac].lastNotAllowed=1);return N}function r(G,H){var I=[],D=G.getChildren(),K=D.count(),J,N=0,E=p[H],L=!G.is(p.$inline)||G.is("br");for(L&&I.push(" ");N<K;N++){J=D.getItem(N),h(J)&&!J.is(E)?I=I.concat(r(J,H)):I.push(J)}L&&I.push(" ");return I}function v(D){return h(D.startContainer)&&D.startContainer.getChild(D.startOffset-1)}function C(D){return D&&h(D)&&(D.is(p.$removeEmpty)||D.is("a")&&!D.isBlockBoundary())}function j(G,I,K,E){var J=G.clone(),D,H;J.setEndAt(I,CKEDITOR.POSITION_BEFORE_END);(D=(new CKEDITOR.dom.walker(J)).next())&&h(D)&&m[D.getName()]&&(H=D.getPrevious())&&h(H)&&!H.getParent().equals(G.startContainer)&&K.contains(H)&&E.contains(D)&&D.isIdentical(H)&&(D.moveChildren(H),D.remove(),j(G,I,K,E))}function o(D,H){function I(K,J){if(J.isBlock&&J.isElement&&!J.node.is("br")&&h(K)&&K.is("br")){return K.remove(),1}}var E=H.endContainer.getChild(H.endOffset),G=H.endContainer.getChild(H.endOffset-1);E&&I(E,D[D.length-1]);G&&I(G,D[0])&&(H.setEnd(H.endContainer,H.endOffset-1),H.collapse())}var p=CKEDITOR.dtd,m={p:1,div:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,ul:1,ol:1,li:1,pre:1,dl:1,blockquote:1},z={p:1,div:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1},s=CKEDITOR.tools.extend({},p.$inline);delete s.br;return function(P,am,X,D){var ah=P.editor,I=!1;"unfiltered_html"==am&&(am="html",I=!0);if(!D.checkReadOnly()){var G=(new CKEDITOR.dom.elementPath(D.startContainer,D.root)).blockLimit||D.root;P={type:am,dontFilter:I,editable:P,editor:ah,range:D,blockLimit:G,mergeCandidates:[],zombies:[]};am=P.range;D=P.mergeCandidates;var H,aj;"text"==P.type&&am.shrink(CKEDITOR.SHRINK_ELEMENT,!0,!1)&&(H=CKEDITOR.dom.element.createFromHtml("\x3cspan\x3e\x26nbsp;\x3c/span\x3e",am.document),am.insertNode(H),am.setStartAfter(H));I=new CKEDITOR.dom.elementPath(am.startContainer);P.endPath=G=new CKEDITOR.dom.elementPath(am.endContainer);if(!am.collapsed){var ah=G.block||G.blockLimit,E=am.getCommonAncestor();ah&&!ah.equals(E)&&!ah.contains(E)&&am.checkEndOfBlock()&&P.zombies.push(ah);am.deleteContents()}for(;(aj=v(am))&&h(aj)&&aj.isBlockBoundary()&&I.contains(aj);){am.moveToPosition(aj,CKEDITOR.POSITION_BEFORE_END)}j(am,P.blockLimit,I,G);H&&(am.setEndBefore(H),am.collapse(),H.remove());H=am.startPath();if(ah=H.contains(C,!1,1)){am.splitElement(ah),P.inlineStylesRoot=ah,P.inlineStylesPeak=H.lastElement}H=am.createBookmark();(ah=H.startNode.getPrevious(d))&&h(ah)&&C(ah)&&D.push(ah);(ah=H.startNode.getNext(d))&&h(ah)&&C(ah)&&D.push(ah);for(ah=H.startNode;(ah=ah.getParent())&&C(ah);){D.push(ah)}am.moveToBookmark(H);if(H=X){H=P.range;if("text"==P.type&&P.inlineStylesRoot){aj=P.inlineStylesPeak;am=aj.getDocument().createText("{cke-peak}");for(D=P.inlineStylesRoot.getParent();!aj.equals(D);){am=am.appendTo(aj.clone()),aj=aj.getParent()}X=am.getOuterHtml().split("{cke-peak}").join(X)}aj=P.blockLimit.getName();if(/^\s+|\s+$/.test(X)&&"span" in CKEDITOR.dtd[aj]){var T='\x3cspan data-cke-marker\x3d"1"\x3e\x26nbsp;\x3c/span\x3e';X=T+X+T}X=P.editor.dataProcessor.toHtml(X,{context:null,fixForBody:!1,protectedWhitespaces:!!T,dontFilter:P.dontFilter,filter:P.editor.activeFilter,enterMode:P.editor.activeEnterMode});aj=H.document.createElement("body");aj.setHtml(X);T&&(aj.getFirst().remove(),aj.getLast().remove());if((T=H.startPath().block)&&(1!=T.getChildCount()||!T.getBogus())){h:{var ao;if(1==aj.getChildCount()&&h(ao=aj.getFirst())&&ao.is(z)&&!ao.hasAttribute("contenteditable")){T=ao.getElementsByTag("*");H=0;for(D=T.count();H<D;H++){if(am=T.getItem(H),!am.is(s)){break h}}ao.moveChildren(ao.getParent(1));ao.remove()}}}P.dataWrapper=aj;H=X}if(H){ao=P.range;H=ao.document;var Y;aj=P.blockLimit;D=0;var U,T=[],J,aa;X=ah=0;var ak,ai;am=ao.startContainer;var I=P.endPath.elements[0],al,G=I.getPosition(am),E=!!I.getCommonAncestor(am)&&G!=CKEDITOR.POSITION_IDENTICAL&&!(G&CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_IS_CONTAINED);am=i(P.dataWrapper,P);for(o(am,ao);D<am.length;D++){G=am[D];if(Y=G.isLineBreak){Y=ao;ak=aj;var W=void 0,N=void 0;G.hasBlockSibling?Y=1:(W=Y.startContainer.getAscendant(p.$block,1))&&W.is({div:1,p:1})?(N=W.getPosition(ak),N==CKEDITOR.POSITION_IDENTICAL||N==CKEDITOR.POSITION_CONTAINS?Y=0:(ak=Y.splitElement(W),Y.moveToPosition(ak,CKEDITOR.POSITION_AFTER_START),Y=1)):Y=0}if(Y){X=0<D}else{Y=ao.startPath();!G.isBlock&&t(P.editor,Y.block,Y.blockLimit)&&(aa=q(P.editor))&&(aa=H.createElement(aa),aa.appendBogus(),ao.insertNode(aa),CKEDITOR.env.needsBrFiller&&(U=aa.getBogus())&&U.remove(),ao.moveToPosition(aa,CKEDITOR.POSITION_BEFORE_END));if((Y=ao.startPath().block)&&!Y.equals(J)){if(U=Y.getBogus()){U.remove(),T.push(Y)}J=Y}G.firstNotAllowed&&(ah=1);if(ah&&G.isElement){Y=ao.startContainer;for(ak=null;Y&&!p[Y.getName()][G.name];){if(Y.equals(aj)){Y=null;break}ak=Y;Y=Y.getParent()}if(Y){ak&&(ai=ao.splitElement(ak),P.zombies.push(ai),P.zombies.push(ak))}else{ak=aj.getName();al=!D;Y=D==am.length-1;ak=r(G.node,ak);for(var W=[],N=ak.length,S=0,K=void 0,an=0,ag=-1;S<N;S++){K=ak[S]," "==K?(an||al&&!S||(W.push(new CKEDITOR.dom.text(" ")),ag=W.length),an=1):(W.push(K),an=0)}Y&&ag==W.length&&W.pop();al=W}}if(al){for(;Y=al.pop();){ao.insertNode(Y)}al=0}else{ao.insertNode(G.node)}G.lastNotAllowed&&D<am.length-1&&((ai=E?I:ai)&&ao.setEndAt(ai,CKEDITOR.POSITION_AFTER_START),ah=0);ao.collapse()}}1!=am.length?U=!1:(U=am[0],U=U.isElement&&"false"==U.node.getAttribute("contenteditable"));U&&(X=!0,Y=am[0].node,ao.setStartAt(Y,CKEDITOR.POSITION_BEFORE_START),ao.setEndAt(Y,CKEDITOR.POSITION_AFTER_END));P.dontMoveCaret=X;P.bogusNeededBlocks=T}U=P.range;var L;ai=P.bogusNeededBlocks;for(al=U.createBookmark();J=P.zombies.pop();){J.getParent()&&(aa=U.clone(),aa.moveToElementEditStart(J),aa.removeEmptyBlocksAtEnd())}if(ai){for(;J=ai.pop();){CKEDITOR.env.needsBrFiller?J.appendBogus():J.append(U.document.createText("Â "))}}for(;J=P.mergeCandidates.pop();){J.mergeSiblings()}U.moveToBookmark(al);if(!P.dontMoveCaret){for(J=v(U);J&&h(J)&&!J.is(p.$empty);){if(J.isBlockBoundary()){U.moveToPosition(J,CKEDITOR.POSITION_BEFORE_END)}else{if(C(J)&&J.getHtml().match(/(\s|&nbsp;)$/g)){L=null;break}L=U.clone();L.moveToPosition(J,CKEDITOR.POSITION_BEFORE_END)}J=J.getLast(d)}L&&U.moveToRange(L)}}}}(),F=function(){function i(m){m=new CKEDITOR.dom.walker(m);m.guard=function(o,p){if(p){return !1}if(o.type==CKEDITOR.NODE_ELEMENT){return o.is(CKEDITOR.dtd.$tableContent)}};m.evaluator=function(o){return o.type==CKEDITOR.NODE_ELEMENT};return m}function j(m,o,p){o=m.getDocument().createElement(o);m.append(o,p);return o}function h(o){var p=o.count(),m;for(p;0<p--;){m=o.getItem(p),CKEDITOR.tools.trim(m.getHtml())||(m.appendBogus(),CKEDITOR.env.ie&&9>CKEDITOR.env.version&&m.getChildCount()&&m.getFirst().remove())}}return function(p){var r=p.startContainer,m=r.getAscendant("table",1),o=!1;h(m.getElementsByTag("td"));h(m.getElementsByTag("th"));m=p.clone();m.setStart(r,0);m=i(m).lastBackward();m||(m=p.clone(),m.setEndAt(r,CKEDITOR.POSITION_BEFORE_END),m=i(m).lastForward(),o=!0);m||(m=r);m.is("table")?(p.setStartAt(m,CKEDITOR.POSITION_BEFORE_START),p.collapse(!0),m.remove()):(m.is({tbody:1,thead:1,tfoot:1})&&(m=j(m,"tr",o)),m.is("tr")&&(m=j(m,m.getParent().is("thead")?"th":"td",o)),(r=m.getBogus())&&r.remove(),p.moveToPosition(m,o?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_BEFORE_END))}}(),y={eol:{detect:function(i,j){var h=i.range,m=h.clone(),o=h.clone(),p=new CKEDITOR.dom.elementPath(h.startContainer,j),r=new CKEDITOR.dom.elementPath(h.endContainer,j);m.collapse(1);o.collapse();p.block&&m.checkBoundaryOfElement(p.block,CKEDITOR.END)&&(h.setStartAfter(p.block),i.prependEolBr=1);r.block&&o.checkBoundaryOfElement(r.block,CKEDITOR.START)&&(h.setEndBefore(r.block),i.appendEolBr=1)},fix:function(j,m){var h=m.getDocument(),i;j.appendEolBr&&(i=this.createEolBr(h),j.fragment.append(i));!j.prependEolBr||i&&!i.getPrevious()||j.fragment.append(this.createEolBr(h),1)},createEolBr:function(h){return h.createElement("br",{attributes:{"data-cke-eol":1}})}},bogus:{exclude:function(i){var j=i.range.getBoundaryNodes(),h=j.startNode,j=j.endNode;!j||!x(j)||h&&h.equals(j)||i.range.setEndBefore(j)}},tree:{rebuild:function(i,j){var o=i.range,p=o.getCommonAncestor(),r=new CKEDITOR.dom.elementPath(p,j),s=new CKEDITOR.dom.elementPath(o.startContainer,j),o=new CKEDITOR.dom.elementPath(o.endContainer,j),v;p.type==CKEDITOR.NODE_TEXT&&(p=p.getParent());if(r.blockLimit.is({tr:1,table:1})){var m=r.contains("table").getParent();v=function(z){return !z.equals(m)}}else{if(r.block&&r.block.is(CKEDITOR.dtd.$listItem)&&(s=s.contains(CKEDITOR.dtd.$list),o=o.contains(CKEDITOR.dtd.$list),!s.equals(o))){var h=r.contains(CKEDITOR.dtd.$list).getParent();v=function(z){return !z.equals(h)}}}v||(v=function(z){return !z.equals(r.block)&&!z.equals(r.blockLimit)});this.rebuildFragment(i,j,p,v)},rebuildFragment:function(j,m,o,h){for(var i;o&&!o.equals(m)&&h(o);){i=o.clone(0,1),j.fragment.appendTo(i),j.fragment=i,o=o.getParent()}}},cell:{shrink:function(j){j=j.range;var m=j.startContainer,o=j.endContainer,h=j.startOffset,i=j.endOffset;m.type==CKEDITOR.NODE_ELEMENT&&m.equals(o)&&m.is("tr")&&++h==i&&j.shrink(CKEDITOR.SHRINK_TEXT)}}},w=function(){function i(m,o){var p=m.getParent();if(p.is(CKEDITOR.dtd.$inline)){m[o?"insertBefore":"insertAfter"](p)}}function j(p,r,m){i(r);i(m,1);for(var o;o=m.getNext();){o.insertAfter(r),r=o}k(p)&&p.remove()}function h(o,p){var m=new CKEDITOR.dom.range(o);m.setStartAfter(p.startNode);m.setEndBefore(p.endNode);return m}return{list:{detectMerge:function(o,z){var p=h(z,o.bookmark),r=p.startPath(),m=p.endPath(),s=r.contains(CKEDITOR.dtd.$list),v=m.contains(CKEDITOR.dtd.$list);o.mergeList=s&&v&&s.getParent().equals(v.getParent())&&!s.equals(v);o.mergeListItems=r.block&&m.block&&r.block.is(CKEDITOR.dtd.$listItem)&&m.block.is(CKEDITOR.dtd.$listItem);if(o.mergeList||o.mergeListItems){p=p.clone(),p.setStartBefore(o.bookmark.startNode),p.setEndAfter(o.bookmark.endNode),o.mergeListBookmark=p.createBookmark()}},merge:function(r,o){if(r.mergeListBookmark){var p=r.mergeListBookmark.startNode,s=r.mergeListBookmark.endNode,z=new CKEDITOR.dom.elementPath(p,o),C=new CKEDITOR.dom.elementPath(s,o);if(r.mergeList){var v=z.contains(CKEDITOR.dtd.$list),m=C.contains(CKEDITOR.dtd.$list);v.equals(m)||(m.moveChildren(v),m.remove())}r.mergeListItems&&(z=z.contains(CKEDITOR.dtd.$listItem),C=C.contains(CKEDITOR.dtd.$listItem),z.equals(C)||j(C,p,s));p.remove();s.remove()}}},block:{detectMerge:function(o,p){if(!o.tableContentsRanges&&!o.mergeListBookmark){var m=new CKEDITOR.dom.range(p);m.setStartBefore(o.bookmark.startNode);m.setEndAfter(o.bookmark.endNode);o.mergeBlockBookmark=m.createBookmark()}},merge:function(m,r){if(m.mergeBlockBookmark&&!m.purgeTableBookmark){var s=m.mergeBlockBookmark.startNode,v=m.mergeBlockBookmark.endNode,o=new CKEDITOR.dom.elementPath(s,r),p=new CKEDITOR.dom.elementPath(v,r),o=o.block,p=p.block;o&&p&&!o.equals(p)&&j(p,s,v);s.remove();v.remove()}}},table:function(){function o(z){var C=[],r,E=new CKEDITOR.dom.walker(z),v=z.startPath().contains(m),s=z.endPath().contains(m),D={};E.guard=function(G,I){if(G.type==CKEDITOR.NODE_ELEMENT){var H="visited_"+(I?"out":"in");if(G.getCustomData(H)){return}CKEDITOR.dom.element.setMarker(D,G,H,1)}if(I&&v&&G.equals(v)){r=z.clone(),r.setEndAt(v,CKEDITOR.POSITION_BEFORE_END),C.push(r)}else{if(!I&&s&&G.equals(s)){r=z.clone(),r.setStartAt(s,CKEDITOR.POSITION_AFTER_START),C.push(r)}else{if(H=!I){H=G.type==CKEDITOR.NODE_ELEMENT&&G.is(m)&&(!v||p(G,v))&&(!s||p(G,s))}H&&(r=z.clone(),r.selectNodeContents(G),C.push(r))}}};E.lastForward();CKEDITOR.dom.element.clearAllMarkers(D);return C}function p(r,v){var z=CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_IS_CONTAINED,s=r.getPosition(v);return s===CKEDITOR.POSITION_IDENTICAL?!1:0===(s&z)}var m={td:1,th:1,caption:1};return{detectPurge:function(C){var r=C.range,s=r.clone();s.enlarge(CKEDITOR.ENLARGE_ELEMENT);var s=new CKEDITOR.dom.walker(s),v=0;s.evaluator=function(D){D.type==CKEDITOR.NODE_ELEMENT&&D.is(m)&&++v};s.checkForward();if(1<v){var s=r.startPath().contains("table"),z=r.endPath().contains("table");s&&z&&r.checkBoundaryOfElement(s,CKEDITOR.START)&&r.checkBoundaryOfElement(z,CKEDITOR.END)&&(r=C.range.clone(),r.setStartBefore(s),r.setEndAfter(z),C.purgeTableBookmark=r.createBookmark())}},detectRanges:function(v,D){var z=h(D,v.bookmark),C=z.clone(),s,E,r=z.getCommonAncestor();r.is(CKEDITOR.dtd.$tableContent)&&!r.is(m)&&(r=r.getAscendant("table",!0));E=r;r=new CKEDITOR.dom.elementPath(z.startContainer,E);E=new CKEDITOR.dom.elementPath(z.endContainer,E);r=r.contains("table");E=E.contains("table");if(r||E){r&&E&&p(r,E)?(v.tableSurroundingRange=C,C.setStartAt(r,CKEDITOR.POSITION_AFTER_END),C.setEndAt(E,CKEDITOR.POSITION_BEFORE_START),C=z.clone(),C.setEndAt(r,CKEDITOR.POSITION_AFTER_END),s=z.clone(),s.setStartAt(E,CKEDITOR.POSITION_BEFORE_START),s=o(C).concat(o(s))):r?E||(v.tableSurroundingRange=C,C.setStartAt(r,CKEDITOR.POSITION_AFTER_END),z.setEndAt(r,CKEDITOR.POSITION_AFTER_END)):(v.tableSurroundingRange=C,C.setEndAt(E,CKEDITOR.POSITION_BEFORE_START),z.setStartAt(E,CKEDITOR.POSITION_AFTER_START)),v.tableContentsRanges=s?s:o(z)}},deleteRanges:function(s){for(var r;r=s.tableContentsRanges.pop();){r.extractContents(),k(r.startContainer)&&r.startContainer.appendBogus()}s.tableSurroundingRange&&s.tableSurroundingRange.extractContents()},purge:function(v){if(v.purgeTableBookmark){var r=v.doc,s=v.range.clone(),r=r.createElement("p");r.insertBefore(v.purgeTableBookmark.startNode);s.moveToBookmark(v.purgeTableBookmark);s.deleteContents();v.range.moveToPosition(r,CKEDITOR.POSITION_AFTER_START)}}}}(),detectExtractMerge:function(m){return !(m.range.startPath().contains(CKEDITOR.dtd.$listItem)&&m.range.endPath().contains(CKEDITOR.dtd.$listItem))},fixUneditableRangePosition:function(m){m.startContainer.getDtd()["#"]||m.moveToClosestEditablePosition(null,!0)},autoParagraph:function(o,p){var r=p.startPath(),m;t(o,r.block,r.blockLimit)&&(m=q(o))&&(m=p.document.createElement(m),m.appendBogus(),p.insertNode(m),p.moveToPosition(m,CKEDITOR.POSITION_AFTER_START))}}}()})();(function(){function a(){var h=this._.fakeSelection,i;h&&(i=this.getSelection(1),i&&i.isHidden()||(h.reset(),h=0));if(!h&&(h=i||this.getSelection(1),!h||h.getType()==CKEDITOR.SELECTION_NONE)){return}this.fire("selectionCheck",h);i=this.elementPath();i.compare(this._.selectionPreviousPath)||(CKEDITOR.env.webkit&&(this._.previousActive=this.document.getActive()),this._.selectionPreviousPath=i,this.fire("selectionChange",{selection:h,path:i}))}function d(){w=!0;A||(b.call(this),A=CKEDITOR.tools.setTimeout(b,200,this))}function b(){A=null;w&&(CKEDITOR.tools.setTimeout(a,0,this),w=!1)}function c(h){return x(h)||h.type==CKEDITOR.NODE_ELEMENT&&!h.is(CKEDITOR.dtd.$empty)?!0:!1}function e(j){function o(p,r){return p&&p.type!=CKEDITOR.NODE_TEXT?j.clone()["moveToElementEdit"+(r?"End":"Start")](p):!1}if(!(j.root instanceof CKEDITOR.editable)){return !1}var m=j.startContainer,h=j.getPreviousNode(c,null,m),i=j.getNextNode(c,null,m);return o(h)||o(i,1)||!(h||i||m.type==CKEDITOR.NODE_ELEMENT&&m.isBlockBoundary()&&m.getBogus())?!0:!1}function g(h){n(h,!1);var i=h.getDocument().createText(u);h.setCustomData("cke-fillingChar",i);return i}function n(i,j){var h=i&&i.removeCustomData("cke-fillingChar");if(h){if(!1!==j){var m=i.getDocument().getSelection().getNative(),o=m&&"None"!=m.type&&m.getRangeAt(0),p=u.length;if(h.getLength()>p&&o&&o.intersectsNode(h.$)){var r=[{node:m.anchorNode,offset:m.anchorOffset},{node:m.focusNode,offset:m.focusOffset}];m.anchorNode==h.$&&m.anchorOffset>p&&(r[0].offset-=p);m.focusNode==h.$&&m.focusOffset>p&&(r[1].offset-=p)}}h.setText(k(h.getText(),1));r&&(h=i.getDocument().$,m=h.getSelection(),h=h.createRange(),h.setStart(r[0].node,r[0].offset),h.collapse(!0),m.removeAllRanges(),m.addRange(h),m.extend(r[1].node,r[1].offset))}}function k(h,i){return i?h.replace(F,function(j,m){return m?"Â ":""}):h.replace(u,"")}function t(j){var m=CKEDITOR.dom.element.createFromHtml('\x3cdiv data-cke-hidden-sel\x3d"1" data-cke-temp\x3d"1" style\x3d"'+(CKEDITOR.env.ie?"display:none":"position:fixed;top:0;left:-1000px")+'"\x3e\x26nbsp;\x3c/div\x3e',j.document);j.fire("lockSnapshot");j.editable().append(m);var o=j.getSelection(1),h=j.createRange(),i=o.root.on("selectionchange",function(p){p.cancel()},null,null,0);h.setStartAt(m,CKEDITOR.POSITION_AFTER_START);h.setEndAt(m,CKEDITOR.POSITION_BEFORE_END);o.selectRanges([h]);i.removeListener();j.fire("unlockSnapshot");j._.hiddenSelectionContainer=m}function z(h){var i={37:1,39:1,8:1,46:1};return function(o){var p=o.data.getKeystroke();if(i[p]){var j=h.getSelection().getRanges(),m=j[0];1==j.length&&m.collapsed&&(p=m[38>p?"getPreviousEditableNode":"getNextEditableNode"]())&&p.type==CKEDITOR.NODE_ELEMENT&&"false"==p.getAttribute("contenteditable")&&(h.getSelection().fake(p),o.data.preventDefault(),o.cancel())}}}function f(p){for(var j=0;j<p.length;j++){var s=p[j];s.getCommonAncestor().isReadOnly()&&p.splice(j,1);if(!s.collapsed){if(s.startContainer.isReadOnly()){for(var h=s.startContainer,i;h&&!((i=h.type==CKEDITOR.NODE_ELEMENT)&&h.is("body")||!h.isReadOnly());){i&&"false"==h.getAttribute("contentEditable")&&s.setStartAfter(h),h=h.getParent()}}h=s.startContainer;i=s.endContainer;var m=s.startOffset,o=s.endOffset,r=s.clone();h&&h.type==CKEDITOR.NODE_TEXT&&(m>=h.getLength()?r.setStartAfter(h):r.setStartBefore(h));i&&i.type==CKEDITOR.NODE_TEXT&&(o?r.setEndAfter(i):r.setEndBefore(i));h=new CKEDITOR.dom.walker(r);h.evaluator=function(v){if(v.type==CKEDITOR.NODE_ELEMENT&&v.isReadOnly()){var C=s.clone();s.setEndBefore(v);s.collapsed&&p.splice(j--,1);v.getPosition(r.endContainer)&CKEDITOR.POSITION_CONTAINS||(C.setStartAfter(v),C.collapsed||p.splice(j+1,0,C));return !0}return !1};h.next()}}return p}var A,w,x=CKEDITOR.dom.walker.invisible(1),q=function(){function j(o){return function(p){var r=p.editor.createRange();r.moveToClosestEditablePosition(p.selected,o)&&p.editor.getSelection().selectRanges([r]);return !1}}function m(o){return function(r){var s=r.editor,v=s.createRange(),p;(p=v.moveToClosestEditablePosition(r.selected,o))||(p=v.moveToClosestEditablePosition(r.selected,!o));p&&s.getSelection().selectRanges([v]);s.fire("saveSnapshot");r.selected.remove();p||(v.moveToElementEditablePosition(s.editable()),s.getSelection().selectRanges([v]));s.fire("saveSnapshot");return !1}}var h=j(),i=j(1);return{37:h,38:h,39:i,40:i,8:m(),46:m(1)}}();CKEDITOR.on("instanceCreated",function(h){function i(){var m=j.getSelection();m&&m.removeAllRanges()}var j=h.editor;j.on("contentDom",function(){function v(){s=new CKEDITOR.dom.selection(j.getSelection());s.lock()}function C(){G.removeListener("mouseup",C);I.removeListener("mouseup",C);var J=CKEDITOR.document.$.selection,K=J.createRange();"None"!=J.type&&K.parentElement().ownerDocument==D.$&&K.select()}var D=j.document,G=CKEDITOR.document,E=j.editable(),r=D.getBody(),I=D.getDocumentElement(),m=E.isInline(),o,s;CKEDITOR.env.gecko&&E.attachListener(E,"focus",function(J){J.removeListener();0!==o&&(J=j.getSelection().getNative())&&J.isCollapsed&&J.anchorNode==E.$&&(J=j.createRange(),J.moveToElementEditStart(E),J.select())},null,null,-2);E.attachListener(E,CKEDITOR.env.webkit?"DOMFocusIn":"focus",function(){o&&CKEDITOR.env.webkit&&(o=j._.previousActive&&j._.previousActive.equals(D.getActive()));j.unlockSelection(o);o=0},null,null,-1);E.attachListener(E,"mousedown",function(){o=0});if(CKEDITOR.env.ie||m){l?E.attachListener(E,"beforedeactivate",v,null,null,-1):E.attachListener(j,"selectionCheck",v,null,null,-1),E.attachListener(E,CKEDITOR.env.webkit?"DOMFocusOut":"blur",function(){j.lockSelection(s);o=1},null,null,-1),E.attachListener(E,"mousedown",function(){o=0})}if(CKEDITOR.env.ie&&!m){var p;E.attachListener(E,"mousedown",function(J){2==J.data.$.button&&((J=j.document.getSelection())&&J.getType()!=CKEDITOR.SELECTION_NONE||(p=j.window.getScrollPosition()))});E.attachListener(E,"mouseup",function(J){2==J.data.$.button&&p&&(j.document.$.documentElement.scrollLeft=p.x,j.document.$.documentElement.scrollTop=p.y);p=null});if("BackCompat"!=D.$.compatMode){if(CKEDITOR.env.ie7Compat||CKEDITOR.env.ie6Compat){I.on("mousedown",function(J){function L(O){O=O.data.$;if(M){var P=r.$.createTextRange();try{P.moveToPoint(O.clientX,O.clientY)}catch(Q){}M.setEndPoint(0>R.compareEndPoints("StartToStart",P)?"EndToEnd":"StartToStart",P);M.select()}}function K(){I.removeListener("mousemove",L);G.removeListener("mouseup",K);I.removeListener("mouseup",K);M.select()}J=J.data;if(J.getTarget().is("html")&&J.$.y<I.$.clientHeight&&J.$.x<I.$.clientWidth){var M=r.$.createTextRange();try{M.moveToPoint(J.$.clientX,J.$.clientY)}catch(N){}var R=M.duplicate();I.on("mousemove",L);G.on("mouseup",K);I.on("mouseup",K)}})}if(7<CKEDITOR.env.version&&11>CKEDITOR.env.version){I.on("mousedown",function(J){J.data.getTarget().is("html")&&(G.on("mouseup",C),I.on("mouseup",C))})}}}E.attachListener(E,"selectionchange",a,j);E.attachListener(E,"keyup",d,j);E.attachListener(E,CKEDITOR.env.webkit?"DOMFocusIn":"focus",function(){j.forceNextSelectionCheck();j.selectionChange(1)});if(m&&(CKEDITOR.env.webkit||CKEDITOR.env.gecko)){var H;E.attachListener(E,"mousedown",function(){H=1});E.attachListener(D.getDocumentElement(),"mouseup",function(){H&&d.call(j);H=0})}else{E.attachListener(CKEDITOR.env.ie?E:D.getDocumentElement(),"mouseup",d,j)}CKEDITOR.env.webkit&&E.attachListener(D,"keydown",function(J){switch(J.data.getKey()){case 13:case 33:case 34:case 35:case 36:case 37:case 39:case 8:case 45:case 46:n(E)}},null,null,-1);E.attachListener(E,"keydown",z(j),null,null,-1)});j.on("setData",function(){j.unlockSelection();CKEDITOR.env.webkit&&i()});j.on("contentDomUnload",function(){j.unlockSelection()});if(CKEDITOR.env.ie9Compat){j.on("beforeDestroy",i,null,null,9)}j.on("dataReady",function(){delete j._.fakeSelection;delete j._.hiddenSelectionContainer;j.selectionChange(1)});j.on("loadSnapshot",function(){var m=CKEDITOR.dom.walker.nodeType(CKEDITOR.NODE_ELEMENT),o=j.editable().getLast(m);o&&o.hasAttribute("data-cke-hidden-sel")&&(o.remove(),CKEDITOR.env.gecko&&(m=j.editable().getFirst(m))&&m.is("br")&&m.getAttribute("_moz_editor_bogus_node")&&m.remove())},null,null,100);j.on("key",function(o){if("wysiwyg"==j.mode){var p=j.getSelection();if(p.isFake){var m=q[o.data.keyCode];if(m){return m({editor:j,selected:p.getSelectedElement(),selection:p,keyEvent:o})}}}})});if(CKEDITOR.env.webkit){CKEDITOR.on("instanceReady",function(h){var i=h.editor;i.on("selectionChange",function(){var j=i.editable(),m=j.getCustomData("cke-fillingChar");m&&(m.getCustomData("ready")?n(j):m.setCustomData("ready",1))},null,null,-1);i.on("beforeSetMode",function(){n(i.editable())},null,null,-1);i.on("getSnapshot",function(j){j.data&&(j.data=k(j.data))},i,null,20);i.on("toDataFormat",function(j){j.data.dataValue=k(j.data.dataValue)},null,null,0)})}CKEDITOR.editor.prototype.selectionChange=function(h){(h?a:d).call(this)};CKEDITOR.editor.prototype.getSelection=function(h){return !this._.savedSelection&&!this._.fakeSelection||h?(h=this.editable())&&"wysiwyg"==this.mode?new CKEDITOR.dom.selection(h):null:this._.savedSelection||this._.fakeSelection};CKEDITOR.editor.prototype.lockSelection=function(h){h=h||this.getSelection(1);return h.getType()!=CKEDITOR.SELECTION_NONE?(!h.isLocked&&h.lock(),this._.savedSelection=h,!0):!1};CKEDITOR.editor.prototype.unlockSelection=function(h){var i=this._.savedSelection;return i?(i.unlock(h),delete this._.savedSelection,!0):!1};CKEDITOR.editor.prototype.forceNextSelectionCheck=function(){delete this._.selectionPreviousPath};CKEDITOR.dom.document.prototype.getSelection=function(){return new CKEDITOR.dom.selection(this)};CKEDITOR.dom.range.prototype.select=function(){var h=this.root instanceof CKEDITOR.editable?this.root.editor.getSelection():new CKEDITOR.dom.selection(this.root);h.selectRanges([this]);return h};CKEDITOR.SELECTION_NONE=1;CKEDITOR.SELECTION_TEXT=2;CKEDITOR.SELECTION_ELEMENT=3;var l="function"!=typeof window.getSelection,B=1;CKEDITOR.dom.selection=function(i){if(i instanceof CKEDITOR.dom.selection){var m=i;i=i.root}var j=i instanceof CKEDITOR.dom.element;this.rev=m?m.rev:B++;this.document=i instanceof CKEDITOR.dom.document?i:i.getDocument();this.root=j?i:this.document.getBody();this.isLocked=0;this._={cache:{}};if(m){return CKEDITOR.tools.extend(this._.cache,m._.cache),this.isFake=m.isFake,this.isLocked=m.isLocked,this}i=this.getNative();var o,p;if(i){if(i.getRangeAt){o=(p=i.rangeCount&&i.getRangeAt(0))&&new CKEDITOR.dom.node(p.commonAncestorContainer)}else{try{p=i.createRange()}catch(h){}o=p&&CKEDITOR.dom.element.get(p.item&&p.item(0)||p.parentElement())}}if(!o||o.type!=CKEDITOR.NODE_ELEMENT&&o.type!=CKEDITOR.NODE_TEXT||!this.root.equals(o)&&!this.root.contains(o)){this._.cache.type=CKEDITOR.SELECTION_NONE,this._.cache.startElement=null,this._.cache.selectedElement=null,this._.cache.selectedText="",this._.cache.ranges=new CKEDITOR.dom.rangeList}return this};var y={img:1,hr:1,li:1,table:1,tr:1,td:1,th:1,embed:1,object:1,ol:1,ul:1,a:1,input:1,form:1,select:1,textarea:1,button:1,fieldset:1,thead:1,tfoot:1},u=CKEDITOR.tools.repeat("",7),F=new RegExp(u+"( )?","g");CKEDITOR.tools.extend(CKEDITOR.dom.selection,{_removeFillingCharSequenceString:k,_createFillingCharSequenceNode:g,FILLING_CHAR_SEQUENCE:u});CKEDITOR.dom.selection.prototype={getNative:function(){return void 0!==this._.cache.nativeSel?this._.cache.nativeSel:this._.cache.nativeSel=l?this.document.$.selection:this.document.getWindow().$.getSelection()},getType:l?function(){var j=this._.cache;if(j.type){return j.type}var m=CKEDITOR.SELECTION_NONE;try{var o=this.getNative(),h=o.type;"Text"==h&&(m=CKEDITOR.SELECTION_TEXT);"Control"==h&&(m=CKEDITOR.SELECTION_ELEMENT);o.createRange().parentElement()&&(m=CKEDITOR.SELECTION_TEXT)}catch(i){}return j.type=m}:function(){var j=this._.cache;if(j.type){return j.type}var m=CKEDITOR.SELECTION_TEXT,h=this.getNative();if(!h||!h.rangeCount){m=CKEDITOR.SELECTION_NONE}else{if(1==h.rangeCount){var h=h.getRangeAt(0),i=h.startContainer;i==h.endContainer&&1==i.nodeType&&1==h.endOffset-h.startOffset&&y[i.childNodes[h.startOffset].nodeName.toLowerCase()]&&(m=CKEDITOR.SELECTION_ELEMENT)}}return j.type=m},getRanges:function(){var h=l?function(){function i(m){return(new CKEDITOR.dom.node(m)).getIndex()}var j=function(I,o){I=I.duplicate();I.collapse(o);var p=I.parentElement();if(!p.hasChildNodes()){return{container:p,offset:0}}for(var v=p.children,C,E,G=I.duplicate(),J=0,s=v.length-1,H=-1,m,r;J<=s;){if(H=Math.floor((J+s)/2),C=v[H],G.moveToElementText(C),m=G.compareEndPoints("StartToStart",I),0<m){s=H-1}else{if(0>m){J=H+1}else{return{container:p,offset:i(C)}}}}if(-1==H||H==v.length-1&&0>m){G.moveToElementText(p);G.setEndPoint("StartToStart",I);G=G.text.replace(/(\r\n|\r)/g,"\n").length;v=p.childNodes;if(!G){return C=v[v.length-1],C.nodeType!=CKEDITOR.NODE_TEXT?{container:p,offset:v.length}:{container:C,offset:C.nodeValue.length}}for(p=v.length;0<G&&0<p;){E=v[--p],E.nodeType==CKEDITOR.NODE_TEXT&&(r=E,G-=E.nodeValue.length)}return{container:r,offset:-G}}G.collapse(0<m?!0:!1);G.setEndPoint(0<m?"StartToStart":"EndToStart",I);G=G.text.replace(/(\r\n|\r)/g,"\n").length;if(!G){return{container:p,offset:i(C)+(0<m?0:1)}}for(;0<G;){try{E=C[0<m?"previousSibling":"nextSibling"],E.nodeType==CKEDITOR.NODE_TEXT&&(G-=E.nodeValue.length,r=E),C=E}catch(D){return{container:p,offset:i(C)}}}return{container:r,offset:0<m?-G:r.nodeValue.length+G}};return function(){var p=this.getNative(),o=p&&p.createRange(),r=this.getType();if(!p){return[]}if(r==CKEDITOR.SELECTION_TEXT){return p=new CKEDITOR.dom.range(this.root),r=j(o,!0),p.setStart(new CKEDITOR.dom.node(r.container),r.offset),r=j(o),p.setEnd(new CKEDITOR.dom.node(r.container),r.offset),p.endContainer.getPosition(p.startContainer)&CKEDITOR.POSITION_PRECEDING&&p.endOffset<=p.startContainer.getIndex()&&p.collapse(),[p]}if(r==CKEDITOR.SELECTION_ELEMENT){for(var r=[],s=0;s<o.length;s++){for(var v=o.item(s),m=v.parentNode,C=0,p=new CKEDITOR.dom.range(this.root);C<m.childNodes.length&&m.childNodes[C]!=v;C++){}p.setStart(new CKEDITOR.dom.node(m),C);p.setEnd(new CKEDITOR.dom.node(m),C+1);r.push(p)}return r}return[]}}():function(){var m=[],o,p=this.getNative();if(!p){return m}for(var i=0;i<p.rangeCount;i++){var j=p.getRangeAt(i);o=new CKEDITOR.dom.range(this.root);o.setStart(new CKEDITOR.dom.node(j.startContainer),j.startOffset);o.setEnd(new CKEDITOR.dom.node(j.endContainer),j.endOffset);m.push(o)}return m};return function(i){var j=this._.cache,m=j.ranges;m||(j.ranges=m=new CKEDITOR.dom.rangeList(h.call(this)));return i?f(new CKEDITOR.dom.rangeList(m.slice())):m}}(),getStartElement:function(){var i=this._.cache;if(void 0!==i.startElement){return i.startElement}var j;switch(this.getType()){case CKEDITOR.SELECTION_ELEMENT:return this.getSelectedElement();case CKEDITOR.SELECTION_TEXT:var h=this.getRanges()[0];if(h){if(h.collapsed){j=h.startContainer,j.type!=CKEDITOR.NODE_ELEMENT&&(j=j.getParent())}else{for(h.optimize();j=h.startContainer,h.startOffset==(j.getChildCount?j.getChildCount():j.getLength())&&!j.isBlockBoundary();){h.setStartAfter(j)}j=h.startContainer;if(j.type!=CKEDITOR.NODE_ELEMENT){return j.getParent()}if((j=j.getChild(h.startOffset))&&j.type==CKEDITOR.NODE_ELEMENT){for(h=j.getFirst();h&&h.type==CKEDITOR.NODE_ELEMENT;){j=h,h=h.getFirst()}}else{j=h.startContainer}}j=j.$}}return i.startElement=j?new CKEDITOR.dom.element(j):null},getSelectedElement:function(){var i=this._.cache;if(void 0!==i.selectedElement){return i.selectedElement}var j=this,h=CKEDITOR.tools.tryThese(function(){return j.getNative().createRange().item(0)},function(){for(var m=j.getRanges()[0].clone(),o,p,r=2;r&&!((o=m.getEnclosedNode())&&o.type==CKEDITOR.NODE_ELEMENT&&y[o.getName()]&&(p=o));r--){m.shrink(CKEDITOR.SHRINK_ELEMENT)}return p&&p.$});return i.selectedElement=h?new CKEDITOR.dom.element(h):null},getSelectedText:function(){var h=this._.cache;if(void 0!==h.selectedText){return h.selectedText}var i=this.getNative(),i=l?"Control"==i.type?"":i.createRange().text:i.toString();return h.selectedText=i},lock:function(){this.getRanges();this.getStartElement();this.getSelectedElement();this.getSelectedText();this._.cache.nativeSel=null;this.isLocked=1},unlock:function(j){if(this.isLocked){if(j){var m=this.getSelectedElement(),h=!m&&this.getRanges(),i=this.isFake}this.isLocked=0;this.reset();j&&(j=m||h[0]&&h[0].getCommonAncestor())&&j.getAscendant("body",1)&&(i?this.fake(m):m?this.selectElement(m):this.selectRanges(h))}},reset:function(){this._.cache={};this.isFake=0;var i=this.root.editor;if(i&&i._.fakeSelection){if(this.rev==i._.fakeSelection.rev){delete i._.fakeSelection;var j=i._.hiddenSelectionContainer;if(j){var h=i.checkDirty();i.fire("lockSnapshot");j.remove();i.fire("unlockSnapshot");!h&&i.resetDirty()}delete i._.hiddenSelectionContainer}else{CKEDITOR.warn("selection-fake-reset")}}this.rev=B++},selectElement:function(h){var i=new CKEDITOR.dom.range(this.root);i.setStartBefore(h);i.setEndAfter(h);this.selectRanges([i])},selectRanges:function(G){var j=this.root.editor,j=j&&j._.hiddenSelectionContainer;this.reset();if(j){for(var j=this.root,D,E=0;E<G.length;++E){D=G[E],D.endContainer.equals(j)&&(D.endOffset=Math.min(D.endOffset,j.getChildCount()))}}if(G.length){if(this.isLocked){var h=CKEDITOR.document.getActive();this.unlock();this.selectRanges(G);this.lock();h&&!h.equals(this.root)&&h.focus()}else{var m;G:{var s,v;if(1==G.length&&!(v=G[0]).collapsed&&(m=v.getEnclosedNode())&&m.type==CKEDITOR.NODE_ELEMENT&&(v=v.clone(),v.shrink(CKEDITOR.SHRINK_ELEMENT,!0),(s=v.getEnclosedNode())&&s.type==CKEDITOR.NODE_ELEMENT&&(m=s),"false"==m.getAttribute("contenteditable"))){break G}m=void 0}if(m){this.fake(m)}else{if(l){v=CKEDITOR.dom.walker.whitespaces(!0);s=/\ufeff|\u00a0/;j={table:1,tbody:1,tr:1};1<G.length&&(m=G[G.length-1],G[0].setEnd(m.endContainer,m.endOffset));m=G[0];G=m.collapsed;var p,o,i;if((D=m.getEnclosedNode())&&D.type==CKEDITOR.NODE_ELEMENT&&D.getName() in y&&(!D.is("a")||!D.getText())){try{i=D.$.createControlRange();i.addElement(D.$);i.select();return}catch(r){}}if(m.startContainer.type==CKEDITOR.NODE_ELEMENT&&m.startContainer.getName() in j||m.endContainer.type==CKEDITOR.NODE_ELEMENT&&m.endContainer.getName() in j){m.shrink(CKEDITOR.NODE_ELEMENT,!0),G=m.collapsed}i=m.createBookmark();j=i.startNode;G||(h=i.endNode);i=m.document.$.body.createTextRange();i.moveToElementText(j.$);i.moveStart("character",1);h?(s=m.document.$.body.createTextRange(),s.moveToElementText(h.$),i.setEndPoint("EndToEnd",s),i.moveEnd("character",-1)):(p=j.getNext(v),o=j.hasAscendant("pre"),p=!(p&&p.getText&&p.getText().match(s))&&(o||!j.hasPrevious()||j.getPrevious().is&&j.getPrevious().is("br")),o=m.document.createElement("span"),o.setHtml("\x26#65279;"),o.insertBefore(j),p&&m.document.createText("").insertBefore(j));m.setStartBefore(j);j.remove();G?(p?(i.moveStart("character",-1),i.select(),m.document.$.selection.clear()):i.select(),m.moveToPosition(o,CKEDITOR.POSITION_BEFORE_START),o.remove()):(m.setEndBefore(h),h.remove(),i.select())}else{h=this.getNative();if(!h){return}this.removeAllRanges();for(i=0;i<G.length;i++){if(i<G.length-1&&(p=G[i],o=G[i+1],s=p.clone(),s.setStart(p.endContainer,p.endOffset),s.setEnd(o.startContainer,o.startOffset),!s.collapsed&&(s.shrink(CKEDITOR.NODE_ELEMENT,!0),m=s.getCommonAncestor(),s=s.getEnclosedNode(),m.isReadOnly()||s&&s.isReadOnly()))){o.setStart(p.startContainer,p.startOffset);G.splice(i--,1);continue}m=G[i];o=this.document.$.createRange();m.collapsed&&CKEDITOR.env.webkit&&e(m)&&(s=g(this.root),m.insertNode(s),(p=s.getNext())&&!s.getPrevious()&&p.type==CKEDITOR.NODE_ELEMENT&&"br"==p.getName()?(n(this.root),m.moveToPosition(p,CKEDITOR.POSITION_BEFORE_START)):m.moveToPosition(s,CKEDITOR.POSITION_AFTER_END));o.setStart(m.startContainer.$,m.startOffset);try{o.setEnd(m.endContainer.$,m.endOffset)}catch(C){if(0<=C.toString().indexOf("NS_ERROR_ILLEGAL_VALUE")){m.collapse(1),o.setEnd(m.endContainer.$,m.endOffset)}else{throw C}}h.addRange(o)}}this.reset();this.root.fire("selectionchange")}}}},fake:function(j){var m=this.root.editor;this.reset();t(m);var h=this._.cache,i=new CKEDITOR.dom.range(this.root);i.setStartBefore(j);i.setEndAfter(j);h.ranges=new CKEDITOR.dom.rangeList(i);h.selectedElement=h.startElement=j;h.type=CKEDITOR.SELECTION_ELEMENT;h.selectedText=h.nativeSel=null;this.isFake=1;this.rev=B++;m._.fakeSelection=this;this.root.fire("selectionchange")},isHidden:function(){var h=this.getCommonAncestor();h&&h.type==CKEDITOR.NODE_TEXT&&(h=h.getParent());return !(!h||!h.data("cke-hidden-sel"))},createBookmarks:function(h){h=this.getRanges().createBookmarks(h);this.isFake&&(h.isFake=1);return h},createBookmarks2:function(h){h=this.getRanges().createBookmarks2(h);this.isFake&&(h.isFake=1);return h},selectBookmarks:function(j){for(var m=[],o,h=0;h<j.length;h++){var i=new CKEDITOR.dom.range(this.root);i.moveToBookmark(j[h]);m.push(i)}j.isFake&&(o=m[0].getEnclosedNode(),o&&o.type==CKEDITOR.NODE_ELEMENT||(CKEDITOR.warn("selection-not-fake"),j.isFake=0));j.isFake?this.fake(o):this.selectRanges(m);return this},getCommonAncestor:function(){var h=this.getRanges();return h.length?h[0].startContainer.getCommonAncestor(h[h.length-1].endContainer):null},scrollIntoView:function(){this.type!=CKEDITOR.SELECTION_NONE&&this.getRanges()[0].scrollIntoView()},removeAllRanges:function(){if(this.getType()!=CKEDITOR.SELECTION_NONE){var h=this.getNative();try{h&&h[l?"empty":"removeAllRanges"]()}catch(i){}this.reset()}}}})();"use strict";CKEDITOR.STYLE_BLOCK=1;CKEDITOR.STYLE_INLINE=2;CKEDITOR.STYLE_OBJECT=3;(function(){function A(s,v){for(var i,j;(s=s.getParent())&&!s.equals(v);){if(s.getAttribute("data-nostyle")){i=s}else{if(!j){var o=s.getAttribute("contentEditable");"false"==o?i=s:"true"==o&&(j=1)}}}return i}function F(o,s,i,j){return(o.getPosition(s)|j)==j&&(!i.childRule||i.childRule(o))}function B(U){var s=U.document;if(U.collapsed){s=m(this,s),U.insertNode(s),U.moveToPosition(s,CKEDITOR.POSITION_BEFORE_END)}else{var v=this.element,D=this._.definition,J,E=D.ignoreReadonly,L=E||D.includeReadonly;null==L&&(L=U.root.getCustomData("cke_includeReadonly"));var N=CKEDITOR.dtd[v];N||(J=!0,N=CKEDITOR.dtd.span);U.enlarge(CKEDITOR.ENLARGE_INLINE,1);U.trim();var P=U.createBookmark(),V=P.startNode,i=P.endNode,W=V,Z;if(!E){var o=U.getCommonAncestor(),E=A(V,o),o=A(i,o);E&&(W=E.getNextSourceNode(!0));o&&(i=o)}for(W.getPosition(i)==CKEDITOR.POSITION_FOLLOWING&&(W=0);W;){E=!1;if(W.equals(i)){W=null,E=!0}else{var Y=W.type==CKEDITOR.NODE_ELEMENT?W.getName():null,o=Y&&"false"==W.getAttribute("contentEditable"),I=Y&&W.getAttribute("data-nostyle");if(Y&&W.data("cke-bookmark")){W=W.getNextSourceNode(!0);continue}if(o&&L&&CKEDITOR.dtd.$block[Y]){for(var T=W,O=G(T),X=void 0,aa=O.length,j=0,T=aa&&new CKEDITOR.dom.range(T.getDocument());j<aa;++j){var X=O[j],ac=CKEDITOR.filter.instances[X.data("cke-filter")];if(ac?ac.check(this):1){T.selectNodeContents(X),B.call(this,T)}}}O=Y?!N[Y]||I?0:o&&!L?0:F(W,i,D,x):1;if(O){if(X=W.getParent(),O=D,aa=v,j=J,!X||!(X.getDtd()||CKEDITOR.dtd.span)[aa]&&!j||O.parentRule&&!O.parentRule(X)){E=!0}else{if(Z||Y&&CKEDITOR.dtd.$removeEmpty[Y]&&(W.getPosition(i)|x)!=x||(Z=U.clone(),Z.setStartBefore(W)),Y=W.type,Y==CKEDITOR.NODE_TEXT||o||Y==CKEDITOR.NODE_ELEMENT&&!W.getChildCount()){for(var Y=W,ae;(E=!Y.getNext(u))&&(ae=Y.getParent(),N[ae.getName()])&&F(ae,V,D,y);){Y=ae}Z.setEndAfter(Y)}}}else{E=!0}W=W.getNextSourceNode(I||o)}if(E&&Z&&!Z.collapsed){for(var E=m(this,s),o=E.hasAttributes(),I=Z.getCommonAncestor(),Y={},O={},X={},aa={},ad,ab,S;E&&I;){if(I.getName()==v){for(ad in D.attributes){!aa[ad]&&(S=I.getAttribute(ab))&&(E.getAttribute(ad)==S?O[ad]=1:aa[ad]=1)}for(ab in D.styles){!X[ab]&&(S=I.getStyle(ab))&&(E.getStyle(ab)==S?Y[ab]=1:X[ab]=1)}}I=I.getParent()}for(ad in O){E.removeAttribute(ad)}for(ab in Y){E.removeStyle(ab)}o&&!E.hasAttributes()&&(E=null);E?(Z.extractContents().appendTo(E),Z.insertNode(E),f.call(this,E),E.mergeSiblings(),CKEDITOR.env.ie||E.$.normalize()):(E=new CKEDITOR.dom.element("span"),Z.extractContents().appendTo(E),Z.insertNode(E),f.call(this,E),E.remove(!0));Z=null}}U.moveToBookmark(P);U.shrink(CKEDITOR.SHRINK_TEXT);U.shrink(CKEDITOR.NODE_ELEMENT,!0)}}function C(s){function D(){for(var P=new CKEDITOR.dom.elementPath(I.getParent()),V=new CKEDITOR.dom.elementPath(o.getParent()),O=null,S=null,T=0;T<P.elements.length;T++){var U=P.elements[T];if(U==P.block||U==P.blockLimit){break}v.checkElementRemovable(U,!0)&&(O=U)}for(T=0;T<V.elements.length;T++){U=V.elements[T];if(U==V.block||U==V.blockLimit){break}v.checkElementRemovable(U,!0)&&(S=U)}S&&o.breakParent(S);O&&I.breakParent(O)}s.enlarge(CKEDITOR.ENLARGE_INLINE,1);var E=s.createBookmark(),I=E.startNode;if(s.collapsed){for(var J=new CKEDITOR.dom.elementPath(I.getParent(),s.root),L,N=0,i;N<J.elements.length&&(i=J.elements[N])&&i!=J.block&&i!=J.blockLimit;N++){if(this.checkElementRemovable(i)){var j;s.collapsed&&(s.checkBoundaryOfElement(i,CKEDITOR.END)||(j=s.checkBoundaryOfElement(i,CKEDITOR.START)))?(L=i,L.match=j?"start":"end"):(i.mergeSiblings(),i.is(this.element)?l.call(this,i):e(i,M(this)[i.getName()]))}}if(L){i=I;for(N=0;;N++){j=J.elements[N];if(j.equals(L)){break}else{if(j.match){continue}else{j=j.clone()}}j.append(i);i=j}i["start"==L.match?"insertBefore":"insertAfter"](L)}}else{var o=E.endNode,v=this;D();for(J=I;!J.equals(o);){L=J.getNextSourceNode(),J.type==CKEDITOR.NODE_ELEMENT&&this.checkElementRemovable(J)&&(J.getName()==this.element?l.call(this,J):e(J,M(this)[J.getName()]),L.type==CKEDITOR.NODE_ELEMENT&&L.contains(I)&&(D(),L=I.getNext())),J=L}}s.moveToBookmark(E);s.shrink(CKEDITOR.NODE_ELEMENT,!0)}function G(i){var j=[];i.forEach(function(o){if("true"==o.getAttribute("contenteditable")){return j.push(o),!1}},CKEDITOR.NODE_ELEMENT,!0);return j}function K(i){var j=i.getEnclosedNode()||i.getCommonAncestor(!1,!0);(i=(new CKEDITOR.dom.elementPath(j,i.root)).contains(this.element,1))&&!i.isReadOnly()&&k(i,this)}function R(s){var v=s.getCommonAncestor(!0,!0);if(s=(new CKEDITOR.dom.elementPath(v,s.root)).contains(this.element,1)){var v=this._.definition,i=v.attributes;if(i){for(var j in i){s.removeAttribute(j,i[j])}}if(v.styles){for(var o in v.styles){v.styles.hasOwnProperty(o)&&s.removeStyle(o)}}}}function Q(s){var v=s.createBookmark(!0),D=s.createIterator();D.enforceRealBlocks=!0;this._.enterMode&&(D.enlargeBr=this._.enterMode!=CKEDITOR.ENTER_BR);for(var i,j=s.document,o;i=D.getNextParagraph();){!i.isReadOnly()&&(D.activeFilter?D.activeFilter.check(this):1)&&(o=m(this,j,i),p(i,o))}s.moveToBookmark(v)}function b(s){var v=s.createBookmark(1),i=s.createIterator();i.enforceRealBlocks=!0;i.enlargeBr=this._.enterMode!=CKEDITOR.ENTER_BR;for(var j,o;j=i.getNextParagraph();){this.checkElementRemovable(j)&&(j.is("pre")?((o=this._.enterMode==CKEDITOR.ENTER_BR?null:s.document.createElement(this._.enterMode==CKEDITOR.ENTER_P?"p":"div"))&&j.copyAttributes(o),p(j,o)):l.call(this,j))}s.moveToBookmark(v)}function p(j,D){var o=!D;o&&(D=j.getDocument().createElement("div"),j.copyAttributes(D));var s=D&&D.is("pre"),v=j.is("pre"),E=!s&&v;if(s&&!v){v=D;(E=j.getBogus())&&E.remove();E=j.getHtml();E=t(E,/(?:^[ \t\n\r]+)|(?:[ \t\n\r]+$)/g,"");E=E.replace(/[ \t\r\n]*(<br[^>]*>)[ \t\r\n]*/gi,"$1");E=E.replace(/([ \t\n\r]+|&nbsp;)/g," ");E=E.replace(/<br\b[^>]*>/gi,"\n");if(CKEDITOR.env.ie){var I=j.getDocument().createElement("div");I.append(v);v.$.outerHTML="\x3cpre\x3e"+E+"\x3c/pre\x3e";v.copyAttributes(I.getFirst());v=I.getFirst().remove()}else{v.setHtml(E)}D=v}else{E?D=c(o?[j.getHtml()]:H(j),D):j.moveChildren(D)}D.replace(j);if(s){var o=D,i;(i=o.getPrevious(z))&&i.type==CKEDITOR.NODE_ELEMENT&&i.is("pre")&&(s=t(i.getHtml(),/\n$/,"")+"\n\n"+t(o.getHtml(),/^\n/,""),CKEDITOR.env.ie?o.$.outerHTML="\x3cpre\x3e"+s+"\x3c/pre\x3e":o.setHtml(s),i.remove())}else{o&&w(D)}}function H(i){var j=[];t(i.getOuterHtml(),/(\S\s*)\n(?:\s|(<span[^>]+data-cke-bookmark.*?\/span>))*\n(?!$)/gi,function(s,v,o){return v+"\x3c/pre\x3e"+o+"\x3cpre\x3e"}).replace(/<pre\b.*?>([\s\S]*?)<\/pre>/gi,function(o,s){j.push(s)});return j}function t(s,v,i){var j="",o="";s=s.replace(/(^<span[^>]+data-cke-bookmark.*?\/span>)|(<span[^>]+data-cke-bookmark.*?\/span>$)/gi,function(E,I,D){I&&(j=I);D&&(o=D);return""});return j+s.replace(v,i)+o}function c(s,v){var D;1<s.length&&(D=new CKEDITOR.dom.documentFragment(v.getDocument()));for(var i=0;i<s.length;i++){var j=s[i],j=j.replace(/(\r\n|\r)/g,"\n"),j=t(j,/^[ \t]*\n/,""),j=t(j,/\n$/,""),j=t(j,/^[ \t]+|[ \t]+$/g,function(E,I){return 1==E.length?"\x26nbsp;":I?" "+CKEDITOR.tools.repeat("\x26nbsp;",E.length-1):CKEDITOR.tools.repeat("\x26nbsp;",E.length-1)+" "}),j=j.replace(/\n/g,"\x3cbr\x3e"),j=j.replace(/[ \t]{2,}/g,function(E){return CKEDITOR.tools.repeat("\x26nbsp;",E.length-1)+" "});if(D){var o=v.clone();o.setHtml(j);D.append(o)}else{v.setHtml(j)}}return D||v}function l(j,s){var o=this._.definition,v=o.attributes,o=o.styles,D=M(this)[j.getName()],E=CKEDITOR.tools.isEmpty(v)&&CKEDITOR.tools.isEmpty(o),I;for(I in v){if("class"!=I&&!this._.definition.fullMatch||j.getAttribute(I)==d(I,v[I])){s&&"data-"==I.slice(0,5)||(E=j.hasAttribute(I),j.removeAttribute(I))}}for(var i in o){this._.definition.fullMatch&&j.getStyle(i)!=d(i,o[i],!0)||(E=E||!!j.getStyle(i),j.removeStyle(i))}e(j,D,g[j.getName()]);E&&(this._.definition.alwaysRemoveElement?w(j,1):!CKEDITOR.dtd.$block[j.getName()]||this._.enterMode==CKEDITOR.ENTER_BR&&!j.hasAttributes()?w(j):j.renameNode(this._.enterMode==CKEDITOR.ENTER_P?"p":"div"))}function f(s){for(var v=M(this),D=s.getElementsByTag(this.element),i,j=D.count();0<=--j;){i=D.getItem(j),i.isReadOnly()||l.call(this,i,!0)}for(var o in v){if(o!=this.element){for(D=s.getElementsByTag(o),j=D.count()-1;0<=j;j--){i=D.getItem(j),i.isReadOnly()||e(i,v[o])}}}}function e(o,s,v){if(s=s&&s.attributes){for(var D=0;D<s.length;D++){var E=s[D][0],i;if(i=o.getAttribute(E)){var j=s[D][1];(null===j||j.test&&j.test(i)||"string"==typeof j&&i==j)&&o.removeAttribute(E)}}}v||w(o)}function w(o,s){if(!o.hasAttributes()||s){if(CKEDITOR.dtd.$block[o.getName()]){var i=o.getPrevious(z),j=o.getNext(z);!i||i.type!=CKEDITOR.NODE_TEXT&&i.isBlockBoundary({br:1})||o.append("br",1);!j||j.type!=CKEDITOR.NODE_TEXT&&j.isBlockBoundary({br:1})||o.append("br");o.remove(!0)}else{i=o.getFirst(),j=o.getLast(),o.remove(!0),i&&(i.type==CKEDITOR.NODE_ELEMENT&&i.mergeSiblings(),j&&!i.equals(j)&&j.type==CKEDITOR.NODE_ELEMENT&&j.mergeSiblings())}}}function m(o,s,i){var j;j=o.element;"*"==j&&(j="span");j=new CKEDITOR.dom.element(j,s);i&&i.copyAttributes(j);j=k(j,o);s.getCustomData("doc_processing_style")&&j.hasAttribute("id")?j.removeAttribute("id"):s.setCustomData("doc_processing_style",1);return j}function k(s,v){var i=v._.definition,j=i.attributes,i=CKEDITOR.style.getStyleText(i);if(j){for(var o in j){s.setAttribute(o,j[o])}}i&&s.setAttribute("style",i);return s}function r(j,o){for(var i in j){j[i]=j[i].replace(q,function(s,v){return o[v]})}}function M(j){if(j._.overrides){return j._.overrides}var o=j._.overrides={},s=j._.definition.overrides;if(s){CKEDITOR.tools.isArray(s)||(s=[s]);for(var v=0;v<s.length;v++){var D=s[v],E,I;"string"==typeof D?E=D.toLowerCase():(E=D.element?D.element.toLowerCase():j.element,I=D.attributes);D=o[E]||(o[E]={});if(I){var D=D.attributes=D.attributes||[],i;for(i in I){D.push([i.toLowerCase(),I[i]])}}}}return o}function d(o,s,i){var j=new CKEDITOR.dom.element("span");j[i?"setStyle":"setAttribute"](o,s);return j[i?"getStyle":"getAttribute"](o)}function a(o,s,v){var D=o.document,E=o.getRanges();s=s?this.removeFromRange:this.applyToRange;for(var i,j=E.createIterator();i=j.getNextRange();){s.call(this,i,v)}o.selectRanges(E);D.removeCustomData("doc_processing_style")}var g={address:1,div:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,p:1,pre:1,section:1,header:1,footer:1,nav:1,article:1,aside:1,figure:1,dialog:1,hgroup:1,time:1,meter:1,menu:1,command:1,keygen:1,output:1,progress:1,details:1,datagrid:1,datalist:1},h={a:1,blockquote:1,embed:1,hr:1,img:1,li:1,object:1,ol:1,table:1,td:1,tr:1,th:1,ul:1,dl:1,dt:1,dd:1,form:1,audio:1,video:1},n=/\s*(?:;\s*|$)/,q=/#\((.+?)\)/g,u=CKEDITOR.dom.walker.bookmark(0,1),z=CKEDITOR.dom.walker.whitespaces(1);CKEDITOR.style=function(j,o){if("string"==typeof j.type){return new CKEDITOR.style.customHandlers[j.type](j)}var i=j.attributes;i&&i.style&&(j.styles=CKEDITOR.tools.extend({},j.styles,CKEDITOR.tools.parseCssText(i.style)),delete i.style);o&&(j=CKEDITOR.tools.clone(j),r(j.attributes,o),r(j.styles,o));i=this.element=j.element?"string"==typeof j.element?j.element.toLowerCase():j.element:"*";this.type=j.type||(g[i]?CKEDITOR.STYLE_BLOCK:h[i]?CKEDITOR.STYLE_OBJECT:CKEDITOR.STYLE_INLINE);"object"==typeof this.element&&(this.type=CKEDITOR.STYLE_OBJECT);this._={definition:j}};CKEDITOR.style.prototype={apply:function(i){if(i instanceof CKEDITOR.dom.document){return a.call(this,i.getSelection())}if(this.checkApplicable(i.elementPath(),i)){var j=this._.enterMode;j||(this._.enterMode=i.activeEnterMode);a.call(this,i.getSelection(),0,i);this._.enterMode=j}},remove:function(i){if(i instanceof CKEDITOR.dom.document){return a.call(this,i.getSelection(),1)}if(this.checkApplicable(i.elementPath(),i)){var j=this._.enterMode;j||(this._.enterMode=i.activeEnterMode);a.call(this,i.getSelection(),1,i);this._.enterMode=j}},applyToRange:function(i){this.applyToRange=this.type==CKEDITOR.STYLE_INLINE?B:this.type==CKEDITOR.STYLE_BLOCK?Q:this.type==CKEDITOR.STYLE_OBJECT?K:null;return this.applyToRange(i)},removeFromRange:function(i){this.removeFromRange=this.type==CKEDITOR.STYLE_INLINE?C:this.type==CKEDITOR.STYLE_BLOCK?b:this.type==CKEDITOR.STYLE_OBJECT?R:null;return this.removeFromRange(i)},applyToObject:function(i){k(i,this)},checkActive:function(s,v){switch(this.type){case CKEDITOR.STYLE_BLOCK:return this.checkElementRemovable(s.block||s.blockLimit,!0,v);case CKEDITOR.STYLE_OBJECT:case CKEDITOR.STYLE_INLINE:for(var D=s.elements,i=0,j;i<D.length;i++){if(j=D[i],this.type!=CKEDITOR.STYLE_INLINE||j!=s.block&&j!=s.blockLimit){if(this.type==CKEDITOR.STYLE_OBJECT){var o=j.getName();if(!("string"==typeof this.element?o==this.element:o in this.element)){continue}}if(this.checkElementRemovable(j,!0,v)){return !0}}}}return !1},checkApplicable:function(j,o,i){o&&o instanceof CKEDITOR.filter&&(i=o);if(i&&!i.check(this)){return !1}switch(this.type){case CKEDITOR.STYLE_OBJECT:return !!j.contains(this.element);case CKEDITOR.STYLE_BLOCK:return !!j.blockLimit.getDtd()[this.element]}return !0},checkElementMatch:function(j,o){var s=this._.definition;if(!j||!s.ignoreReadonly&&j.isReadOnly()){return !1}var v=j.getName();if("string"==typeof this.element?v==this.element:v in this.element){if(!o&&!j.hasAttributes()){return !0}if(v=s._AC){s=v}else{var v={},D=0,E=s.attributes;if(E){for(var I in E){D++,v[I]=E[I]}}if(I=CKEDITOR.style.getStyleText(s)){v.style||D++,v.style=I}v._length=D;s=s._AC=v}if(s._length){for(var i in s){if("_length"!=i){D=j.getAttribute(i)||"";if("style"==i){j:{v=s[i];"string"==typeof v&&(v=CKEDITOR.tools.parseCssText(v));"string"==typeof D&&(D=CKEDITOR.tools.parseCssText(D,!0));I=void 0;for(I in v){if(!(I in D)||D[I]!=v[I]&&"inherit"!=v[I]&&"inherit"!=D[I]){v=!1;break j}}v=!0}}else{v=s[i]==D}if(v){if(!o){return !0}}else{if(o){return !1}}}}if(o){return !0}}else{return !0}}return !1},checkElementRemovable:function(s,v,i){if(this.checkElementMatch(s,v,i)){return !0}if(v=M(this)[s.getName()]){var j;if(!(v=v.attributes)){return !0}for(i=0;i<v.length;i++){if(j=v[i][0],j=s.getAttribute(j)){var o=v[i][1];if(null===o){return !0}if("string"==typeof o){if(j==o){return !0}}else{if(o.test(j)){return !0}}}}}return !1},buildPreview:function(s){var v=this._.definition,D=[],i=v.element;"bdo"==i&&(i="span");var D=["\x3c",i],j=v.attributes;if(j){for(var o in j){D.push(" ",o,'\x3d"',j[o],'"')}}(j=CKEDITOR.style.getStyleText(v))&&D.push(' style\x3d"',j,'"');D.push("\x3e",s||v.name,"\x3c/",i,"\x3e");return D.join("")},getDefinition:function(){return this._.definition}};CKEDITOR.style.getStyleText=function(o){var s=o._ST;if(s){return s}var s=o.styles,v=o.attributes&&o.attributes.style||"",D="";v.length&&(v=v.replace(n,";"));for(var E in s){var i=s[E],j=(E+":"+i).replace(n,";");"inherit"==i?D+=j:v+=j}v.length&&(v=CKEDITOR.tools.normalizeCssText(v,!0));return o._ST=v+D};CKEDITOR.style.customHandlers={};CKEDITOR.style.addCustomHandler=function(i){var j=function(o){this._={definition:o};this.setup&&this.setup(o)};j.prototype=CKEDITOR.tools.extend(CKEDITOR.tools.prototypedCopy(CKEDITOR.style.prototype),{assignedTo:CKEDITOR.STYLE_OBJECT},i,!0);return this.customHandlers[i.type]=j};var x=CKEDITOR.POSITION_PRECEDING|CKEDITOR.POSITION_IDENTICAL|CKEDITOR.POSITION_IS_CONTAINED,y=CKEDITOR.POSITION_FOLLOWING|CKEDITOR.POSITION_IDENTICAL|CKEDITOR.POSITION_IS_CONTAINED})();CKEDITOR.styleCommand=function(a,d){this.requiredContent=this.allowedContent=this.style=a;CKEDITOR.tools.extend(this,d,!0)};CKEDITOR.styleCommand.prototype.exec=function(a){a.focus();this.state==CKEDITOR.TRISTATE_OFF?a.applyStyle(this.style):this.state==CKEDITOR.TRISTATE_ON&&a.removeStyle(this.style)};CKEDITOR.stylesSet=new CKEDITOR.resourceManager("","stylesSet");CKEDITOR.addStylesSet=CKEDITOR.tools.bind(CKEDITOR.stylesSet.add,CKEDITOR.stylesSet);CKEDITOR.loadStylesSet=function(b,a,d){CKEDITOR.stylesSet.addExternal(b,a,"");CKEDITOR.stylesSet.load(b,d)};CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{attachStyleStateChange:function(b,a){var d=this._.styleStateChangeCallbacks;d||(d=this._.styleStateChangeCallbacks=[],this.on("selectionChange",function(g){for(var e=0;e<d.length;e++){var f=d[e],c=f.style.checkActive(g.data.path,this)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF;f.fn.call(this,c)}}));d.push({style:b,fn:a})},applyStyle:function(a){a.apply(this)},removeStyle:function(a){a.remove(this)},getStylesSet:function(c){if(this._.stylesDefinitions){c(this._.stylesDefinitions)}else{var b=this,d=b.config.stylesCombo_stylesSet||b.config.stylesSet;if(!1===d){c(null)}else{if(d instanceof Array){b._.stylesDefinitions=d,c(d)}else{d||(d="default");var d=d.split(":"),a=d[0];CKEDITOR.stylesSet.addExternal(a,d[1]?d.slice(1).join(":"):CKEDITOR.getUrl("styles.js"),"");CKEDITOR.stylesSet.load(a,function(e){b._.stylesDefinitions=e[a];c(b._.stylesDefinitions)})}}}}});CKEDITOR.dom.comment=function(a,d){"string"==typeof a&&(a=(d?d.$:document).createComment(a));CKEDITOR.dom.domObject.call(this,a)};CKEDITOR.dom.comment.prototype=new CKEDITOR.dom.node;CKEDITOR.tools.extend(CKEDITOR.dom.comment.prototype,{type:CKEDITOR.NODE_COMMENT,getOuterHtml:function(){return"\x3c!--"+this.$.nodeValue+"--\x3e"}});"use strict";(function(){var b={},a={},d;for(d in CKEDITOR.dtd.$blockLimit){d in CKEDITOR.dtd.$list||(b[d]=1)}for(d in CKEDITOR.dtd.$block){d in CKEDITOR.dtd.$blockLimit||d in CKEDITOR.dtd.$empty||(a[d]=1)}CKEDITOR.dom.elementPath=function(f,g){var l=null,s=null,n=[],t=f,c;g=g||f.getDocument().getBody();do{if(t.type==CKEDITOR.NODE_ELEMENT){n.push(t);if(!this.lastElement&&(this.lastElement=t,t.is(CKEDITOR.dtd.$object)||"false"==t.getAttribute("contenteditable"))){continue}if(t.equals(g)){break}if(!s&&(c=t.getName(),"true"==t.getAttribute("contenteditable")?s=t:!l&&a[c]&&(l=t),b[c])){if(c=!l&&"div"==c){b:{c=t.getChildren();for(var k=0,e=c.count();k<e;k++){var u=c.getItem(k);if(u.type==CKEDITOR.NODE_ELEMENT&&CKEDITOR.dtd.$block[u.getName()]){c=!0;break b}}c=!1}c=!c}c?l=t:s=t}}}while(t=t.getParent());s||(s=g);this.block=l;this.blockLimit=s;this.root=g;this.elements=n}})();CKEDITOR.dom.elementPath.prototype={compare:function(b){var a=this.elements;b=b&&b.elements;if(!b||a.length!=b.length){return !1}for(var d=0;d<a.length;d++){if(!a[d].equals(b[d])){return !1}}return !0},contains:function(e,b,g){var a;"string"==typeof e&&(a=function(f){return f.getName()==e});e instanceof CKEDITOR.dom.element?a=function(f){return f.equals(e)}:CKEDITOR.tools.isArray(e)?a=function(f){return -1<CKEDITOR.tools.indexOf(e,f.getName())}:"function"==typeof e?a=e:"object"==typeof e&&(a=function(f){return f.getName() in e});var c=this.elements,d=c.length;b&&d--;g&&(c=Array.prototype.slice.call(c,0),c.reverse());for(b=0;b<d;b++){if(a(c[b])){return c[b]}}return null},isContextFor:function(a){var d;return a in CKEDITOR.dtd.$block?(d=this.contains(CKEDITOR.dtd.$intermediate)||this.root.equals(this.block)&&this.block||this.blockLimit,!!d.getDtd()[a]):!0},direction:function(){return(this.block||this.blockLimit||this.root).getDirection(1)}};CKEDITOR.dom.text=function(a,d){"string"==typeof a&&(a=(d?d.$:document).createTextNode(a));this.$=a};CKEDITOR.dom.text.prototype=new CKEDITOR.dom.node;CKEDITOR.tools.extend(CKEDITOR.dom.text.prototype,{type:CKEDITOR.NODE_TEXT,getLength:function(){return this.$.nodeValue.length},getText:function(){return this.$.nodeValue},setText:function(a){this.$.nodeValue=a},split:function(e){var b=this.$.parentNode,g=b.childNodes.length,a=this.getLength(),c=this.getDocument(),d=new CKEDITOR.dom.text(this.$.splitText(e),c);b.childNodes.length==g&&(e>=a?(d=c.createText(""),d.insertAfter(this)):(e=c.createText(""),e.insertAfter(d),e.remove()));return d},substring:function(a,d){return"number"!=typeof d?this.$.nodeValue.substr(a):this.$.nodeValue.substring(a,d)}});(function(){function a(l,p,c){var g=l.serializable,n=p[c?"endContainer":"startContainer"],k=c?"endOffset":"startOffset",b=g?p.document.getById(l.startNode):l.startNode;l=g?p.document.getById(l.endNode):l.endNode;n.equals(b.getPrevious())?(p.startOffset=p.startOffset-n.getLength()-l.getPrevious().getLength(),n=l.getNext()):n.equals(l.getPrevious())&&(p.startOffset-=n.getLength(),n=l.getNext());n.equals(b.getParent())&&p[k]++;n.equals(l.getParent())&&p[k]++;p[c?"endContainer":"startContainer"]=n;return p}CKEDITOR.dom.rangeList=function(b){if(b instanceof CKEDITOR.dom.rangeList){return b}b?b instanceof CKEDITOR.dom.range&&(b=[b]):b=[];return CKEDITOR.tools.extend(b,d)};var d={createIterator:function(){var j=this,b=CKEDITOR.dom.walker.bookmark(),c=[],g;return{getNextRange:function(k){g=void 0===g?0:g+1;var i=j[g];if(i&&1<j.length){if(!g){for(var e=j.length-1;0<=e;e--){c.unshift(j[e].createBookmark(!0))}}if(k){for(var f=0;j[g+f+1];){var h=i.document;k=0;e=h.getById(c[f].endNode);for(h=h.getById(c[f+1].startNode);;){e=e.getNextSourceNode(!1);if(h.equals(e)){k=1}else{if(b(e)||e.type==CKEDITOR.NODE_ELEMENT&&e.isBlockBoundary()){continue}}break}if(!k){break}f++}}for(i.moveToBookmark(c.shift());f--;){e=j[++g],e.moveToBookmark(c.shift()),i.setEnd(e.endContainer,e.endOffset)}}return i}}},createBookmarks:function(b){for(var c=[],g,j=0;j<this.length;j++){c.push(g=this[j].createBookmark(b,!0));for(var k=j+1;k<this.length;k++){this[k]=a(g,this[k]),this[k]=a(g,this[k],!0)}}return c},createBookmarks2:function(h){for(var b=[],c=0;c<this.length;c++){b.push(this[c].createBookmark2(h))}return b},moveToBookmarks:function(c){for(var b=0;b<this.length;b++){this[b].moveToBookmark(c[b])}}}})();(function(){function a(){return CKEDITOR.getUrl(CKEDITOR.skinName.split(",")[1]||"skins/"+CKEDITOR.skinName.split(",")[0]+"/")}function d(h){var j=CKEDITOR.skin["ua_"+h],m=CKEDITOR.env;if(j){for(var j=j.split(",").sort(function(o,p){return o>p?-1:1}),f=0,i;f<j.length;f++){if(i=j[f],m.ie&&(i.replace(/^ie/,"")==m.version||m.quirks&&"iequirks"==i)&&(i="ie"),m[i]){h+="_"+j[f];break}}}return CKEDITOR.getUrl(a()+h+".css")}function b(f,h){g[f]||(CKEDITOR.document.appendStyleSheet(d(f)),g[f]=1);h&&h()}function c(f){var h=f.getById(l);h||(h=f.getHead().append("style"),h.setAttribute("id",l),h.setAttribute("type","text/css"));return h}function e(p,h,f){var i,j,m;if(CKEDITOR.env.webkit){for(h=h.split("}").slice(0,-1),j=0;j<h.length;j++){h[j]=h[j].split("{")}}for(var o=0;o<p.length;o++){if(CKEDITOR.env.webkit){for(j=0;j<h.length;j++){m=h[j][1];for(i=0;i<f.length;i++){m=m.replace(f[i][0],f[i][1])}p[o].$.sheet.addRule(h[j][0],m)}}else{m=h;for(i=0;i<f.length;i++){m=m.replace(f[i][0],f[i][1])}CKEDITOR.env.ie&&11>CKEDITOR.env.version?p[o].$.styleSheet.cssText+=m:p[o].$.innerHTML+=m}}}var g={};CKEDITOR.skin={path:a,loadPart:function(f,h){CKEDITOR.skin.name!=CKEDITOR.skinName.split(",")[0]?CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(a()+"skin.js"),function(){b(f,h)}):b(f,h)},getPath:function(f){return CKEDITOR.getUrl(d(f))},icons:{},addIcon:function(i,j,f,h){i=i.toLowerCase();this.icons[i]||(this.icons[i]={path:j,offset:f||0,bgsize:h||"16px"})},getIconStyle:function(f,h,i,j,m){var o;f&&(f=f.toLowerCase(),h&&(o=this.icons[f+"-rtl"]),o||(o=this.icons[f]));f=i||o&&o.path||"";j=j||o&&o.offset;m=m||o&&o.bgsize||"16px";f&&(f=f.replace(/'/g,"\\'"));return f&&"background-image:url('"+CKEDITOR.getUrl(f)+"');background-position:0 "+j+"px;background-size:"+m+";"}};CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{getUiColor:function(){return this.uiColor},setUiColor:function(f){var h=c(CKEDITOR.document);return(this.setUiColor=function(i){this.uiColor=i;var j=CKEDITOR.skin.chameleon,m="",o="";"function"==typeof j&&(m=j(this,"editor"),o=j(this,"panel"));i=[[n,i]];e([h],m,i);e(k,o,i)}).call(this,f)}});var l="cke_ui_color",k=[],n=/\$color/g;CKEDITOR.on("instanceLoaded",function(f){if(!CKEDITOR.env.ie||!CKEDITOR.env.quirks){var h=f.editor;f=function(i){i=(i.data[0]||i.data).element.getElementsByTag("iframe").getItem(0).getFrameDocument();if(!i.getById("cke_ui_color")){i=c(i);k.push(i);var j=h.getUiColor();j&&e([i],CKEDITOR.skin.chameleon(h,"panel"),[[n,j]])}};h.on("panelShow",f);h.on("menuShow",f);h.config.uiColor&&h.setUiColor(h.config.uiColor)}})})();(function(){if(CKEDITOR.env.webkit){CKEDITOR.env.hc=!1}else{var c=CKEDITOR.dom.element.createFromHtml('\x3cdiv style\x3d"width:0;height:0;position:absolute;left:-10000px;border:1px solid;border-color:red blue"\x3e\x3c/div\x3e',CKEDITOR.document);c.appendTo(CKEDITOR.document.getHead());try{var b=c.getComputedStyle("border-top-color"),d=c.getComputedStyle("border-right-color");CKEDITOR.env.hc=!(!b||b!=d)}catch(a){CKEDITOR.env.hc=!1}c.remove()}CKEDITOR.env.hc&&(CKEDITOR.env.cssClass+=" cke_hc");CKEDITOR.document.appendStyleText(".cke{visibility:hidden;}");CKEDITOR.status="loaded";CKEDITOR.fireOnce("loaded");if(c=CKEDITOR._.pending){for(delete CKEDITOR._.pending,b=0;b<c.length;b++){CKEDITOR.editor.prototype.constructor.apply(c[b][0],c[b][1]),CKEDITOR.add(c[b][0])}}})();CKEDITOR.skin.name="moono";CKEDITOR.skin.ua_editor="ie,iequirks,ie7,ie8,gecko";CKEDITOR.skin.ua_dialog="ie,iequirks,ie7,ie8";CKEDITOR.skin.chameleon=function(){var b=function(){return function(o,e){for(var n=o.match(/[^#]./g),a=0;3>a;a++){var m=a,d;d=parseInt(n[a],16);d=("0"+(0>e?0|d*(1+e):0|d+(255-d)*e).toString(16)).slice(-2);n[m]=d}return"#"+n.join("")}}(),c=function(){var a=new CKEDITOR.template("background:#{to};background-image:linear-gradient(to bottom,{from},{to});filter:progid:DXImageTransform.Microsoft.gradient(gradientType\x3d0,startColorstr\x3d'{from}',endColorstr\x3d'{to}');");return function(e,d){return a.output({from:e,to:d})}}(),f={editor:new CKEDITOR.template("{id}.cke_chrome [border-color:{defaultBorder};] {id} .cke_top [ {defaultGradient}border-bottom-color:{defaultBorder};] {id} .cke_bottom [{defaultGradient}border-top-color:{defaultBorder};] {id} .cke_resizer [border-right-color:{ckeResizer}] {id} .cke_dialog_title [{defaultGradient}border-bottom-color:{defaultBorder};] {id} .cke_dialog_footer [{defaultGradient}outline-color:{defaultBorder};border-top-color:{defaultBorder};] {id} .cke_dialog_tab [{lightGradient}border-color:{defaultBorder};] {id} .cke_dialog_tab:hover [{mediumGradient}] {id} .cke_dialog_contents [border-top-color:{defaultBorder};] {id} .cke_dialog_tab_selected, {id} .cke_dialog_tab_selected:hover [background:{dialogTabSelected};border-bottom-color:{dialogTabSelectedBorder};] {id} .cke_dialog_body [background:{dialogBody};border-color:{defaultBorder};] {id} .cke_toolgroup [{lightGradient}border-color:{defaultBorder};] {id} a.cke_button_off:hover, {id} a.cke_button_off:focus, {id} a.cke_button_off:active [{mediumGradient}] {id} .cke_button_on [{ckeButtonOn}] {id} .cke_toolbar_separator [background-color: {ckeToolbarSeparator};] {id} .cke_combo_button [border-color:{defaultBorder};{lightGradient}] {id} a.cke_combo_button:hover, {id} a.cke_combo_button:focus, {id} .cke_combo_on a.cke_combo_button [border-color:{defaultBorder};{mediumGradient}] {id} .cke_path_item [color:{elementsPathColor};] {id} a.cke_path_item:hover, {id} a.cke_path_item:focus, {id} a.cke_path_item:active [background-color:{elementsPathBg};] {id}.cke_panel [border-color:{defaultBorder};] "),panel:new CKEDITOR.template(".cke_panel_grouptitle [{lightGradient}border-color:{defaultBorder};] .cke_menubutton_icon [background-color:{menubuttonIcon};] .cke_menubutton:hover .cke_menubutton_icon, .cke_menubutton:focus .cke_menubutton_icon, .cke_menubutton:active .cke_menubutton_icon [background-color:{menubuttonIconHover};] .cke_menuseparator [background-color:{menubuttonIcon};] a:hover.cke_colorbox, a:focus.cke_colorbox, a:active.cke_colorbox [border-color:{defaultBorder};] a:hover.cke_colorauto, a:hover.cke_colormore, a:focus.cke_colorauto, a:focus.cke_colormore, a:active.cke_colorauto, a:active.cke_colormore [background-color:{ckeColorauto};border-color:{defaultBorder};] ")};return function(e,d){var a=e.uiColor,a={id:"."+e.id,defaultBorder:b(a,-0.1),defaultGradient:c(b(a,0.9),a),lightGradient:c(b(a,1),b(a,0.7)),mediumGradient:c(b(a,0.8),b(a,0.5)),ckeButtonOn:c(b(a,0.6),b(a,0.7)),ckeResizer:b(a,-0.4),ckeToolbarSeparator:b(a,0.5),ckeColorauto:b(a,0.8),dialogBody:b(a,0.7),dialogTabSelected:c("#FFFFFF","#FFFFFF"),dialogTabSelectedBorder:"#FFF",elementsPathColor:b(a,-0.6),elementsPathBg:a,menubuttonIcon:b(a,0.5),menubuttonIconHover:b(a,0.3)};return f[d].output(a).replace(/\[/g,"{").replace(/\]/g,"}")}}();CKEDITOR.plugins.add("dialogui",{onLoad:function(){var n=function(c){this._||(this._={});this._["default"]=this._.initValue=c["default"]||"";this._.required=c.required||!1;for(var b=[this._],a=1;a<arguments.length;a++){b.push(arguments[a])}b.push(!0);CKEDITOR.tools.extend.apply(CKEDITOR.tools,b);return this._},p={build:function(c,b,a){return new CKEDITOR.ui.dialog.textInput(c,b,a)}},k={build:function(c,b,a){return new CKEDITOR.ui.dialog[b.type](c,b,a)}},l={isChanged:function(){return this.getValue()!=this.getInitValue()},reset:function(a){this.setValue(this.getInitValue(),a)},setInitValue:function(){this._.initValue=this.getValue()},resetInitValue:function(){this._.initValue=this._["default"]},getInitValue:function(){return this._.initValue}},m=CKEDITOR.tools.extend({},CKEDITOR.ui.dialog.uiElement.prototype.eventProcessors,{onChange:function(b,a){this._.domOnChangeRegistered||(b.on("load",function(){this.getInputElement().on("change",function(){b.parts.dialog.isVisible()&&this.fire("change",{value:this.getValue()})},this)},this),this._.domOnChangeRegistered=!0);this.on("change",a)}},!0),j=/^on([A-Z]\w+)/,o=function(b){for(var a in b){(j.test(a)||"title"==a||"type"==a)&&delete b[a]}return b},h=function(a){a=a.data.getKeystroke();a==CKEDITOR.SHIFT+CKEDITOR.ALT+36?this.setDirectionMarker("ltr"):a==CKEDITOR.SHIFT+CKEDITOR.ALT+35&&this.setDirectionMarker("rtl")};CKEDITOR.tools.extend(CKEDITOR.ui.dialog,{labeledElement:function(e,d,a,c){if(!(4>arguments.length)){var f=n.call(this,d);f.labelId=CKEDITOR.tools.getNextId()+"_label";this._.children=[];var b={role:d.role||"presentation"};d.includeLabel&&(b["aria-labelledby"]=f.labelId);CKEDITOR.ui.dialog.uiElement.call(this,e,d,a,"div",null,b,function(){var g=[],i=d.required?" cke_required":"";"horizontal"!=d.labelLayout?g.push('\x3clabel class\x3d"cke_dialog_ui_labeled_label'+i+'" ',' id\x3d"'+f.labelId+'"',f.inputId?' for\x3d"'+f.inputId+'"':"",(d.labelStyle?' style\x3d"'+d.labelStyle+'"':"")+"\x3e",d.label,"\x3c/label\x3e",'\x3cdiv class\x3d"cke_dialog_ui_labeled_content"',d.controlStyle?' style\x3d"'+d.controlStyle+'"':"",' role\x3d"presentation"\x3e',c.call(this,e,d),"\x3c/div\x3e"):(i={type:"hbox",widths:d.widths,padding:0,children:[{type:"html",html:'\x3clabel class\x3d"cke_dialog_ui_labeled_label'+i+'" id\x3d"'+f.labelId+'" for\x3d"'+f.inputId+'"'+(d.labelStyle?' style\x3d"'+d.labelStyle+'"':"")+"\x3e"+CKEDITOR.tools.htmlEncode(d.label)+"\x3c/label\x3e"},{type:"html",html:'\x3cspan class\x3d"cke_dialog_ui_labeled_content"'+(d.controlStyle?' style\x3d"'+d.controlStyle+'"':"")+"\x3e"+c.call(this,e,d)+"\x3c/span\x3e"}]},CKEDITOR.dialog._.uiElementBuilders.hbox.build(e,i,g));return g.join("")})}},textInput:function(c,b,f){if(!(3>arguments.length)){n.call(this,b);var a=this._.inputId=CKEDITOR.tools.getNextId()+"_textInput",e={"class":"cke_dialog_ui_input_"+b.type,id:a,type:b.type};b.validate&&(this.validate=b.validate);b.maxLength&&(e.maxlength=b.maxLength);b.size&&(e.size=b.size);b.inputStyle&&(e.style=b.inputStyle);var g=this,d=!1;c.on("load",function(){g.getInputElement().on("keydown",function(i){13==i.data.getKeystroke()&&(d=!0)});g.getInputElement().on("keyup",function(i){13==i.data.getKeystroke()&&d&&(c.getButton("ok")&&setTimeout(function(){c.getButton("ok").click()},0),d=!1);g.bidi&&h.call(g,i)},null,null,1000)});CKEDITOR.ui.dialog.labeledElement.call(this,c,b,f,function(){var i=['\x3cdiv class\x3d"cke_dialog_ui_input_',b.type,'" role\x3d"presentation"'];b.width&&i.push('style\x3d"width:'+b.width+'" ');i.push("\x3e\x3cinput ");e["aria-labelledby"]=this._.labelId;this._.required&&(e["aria-required"]=this._.required);for(var r in e){i.push(r+'\x3d"'+e[r]+'" ')}i.push(" /\x3e\x3c/div\x3e");return i.join("")})}},textarea:function(e,d,a){if(!(3>arguments.length)){n.call(this,d);var c=this,f=this._.inputId=CKEDITOR.tools.getNextId()+"_textarea",b={};d.validate&&(this.validate=d.validate);b.rows=d.rows||5;b.cols=d.cols||20;b["class"]="cke_dialog_ui_input_textarea "+(d["class"]||"");"undefined"!=typeof d.inputStyle&&(b.style=d.inputStyle);d.dir&&(b.dir=d.dir);if(c.bidi){e.on("load",function(){c.getInputElement().on("keyup",h)},c)}CKEDITOR.ui.dialog.labeledElement.call(this,e,d,a,function(){b["aria-labelledby"]=this._.labelId;this._.required&&(b["aria-required"]=this._.required);var g=['\x3cdiv class\x3d"cke_dialog_ui_input_textarea" role\x3d"presentation"\x3e\x3ctextarea id\x3d"',f,'" '],i;for(i in b){g.push(i+'\x3d"'+CKEDITOR.tools.htmlEncode(b[i])+'" ')}g.push("\x3e",CKEDITOR.tools.htmlEncode(c._["default"]),"\x3c/textarea\x3e\x3c/div\x3e");return g.join("")})}},checkbox:function(d,c,a){if(!(3>arguments.length)){var b=n.call(this,c,{"default":!!c["default"]});c.validate&&(this.validate=c.validate);CKEDITOR.ui.dialog.uiElement.call(this,d,c,a,"span",null,null,function(){var f=CKEDITOR.tools.extend({},c,{id:c.id?c.id+"_checkbox":CKEDITOR.tools.getNextId()+"_checkbox"},!0),i=[],g=CKEDITOR.tools.getNextId()+"_label",e={"class":"cke_dialog_ui_checkbox_input",type:"checkbox","aria-labelledby":g};o(f);c["default"]&&(e.checked="checked");"undefined"!=typeof f.inputStyle&&(f.style=f.inputStyle);b.checkbox=new CKEDITOR.ui.dialog.uiElement(d,f,i,"input",null,e);i.push(' \x3clabel id\x3d"',g,'" for\x3d"',e.id,'"'+(c.labelStyle?' style\x3d"'+c.labelStyle+'"':"")+"\x3e",CKEDITOR.tools.htmlEncode(c.label),"\x3c/label\x3e");return i.join("")})}},radio:function(e,d,b){if(!(3>arguments.length)){n.call(this,d);this._["default"]||(this._["default"]=this._.initValue=d.items[0][1]);d.validate&&(this.validate=d.validate);var c=[],a=this;d.role="radiogroup";d.includeLabel=!0;CKEDITOR.ui.dialog.labeledElement.call(this,e,d,b,function(){for(var q=[],g=[],r=(d.id?d.id:CKEDITOR.tools.getNextId())+"_radio",D=0;D<d.items.length;D++){var E=d.items[D],u=void 0!==E[2]?E[2]:E[0],F=void 0!==E[1]?E[1]:E[0],G=CKEDITOR.tools.getNextId()+"_radio_input",H=G+"_label",G=CKEDITOR.tools.extend({},d,{id:G,title:null,type:null},!0),u=CKEDITOR.tools.extend({},G,{title:u},!0),i={type:"radio","class":"cke_dialog_ui_radio_input",name:r,value:F,"aria-labelledby":H},f=[];a._["default"]==F&&(i.checked="checked");o(G);o(u);"undefined"!=typeof G.inputStyle&&(G.style=G.inputStyle);G.keyboardFocusable=!0;c.push(new CKEDITOR.ui.dialog.uiElement(e,G,f,"input",null,i));f.push(" ");new CKEDITOR.ui.dialog.uiElement(e,u,f,"label",null,{id:H,"for":i.id},E[0]);q.push(f.join(""))}new CKEDITOR.ui.dialog.hbox(e,c,q,g);return g.join("")});this._.children=c}},button:function(e,d,a){if(arguments.length){"function"==typeof d&&(d=d(e.getParentEditor()));n.call(this,d,{disabled:d.disabled||!1});CKEDITOR.event.implementOn(this);var c=this;e.on("load",function(){var g=this.getElement();(function(){g.on("click",function(i){c.click();i.data.preventDefault()});g.on("keydown",function(i){i.data.getKeystroke() in {32:1}&&(c.click(),i.data.preventDefault())})})();g.unselectable()},this);var f=CKEDITOR.tools.extend({},d);delete f.style;var b=CKEDITOR.tools.getNextId()+"_label";CKEDITOR.ui.dialog.uiElement.call(this,e,f,a,"a",null,{style:d.style,href:"javascript:void(0)",title:d.label,hidefocus:"true","class":d["class"],role:"button","aria-labelledby":b},'\x3cspan id\x3d"'+b+'" class\x3d"cke_dialog_ui_button"\x3e'+CKEDITOR.tools.htmlEncode(d.label)+"\x3c/span\x3e")}},select:function(d,c,a){if(!(3>arguments.length)){var b=n.call(this,c);c.validate&&(this.validate=c.validate);b.inputId=CKEDITOR.tools.getNextId()+"_select";CKEDITOR.ui.dialog.labeledElement.call(this,d,c,a,function(){var f=CKEDITOR.tools.extend({},c,{id:c.id?c.id+"_select":CKEDITOR.tools.getNextId()+"_select"},!0),i=[],g=[],s={id:b.inputId,"class":"cke_dialog_ui_input_select","aria-labelledby":this._.labelId};i.push('\x3cdiv class\x3d"cke_dialog_ui_input_',c.type,'" role\x3d"presentation"');c.width&&i.push('style\x3d"width:'+c.width+'" ');i.push("\x3e");void 0!==c.size&&(s.size=c.size);void 0!==c.multiple&&(s.multiple=c.multiple);o(f);for(var t=0,e;t<c.items.length&&(e=c.items[t]);t++){g.push('\x3coption value\x3d"',CKEDITOR.tools.htmlEncode(void 0!==e[1]?e[1]:e[0]).replace(/"/g,"\x26quot;"),'" /\x3e ',CKEDITOR.tools.htmlEncode(e[0]))}"undefined"!=typeof f.inputStyle&&(f.style=f.inputStyle);b.select=new CKEDITOR.ui.dialog.uiElement(d,f,i,"select",null,s,g.join(""));i.push("\x3c/div\x3e");return i.join("")})}},file:function(d,c,a){if(!(3>arguments.length)){void 0===c["default"]&&(c["default"]="");var b=CKEDITOR.tools.extend(n.call(this,c),{definition:c,buttons:[]});c.validate&&(this.validate=c.validate);d.on("load",function(){CKEDITOR.document.getById(b.frameId).getParent().addClass("cke_dialog_ui_input_file")});CKEDITOR.ui.dialog.labeledElement.call(this,d,c,a,function(){b.frameId=CKEDITOR.tools.getNextId()+"_fileInput";var e=['\x3ciframe frameborder\x3d"0" allowtransparency\x3d"0" class\x3d"cke_dialog_ui_input_file" role\x3d"presentation" id\x3d"',b.frameId,'" title\x3d"',c.label,'" src\x3d"javascript:void('];e.push(CKEDITOR.env.ie?"(function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.close();")+"})()":"0");e.push(')"\x3e\x3c/iframe\x3e');return e.join("")})}},fileButton:function(e,d,a){var c=this;if(!(3>arguments.length)){n.call(this,d);d.validate&&(this.validate=d.validate);var f=CKEDITOR.tools.extend({},d),b=f.onClick;f.className=(f.className?f.className+" ":"")+"cke_dialog_ui_button";f.onClick=function(g){var i=d["for"];b&&!1===b.call(this,g)||(e.getContentElement(i[0],i[1]).submit(),this.disable())};e.on("load",function(){e.getContentElement(d["for"][0],d["for"][1])._.buttons.push(c)});CKEDITOR.ui.dialog.button.call(this,e,f,a)}},html:function(){var c=/^\s*<[\w:]+\s+([^>]*)?>/,b=/^(\s*<[\w:]+(?:\s+[^>]*)?)((?:.|\r|\n)+)$/,a=/\/$/;return function(f,d,e){if(!(3>arguments.length)){var v=[],g=d.html;"\x3c"!=g.charAt(0)&&(g="\x3cspan\x3e"+g+"\x3c/span\x3e");var i=d.focus;if(i){var u=this.focus;this.focus=function(){("function"==typeof i?i:u).call(this);this.fire("focus")};d.isFocusable&&(this.isFocusable=this.isFocusable);this.keyboardFocusable=!0}CKEDITOR.ui.dialog.uiElement.call(this,f,d,v,"span",null,null,"");v=v.join("").match(c);g=g.match(b)||["","",""];a.test(g[1])&&(g[1]=g[1].slice(0,-1),g[2]="/"+g[2]);e.push([g[1]," ",v[1]||"",g[2]].join(""))}}}(),fieldset:function(e,d,a,c,f){var b=f.label;this._={children:d};CKEDITOR.ui.dialog.uiElement.call(this,e,f,c,"fieldset",null,null,function(){var g=[];b&&g.push("\x3clegend"+(f.labelStyle?' style\x3d"'+f.labelStyle+'"':"")+"\x3e"+b+"\x3c/legend\x3e");for(var i=0;i<a.length;i++){g.push(a[i])}return g.join("")})}},!0);CKEDITOR.ui.dialog.html.prototype=new CKEDITOR.ui.dialog.uiElement;CKEDITOR.ui.dialog.labeledElement.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{setLabel:function(b){var a=CKEDITOR.document.getById(this._.labelId);1>a.getChildCount()?(new CKEDITOR.dom.text(b,CKEDITOR.document)).appendTo(a):a.getChild(0).$.nodeValue=b;return this},getLabel:function(){var a=CKEDITOR.document.getById(this._.labelId);return !a||1>a.getChildCount()?"":a.getChild(0).getText()},eventProcessors:m},!0);CKEDITOR.ui.dialog.button.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{click:function(){return this._.disabled?!1:this.fire("click",{dialog:this._.dialog})},enable:function(){this._.disabled=!1;var a=this.getElement();a&&a.removeClass("cke_disabled")},disable:function(){this._.disabled=!0;this.getElement().addClass("cke_disabled")},isVisible:function(){return this.getElement().getFirst().isVisible()},isEnabled:function(){return !this._.disabled},eventProcessors:CKEDITOR.tools.extend({},CKEDITOR.ui.dialog.uiElement.prototype.eventProcessors,{onClick:function(b,a){this.on("click",function(){a.apply(this,arguments)})}},!0),accessKeyUp:function(){this.click()},accessKeyDown:function(){this.focus()},keyboardFocusable:!0},!0);CKEDITOR.ui.dialog.textInput.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.labeledElement,{getInputElement:function(){return CKEDITOR.document.getById(this._.inputId)},focus:function(){var a=this.selectParentTab();setTimeout(function(){var b=a.getInputElement();b&&b.$.focus()},0)},select:function(){var a=this.selectParentTab();setTimeout(function(){var b=a.getInputElement();b&&(b.$.focus(),b.$.select())},0)},accessKeyUp:function(){this.select()},setValue:function(b){if(this.bidi){var a=b&&b.charAt(0);(a=""==a?"ltr":""==a?"rtl":null)&&(b=b.slice(1));this.setDirectionMarker(a)}b||(b="");return CKEDITOR.ui.dialog.uiElement.prototype.setValue.apply(this,arguments)},getValue:function(){var b=CKEDITOR.ui.dialog.uiElement.prototype.getValue.call(this);if(this.bidi&&b){var a=this.getDirectionMarker();a&&(b=("ltr"==a?"":"")+b)}return b},setDirectionMarker:function(b){var a=this.getInputElement();b?a.setAttributes({dir:b,"data-cke-dir-marker":b}):this.getDirectionMarker()&&a.removeAttributes(["dir","data-cke-dir-marker"])},getDirectionMarker:function(){return this.getInputElement().data("cke-dir-marker")},keyboardFocusable:!0},l,!0);CKEDITOR.ui.dialog.textarea.prototype=new CKEDITOR.ui.dialog.textInput;CKEDITOR.ui.dialog.select.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.labeledElement,{getInputElement:function(){return this._.select.getElement()},add:function(e,d,b){var c=new CKEDITOR.dom.element("option",this.getDialog().getParentEditor().document),a=this.getInputElement().$;c.$.text=e;c.$.value=void 0===d||null===d?e:d;void 0===b||null===b?CKEDITOR.env.ie?a.add(c.$):a.add(c.$,null):a.add(c.$,b);return this},remove:function(a){this.getInputElement().$.remove(a);return this},clear:function(){for(var a=this.getInputElement().$;0<a.length;){a.remove(0)}return this},keyboardFocusable:!0},l,!0);CKEDITOR.ui.dialog.checkbox.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{getInputElement:function(){return this._.checkbox.getElement()},setValue:function(b,a){this.getInputElement().$.checked=b;!a&&this.fire("change",{value:b})},getValue:function(){return this.getInputElement().$.checked},accessKeyUp:function(){this.setValue(!this.getValue())},eventProcessors:{onChange:function(b,a){if(!CKEDITOR.env.ie||8<CKEDITOR.env.version){return m.onChange.apply(this,arguments)}b.on("load",function(){var c=this._.checkbox.getElement();c.on("propertychange",function(d){d=d.data.$;"checked"==d.propertyName&&this.fire("change",{value:c.$.checked})},this)},this);this.on("change",a);return null}},keyboardFocusable:!0},l,!0);CKEDITOR.ui.dialog.radio.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{setValue:function(e,d){for(var b=this._.children,c,a=0;a<b.length&&(c=b[a]);a++){c.getElement().$.checked=c.getValue()==e}!d&&this.fire("change",{value:e})},getValue:function(){for(var b=this._.children,a=0;a<b.length;a++){if(b[a].getElement().$.checked){return b[a].getValue()}}return null},accessKeyUp:function(){var b=this._.children,a;for(a=0;a<b.length;a++){if(b[a].getElement().$.checked){b[a].getElement().focus();return}}b[0].getElement().focus()},eventProcessors:{onChange:function(b,a){if(!CKEDITOR.env.ie||8<CKEDITOR.env.version){return m.onChange.apply(this,arguments)}b.on("load",function(){for(var d=this._.children,e=this,c=0;c<d.length;c++){d[c].getElement().on("propertychange",function(f){f=f.data.$;"checked"==f.propertyName&&this.$.checked&&e.fire("change",{value:this.getAttribute("value")})})}},this);this.on("change",a);return null}}},l,!0);CKEDITOR.ui.dialog.file.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.labeledElement,l,{getInputElement:function(){var a=CKEDITOR.document.getById(this._.frameId).getFrameDocument();return 0<a.$.forms.length?new CKEDITOR.dom.element(a.$.forms[0].elements[0]):this.getElement()},submit:function(){this.getInputElement().getParent().$.submit();return this},getAction:function(){return this.getInputElement().getParent().$.action},registerEvents:function(e){var d=/^on([A-Z]\w+)/,b,c=function(i,r,f,g){i.on("formLoaded",function(){i.getInputElement().on(f,g,i)})},a;for(a in e){if(b=a.match(d)){this.eventProcessors[a]?this.eventProcessors[a].call(this,this._.dialog,e[a]):c(this,this._.dialog,b[1].toLowerCase(),e[a])}}return this},reset:function(){function a(){c.$.open();var r="";e.size&&(r=e.size-(CKEDITOR.env.ie?7:0));var q=t.frameId+"_input";c.$.write(['\x3chtml dir\x3d"'+f+'" lang\x3d"'+g+'"\x3e\x3chead\x3e\x3ctitle\x3e\x3c/title\x3e\x3c/head\x3e\x3cbody style\x3d"margin: 0; overflow: hidden; background: transparent;"\x3e','\x3cform enctype\x3d"multipart/form-data" method\x3d"POST" dir\x3d"'+f+'" lang\x3d"'+g+'" action\x3d"',CKEDITOR.tools.htmlEncode(e.action),'"\x3e\x3clabel id\x3d"',t.labelId,'" for\x3d"',q,'" style\x3d"display:none"\x3e',CKEDITOR.tools.htmlEncode(e.label),'\x3c/label\x3e\x3cinput style\x3d"width:100%" id\x3d"',q,'" aria-labelledby\x3d"',t.labelId,'" type\x3d"file" name\x3d"',CKEDITOR.tools.htmlEncode(e.id||"cke_upload"),'" size\x3d"',CKEDITOR.tools.htmlEncode(0<r?r:""),'" /\x3e\x3c/form\x3e\x3c/body\x3e\x3c/html\x3e\x3cscript\x3e',CKEDITOR.env.ie?"("+CKEDITOR.tools.fixDomain+")();":"","window.parent.CKEDITOR.tools.callFunction("+d+");","window.onbeforeunload \x3d function() {window.parent.CKEDITOR.tools.callFunction("+i+")}","\x3c/script\x3e"].join(""));c.$.close();for(r=0;r<b.length;r++){b[r].enable()}}var t=this._,c=CKEDITOR.document.getById(t.frameId).getFrameDocument(),e=t.definition,b=t.buttons,d=this.formLoadedNumber,i=this.formUnloadNumber,f=t.dialog._.editor.lang.dir,g=t.dialog._.editor.langCode;d||(d=this.formLoadedNumber=CKEDITOR.tools.addFunction(function(){this.fire("formLoaded")},this),i=this.formUnloadNumber=CKEDITOR.tools.addFunction(function(){this.getInputElement().clearCustomData()},this),this.getDialog()._.editor.on("destroy",function(){CKEDITOR.tools.removeFunction(d);CKEDITOR.tools.removeFunction(i)}));CKEDITOR.env.gecko?setTimeout(a,500):a()},getValue:function(){return this.getInputElement().$.value||""},setInitValue:function(){this._.initValue=""},eventProcessors:{onChange:function(b,a){this._.domOnChangeRegistered||(this.on("formLoaded",function(){this.getInputElement().on("change",function(){this.fire("change",{value:this.getValue()})},this)},this),this._.domOnChangeRegistered=!0);this.on("change",a)}},keyboardFocusable:!0},!0);CKEDITOR.ui.dialog.fileButton.prototype=new CKEDITOR.ui.dialog.button;CKEDITOR.ui.dialog.fieldset.prototype=CKEDITOR.tools.clone(CKEDITOR.ui.dialog.hbox.prototype);CKEDITOR.dialog.addUIElement("text",p);CKEDITOR.dialog.addUIElement("password",p);CKEDITOR.dialog.addUIElement("textarea",k);CKEDITOR.dialog.addUIElement("checkbox",k);CKEDITOR.dialog.addUIElement("radio",k);CKEDITOR.dialog.addUIElement("button",k);CKEDITOR.dialog.addUIElement("select",k);CKEDITOR.dialog.addUIElement("file",k);CKEDITOR.dialog.addUIElement("fileButton",k);CKEDITOR.dialog.addUIElement("html",k);CKEDITOR.dialog.addUIElement("fieldset",{build:function(a,t,c){for(var e=t.children,b,d=[],g=[],f=0;f<e.length&&(b=e[f]);f++){var i=[];d.push(i);g.push(CKEDITOR.dialog._.uiElementBuilders[b.type].build(a,b,i))}return new CKEDITOR.ui.dialog[t.type](a,g,d,c,t)}})}});CKEDITOR.DIALOG_RESIZE_NONE=0;CKEDITOR.DIALOG_RESIZE_WIDTH=1;CKEDITOR.DIALOG_RESIZE_HEIGHT=2;CKEDITOR.DIALOG_RESIZE_BOTH=3;CKEDITOR.DIALOG_STATE_IDLE=1;CKEDITOR.DIALOG_STATE_BUSY=2;(function(){function u(){for(var b=this._.tabIdList.length,c=CKEDITOR.tools.indexOf(this._.tabIdList,this._.currentTabId)+b,a=c-1;a>c-b;a--){if(this._.tabs[this._.tabIdList[a%b]][0].$.offsetHeight){return this._.tabIdList[a%b]}}return null}function Y(){for(var b=this._.tabIdList.length,c=CKEDITOR.tools.indexOf(this._.tabIdList,this._.currentTabId),a=c+1;a<c+b;a++){if(this._.tabs[this._.tabIdList[a%b]][0].$.offsetHeight){return this._.tabIdList[a%b]}}return null}function D(d,e){for(var b=d.$.getElementsByTagName("input"),f=0,a=b.length;f<a;f++){var c=new CKEDITOR.dom.element(b[f]);"text"==c.getAttribute("type").toLowerCase()&&(e?(c.setAttribute("value",c.getCustomData("fake_value")||""),c.removeCustomData("fake_value")):(c.setCustomData("fake_value",c.getAttribute("value")),c.setAttribute("value","")))}}function R(b,c){var a=this.getInputElement();a&&(b?a.removeAttribute("aria-invalid"):a.setAttribute("aria-invalid",!0));b||(this.select?this.select():this.focus());c&&alert(c);this.fire("validated",{valid:b,msg:c})}function T(){var a=this.getInputElement();a&&a.removeAttribute("aria-invalid")}function V(c){var d=CKEDITOR.dom.element.createFromHtml(CKEDITOR.addTemplate("dialog",X).output({id:CKEDITOR.tools.getNextNumber(),editorId:c.id,langDir:c.lang.dir,langCode:c.langCode,editorDialogClass:"cke_editor_"+c.name.replace(/\./g,"\\.")+"_dialog",closeTitle:c.lang.common.close,hidpi:CKEDITOR.env.hidpi?"cke_hidpi":""})),e=d.getChild([0,0,0,0,0]),a=e.getChild(0),b=e.getChild(1);c.plugins.clipboard&&CKEDITOR.plugins.clipboard.preventDefaultDropOnElement(e);!CKEDITOR.env.ie||CKEDITOR.env.quirks||CKEDITOR.env.edge||(c="javascript:void(function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.close();")+"}())",CKEDITOR.dom.element.createFromHtml('\x3ciframe frameBorder\x3d"0" class\x3d"cke_iframe_shim" src\x3d"'+c+'" tabIndex\x3d"-1"\x3e\x3c/iframe\x3e').appendTo(e.getParent()));a.unselectable();b.unselectable();return{element:d,parts:{dialog:d.getChild(0),title:a,close:b,tabs:e.getChild(2),contents:e.getChild([3,0,0,0]),footer:e.getChild([3,0,1,0])}}}function I(b,c,a){this.element=c;this.focusIndex=a;this.tabIndex=0;this.isFocusable=function(){return !c.getAttribute("disabled")&&c.isVisible()};this.focus=function(){b._.currentFocusIndex=this.focusIndex;this.element.focus()};c.on("keydown",function(d){d.data.getKeystroke() in {32:1,13:1}&&this.fire("click")});c.on("focus",function(){this.fire("mouseover")});c.on("blur",function(){this.fire("mouseout")})}function Z(b){function c(){b.layout()}var a=CKEDITOR.document.getWindow();a.on("resize",c);b.on("hide",function(){a.removeListener("resize",c)})}function J(a,b){this._={dialog:a};CKEDITOR.tools.extend(this,b)}function ad(d){function e(m){var n=d.getSize(),k=CKEDITOR.document.getWindow().getViewPaneSize(),i=m.data.$.screenX,o=m.data.$.screenY,j=i-g.x,l=o-g.y;g={x:i,y:o};b.x+=j;b.y+=l;d.move(b.x+c[3]<a?-c[3]:b.x-c[1]>k.width-n.width-a?k.width-n.width+("rtl"==h.lang.dir?0:c[1]):b.x,b.y+c[0]<a?-c[0]:b.y-c[2]>k.height-n.height-a?k.height-n.height+c[2]:b.y,1);m.data.preventDefault()}function f(){CKEDITOR.document.removeListener("mousemove",e);CKEDITOR.document.removeListener("mouseup",f);if(CKEDITOR.env.ie6Compat){var i=w.getChild(0).getFrameDocument();i.removeListener("mousemove",e);i.removeListener("mouseup",f)}}var g=null,b=null,h=d.getParentEditor(),a=h.config.dialog_magnetDistance,c=CKEDITOR.skin.margins||[0,0,0,0];"undefined"==typeof a&&(a=20);d.parts.title.on("mousedown",function(j){g={x:j.data.$.screenX,y:j.data.$.screenY};CKEDITOR.document.on("mousemove",e);CKEDITOR.document.on("mouseup",f);b=d.getPosition();if(CKEDITOR.env.ie6Compat){var i=w.getChild(0).getFrameDocument();i.on("mousemove",e);i.on("mouseup",f)}j.data.preventDefault()},d)}function af(d){function e(y){var n="rtl"==m.lang.dir,o=c.width,r=c.height,s=o+(y.data.$.screenX-f.x)*(n?-1:1)*(d._.moved?1:2),t=r+(y.data.$.screenY-f.y)*(d._.moved?1:2),p=d._.element.getFirst(),p=n&&p.getComputedStyle("right"),q=d.getPosition();q.y+t>j.height&&(t=j.height-q.y);(n?p:q.x)+s>j.width&&(s=j.width-(n?p:q.x));if(l==CKEDITOR.DIALOG_RESIZE_WIDTH||l==CKEDITOR.DIALOG_RESIZE_BOTH){o=Math.max(i.minWidth||0,s-a)}if(l==CKEDITOR.DIALOG_RESIZE_HEIGHT||l==CKEDITOR.DIALOG_RESIZE_BOTH){r=Math.max(i.minHeight||0,t-b)}d.resize(o,r);d._.moved||d.layout();y.data.preventDefault()}function g(){CKEDITOR.document.removeListener("mouseup",g);CKEDITOR.document.removeListener("mousemove",e);k&&(k.remove(),k=null);if(CKEDITOR.env.ie6Compat){var n=w.getChild(0).getFrameDocument();n.removeListener("mouseup",g);n.removeListener("mousemove",e)}}var i=d.definition,l=i.resizable;if(l!=CKEDITOR.DIALOG_RESIZE_NONE){var m=d.getParentEditor(),a,b,j,f,c,k,h=CKEDITOR.tools.addFunction(function(o){c=d.getSize();var n=d.parts.contents;n.$.getElementsByTagName("iframe").length&&(k=CKEDITOR.dom.element.createFromHtml('\x3cdiv class\x3d"cke_dialog_resize_cover" style\x3d"height: 100%; position: absolute; width: 100%;"\x3e\x3c/div\x3e'),n.append(k));b=c.height-d.parts.contents.getSize("height",!(CKEDITOR.env.gecko||CKEDITOR.env.ie&&CKEDITOR.env.quirks));a=c.width-d.parts.contents.getSize("width",1);f={x:o.screenX,y:o.screenY};j=CKEDITOR.document.getWindow().getViewPaneSize();CKEDITOR.document.on("mousemove",e);CKEDITOR.document.on("mouseup",g);CKEDITOR.env.ie6Compat&&(n=w.getChild(0).getFrameDocument(),n.on("mousemove",e),n.on("mouseup",g));o.preventDefault&&o.preventDefault()});d.on("load",function(){var n="";l==CKEDITOR.DIALOG_RESIZE_WIDTH?n=" cke_resizer_horizontal":l==CKEDITOR.DIALOG_RESIZE_HEIGHT&&(n=" cke_resizer_vertical");n=CKEDITOR.dom.element.createFromHtml('\x3cdiv class\x3d"cke_resizer'+n+" cke_resizer_"+m.lang.dir+'" title\x3d"'+CKEDITOR.tools.htmlEncode(m.lang.common.resize)+'" onmousedown\x3d"CKEDITOR.tools.callFunction('+h+', event )"\x3e'+("ltr"==m.lang.dir?"â¢":"â£")+"\x3c/div\x3e");d.parts.footer.append(n,1)});m.on("destroy",function(){CKEDITOR.tools.removeFunction(h)})}}function x(a){a.data.preventDefault(1)}function K(h){var i=CKEDITOR.document.getWindow(),a=h.config,b=a.dialog_backgroundCoverColor||"white",c=a.dialog_backgroundCoverOpacity,d=a.baseFloatZIndex,a=CKEDITOR.tools.genKey(b,c,d),e=F[a];e?e.show():(d=['\x3cdiv tabIndex\x3d"-1" style\x3d"position: ',CKEDITOR.env.ie6Compat?"absolute":"fixed","; z-index: ",d,"; top: 0px; left: 0px; ",CKEDITOR.env.ie6Compat?"":"background-color: "+b,'" class\x3d"cke_dialog_background_cover"\x3e'],CKEDITOR.env.ie6Compat&&(b="\x3chtml\x3e\x3cbody style\x3d\\'background-color:"+b+";\\'\x3e\x3c/body\x3e\x3c/html\x3e",d.push('\x3ciframe hidefocus\x3d"true" frameborder\x3d"0" id\x3d"cke_dialog_background_iframe" src\x3d"javascript:'),d.push("void((function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.write( '"+b+"' );document.close();")+"})())"),d.push('" style\x3d"position:absolute;left:0;top:0;width:100%;height: 100%;filter: progid:DXImageTransform.Microsoft.Alpha(opacity\x3d0)"\x3e\x3c/iframe\x3e')),d.push("\x3c/div\x3e"),e=CKEDITOR.dom.element.createFromHtml(d.join("")),e.setOpacity(void 0!==c?c:0.5),e.on("keydown",x),e.on("keypress",x),e.on("keyup",x),e.appendTo(CKEDITOR.document.getBody()),F[a]=e);h.focusManager.add(e);w=e;h=function(){var j=i.getViewPaneSize();e.setStyles({width:j.width+"px",height:j.height+"px"})};var f=function(){var k=i.getScrollPosition(),j=CKEDITOR.dialog._.currentTop;e.setStyles({left:k.x+"px",top:k.y+"px"});if(j){do{k=j.getPosition(),j.move(k.x,k.y)}while(j=j._.parentDialog)}};z=h;i.on("resize",h);h();CKEDITOR.env.mac&&CKEDITOR.env.webkit||e.focus();if(CKEDITOR.env.ie6Compat){var g=function(){f();arguments.callee.prevScrollHandler.apply(this,arguments)};i.$.setTimeout(function(){g.prevScrollHandler=window.onscroll||function(){};window.onscroll=g},0);f()}}function L(a){w&&(a.focusManager.remove(w),a=CKEDITOR.document.getWindow(),w.hide(),a.removeListener("resize",z),CKEDITOR.env.ie6Compat&&a.$.setTimeout(function(){window.onscroll=window.onscroll&&window.onscroll.prevScrollHandler||null},0),z=null)}var A=CKEDITOR.tools.cssLength,X='\x3cdiv class\x3d"cke_reset_all {editorId} {editorDialogClass} {hidpi}" dir\x3d"{langDir}" lang\x3d"{langCode}" role\x3d"dialog" aria-labelledby\x3d"cke_dialog_title_{id}"\x3e\x3ctable class\x3d"cke_dialog '+CKEDITOR.env.cssClass+' cke_{langDir}" style\x3d"position:absolute" role\x3d"presentation"\x3e\x3ctr\x3e\x3ctd role\x3d"presentation"\x3e\x3cdiv class\x3d"cke_dialog_body" role\x3d"presentation"\x3e\x3cdiv id\x3d"cke_dialog_title_{id}" class\x3d"cke_dialog_title" role\x3d"presentation"\x3e\x3c/div\x3e\x3ca id\x3d"cke_dialog_close_button_{id}" class\x3d"cke_dialog_close_button" href\x3d"javascript:void(0)" title\x3d"{closeTitle}" role\x3d"button"\x3e\x3cspan class\x3d"cke_label"\x3eX\x3c/span\x3e\x3c/a\x3e\x3cdiv id\x3d"cke_dialog_tabs_{id}" class\x3d"cke_dialog_tabs" role\x3d"tablist"\x3e\x3c/div\x3e\x3ctable class\x3d"cke_dialog_contents" role\x3d"presentation"\x3e\x3ctr\x3e\x3ctd id\x3d"cke_dialog_contents_{id}" class\x3d"cke_dialog_contents_body" role\x3d"presentation"\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd id\x3d"cke_dialog_footer_{id}" class\x3d"cke_dialog_footer" role\x3d"presentation"\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e\x3c/div\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e\x3c/div\x3e';CKEDITOR.dialog=function(d,e){function h(){var s=b._.focusList;s.sort(function(y,B){return y.tabIndex!=B.tabIndex?B.tabIndex-y.tabIndex:y.focusIndex-B.focusIndex});for(var t=s.length,r=0;r<t;r++){s[r].focusIndex=r}}function i(B){var C=b._.focusList;B=B||0;if(!(1>C.length)){var r=b._.currentFocusIndex;b._.tabBarMode&&0>B&&(r=0);try{C[r].getInputElement().$.blur()}catch(t){}var s=r,y=1<b._.pageCount;do{s+=B;if(y&&!b._.tabBarMode&&(s==C.length||-1==s)){b._.tabBarMode=!0;b._.tabs[b._.currentTabId][0].focus();b._.currentFocusIndex=-1;return}s=(s+C.length)%C.length;if(s==r){break}}while(B&&!C[s].isFocusable());C[s].focus();"text"==C[s].type&&C[s].select()}}function k(y){if(b==CKEDITOR.dialog._.currentTop){var r=y.data.getKeystroke(),s="rtl"==d.lang.dir,t=[37,38,39,40];n=j=0;if(9==r||r==CKEDITOR.SHIFT+9){i(r==CKEDITOR.SHIFT+9?-1:1),n=1}else{if(r==CKEDITOR.ALT+121&&!b._.tabBarMode&&1<b.getPageCount()){b._.tabBarMode=!0,b._.tabs[b._.currentTabId][0].focus(),b._.currentFocusIndex=-1,n=1}else{if(-1!=CKEDITOR.tools.indexOf(t,r)&&b._.tabBarMode){r=-1!=CKEDITOR.tools.indexOf([s?39:37,38],r)?u.call(b):Y.call(b),b.selectPage(r),b._.tabs[r][0].focus(),n=1}else{if(13!=r&&32!=r||!b._.tabBarMode){if(13==r){r=y.data.getTarget(),r.is("a","button","select","textarea")||r.is("input")&&"button"==r.$.type||((r=this.getButton("ok"))&&CKEDITOR.tools.setTimeout(r.click,0,r),n=1),j=1}else{if(27==r){(r=this.getButton("cancel"))?CKEDITOR.tools.setTimeout(r.click,0,r):!1!==this.fire("cancel",{hide:!0}).hide&&this.hide(),j=1}else{return}}}else{this.selectPage(this._.currentTabId),this._.tabBarMode=!1,this._.currentFocusIndex=-1,i(1),n=1}}}}m(y)}}function m(r){n?r.data.preventDefault(1):j&&r.data.stopPropagation()}var p=CKEDITOR.dialog._.dialogDefinitions[e],q=CKEDITOR.tools.clone(U),l=d.config.dialog_buttonsOrder||"OS",g=d.lang.dir,a={},n,j;("OS"==l&&CKEDITOR.env.mac||"rtl"==l&&"ltr"==g||"ltr"==l&&"rtl"==g)&&q.buttons.reverse();p=CKEDITOR.tools.extend(p(d),q);p=CKEDITOR.tools.clone(p);p=new M(this,p);q=V(d);this._={editor:d,element:q.element,name:e,contentSize:{width:0,height:0},size:{width:0,height:0},contents:{},buttons:{},accessKeyMap:{},tabs:{},tabIdList:[],currentTabId:null,currentTabIndex:null,pageCount:0,lastTab:null,tabBarMode:!1,focusList:[],currentFocusIndex:0,hasFocus:!1};this.parts=q.parts;CKEDITOR.tools.setTimeout(function(){d.fire("ariaWidget",this.parts.contents)},0,this);q={position:CKEDITOR.env.ie6Compat?"absolute":"fixed",top:0,visibility:"hidden"};q["rtl"==g?"right":"left"]=0;this.parts.dialog.setStyles(q);CKEDITOR.event.call(this);this.definition=p=CKEDITOR.fire("dialogDefinition",{name:e,definition:p},d).definition;if(!("removeDialogTabs" in d._)&&d.config.removeDialogTabs){q=d.config.removeDialogTabs.split(";");for(g=0;g<q.length;g++){if(l=q[g].split(":"),2==l.length){var o=l[0];a[o]||(a[o]=[]);a[o].push(l[1])}}d._.removeDialogTabs=a}if(d._.removeDialogTabs&&(a=d._.removeDialogTabs[e])){for(g=0;g<a.length;g++){p.removeContents(a[g])}}if(p.onLoad){this.on("load",p.onLoad)}if(p.onShow){this.on("show",p.onShow)}if(p.onHide){this.on("hide",p.onHide)}if(p.onOk){this.on("ok",function(r){d.fire("saveSnapshot");setTimeout(function(){d.fire("saveSnapshot")},0);!1===p.onOk.call(this,r)&&(r.data.hide=!1)})}this.state=CKEDITOR.DIALOG_STATE_IDLE;if(p.onCancel){this.on("cancel",function(r){!1===p.onCancel.call(this,r)&&(r.data.hide=!1)})}var b=this,c=function(y){var B=b._.contents,r=!1,s;for(s in B){for(var t in B[s]){if(r=y.call(this,B[s][t])){return}}}};this.on("ok",function(r){c(function(y){if(y.validate){var s=y.validate(this),t="string"==typeof s||!1===s;t&&(r.data.hide=!1,r.stop());R.call(y,!t,"string"==typeof s?s:void 0);return t}})},this,null,0);this.on("cancel",function(r){c(function(s){if(s.isChanged()){return d.config.dialog_noConfirmCancel||confirm(d.lang.common.confirmCancel)||(r.data.hide=!1),!0}})},this,null,0);this.parts.close.on("click",function(r){!1!==this.fire("cancel",{hide:!0}).hide&&this.hide();r.data.preventDefault()},this);this.changeFocus=i;var f=this._.element;d.focusManager.add(f,1);this.on("show",function(){f.on("keydown",k,this);if(CKEDITOR.env.gecko){f.on("keypress",m,this)}});this.on("hide",function(){f.removeListener("keydown",k);CKEDITOR.env.gecko&&f.removeListener("keypress",m);c(function(r){T.apply(r)})});this.on("iframeAdded",function(r){(new CKEDITOR.dom.document(r.data.iframe.$.contentWindow.document)).on("keydown",k,this,null,0)});this.on("show",function(){h();var r=1<b._.pageCount;d.config.dialog_startupFocusTab&&r?(b._.tabBarMode=!0,b._.tabs[b._.currentTabId][0].focus(),b._.currentFocusIndex=-1):this._.hasFocus||(this._.currentFocusIndex=r?-1:this._.focusList.length-1,p.onFocus?(r=p.onFocus.call(this))&&r.focus():i(1))},this,null,4294967295);if(CKEDITOR.env.ie6Compat){this.on("load",function(){var r=this.getElement(),s=r.getFirst();s.remove();s.appendTo(r)},this)}ad(this);af(this);(new CKEDITOR.dom.text(p.title,CKEDITOR.document)).appendTo(this.parts.title);for(g=0;g<p.contents.length;g++){(a=p.contents[g])&&this.addPage(a)}this.parts.tabs.on("click",function(r){var s=r.data.getTarget();s.hasClass("cke_dialog_tab")&&(s=s.$.id,this.selectPage(s.substring(4,s.lastIndexOf("_"))),this._.tabBarMode&&(this._.tabBarMode=!1,this._.currentFocusIndex=-1,i(1)),r.data.preventDefault())},this);g=[];a=CKEDITOR.dialog._.uiElementBuilders.hbox.build(this,{type:"hbox",className:"cke_dialog_footer_buttons",widths:[],children:p.buttons},g).getChild();this.parts.footer.setHtml(g.join(""));for(g=0;g<a.length;g++){this._.buttons[a[g].id]=a[g]}};CKEDITOR.dialog.prototype={destroy:function(){this.hide();this._.element.remove()},resize:function(){return function(a,b){this._.contentSize&&this._.contentSize.width==a&&this._.contentSize.height==b||(CKEDITOR.dialog.fire("resize",{dialog:this,width:a,height:b},this._.editor),this.fire("resize",{width:a,height:b},this._.editor),this.parts.contents.setStyles({width:a+"px",height:b+"px"}),"rtl"==this._.editor.lang.dir&&this._.position&&(this._.position.x=CKEDITOR.document.getWindow().getViewPaneSize().width-this._.contentSize.width-parseInt(this._.element.getFirst().getStyle("right"),10)),this._.contentSize={width:a,height:b})}}(),getSize:function(){var a=this._.element.getFirst();return{width:a.$.offsetWidth||0,height:a.$.offsetHeight||0}},move:function(d,e,b){var f=this._.element.getFirst(),a="rtl"==this._.editor.lang.dir,c="fixed"==f.getComputedStyle("position");CKEDITOR.env.ie&&f.setStyle("zoom","100%");c&&this._.position&&this._.position.x==d&&this._.position.y==e||(this._.position={x:d,y:e},c||(c=CKEDITOR.document.getWindow().getScrollPosition(),d+=c.x,e+=c.y),a&&(c=this.getSize(),d=CKEDITOR.document.getWindow().getViewPaneSize().width-c.width-d),e={top:(0<e?e:0)+"px"},e[a?"right":"left"]=(0<d?d:0)+"px",f.setStyles(e),b&&(this._.moved=1))},getPosition:function(){return CKEDITOR.tools.extend({},this._.position)},show:function(){var d=this._.element,e=this.definition;d.getParent()&&d.getParent().equals(CKEDITOR.document.getBody())?d.setStyle("display","block"):d.appendTo(CKEDITOR.document.getBody());this.resize(this._.contentSize&&this._.contentSize.width||e.width||e.minWidth,this._.contentSize&&this._.contentSize.height||e.height||e.minHeight);this.reset();this.selectPage(this.definition.contents[0].id);null===CKEDITOR.dialog._.currentZIndex&&(CKEDITOR.dialog._.currentZIndex=this._.editor.config.baseFloatZIndex);this._.element.getFirst().setStyle("z-index",CKEDITOR.dialog._.currentZIndex+=10);null===CKEDITOR.dialog._.currentTop?(CKEDITOR.dialog._.currentTop=this,this._.parentDialog=null,K(this._.editor)):(this._.parentDialog=CKEDITOR.dialog._.currentTop,this._.parentDialog.getElement().getFirst().$.style.zIndex-=Math.floor(this._.editor.config.baseFloatZIndex/2),CKEDITOR.dialog._.currentTop=this);d.on("keydown",O);d.on("keyup",P);this._.hasFocus=!1;for(var f in e.contents){if(e.contents[f]){var d=e.contents[f],g=this._.tabs[d.id],b=d.requiredContent,h=0;if(g){for(var a in this._.contents[d.id]){var c=this._.contents[d.id][a];"hbox"!=c.type&&"vbox"!=c.type&&c.getInputElement()&&(c.requiredContent&&!this._.editor.activeFilter.check(c.requiredContent)?c.disable():(c.enable(),h++))}!h||b&&!this._.editor.activeFilter.check(b)?g[0].addClass("cke_dialog_tab_disabled"):g[0].removeClass("cke_dialog_tab_disabled")}}}CKEDITOR.tools.setTimeout(function(){this.layout();Z(this);this.parts.dialog.setStyle("visibility","");this.fireOnce("load",{});CKEDITOR.ui.fire("ready",this);this.fire("show",{});this._.editor.fire("dialogShow",this);this._.parentDialog||this._.editor.focusManager.lock();this.foreach(function(i){i.setInitValue&&i.setInitValue()})},100,this)},layout:function(){var c=this.parts.dialog,d=this.getSize(),e=CKEDITOR.document.getWindow().getViewPaneSize(),a=(e.width-d.width)/2,b=(e.height-d.height)/2;CKEDITOR.env.ie6Compat||(d.height+(0<b?b:0)>e.height||d.width+(0<a?a:0)>e.width?c.setStyle("position","absolute"):c.setStyle("position","fixed"));this.move(this._.moved?this._.position.x:a,this._.moved?this._.position.y:b)},foreach:function(b){for(var c in this._.contents){for(var a in this._.contents[c]){b.call(this,this._.contents[c][a])}}return this},reset:function(){var a=function(b){b.reset&&b.reset(1)};return function(){this.foreach(a);return this}}(),setupContent:function(){var a=arguments;this.foreach(function(b){b.setup&&b.setup.apply(b,a)})},commitContent:function(){var a=arguments;this.foreach(function(b){CKEDITOR.env.ie&&this._.currentFocusIndex==b.focusIndex&&b.getInputElement().$.blur();b.commit&&b.commit.apply(b,a)})},hide:function(){if(this.parts.dialog.isVisible()){this.fire("hide",{});this._.editor.fire("dialogHide",this);this.selectPage(this._.tabIdList[0]);var b=this._.element;b.setStyle("display","none");this.parts.dialog.setStyle("visibility","hidden");for(N(this);CKEDITOR.dialog._.currentTop!=this;){CKEDITOR.dialog._.currentTop.hide()}if(this._.parentDialog){var c=this._.parentDialog.getElement().getFirst();c.setStyle("z-index",parseInt(c.$.style.zIndex,10)+Math.floor(this._.editor.config.baseFloatZIndex/2))}else{L(this._.editor)}if(CKEDITOR.dialog._.currentTop=this._.parentDialog){CKEDITOR.dialog._.currentZIndex-=10}else{CKEDITOR.dialog._.currentZIndex=null;b.removeListener("keydown",O);b.removeListener("keyup",P);var a=this._.editor;a.focus();setTimeout(function(){a.focusManager.unlock();CKEDITOR.env.iOS&&a.window.focus()},0)}delete this._.parentDialog;this.foreach(function(d){d.resetInitValue&&d.resetInitValue()});this.setState(CKEDITOR.DIALOG_STATE_IDLE)}},addPage:function(d){if(!d.requiredContent||this._.editor.filter.check(d.requiredContent)){for(var e=[],f=d.label?' title\x3d"'+CKEDITOR.tools.htmlEncode(d.label)+'"':"",b=CKEDITOR.dialog._.uiElementBuilders.vbox.build(this,{type:"vbox",className:"cke_dialog_page_contents",children:d.elements,expand:!!d.expand,padding:d.padding,style:d.style||"width: 100%;"},e),g=this._.contents[d.id]={},a=b.getChild(),c=0;b=a.shift();){b.notAllowed||"hbox"==b.type||"vbox"==b.type||c++,g[b.id]=b,"function"==typeof b.getChild&&a.push.apply(a,b.getChild())}c||(d.hidden=!0);e=CKEDITOR.dom.element.createFromHtml(e.join(""));e.setAttribute("role","tabpanel");b=CKEDITOR.env;g="cke_"+d.id+"_"+CKEDITOR.tools.getNextNumber();f=CKEDITOR.dom.element.createFromHtml(['\x3ca class\x3d"cke_dialog_tab"',0<this._.pageCount?" cke_last":"cke_first",f,d.hidden?' style\x3d"display:none"':"",' id\x3d"',g,'"',b.gecko&&!b.hc?"":' href\x3d"javascript:void(0)"',' tabIndex\x3d"-1" hidefocus\x3d"true" role\x3d"tab"\x3e',d.label,"\x3c/a\x3e"].join(""));e.setAttribute("aria-labelledby",g);this._.tabs[d.id]=[f,e];this._.tabIdList.push(d.id);!d.hidden&&this._.pageCount++;this._.lastTab=f;this.updateStyle();e.setAttribute("name",d.id);e.appendTo(this.parts.contents);f.unselectable();this.parts.tabs.append(f);d.accessKey&&(Q(this,this,"CTRL+"+d.accessKey,W,S),this._.accessKeyMap["CTRL+"+d.accessKey]=d.id)}},selectPage:function(c){if(this._.currentTabId!=c&&!this._.tabs[c][0].hasClass("cke_dialog_tab_disabled")&&!1!==this.fire("selectPage",{page:c,currentPage:this._.currentTabId})){for(var d in this._.tabs){var e=this._.tabs[d][0],a=this._.tabs[d][1];d!=c&&(e.removeClass("cke_dialog_tab_selected"),a.hide());a.setAttribute("aria-hidden",d!=c)}var b=this._.tabs[c];b[0].addClass("cke_dialog_tab_selected");CKEDITOR.env.ie6Compat||CKEDITOR.env.ie7Compat?(D(b[1]),b[1].show(),setTimeout(function(){D(b[1],1)},0)):b[1].show();this._.currentTabId=c;this._.currentTabIndex=CKEDITOR.tools.indexOf(this._.tabIdList,c)}},updateStyle:function(){this.parts.dialog[(1===this._.pageCount?"add":"remove")+"Class"]("cke_single_page")},hidePage:function(a){var b=this._.tabs[a]&&this._.tabs[a][0];b&&1!=this._.pageCount&&b.isVisible()&&(a==this._.currentTabId&&this.selectPage(u.call(this)),b.hide(),this._.pageCount--,this.updateStyle())},showPage:function(a){if(a=this._.tabs[a]&&this._.tabs[a][0]){a.show(),this._.pageCount++,this.updateStyle()}},getElement:function(){return this._.element},getName:function(){return this._.name},getContentElement:function(b,c){var a=this._.contents[b];return a&&a[c]},getValueOf:function(a,b){return this.getContentElement(a,b).getValue()},setValueOf:function(b,c,a){return this.getContentElement(b,c).setValue(a)},getButton:function(a){return this._.buttons[a]},click:function(a){return this._.buttons[a].click()},disableButton:function(a){return this._.buttons[a].disable()},enableButton:function(a){return this._.buttons[a].enable()},getPageCount:function(){return this._.pageCount},getParentEditor:function(){return this._.editor},getSelectedElement:function(){return this.getParentEditor().getSelection().getSelectedElement()},addFocusable:function(b,c){if("undefined"==typeof c){c=this._.focusList.length,this._.focusList.push(new I(this,b,c))}else{this._.focusList.splice(c,0,new I(this,b,c));for(var a=c+1;a<this._.focusList.length;a++){this._.focusList[a].focusIndex++}}},setState:function(b){if(this.state!=b){this.state=b;if(b==CKEDITOR.DIALOG_STATE_BUSY){if(!this.parts.spinner){var c=this.getParentEditor().lang.dir,a={attributes:{"class":"cke_dialog_spinner"},styles:{"float":"rtl"==c?"right":"left"}};a.styles["margin-"+("rtl"==c?"left":"right")]="8px";this.parts.spinner=CKEDITOR.document.createElement("div",a);this.parts.spinner.setHtml("\x26#8987;");this.parts.spinner.appendTo(this.parts.title,1)}this.parts.spinner.show();this.getButton("ok").disable()}else{b==CKEDITOR.DIALOG_STATE_IDLE&&(this.parts.spinner&&this.parts.spinner.hide(),this.getButton("ok").enable())}this.fire("state",b)}}};CKEDITOR.tools.extend(CKEDITOR.dialog,{add:function(a,b){this._.dialogDefinitions[a]&&"function"!=typeof b||(this._.dialogDefinitions[a]=b)},exists:function(a){return !!this._.dialogDefinitions[a]},getCurrent:function(){return CKEDITOR.dialog._.currentTop},isTabEnabled:function(b,c,a){b=b.config.removeDialogTabs;return !(b&&b.match(new RegExp("(?:^|;)"+c+":"+a+"(?:$|;)","i")))},okButton:function(){var a=function(c,b){b=b||{};return CKEDITOR.tools.extend({id:"ok",type:"button",label:c.lang.common.ok,"class":"cke_dialog_ui_button_ok",onClick:function(d){d=d.data.dialog;!1!==d.fire("ok",{hide:!0}).hide&&d.hide()}},b,!0)};a.type="button";a.override=function(b){return CKEDITOR.tools.extend(function(c){return a(c,b)},{type:"button"},!0)};return a}(),cancelButton:function(){var a=function(c,b){b=b||{};return CKEDITOR.tools.extend({id:"cancel",type:"button",label:c.lang.common.cancel,"class":"cke_dialog_ui_button_cancel",onClick:function(d){d=d.data.dialog;!1!==d.fire("cancel",{hide:!0}).hide&&d.hide()}},b,!0)};a.type="button";a.override=function(b){return CKEDITOR.tools.extend(function(c){return a(c,b)},{type:"button"},!0)};return a}(),addUIElement:function(a,b){this._.uiElementBuilders[a]=b}});CKEDITOR.dialog._={uiElementBuilders:{},dialogDefinitions:{},currentTop:null,currentZIndex:null};CKEDITOR.event.implementOn(CKEDITOR.dialog);CKEDITOR.event.implementOn(CKEDITOR.dialog.prototype);var U={resizable:CKEDITOR.DIALOG_RESIZE_BOTH,minWidth:600,minHeight:400,buttons:[CKEDITOR.dialog.okButton,CKEDITOR.dialog.cancelButton]},aa=function(c,d,e){for(var a=0,b;b=c[a];a++){if(b.id==d||e&&b[e]&&(b=aa(b[e],d,e))){return b}}return null},ae=function(d,e,f,b,g){if(f){for(var a=0,c;c=d[a];a++){if(c.id==f){return d.splice(a,0,e),e}if(b&&c[b]&&(c=ae(c[b],e,f,b,!0))){return c}}if(g){return null}}d.push(e);return e},v=function(c,d,e){for(var a=0,b;b=c[a];a++){if(b.id==d){return c.splice(a,1)}if(e&&b[e]&&(b=v(b[e],d,e))){return b}}return null},M=function(c,d){this.dialog=c;for(var e=d.contents,a=0,b;b=e[a];a++){e[a]=b&&new J(c,b)}CKEDITOR.tools.extend(this,d)};M.prototype={getContents:function(a){return aa(this.contents,a)},getButton:function(a){return aa(this.buttons,a)},addContents:function(a,b){return ae(this.contents,a,b)},addButton:function(a,b){return ae(this.buttons,a,b)},removeContents:function(a){v(this.contents,a)},removeButton:function(a){v(this.buttons,a)}};J.prototype={get:function(a){return aa(this.elements,a,"children")},add:function(a,b){return ae(this.elements,a,b,"children")},remove:function(a){v(this.elements,a,"children")}};var z,F={},w,E={},O=function(c){var d=c.data.$.ctrlKey||c.data.$.metaKey,e=c.data.$.altKey,a=c.data.$.shiftKey,b=String.fromCharCode(c.data.$.keyCode);(d=E[(d?"CTRL+":"")+(e?"ALT+":"")+(a?"SHIFT+":"")+b])&&d.length&&(d=d[d.length-1],d.keydown&&d.keydown.call(d.uiElement,d.dialog,d.key),c.data.preventDefault())},P=function(c){var d=c.data.$.ctrlKey||c.data.$.metaKey,e=c.data.$.altKey,a=c.data.$.shiftKey,b=String.fromCharCode(c.data.$.keyCode);(d=E[(d?"CTRL+":"")+(e?"ALT+":"")+(a?"SHIFT+":"")+b])&&d.length&&(d=d[d.length-1],d.keyup&&(d.keyup.call(d.uiElement,d.dialog,d.key),c.data.preventDefault()))},Q=function(c,d,e,a,b){(E[e]||(E[e]=[])).push({uiElement:c,dialog:d,key:e,keyup:b||c.accessKeyUp,keydown:a||c.accessKeyDown})},N=function(c){for(var d in E){for(var a=E[d],b=a.length-1;0<=b;b--){a[b].dialog!=c&&a[b].uiElement!=c||a.splice(b,1)}0===a.length&&delete E[d]}},S=function(a,b){a._.accessKeyMap[b]&&a.selectPage(a._.accessKeyMap[b])},W=function(){};(function(){CKEDITOR.ui.dialog={uiElement:function(d,e,g,h,j,l,o){if(!(4>arguments.length)){var p=(h.call?h(e):h)||"div",k=["\x3c",p," "],f=(j&&j.call?j(e):j)||{},a=(l&&l.call?l(e):l)||{},m=(o&&o.call?o.call(this,d,e):o)||"",i=this.domId=a.id||CKEDITOR.tools.getNextId()+"_uiElement";e.requiredContent&&!d.getParentEditor().filter.check(e.requiredContent)&&(f.display="none",this.notAllowed=!0);a.id=i;var n={};e.type&&(n["cke_dialog_ui_"+e.type]=1);e.className&&(n[e.className]=1);e.disabled&&(n.cke_disabled=1);for(var b=a["class"]&&a["class"].split?a["class"].split(" "):[],i=0;i<b.length;i++){b[i]&&(n[b[i]]=1)}b=[];for(i in n){b.push(i)}a["class"]=b.join(" ");e.title&&(a.title=e.title);n=(e.style||"").split(";");e.align&&(b=e.align,f["margin-left"]="left"==b?0:"auto",f["margin-right"]="right"==b?0:"auto");for(i in f){n.push(i+":"+f[i])}e.hidden&&n.push("display:none");for(i=n.length-1;0<=i;i--){""===n[i]&&n.splice(i,1)}0<n.length&&(a.style=(a.style?a.style+"; ":"")+n.join("; "));for(i in a){k.push(i+'\x3d"'+CKEDITOR.tools.htmlEncode(a[i])+'" ')}k.push("\x3e",m,"\x3c/",p,"\x3e");g.push(k.join(""));(this._||(this._={})).dialog=d;"boolean"==typeof e.isChanged&&(this.isChanged=function(){return e.isChanged});"function"==typeof e.isChanged&&(this.isChanged=e.isChanged);"function"==typeof e.setValue&&(this.setValue=CKEDITOR.tools.override(this.setValue,function(q){return function(r){q.call(this,e.setValue.call(this,r))}}));"function"==typeof e.getValue&&(this.getValue=CKEDITOR.tools.override(this.getValue,function(q){return function(){return e.getValue.call(this,q.call(this))}}));CKEDITOR.event.implementOn(this);this.registerEvents(e);this.accessKeyUp&&this.accessKeyDown&&e.accessKey&&Q(this,d,"CTRL+"+e.accessKey);var c=this;d.on("load",function(){var r=c.getInputElement();if(r){var q=c.type in {checkbox:1,ratio:1}&&CKEDITOR.env.ie&&8>CKEDITOR.env.version?"cke_dialog_ui_focused":"";r.on("focus",function(){d._.tabBarMode=!1;d._.hasFocus=!0;c.fire("focus");q&&this.addClass(q)});r.on("blur",function(){c.fire("blur");q&&this.removeClass(q)})}});CKEDITOR.tools.extend(this,e);this.keyboardFocusable&&(this.tabIndex=e.tabIndex||0,this.focusIndex=d._.focusList.push(this)-1,this.on("focus",function(){d._.currentFocusIndex=c.focusIndex}))}},hbox:function(e,i,j,a,b){if(!(4>arguments.length)){this._||(this._={});var c=this._.children=i,d=b&&b.widths||null,f=b&&b.height||null,h,g={role:"presentation"};b&&b.align&&(g.align=b.align);CKEDITOR.ui.dialog.uiElement.call(this,e,b||{type:"hbox"},a,"table",{},g,function(){var l=['\x3ctbody\x3e\x3ctr class\x3d"cke_dialog_ui_hbox"\x3e'];for(h=0;h<j.length;h++){var m="cke_dialog_ui_hbox_child",k=[];0===h&&(m="cke_dialog_ui_hbox_first");h==j.length-1&&(m="cke_dialog_ui_hbox_last");l.push('\x3ctd class\x3d"',m,'" role\x3d"presentation" ');d?d[h]&&k.push("width:"+A(d[h])):k.push("width:"+Math.floor(100/j.length)+"%");f&&k.push("height:"+A(f));b&&void 0!==b.padding&&k.push("padding:"+A(b.padding));CKEDITOR.env.ie&&CKEDITOR.env.quirks&&c[h].align&&k.push("text-align:"+c[h].align);0<k.length&&l.push('style\x3d"'+k.join("; ")+'" ');l.push("\x3e",j[h],"\x3c/td\x3e")}l.push("\x3c/tr\x3e\x3c/tbody\x3e");return l.join("")})}},vbox:function(d,e,f,g,b){if(!(3>arguments.length)){this._||(this._={});var h=this._.children=e,a=b&&b.width||null,c=b&&b.heights||null;CKEDITOR.ui.dialog.uiElement.call(this,d,b||{type:"vbox"},g,"div",null,{role:"presentation"},function(){var k=['\x3ctable role\x3d"presentation" cellspacing\x3d"0" border\x3d"0" '];k.push('style\x3d"');b&&b.expand&&k.push("height:100%;");k.push("width:"+A(a||"100%"),";");CKEDITOR.env.webkit&&k.push("float:none;");k.push('"');k.push('align\x3d"',CKEDITOR.tools.htmlEncode(b&&b.align||("ltr"==d.getParentEditor().lang.dir?"left":"right")),'" ');k.push("\x3e\x3ctbody\x3e");for(var i=0;i<f.length;i++){var j=[];k.push('\x3ctr\x3e\x3ctd role\x3d"presentation" ');a&&j.push("width:"+A(a||"100%"));c?j.push("height:"+A(c[i])):b&&b.expand&&j.push("height:"+Math.floor(100/f.length)+"%");b&&void 0!==b.padding&&j.push("padding:"+A(b.padding));CKEDITOR.env.ie&&CKEDITOR.env.quirks&&h[i].align&&j.push("text-align:"+h[i].align);0<j.length&&k.push('style\x3d"',j.join("; "),'" ');k.push(' class\x3d"cke_dialog_ui_vbox_child"\x3e',f[i],"\x3c/td\x3e\x3c/tr\x3e")}k.push("\x3c/tbody\x3e\x3c/table\x3e");return k.join("")})}}}})();CKEDITOR.ui.dialog.uiElement.prototype={getElement:function(){return CKEDITOR.document.getById(this.domId)},getInputElement:function(){return this.getElement()},getDialog:function(){return this._.dialog},setValue:function(a,b){this.getInputElement().setValue(a);!b&&this.fire("change",{value:a});return this},getValue:function(){return this.getInputElement().getValue()},isChanged:function(){return !1},selectParentTab:function(){for(var a=this.getInputElement();(a=a.getParent())&&-1==a.$.className.search("cke_dialog_page_contents");){}if(!a){return this}a=a.getAttribute("name");this._.dialog._.currentTabId!=a&&this._.dialog.selectPage(a);return this},focus:function(){this.selectParentTab().getInputElement().focus();return this},registerEvents:function(c){var d=/^on([A-Z]\w+)/,e,a=function(i,f,g,h){f.on("load",function(){i.getInputElement().on(g,h,i)})},b;for(b in c){if(e=b.match(d)){this.eventProcessors[b]?this.eventProcessors[b].call(this,this._.dialog,c[b]):a(this,this._.dialog,e[1].toLowerCase(),c[b])}}return this},eventProcessors:{onLoad:function(a,b){a.on("load",b,this)},onShow:function(a,b){a.on("show",b,this)},onHide:function(a,b){a.on("hide",b,this)}},accessKeyDown:function(){this.focus()},accessKeyUp:function(){},disable:function(){var a=this.getElement();this.getInputElement().setAttribute("disabled","true");a.addClass("cke_disabled")},enable:function(){var a=this.getElement();this.getInputElement().removeAttribute("disabled");a.removeClass("cke_disabled")},isEnabled:function(){return !this.getElement().hasClass("cke_disabled")},isVisible:function(){return this.getInputElement().isVisible()},isFocusable:function(){return this.isEnabled()&&this.isVisible()?!0:!1}};CKEDITOR.ui.dialog.hbox.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{getChild:function(a){if(1>arguments.length){return this._.children.concat()}a.splice||(a=[a]);return 2>a.length?this._.children[a[0]]:this._.children[a[0]]&&this._.children[a[0]].getChild?this._.children[a[0]].getChild(a.slice(1,a.length)):null}},!0);CKEDITOR.ui.dialog.vbox.prototype=new CKEDITOR.ui.dialog.hbox;(function(){var a={build:function(g,i,j){for(var b=i.children,c,d=[],e=[],h=0;h<b.length&&(c=b[h]);h++){var f=[];d.push(f);e.push(CKEDITOR.dialog._.uiElementBuilders[c.type].build(g,c,f))}return new CKEDITOR.ui.dialog[i.type](g,e,d,j,i)}};CKEDITOR.dialog.addUIElement("hbox",a);CKEDITOR.dialog.addUIElement("vbox",a)})();CKEDITOR.dialogCommand=function(a,b){this.dialogName=a;CKEDITOR.tools.extend(this,b,!0)};CKEDITOR.dialogCommand.prototype={exec:function(a){a.openDialog(this.dialogName)},canUndo:!1,editorFocus:1};(function(){var d=/^([a]|[^a])+$/,e=/^\d*$/,b=/^\d*(?:\.\d+)?$/,f=/^(((\d*(\.\d+))|(\d*))(px|\%)?)?$/,a=/^(((\d*(\.\d+))|(\d*))(px|em|ex|in|cm|mm|pt|pc|\%)?)?$/i,c=/^(\s*[\w-]+\s*:\s*[^:;]+(?:;|$))*$/;CKEDITOR.VALIDATE_OR=1;CKEDITOR.VALIDATE_AND=2;CKEDITOR.dialog.validate={functions:function(){var g=arguments;return function(){var m=this&&this.getValue?this.getValue():g[0],h,j=CKEDITOR.VALIDATE_AND,k=[],l;for(l=0;l<g.length;l++){if("function"==typeof g[l]){k.push(g[l])}else{break}}l<g.length&&"string"==typeof g[l]&&(h=g[l],l++);l<g.length&&"number"==typeof g[l]&&(j=g[l]);var i=j==CKEDITOR.VALIDATE_AND?!0:!1;for(l=0;l<k.length;l++){i=j==CKEDITOR.VALIDATE_AND?i&&k[l](m):i||k[l](m)}return i?!0:h}},regex:function(g,h){return function(i){i=this&&this.getValue?this.getValue():i;return g.test(i)?!0:h}},notEmpty:function(g){return this.regex(d,g)},integer:function(g){return this.regex(e,g)},number:function(g){return this.regex(b,g)},cssLength:function(g){return this.functions(function(h){return a.test(CKEDITOR.tools.trim(h))},g)},htmlLength:function(g){return this.functions(function(h){return f.test(CKEDITOR.tools.trim(h))},g)},inlineStyle:function(g){return this.functions(function(h){return c.test(CKEDITOR.tools.trim(h))},g)},equals:function(g,h){return this.functions(function(i){return i==g},h)},notEqual:function(g,h){return this.functions(function(i){return i!=g},h)}};CKEDITOR.on("instanceDestroyed",function(i){if(CKEDITOR.tools.isEmpty(CKEDITOR.instances)){for(var j;j=CKEDITOR.dialog._.currentTop;){j.hide()}for(var g in F){F[g].remove()}F={}}i=i.editor._.storedDialogs;for(var h in i){i[h].destroy()}})})();CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{openDialog:function(c,d){var a=null,b=CKEDITOR.dialog._.dialogDefinitions[c];null===CKEDITOR.dialog._.currentTop&&K(this);if("function"==typeof b){a=this._.storedDialogs||(this._.storedDialogs={}),a=a[c]||(a[c]=new CKEDITOR.dialog(this,c)),d&&d.call(a,a),a.show()}else{if("failed"==b){throw L(this),Error('[CKEDITOR.dialog.openDialog] Dialog "'+c+'" failed when loading definition.')}"string"==typeof b&&CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(b),function(){"function"!=typeof CKEDITOR.dialog._.dialogDefinitions[c]&&(CKEDITOR.dialog._.dialogDefinitions[c]="failed");this.openDialog(c,d)},this,0,1)}CKEDITOR.skin.loadPart("dialog");return a}})})();CKEDITOR.plugins.add("dialog",{requires:"dialogui",init:function(b){b.on("doubleclick",function(a){a.data.dialog&&b.openDialog(a.data.dialog)},null,null,999)}});CKEDITOR.plugins.add("about",{requires:"dialog",init:function(a){var b=a.addCommand("about",new CKEDITOR.dialogCommand("about"));b.modes={wysiwyg:1,source:1};b.canUndo=!1;b.readOnly=1;a.ui.addButton&&a.ui.addButton("About",{label:a.lang.about.title,command:"about",toolbar:"about"});CKEDITOR.dialog.add("about",this.path+"dialogs/about.js")}});(function(){CKEDITOR.plugins.add("a11yhelp",{requires:"dialog",availableLangs:{af:1,ar:1,bg:1,ca:1,cs:1,cy:1,da:1,de:1,"de-ch":1,el:1,en:1,"en-gb":1,eo:1,es:1,et:1,eu:1,fa:1,fi:1,fo:1,fr:1,"fr-ca":1,gl:1,gu:1,he:1,hi:1,hr:1,hu:1,id:1,it:1,ja:1,km:1,ko:1,ku:1,lt:1,lv:1,mk:1,mn:1,nb:1,nl:1,no:1,pl:1,pt:1,"pt-br":1,ro:1,ru:1,si:1,sk:1,sl:1,sq:1,sr:1,"sr-latn":1,sv:1,th:1,tr:1,tt:1,ug:1,uk:1,vi:1,zh:1,"zh-cn":1},init:function(b){var c=this;b.addCommand("a11yHelp",{exec:function(){var a=b.langCode,a=c.availableLangs[a]?a:c.availableLangs[a.replace(/-.*/,"")]?a.replace(/-.*/,""):"en";CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(c.path+"dialogs/lang/"+a+".js"),function(){b.lang.a11yhelp=c.langEntries[a];b.openDialog("a11yHelp")})},modes:{wysiwyg:1,source:1},readOnly:1,canUndo:!1});b.setKeystroke(CKEDITOR.ALT+48,"a11yHelp");CKEDITOR.dialog.add("a11yHelp",this.path+"dialogs/a11yhelp.js");b.on("ariaEditorHelpLabel",function(a){a.data.label=b.lang.common.editorHelp})}})})();CKEDITOR.plugins.add("basicstyles",{init:function(a){var c=0,b=function(g,k,j,i){if(i){i=new CKEDITOR.style(i);var f=d[j];f.unshift(i);a.attachStyleStateChange(i,function(l){!a.readOnly&&a.getCommand(j).setState(l)});a.addCommand(j,new CKEDITOR.styleCommand(i,{contentForms:f}));a.ui.addButton&&a.ui.addButton(g,{label:k,command:j,toolbar:"basicstyles,"+(c+=10)})}},d={bold:["strong","b",["span",function(f){f=f.styles["font-weight"];return"bold"==f||700<=+f}]],italic:["em","i",["span",function(f){return"italic"==f.styles["font-style"]}]],underline:["u",["span",function(f){return"underline"==f.styles["text-decoration"]}]],strike:["s","strike",["span",function(f){return"line-through"==f.styles["text-decoration"]}]],subscript:["sub"],superscript:["sup"]},h=a.config,e=a.lang.basicstyles;b("Bold",e.bold,"bold",h.coreStyles_bold);b("Italic",e.italic,"italic",h.coreStyles_italic);b("Underline",e.underline,"underline",h.coreStyles_underline);b("Strike",e.strike,"strike",h.coreStyles_strike);b("Subscript",e.subscript,"subscript",h.coreStyles_subscript);b("Superscript",e.superscript,"superscript",h.coreStyles_superscript);a.setKeystroke([[CKEDITOR.CTRL+66,"bold"],[CKEDITOR.CTRL+73,"italic"],[CKEDITOR.CTRL+85,"underline"]])}});CKEDITOR.config.coreStyles_bold={element:"strong",overrides:"b"};CKEDITOR.config.coreStyles_italic={element:"em",overrides:"i"};CKEDITOR.config.coreStyles_underline={element:"u"};CKEDITOR.config.coreStyles_strike={element:"s",overrides:"strike"};CKEDITOR.config.coreStyles_subscript={element:"sub"};CKEDITOR.config.coreStyles_superscript={element:"sup"};(function(){var b={exec:function(d){var k=d.getCommand("blockquote").state,f=d.getSelection(),m=f&&f.getRanges()[0];if(m){var e=f.createBookmarks();if(CKEDITOR.env.ie){var a=e[0].startNode,l=e[0].endNode,w;if(a&&"blockquote"==a.getParent().getName()){for(w=a;w=w.getNext();){if(w.type==CKEDITOR.NODE_ELEMENT&&w.isBlockBoundary()){a.move(w,!0);break}}}if(l&&"blockquote"==l.getParent().getName()){for(w=l;w=w.getPrevious();){if(w.type==CKEDITOR.NODE_ELEMENT&&w.isBlockBoundary()){l.move(w);break}}}}var c=m.createIterator();c.enlargeBr=d.config.enterMode!=CKEDITOR.ENTER_BR;if(k==CKEDITOR.TRISTATE_OFF){for(a=[];k=c.getNextParagraph();){a.push(k)}1>a.length&&(k=d.document.createElement(d.config.enterMode==CKEDITOR.ENTER_P?"p":"div"),l=e.shift(),m.insertNode(k),k.append(new CKEDITOR.dom.text("",d.document)),m.moveToBookmark(l),m.selectNodeContents(k),m.collapse(!0),l=m.createBookmark(),a.push(k),e.unshift(l));w=a[0].getParent();m=[];for(l=0;l<a.length;l++){k=a[l],w=w.getCommonAncestor(k.getParent())}for(k={table:1,tbody:1,tr:1,ol:1,ul:1};k[w.getName()];){w=w.getParent()}for(l=null;0<a.length;){for(k=a.shift();!k.getParent().equals(w);){k=k.getParent()}k.equals(l)||m.push(k);l=k}for(;0<m.length;){if(k=m.shift(),"blockquote"==k.getName()){for(l=new CKEDITOR.dom.documentFragment(d.document);k.getFirst();){l.append(k.getFirst().remove()),a.push(l.getLast())}l.replace(k)}else{a.push(k)}}m=d.document.createElement("blockquote");for(m.insertBefore(a[0]);0<a.length;){k=a.shift(),m.append(k)}}else{if(k==CKEDITOR.TRISTATE_ON){l=[];for(w={};k=c.getNextParagraph();){for(a=m=null;k.getParent();){if("blockquote"==k.getParent().getName()){m=k.getParent();a=k;break}k=k.getParent()}m&&a&&!a.getCustomData("blockquote_moveout")&&(l.push(a),CKEDITOR.dom.element.setMarker(w,a,"blockquote_moveout",!0))}CKEDITOR.dom.element.clearAllMarkers(w);k=[];a=[];for(w={};0<l.length;){c=l.shift(),m=c.getParent(),c.getPrevious()?c.getNext()?(c.breakParent(c.getParent()),a.push(c.getNext())):c.remove().insertAfter(m):c.remove().insertBefore(m),m.getCustomData("blockquote_processed")||(a.push(m),CKEDITOR.dom.element.setMarker(w,m,"blockquote_processed",!0)),k.push(c)}CKEDITOR.dom.element.clearAllMarkers(w);for(l=a.length-1;0<=l;l--){m=a[l];k:{w=m;for(var c=0,h=w.getChildCount(),g=void 0;c<h&&(g=w.getChild(c));c++){if(g.type==CKEDITOR.NODE_ELEMENT&&g.isBlockBoundary()){w=!1;break k}}w=!0}w&&m.remove()}if(d.config.enterMode==CKEDITOR.ENTER_BR){for(m=!0;k.length;){if(c=k.shift(),"div"==c.getName()){l=new CKEDITOR.dom.documentFragment(d.document);!m||!c.getPrevious()||c.getPrevious().type==CKEDITOR.NODE_ELEMENT&&c.getPrevious().isBlockBoundary()||l.append(d.document.createElement("br"));for(m=c.getNext()&&!(c.getNext().type==CKEDITOR.NODE_ELEMENT&&c.getNext().isBlockBoundary());c.getFirst();){c.getFirst().remove().appendTo(l)}m&&l.append(d.document.createElement("br"));l.replace(c);m=!1}}}}}f.selectBookmarks(e);d.focus()}},refresh:function(d,a){this.setState(d.elementPath(a.block||a.blockLimit).contains("blockquote",1)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF)},context:"blockquote",allowedContent:"blockquote",requiredContent:"blockquote"};CKEDITOR.plugins.add("blockquote",{init:function(a){a.blockless||(a.addCommand("blockquote",b),a.ui.addButton&&a.ui.addButton("Blockquote",{label:a.lang.blockquote.toolbar,command:"blockquote",toolbar:"blocks,10"}))}})})();(function(){function s(c,b,a){b.type||(b.type="auto");if(a&&!1===c.fire("beforePaste",b)||!b.dataValue&&b.dataTransfer.isEmpty()){return !1}b.dataValue||(b.dataValue="");if(CKEDITOR.env.gecko&&"drop"==b.method&&c.toolbox){c.once("afterPaste",function(){c.toolbox.focus()})}return c.fire("paste",b)}function n(b){function a(){var y=b.editable();if(CKEDITOR.plugins.clipboard.isCustomCopyCutSupported){var x=function(B){b.readOnly&&"cut"==B.name||M.initPasteDataTransfer(B,b);B.data.preventDefault()};y.on("copy",x);y.on("cut",x);y.on("cut",function(){b.readOnly||b.extractSelectedHtml()},null,null,999)}y.on(M.mainPasteEvent,function(B){"beforepaste"==M.mainPasteEvent&&N||v(B)});"beforepaste"==M.mainPasteEvent&&(y.on("paste",function(B){z||(g(),B.data.preventDefault(),v(B),h("paste")||b.openDialog("paste"))}),y.on("contextmenu",i,null,null,0),y.on("beforepaste",function(B){!B.data||B.data.$.ctrlKey||B.data.$.shiftKey||i()},null,null,0));y.on("beforecut",function(){!N&&j(b)});var A;y.attachListener(CKEDITOR.env.ie?y:b.document.getDocumentElement(),"mouseup",function(){A=setTimeout(function(){f()},0)});b.on("destroy",function(){clearTimeout(A)});y.on("keyup",f)}function c(x){return{type:x,canUndo:"cut"==x,startDisabled:!0,exec:function(){"cut"==this.type&&j();var y;var B=this.type;if(CKEDITOR.env.ie){y=h(B)}else{try{y=b.document.$.execCommand(B,!1,null)}catch(A){y=!1}}y||b.showNotification(b.lang.clipboard[this.type+"Error"]);return y}}}function e(){return{canUndo:!1,async:!0,exec:function(y,x){var B=function(D,C){D&&s(y,D,!!C);y.fire("afterCommandExec",{name:"paste",command:A,returnValue:!!D})},A=this;"string"==typeof x?B({dataValue:x,method:"paste",dataTransfer:M.initPasteDataTransfer()},1):y.getClipboardData(B)}}}function g(){z=1;setTimeout(function(){z=0},100)}function i(){N=1;setTimeout(function(){N=0},10)}function h(y){var B=b.document,A=B.getBody(),C=!1,x=function(){C=!0};A.on(y,x);7<CKEDITOR.env.version?B.$.execCommand(y):B.$.selection.createRange().execCommand(y);A.removeListener(y,x);return C}function j(){if(CKEDITOR.env.ie&&!CKEDITOR.env.quirks){var y=b.getSelection(),B,A,x;y.getType()==CKEDITOR.SELECTION_ELEMENT&&(B=y.getSelectedElement())&&(A=y.getRanges()[0],x=b.document.createText(""),x.insertBefore(B),A.setStartBefore(x),A.setEndAfter(B),y.selectRanges([A]),setTimeout(function(){B.getParent()&&(x.remove(),y.selectElement(B))},0))}}function w(B,D){var C=b.document,E=b.editable(),F=function(K){K.cancel()},y;if(!C.getById("cke_pastebin")){var G=b.getSelection(),H=G.createBookmarks();CKEDITOR.env.ie&&G.root.fire("selectionchange");var x=new CKEDITOR.dom.element(!CKEDITOR.env.webkit&&!E.is("body")||CKEDITOR.env.ie?"div":"body",C);x.setAttributes({id:"cke_pastebin","data-cke-temp":"1"});var I=0,C=C.getWindow();CKEDITOR.env.webkit?(E.append(x),x.addClass("cke_editable"),E.is("body")||(I="static"!=E.getComputedStyle("position")?E:CKEDITOR.dom.element.get(E.$.offsetParent),I=I.getDocumentPosition().y)):E.getAscendant(CKEDITOR.env.ie?"body":"html",1).append(x);x.setStyles({position:"absolute",top:C.getScrollPosition().y-I+10+"px",width:"1px",height:Math.max(1,C.getViewPaneSize().height-20)+"px",overflow:"hidden",margin:0,padding:0});CKEDITOR.env.safari&&x.setStyles(CKEDITOR.tools.cssVendorPrefix("user-select","text"));(I=x.getParent().isReadOnly())?(x.setOpacity(0),x.setAttribute("contenteditable",!0)):x.setStyle("ltr"==b.config.contentsLangDirection?"left":"right","-1000px");b.on("selectionChange",F,null,null,0);if(CKEDITOR.env.webkit||CKEDITOR.env.gecko){y=E.once("blur",F,null,null,-100)}I&&x.focus();I=new CKEDITOR.dom.range(x);I.selectNodeContents(x);var A=I.select();CKEDITOR.env.ie&&(y=E.once("blur",function(){b.lockSelection(A)}));var J=CKEDITOR.document.getWindow().getScrollPosition().y;setTimeout(function(){CKEDITOR.env.webkit&&(CKEDITOR.document.getBody().$.scrollTop=J);y&&y.removeListener();CKEDITOR.env.ie&&E.focus();G.selectBookmarks(H);x.remove();var K;CKEDITOR.env.webkit&&(K=x.getFirst())&&K.is&&K.hasClass("Apple-style-span")&&(x=K);b.removeListener("selectionChange",F);D(x.getHtml())},0)}}function P(){if("paste"==M.mainPasteEvent){return b.fire("beforePaste",{type:"auto",method:"paste"}),!1}b.focus();g();var x=b.focusManager;x.lock();if(b.editable().fire(M.mainPasteEvent)&&!h("paste")){return x.unlock(),!1}x.unlock();return !0}function d(x){if("wysiwyg"==b.mode){switch(x.data.keyCode){case CKEDITOR.CTRL+86:case CKEDITOR.SHIFT+45:x=b.editable();g();"paste"==M.mainPasteEvent&&x.fire("beforepaste");break;case CKEDITOR.CTRL+88:case CKEDITOR.SHIFT+46:b.fire("saveSnapshot"),setTimeout(function(){b.fire("saveSnapshot")},50)}}}function v(y){var x={type:"auto",method:"paste",dataTransfer:M.initPasteDataTransfer(y)};x.dataTransfer.cacheData();var A=!1!==b.fire("beforePaste",x);A&&M.canClipboardApiBeTrusted(x.dataTransfer,b)?(y.data.preventDefault(),setTimeout(function(){s(b,x)},0)):w(y,function(B){x.dataValue=B.replace(/<span[^>]+data-cke-bookmark[^<]*?<\/span>/ig,"");A&&s(b,x)})}function f(){if("wysiwyg"==b.mode){var x=u("paste");b.getCommand("cut").setState(u("cut"));b.getCommand("copy").setState(u("copy"));b.getCommand("paste").setState(x);b.fire("pasteState",x)}}function u(y){if(O&&y in {paste:1,cut:1}){return CKEDITOR.TRISTATE_DISABLED}if("paste"==y){return CKEDITOR.TRISTATE_OFF}y=b.getSelection();var x=y.getRanges();return y.getType()==CKEDITOR.SELECTION_NONE||1==x.length&&x[0].collapsed?CKEDITOR.TRISTATE_DISABLED:CKEDITOR.TRISTATE_OFF}var M=CKEDITOR.plugins.clipboard,N=0,z=0,O=0;(function(){b.on("key",d);b.on("contentDom",a);b.on("selectionChange",function(x){O=x.data.selection.getRanges()[0].checkReadOnly();f()});b.contextMenu&&b.contextMenu.addListener(function(y,x){O=x.getRanges()[0].checkReadOnly();return{cut:u("cut"),copy:u("copy"),paste:u("paste")}})})();(function(){function x(B,A,C,D,E){var y=b.lang.clipboard[A];b.addCommand(A,C);b.ui.addButton&&b.ui.addButton(B,{label:y,command:A,toolbar:"clipboard,"+D});b.addMenuItems&&b.addMenuItem(A,{label:y,command:A,group:"clipboard",order:E})}x("Cut","cut",c("cut"),10,1);x("Copy","copy",c("copy"),20,4);x("Paste","paste",e(),30,8)})();b.getClipboardData=function(y,x){function E(G){G.removeListener();G.cancel();x(G.data)}function A(G){G.removeListener();G.cancel();F=!0;x({type:D,dataValue:G.data.dataValue,dataTransfer:G.data.dataTransfer,method:"paste"})}function B(){this.customTitle=y&&y.title}var C=!1,D="auto",F=!1;x||(x=y,y=null);b.on("paste",E,null,null,0);b.on("beforePaste",function(G){G.removeListener();C=!0;D=G.data.type},null,null,1000);!1===P()&&(b.removeListener("paste",E),C&&b.fire("pasteDialog",B)?(b.on("pasteDialogCommit",A),b.on("dialogHide",function(G){G.removeListener();G.data.removeListener("pasteDialogCommit",A);setTimeout(function(){F||x(null)},10)})):x(null))}}function o(a){if(CKEDITOR.env.webkit){if(!a.match(/^[^<]*$/g)&&!a.match(/^(<div><br( ?\/)?><\/div>|<div>[^<]*<\/div>)*$/gi)){return"html"}}else{if(CKEDITOR.env.ie){if(!a.match(/^([^<]|<br( ?\/)?>)*$/gi)&&!a.match(/^(<p>([^<]|<br( ?\/)?>)*<\/p>|(\r\n))*$/gi)){return"html"}}else{if(CKEDITOR.env.gecko){if(!a.match(/^([^<]|<br( ?\/)?>)*$/gi)){return"html"}}else{return"html"}}}return"htmlifiedtext"}function p(c,b){function a(d){return CKEDITOR.tools.repeat("\x3c/p\x3e\x3cp\x3e",~~(d/2))+(1==d%2?"\x3cbr\x3e":"")}b=b.replace(/\s+/g," ").replace(/> +</g,"\x3e\x3c").replace(/<br ?\/>/gi,"\x3cbr\x3e");b=b.replace(/<\/?[A-Z]+>/g,function(d){return d.toLowerCase()});if(b.match(/^[^<]$/)){return b}CKEDITOR.env.webkit&&-1<b.indexOf("\x3cdiv\x3e")&&(b=b.replace(/^(<div>(<br>|)<\/div>)(?!$|(<div>(<br>|)<\/div>))/g,"\x3cbr\x3e").replace(/^(<div>(<br>|)<\/div>){2}(?!$)/g,"\x3cdiv\x3e\x3c/div\x3e"),b.match(/<div>(<br>|)<\/div>/)&&(b="\x3cp\x3e"+b.replace(/(<div>(<br>|)<\/div>)+/g,function(d){return a(d.split("\x3c/div\x3e\x3cdiv\x3e").length+1)})+"\x3c/p\x3e"),b=b.replace(/<\/div><div>/g,"\x3cbr\x3e"),b=b.replace(/<\/?div>/g,""));CKEDITOR.env.gecko&&c.enterMode!=CKEDITOR.ENTER_BR&&(CKEDITOR.env.gecko&&(b=b.replace(/^<br><br>$/,"\x3cbr\x3e")),-1<b.indexOf("\x3cbr\x3e\x3cbr\x3e")&&(b="\x3cp\x3e"+b.replace(/(<br>){2,}/g,function(d){return a(d.length/4)})+"\x3c/p\x3e"));return r(c,b)}function t(){function b(){var d={},c;for(c in CKEDITOR.dtd){"$"!=c.charAt(0)&&"div"!=c&&"span"!=c&&(d[c]=1)}return d}var a={};return{get:function(c){return"plain-text"==c?a.plainText||(a.plainText=new CKEDITOR.filter("br")):"semantic-content"==c?((c=a.semanticContent)||(c=new CKEDITOR.filter,c.allow({$1:{elements:b(),attributes:!0,styles:!1,classes:!1}}),c=a.semanticContent=c),c):c?new CKEDITOR.filter(c):null}}}function m(c,b,d){b=CKEDITOR.htmlParser.fragment.fromHtml(b);var a=new CKEDITOR.htmlParser.basicWriter;d.applyTo(b,!0,!1,c.activeEnterMode);b.writeHtml(a);return a.getHtml()}function r(b,a){b.enterMode==CKEDITOR.ENTER_BR?a=a.replace(/(<\/p><p>)+/g,function(c){return CKEDITOR.tools.repeat("\x3cbr\x3e",c.length/7*2)}).replace(/<\/?p>/g,""):b.enterMode==CKEDITOR.ENTER_DIV&&(a=a.replace(/<(\/)?p>/g,"\x3c$1div\x3e"));return a}function k(a){a.data.preventDefault();a.data.$.dataTransfer.dropEffect="none"}function l(b){var a=CKEDITOR.plugins.clipboard;b.on("contentDom",function(){function d(y,x,u){x.select();s(b,{dataTransfer:u,method:"drop"},1);u.sourceEditor.fire("saveSnapshot");u.sourceEditor.editable().extractHtmlFromRange(y);u.sourceEditor.getSelection().selectRanges([y]);u.sourceEditor.fire("saveSnapshot")}function e(w,u){w.select();s(b,{dataTransfer:u,method:"drop"},1);a.resetDragDataTransfer()}function f(A,y,u){var z={$:A.data.$,target:A.data.getTarget()};y&&(z.dragRange=y);u&&(z.dropRange=u);!1===b.fire(A.name,z)&&A.data.preventDefault()}function i(u){u.type!=CKEDITOR.NODE_ELEMENT&&(u=u.getParent());return u.getChildCount()}var h=b.editable(),j=CKEDITOR.plugins.clipboard.getDropTarget(b),c=b.ui.space("top"),g=b.ui.space("bottom");a.preventDefaultDropOnElement(c);a.preventDefaultDropOnElement(g);h.attachListener(j,"dragstart",f);h.attachListener(b,"dragstart",a.resetDragDataTransfer,a,null,1);h.attachListener(b,"dragstart",function(u){a.initDragDataTransfer(u,b)},null,null,2);h.attachListener(b,"dragstart",function(){var u=a.dragRange=b.getSelection().getRanges()[0];CKEDITOR.env.ie&&10>CKEDITOR.env.version&&(a.dragStartContainerChildCount=u?i(u.startContainer):null,a.dragEndContainerChildCount=u?i(u.endContainer):null)},null,null,100);h.attachListener(j,"dragend",f);h.attachListener(b,"dragend",a.initDragDataTransfer,a,null,1);h.attachListener(b,"dragend",a.resetDragDataTransfer,a,null,100);h.attachListener(j,"dragover",function(u){var w=u.data.getTarget();w&&w.is&&w.is("html")?u.data.preventDefault():CKEDITOR.env.ie&&CKEDITOR.plugins.clipboard.isFileApiSupported&&u.data.$.dataTransfer.types.contains("Files")&&u.data.preventDefault()});h.attachListener(j,"drop",function(x){if(!x.data.$.defaultPrevented){x.data.preventDefault();var u=x.data.getTarget();if(!u.isReadOnly()||u.type==CKEDITOR.NODE_ELEMENT&&u.is("html")){var u=a.getRangeAtDropPosition(x,b),y=a.dragRange;u&&f(x,y,u)}}},null,null,9999);h.attachListener(b,"drop",a.initDragDataTransfer,a,null,1);h.attachListener(b,"drop",function(u){if(u=u.data){var y=u.dropRange,z=u.dragRange,A=u.dataTransfer;A.getTransferType(b)==CKEDITOR.DATA_TRANSFER_INTERNAL?setTimeout(function(){a.internalDrop(z,y,A,b)},0):A.getTransferType(b)==CKEDITOR.DATA_TRANSFER_CROSS_EDITORS?d(z,y,A):e(y,A)}},null,null,9999)})}CKEDITOR.plugins.add("clipboard",{requires:"dialog",init:function(c){var b,a=t();c.config.forcePasteAsPlainText?b="plain-text":c.config.pasteFilter?b=c.config.pasteFilter:!CKEDITOR.env.webkit||"pasteFilter" in c.config||(b="semantic-content");c.pasteFilter=a.get(b);n(c);l(c);CKEDITOR.dialog.add("paste",CKEDITOR.getUrl(this.path+"dialogs/paste.js"));c.on("paste",function(f){f.data.dataTransfer||(f.data.dataTransfer=new CKEDITOR.plugins.clipboard.dataTransfer);if(!f.data.dataValue){var d=f.data.dataTransfer,e=d.getData("text/html");if(e){f.data.dataValue=e,f.data.type="html"}else{if(e=d.getData("text/plain")){f.data.dataValue=c.editable().transformPlainTextToHtml(e),f.data.type="text"}}}},null,null,1);c.on("paste",function(g){var i=g.data.dataValue,d=CKEDITOR.dtd.$block;-1<i.indexOf("Apple-")&&(i=i.replace(/<span class="Apple-converted-space">&nbsp;<\/span>/gi," "),"html"!=g.data.type&&(i=i.replace(/<span class="Apple-tab-span"[^>]*>([^<]*)<\/span>/gi,function(j,v){return v.replace(/\t/g,"\x26nbsp;\x26nbsp; \x26nbsp;")})),-1<i.indexOf('\x3cbr class\x3d"Apple-interchange-newline"\x3e')&&(g.data.startsWithEOL=1,g.data.preSniffing="html",i=i.replace(/<br class="Apple-interchange-newline">/,"")),i=i.replace(/(<[^>]+) class="Apple-[^"]*"/gi,"$1"));if(i.match(/^<[^<]+cke_(editable|contents)/i)){var e,f,h=new CKEDITOR.dom.element("div");for(h.setHtml(i);1==h.getChildCount()&&(e=h.getFirst())&&e.type==CKEDITOR.NODE_ELEMENT&&(e.hasClass("cke_editable")||e.hasClass("cke_contents"));){h=f=e}f&&(i=f.getHtml().replace(/<br>$/i,""))}CKEDITOR.env.ie?i=i.replace(/^&nbsp;(?: |\r\n)?<(\w+)/g,function(v,j){return j.toLowerCase() in d?(g.data.preSniffing="html","\x3c"+j):v}):CKEDITOR.env.webkit?i=i.replace(/<\/(\w+)><div><br><\/div>$/,function(v,j){return j in d?(g.data.endsWithEOL=1,"\x3c/"+j+"\x3e"):v}):CKEDITOR.env.gecko&&(i=i.replace(/(\s)<br>$/,"$1"));g.data.dataValue=i},null,null,3);c.on("paste",function(h){h=h.data;var d=h.type,f=h.dataValue,e,g=c.config.clipboard_defaultContentType||"html",i=h.dataTransfer.getTransferType(c);e="html"==d||"html"==h.preSniffing?"html":o(f);"htmlifiedtext"==e&&(f=p(c.config,f));"text"==d&&"html"==e?f=m(c,f,a.get("plain-text")):i==CKEDITOR.DATA_TRANSFER_EXTERNAL&&c.pasteFilter&&!h.dontFilter&&(f=m(c,f,c.pasteFilter));h.startsWithEOL&&(f='\x3cbr data-cke-eol\x3d"1"\x3e'+f);h.endsWithEOL&&(f+='\x3cbr data-cke-eol\x3d"1"\x3e');"auto"==d&&(d="html"==e||"html"==g?"html":"text");h.type=d;h.dataValue=f;delete h.preSniffing;delete h.startsWithEOL;delete h.endsWithEOL},null,null,6);c.on("paste",function(d){d=d.data;d.dataValue&&(c.insertHtml(d.dataValue,d.type,d.range),setTimeout(function(){c.fire("afterPaste")},0))},null,null,1000);c.on("pasteDialog",function(d){setTimeout(function(){c.openDialog("paste",d.data)},0)})}});CKEDITOR.plugins.clipboard={isCustomCopyCutSupported:!CKEDITOR.env.ie&&!CKEDITOR.env.iOS,isCustomDataTypesSupported:!CKEDITOR.env.ie,isFileApiSupported:!CKEDITOR.env.ie||9<CKEDITOR.env.version,mainPasteEvent:CKEDITOR.env.ie&&!CKEDITOR.env.edge?"beforepaste":"paste",canClipboardApiBeTrusted:function(b,a){return b.getTransferType(a)!=CKEDITOR.DATA_TRANSFER_EXTERNAL||CKEDITOR.env.chrome&&!b.isEmpty()||CKEDITOR.env.gecko&&(b.getData("text/html")||b.getFilesCount())?!0:!1},getDropTarget:function(b){var a=b.editable();return CKEDITOR.env.ie&&9>CKEDITOR.env.version||a.isInline()?a:b.document},fixSplitNodesAfterDrop:function(c,b,d,e){function f(j,g,h){var i=j;i.type==CKEDITOR.NODE_TEXT&&(i=j.getParent());if(i.equals(g)&&h!=g.getChildCount()){return j=b.startContainer.getChild(b.startOffset-1),g=b.startContainer.getChild(b.startOffset),j&&j.type==CKEDITOR.NODE_TEXT&&g&&g.type==CKEDITOR.NODE_TEXT&&(h=j.getLength(),j.setText(j.getText()+g.getText()),g.remove(),b.setStart(j,h),b.collapse(!0)),!0}}var a=b.startContainer;"number"==typeof e&&"number"==typeof d&&a.type==CKEDITOR.NODE_ELEMENT&&(f(c.startContainer,a,d)||f(c.endContainer,a,e))},isDropRangeAffectedByDragRange:function(c,b){var d=b.startContainer,a=b.endOffset;return c.endContainer.equals(d)&&c.endOffset<=a||c.startContainer.getParent().equals(d)&&c.startContainer.getIndex()<a||c.endContainer.getParent().equals(d)&&c.endContainer.getIndex()<a?!0:!1},internalDrop:function(c,b,d,e){var f=CKEDITOR.plugins.clipboard,h=e.editable(),g,a;e.fire("saveSnapshot");e.fire("lockSnapshot",{dontUpdate:1});CKEDITOR.env.ie&&10>CKEDITOR.env.version&&this.fixSplitNodesAfterDrop(c,b,f.dragStartContainerChildCount,f.dragEndContainerChildCount);(a=this.isDropRangeAffectedByDragRange(c,b))||(g=c.createBookmark(!1));f=b.clone().createBookmark(!1);a&&(g=c.createBookmark(!1));c=g.startNode;b=g.endNode;a=f.startNode;b&&c.getPosition(a)&CKEDITOR.POSITION_PRECEDING&&b.getPosition(a)&CKEDITOR.POSITION_FOLLOWING&&a.insertBefore(c);c=e.createRange();c.moveToBookmark(g);h.extractHtmlFromRange(c,1);b=e.createRange();b.moveToBookmark(f);s(e,{dataTransfer:d,method:"drop",range:b},1);e.fire("unlockSnapshot")},getRangeAtDropPosition:function(M,L){var O=M.data.$,a=O.clientX,b=O.clientY,e=L.getSelection(!0).getRanges()[0],c=L.createRange();if(M.data.testRange){return M.data.testRange}if(document.caretRangeFromPoint){O=L.document.$.caretRangeFromPoint(a,b),c.setStart(CKEDITOR.dom.node(O.startContainer),O.startOffset),c.collapse(!0)}else{if(O.rangeParent){c.setStart(CKEDITOR.dom.node(O.rangeParent),O.rangeOffset),c.collapse(!0)}else{if(CKEDITOR.env.ie&&8<CKEDITOR.env.version&&e&&L.editable().hasFocus){return e}if(document.body.createTextRange){L.focus();O=L.document.getBody().$.createTextRange();try{for(var g=!1,j=0;20>j&&!g;j++){if(!g){try{O.moveToPoint(a,b-j),g=!0}catch(N){}}if(!g){try{O.moveToPoint(a,b+j),g=!0}catch(d){}}}if(g){var h="cke-temp-"+(new Date).getTime();O.pasteHTML('\x3cspan id\x3d"'+h+'"\x3e\x3c/span\x3e');var i=L.document.getById(h);c.moveToPosition(i,CKEDITOR.POSITION_BEFORE_START);i.remove()}else{var v=L.document.$.elementFromPoint(a,b),u=new CKEDITOR.dom.element(v),f;if(u.equals(L.editable())||"html"==u.getName()){return e&&e.startContainer&&!e.startContainer.equals(L.editable())?e:null}f=u.getClientRect();a<f.left?c.setStartAt(u,CKEDITOR.POSITION_AFTER_START):c.setStartAt(u,CKEDITOR.POSITION_BEFORE_END);c.collapse(!0)}}catch(K){return null}}else{return null}}}return c},initDragDataTransfer:function(c,b){var d=c.data.$?c.data.$.dataTransfer:null,a=new this.dataTransfer(d,b);d?this.dragData&&a.id==this.dragData.id?a=this.dragData:this.dragData=a:this.dragData?a=this.dragData:this.dragData=a;c.data.dataTransfer=a},resetDragDataTransfer:function(){this.dragData=null},initPasteDataTransfer:function(c,b){if(this.isCustomCopyCutSupported&&c&&c.data&&c.data.$){var a=new this.dataTransfer(c.data.$.clipboardData,b);this.copyCutData&&a.id==this.copyCutData.id?(a=this.copyCutData,a.$=c.data.$.clipboardData):this.copyCutData=a;return a}return new this.dataTransfer(null,b)},preventDefaultDropOnElement:function(a){a&&a.on("dragover",k)}};var q=CKEDITOR.plugins.clipboard.isCustomDataTypesSupported?"cke/id":"Text";CKEDITOR.plugins.clipboard.dataTransfer=function(c,b){c&&(this.$=c);this._={metaRegExp:/^<meta.*?>/i,bodyRegExp:/<body(?:[\s\S]*?)>([\s\S]*)<\/body>/i,fragmentRegExp:/\x3c!--(?:Start|End)Fragment--\x3e/g,data:{},files:[],normalizeType:function(d){d=d.toLowerCase();return"text"==d||"text/plain"==d?"Text":"url"==d?"URL":d}};this.id=this.getData(q);this.id||(this.id="Text"==q?"":"cke-"+CKEDITOR.tools.getUniqueId());if("Text"!=q){try{this.$.setData(q,this.id)}catch(a){}}b&&(this.sourceEditor=b,this.setData("text/html",b.getSelectedHtml(1)),"Text"==q||this.getData("text/plain")||this.setData("text/plain",b.getSelection().getSelectedText()))};CKEDITOR.DATA_TRANSFER_INTERNAL=1;CKEDITOR.DATA_TRANSFER_CROSS_EDITORS=2;CKEDITOR.DATA_TRANSFER_EXTERNAL=3;CKEDITOR.plugins.clipboard.dataTransfer.prototype={getData:function(c){c=this._.normalizeType(c);var b=this._.data[c];if(void 0===b||null===b||""===b){try{b=this.$.getData(c)}catch(a){}}if(void 0===b||null===b||""===b){b=""}"text/html"==c?(b=b.replace(this._.metaRegExp,""),(c=this._.bodyRegExp.exec(b))&&c.length&&(b=c[1],b=b.replace(this._.fragmentRegExp,""))):"Text"==c&&CKEDITOR.env.gecko&&this.getFilesCount()&&"file://"==b.substring(0,7)&&(b="");return b},setData:function(c,b){c=this._.normalizeType(c);this._.data[c]=b;if(CKEDITOR.plugins.clipboard.isCustomDataTypesSupported||"URL"==c||"Text"==c){"Text"==q&&"Text"==c&&(this.id=b);try{this.$.setData(c,b)}catch(a){}}},getTransferType:function(a){return this.sourceEditor?this.sourceEditor==a?CKEDITOR.DATA_TRANSFER_INTERNAL:CKEDITOR.DATA_TRANSFER_CROSS_EDITORS:CKEDITOR.DATA_TRANSFER_EXTERNAL},cacheData:function(){function c(f){f=b._.normalizeType(f);var e=b.getData(f);e&&(b._.data[f]=e)}if(this.$){var b=this,d,a;if(CKEDITOR.plugins.clipboard.isCustomDataTypesSupported){if(this.$.types){for(d=0;d<this.$.types.length;d++){c(this.$.types[d])}}}else{c("Text"),c("URL")}a=this._getImageFromClipboard();if(this.$&&this.$.files||a){this._.files=[];for(d=0;d<this.$.files.length;d++){this._.files.push(this.$.files[d])}0===this._.files.length&&a&&this._.files.push(a)}}},getFilesCount:function(){return this._.files.length?this._.files.length:this.$&&this.$.files&&this.$.files.length?this.$.files.length:this._getImageFromClipboard()?1:0},getFile:function(a){return this._.files.length?this._.files[a]:this.$&&this.$.files&&this.$.files.length?this.$.files[a]:0===a?this._getImageFromClipboard():void 0},isEmpty:function(){var c={},b;if(this.getFilesCount()){return !1}for(b in this._.data){c[b]=1}if(this.$){if(CKEDITOR.plugins.clipboard.isCustomDataTypesSupported){if(this.$.types){for(var a=0;a<this.$.types.length;a++){c[this.$.types[a]]=1}}}else{c.Text=1,c.URL=1}}"Text"!=q&&(c[q]=0);for(b in c){if(c[b]&&""!==this.getData(b)){return !1}}return !0},_getImageFromClipboard:function(){var b;if(this.$&&this.$.items&&this.$.items[0]){try{if((b=this.$.items[0].getAsFile())&&b.type){return b}}catch(a){}}}}})();(function(){CKEDITOR.plugins.add("panel",{beforeInit:function(a){a.ui.addHandler(CKEDITOR.UI_PANEL,CKEDITOR.ui.panel.handler)}});CKEDITOR.UI_PANEL="panel";CKEDITOR.ui.panel=function(a,b){b&&CKEDITOR.tools.extend(this,b);CKEDITOR.tools.extend(this,{className:"",css:[]});this.id=CKEDITOR.tools.getNextId();this.document=a;this.isFramed=this.forceIFrame||this.css.length;this._={blocks:{}}};CKEDITOR.ui.panel.handler={create:function(a){return new CKEDITOR.ui.panel(a)}};var f=CKEDITOR.addTemplate("panel",'\x3cdiv lang\x3d"{langCode}" id\x3d"{id}" dir\x3d{dir} class\x3d"cke cke_reset_all {editorId} cke_panel cke_panel {cls} cke_{dir}" style\x3d"z-index:{z-index}" role\x3d"presentation"\x3e{frame}\x3c/div\x3e'),d=CKEDITOR.addTemplate("panel-frame",'\x3ciframe id\x3d"{id}" class\x3d"cke_panel_frame" role\x3d"presentation" frameborder\x3d"0" src\x3d"{src}"\x3e\x3c/iframe\x3e'),e=CKEDITOR.addTemplate("panel-frame-inner",'\x3c!DOCTYPE html\x3e\x3chtml class\x3d"cke_panel_container {env}" dir\x3d"{dir}" lang\x3d"{langCode}"\x3e\x3chead\x3e{css}\x3c/head\x3e\x3cbody class\x3d"cke_{dir}" style\x3d"margin:0;padding:0" onload\x3d"{onload}"\x3e\x3c/body\x3e\x3c/html\x3e');CKEDITOR.ui.panel.prototype={render:function(c,j){this.getHolderElement=function(){var g=this._.holder;if(!g){if(this.isFramed){var g=this.document.getById(this.id+"_frame"),h=g.getParent(),g=g.getFrameDocument();CKEDITOR.env.iOS&&h.setStyles({overflow:"scroll","-webkit-overflow-scrolling":"touch"});h=CKEDITOR.tools.addFunction(CKEDITOR.tools.bind(function(){this.isLoaded=!0;if(this.onLoad){this.onLoad()}},this));g.write(e.output(CKEDITOR.tools.extend({css:CKEDITOR.tools.buildStyleHtml(this.css),onload:"window.parent.CKEDITOR.tools.callFunction("+h+");"},a)));g.getWindow().$.CKEDITOR=CKEDITOR;g.on("keydown",function(m){var n=m.data.getKeystroke(),i=this.document.getById(this.id).getAttribute("dir");this._.onKeyDown&&!1===this._.onKeyDown(n)?m.data.preventDefault():(27==n||n==("rtl"==i?39:37))&&this.onEscape&&!1===this.onEscape(n)&&m.data.preventDefault()},this);g=g.getBody();g.unselectable();CKEDITOR.env.air&&CKEDITOR.tools.callFunction(h)}else{g=this.document.getById(this.id)}this._.holder=g}return g};var a={editorId:c.id,id:this.id,langCode:c.langCode,dir:c.lang.dir,cls:this.className,frame:"",env:CKEDITOR.env.cssClass,"z-index":c.config.baseFloatZIndex+1};if(this.isFramed){var b=CKEDITOR.env.air?"javascript:void(0)":CKEDITOR.env.ie?"javascript:void(function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.close();")+"}())":"";a.frame=d.output({id:this.id+"_frame",src:b})}b=f.output(a);j&&j.push(b);return b},addBlock:function(a,b){b=this._.blocks[a]=b instanceof CKEDITOR.ui.panel.block?b:new CKEDITOR.ui.panel.block(this.getHolderElement(),b);this._.currentBlock||this.showBlock(a);return b},getBlock:function(a){return this._.blocks[a]},showBlock:function(b){b=this._.blocks[b];var c=this._.currentBlock,a=!this.forceIFrame||CKEDITOR.env.ie?this._.holder:this.document.getById(this.id+"_frame");c&&c.hide();this._.currentBlock=b;CKEDITOR.fire("ariaWidget",a);b._.focusIndex=-1;this._.onKeyDown=b.onKeyDown&&CKEDITOR.tools.bind(b.onKeyDown,b);b.show();return b},destroy:function(){this.element&&this.element.remove()}};CKEDITOR.ui.panel.block=CKEDITOR.tools.createClass({$:function(a,b){this.element=a.append(a.getDocument().createElement("div",{attributes:{tabindex:-1,"class":"cke_panel_block"},styles:{display:"none"}}));b&&CKEDITOR.tools.extend(this,b);this.element.setAttributes({role:this.attributes.role||"presentation","aria-label":this.attributes["aria-label"],title:this.attributes.title||this.attributes["aria-label"]});this.keys={};this._.focusIndex=-1;this.element.disableContextMenu()},_:{markItem:function(a){-1!=a&&(a=this.element.getElementsByTag("a").getItem(this._.focusIndex=a),CKEDITOR.env.webkit&&a.getDocument().getWindow().focus(),a.focus(),this.onMark&&this.onMark(a))}},proto:{show:function(){this.element.setStyle("display","")},hide:function(){this.onHide&&!0===this.onHide.call(this)||this.element.setStyle("display","none")},onKeyDown:function(k,l){var b=this.keys[k];switch(b){case"next":for(var c=this._.focusIndex,b=this.element.getElementsByTag("a"),a;a=b.getItem(++c);){if(a.getAttribute("_cke_focus")&&a.$.offsetWidth){this._.focusIndex=c;a.focus();break}}return a||l?!1:(this._.focusIndex=-1,this.onKeyDown(k,1));case"prev":c=this._.focusIndex;for(b=this.element.getElementsByTag("a");0<c&&(a=b.getItem(--c));){if(a.getAttribute("_cke_focus")&&a.$.offsetWidth){this._.focusIndex=c;a.focus();break}a=null}return a||l?!1:(this._.focusIndex=b.count(),this.onKeyDown(k,1));case"click":case"mouseup":return c=this._.focusIndex,(a=0<=c&&this.element.getElementsByTag("a").getItem(c))&&(a.$[b]?a.$[b]():a.$["on"+b]()),!1}return !0}}})})();CKEDITOR.plugins.add("floatpanel",{requires:"panel"});(function(){function d(h,m,a,l,g){g=CKEDITOR.tools.genKey(m.getUniqueId(),a.getUniqueId(),h.lang.dir,h.uiColor||"",l.css||"",g||"");var b=c[g];b||(b=c[g]=new CKEDITOR.ui.panel(m,l),b.element=a.append(CKEDITOR.dom.element.createFromHtml(b.render(h),m)),b.element.setStyles({display:"none",position:"absolute"}));return b}var c={};CKEDITOR.ui.floatPanel=CKEDITOR.tools.createClass({$:function(a,b,e,m){function l(){g.hide()}e.forceIFrame=1;e.toolbarRelated&&a.elementMode==CKEDITOR.ELEMENT_MODE_INLINE&&(b=CKEDITOR.document.getById("cke_"+a.name));var h=b.getDocument();m=d(a,h,b,e,m||0);var p=m.element,s=p.getFirst(),g=this;p.disableContextMenu();this.element=p;this._={editor:a,panel:m,parentElement:b,definition:e,document:h,iframe:s,children:[],dir:a.lang.dir,showBlockParams:null};a.on("mode",l);a.on("resize",l);h.getWindow().on("resize",function(){this.reposition()},this)},proto:{addBlock:function(a,b){return this._.panel.addBlock(a,b)},addListBlock:function(a,b){return this._.panel.addListBlock(a,b)},getBlock:function(a){return this._.panel.getBlock(a)},showBlock:function(H,a,b,q,n,m){var r=this._.panel,g=r.showBlock(H);this._.showBlockParams=[].slice.call(arguments);this.allowBlur(!1);var f=this._.editor.editable();this._.returnFocus=f.hasFocus?f:new CKEDITOR.dom.element(CKEDITOR.document.$.activeElement);this._.hideTimeout=0;var p=this.element,f=this._.iframe,f=CKEDITOR.env.ie&&!CKEDITOR.env.edge?f:new CKEDITOR.dom.window(f.$.contentWindow),l=p.getDocument(),k=this._.parentElement.getPositionedAncestor(),t=a.getDocumentPosition(l),l=k?k.getDocumentPosition(l):{x:0,y:0},h="rtl"==this._.dir,e=t.x+(q||0)-l.x,G=t.y+(n||0)-l.y;!h||1!=b&&4!=b?h||2!=b&&3!=b||(e+=a.$.offsetWidth-1):e+=a.$.offsetWidth;if(3==b||4==b){G+=a.$.offsetHeight-1}this._.panel._.offsetParentId=a.getId();p.setStyles({top:G+"px",left:0,display:""});p.setOpacity(0);p.getFirst().removeStyle("width");this._.editor.focusManager.add(f);this._.blurSet||(CKEDITOR.event.useCapture=!0,f.on("blur",function(j){function i(){delete this._.returnFocus;this.hide()}this.allowBlur()&&j.data.getPhase()==CKEDITOR.EVENT_PHASE_AT_TARGET&&this.visible&&!this._.activeChild&&(CKEDITOR.env.iOS?this._.hideTimeout||(this._.hideTimeout=CKEDITOR.tools.setTimeout(i,0,this)):i.call(this))},this),f.on("focus",function(){this._.focused=!0;this.hideChild();this.allowBlur(!0)},this),CKEDITOR.env.iOS&&(f.on("touchstart",function(){clearTimeout(this._.hideTimeout)},this),f.on("touchend",function(){this._.hideTimeout=0;this.focus()},this)),CKEDITOR.event.useCapture=!1,this._.blurSet=1);r.onEscape=CKEDITOR.tools.bind(function(i){if(this.onEscape&&!1===this.onEscape(i)){return !1}},this);CKEDITOR.tools.setTimeout(function(){var i=CKEDITOR.tools.bind(function(){var o=p;o.removeStyle("width");if(g.autoSize){var w=g.element.getDocument(),w=(CKEDITOR.env.webkit?g.element:w.getBody()).$.scrollWidth;CKEDITOR.env.ie&&CKEDITOR.env.quirks&&0<w&&(w+=(o.$.offsetWidth||0)-(o.$.clientWidth||0)+3);o.setStyle("width",w+10+"px");w=g.element.$.scrollHeight;CKEDITOR.env.ie&&CKEDITOR.env.quirks&&0<w&&(w+=(o.$.offsetHeight||0)-(o.$.clientHeight||0)+3);o.setStyle("height",w+"px");r._.currentBlock.element.setStyle("display","none").removeStyle("display")}else{o.removeStyle("height")}h&&(e-=p.$.offsetWidth);p.setStyle("left",e+"px");var w=r.element.getWindow(),o=p.$.getBoundingClientRect(),w=w.getViewPaneSize(),u=o.width||o.right-o.left,v=o.height||o.bottom-o.top,s=h?o.right:w.width-o.left,j=h?w.width-o.right:o.left;h?s<u&&(e=j>u?e+u:w.width>u?e-o.left:e-o.right+w.width):s<u&&(e=j>u?e-u:w.width>u?e-o.right+w.width:e-o.left);u=o.top;w.height-o.top<v&&(G=u>v?G-v:w.height>v?G-o.bottom+w.height:G-o.top);CKEDITOR.env.ie&&(w=o=new CKEDITOR.dom.element(p.$.offsetParent),"html"==w.getName()&&(w=w.getDocument().getBody()),"rtl"==w.getComputedStyle("direction")&&(e=CKEDITOR.env.ie8Compat?e-2*p.getDocument().getDocumentElement().$.scrollLeft:e-(o.$.scrollWidth-o.$.clientWidth)));var o=p.getFirst(),x;(x=o.getCustomData("activePanel"))&&x.onHide&&x.onHide.call(this,1);o.setCustomData("activePanel",this);p.setStyles({top:G+"px",left:e+"px"});p.setOpacity(1);m&&m()},this);r.isLoaded?i():r.onLoad=i;CKEDITOR.tools.setTimeout(function(){var j=CKEDITOR.env.webkit&&CKEDITOR.document.getWindow().getScrollPosition().y;this.focus();g.element.focus();CKEDITOR.env.webkit&&(CKEDITOR.document.getBody().$.scrollTop=j);this.allowBlur(!0);this._.editor.fire("panelShow",this)},0,this)},CKEDITOR.env.air?200:0,this);this.visible=1;this.onShow&&this.onShow.call(this)},reposition:function(){var a=this._.showBlockParams;this.visible&&this._.showBlockParams&&(this.hide(),this.showBlock.apply(this,a))},focus:function(){if(CKEDITOR.env.webkit){var a=CKEDITOR.document.getActive();a&&!a.equals(this._.iframe)&&a.$.blur()}(this._.lastFocused||this._.iframe.getFrameDocument().getWindow()).focus()},blur:function(){var a=this._.iframe.getFrameDocument().getActive();a&&a.is("a")&&(this._.lastFocused=a)},hide:function(a){if(this.visible&&(!this.onHide||!0!==this.onHide.call(this))){this.hideChild();CKEDITOR.env.gecko&&this._.iframe.getFrameDocument().$.activeElement.blur();this.element.setStyle("display","none");this.visible=0;this.element.getFirst().removeCustomData("activePanel");if(a=a&&this._.returnFocus){CKEDITOR.env.webkit&&a.type&&a.getWindow().$.focus(),a.focus()}delete this._.lastFocused;this._.showBlockParams=null;this._.editor.fire("panelHide",this)}},allowBlur:function(a){var b=this._.panel;void 0!==a&&(b.allowBlur=a);return b.allowBlur},showAsChild:function(h,m,a,b,g,f){if(this._.activeChild!=h||h._.panel._.offsetParentId!=a.getId()){this.hideChild(),h.onHide=CKEDITOR.tools.bind(function(){CKEDITOR.tools.setTimeout(function(){this._.focused||this.hide()},0,this)},this),this._.activeChild=h,this._.focused=!1,h.showBlock(m,a,b,g,f),this.blur(),(CKEDITOR.env.ie7Compat||CKEDITOR.env.ie6Compat)&&setTimeout(function(){h.element.getChild(0).$.style.cssText+=""},100)}},hideChild:function(a){var b=this._.activeChild;b&&(delete b.onHide,delete this._.activeChild,b.hide(),a&&this.focus())}}});CKEDITOR.on("instanceDestroyed",function(){var b=CKEDITOR.tools.isEmpty(CKEDITOR.instances),g;for(g in c){var a=c[g];b?a.destroy():a.element.hide()}b&&(c={})})})();CKEDITOR.plugins.add("menu",{requires:"floatpanel",beforeInit:function(i){for(var j=i.config.menu_groups.split(","),h=i._.menuGroups={},g=i._.menuItems={},a=0;a<j.length;a++){h[j[a]]=a+1}i.addMenuGroup=function(c,b){h[c]=b||100};i.addMenuItem=function(c,b){h[b.group]&&(g[c]=new CKEDITOR.menuItem(this,c,b))};i.addMenuItems=function(c){for(var b in c){this.addMenuItem(b,c[b])}};i.getMenuItem=function(b){return g[b]};i.removeMenuItem=function(b){delete g[b]}}});(function(){function e(a){a.sort(function(c,b){return c.group<b.group?-1:c.group>b.group?1:c.order<b.order?-1:c.order>b.order?1:0})}var f='\x3cspan class\x3d"cke_menuitem"\x3e\x3ca id\x3d"{id}" class\x3d"cke_menubutton cke_menubutton__{name} cke_menubutton_{state} {cls}" href\x3d"{href}" title\x3d"{title}" tabindex\x3d"-1"_cke_focus\x3d1 hidefocus\x3d"true" role\x3d"{role}" aria-haspopup\x3d"{hasPopup}" aria-disabled\x3d"{disabled}" {ariaChecked}';CKEDITOR.env.gecko&&CKEDITOR.env.mac&&(f+=' onkeypress\x3d"return false;"');CKEDITOR.env.gecko&&(f+=' onblur\x3d"this.style.cssText \x3d this.style.cssText;"');var f=f+(' onmouseover\x3d"CKEDITOR.tools.callFunction({hoverFn},{index});" onmouseout\x3d"CKEDITOR.tools.callFunction({moveOutFn},{index});" '+(CKEDITOR.env.ie?'onclick\x3d"return false;" onmouseup':"onclick")+'\x3d"CKEDITOR.tools.callFunction({clickFn},{index}); return false;"\x3e'),h=CKEDITOR.addTemplate("menuItem",f+'\x3cspan class\x3d"cke_menubutton_inner"\x3e\x3cspan class\x3d"cke_menubutton_icon"\x3e\x3cspan class\x3d"cke_button_icon cke_button__{iconName}_icon" style\x3d"{iconStyle}"\x3e\x3c/span\x3e\x3c/span\x3e\x3cspan class\x3d"cke_menubutton_label"\x3e{label}\x3c/span\x3e{arrowHtml}\x3c/span\x3e\x3c/a\x3e\x3c/span\x3e'),g=CKEDITOR.addTemplate("menuArrow",'\x3cspan class\x3d"cke_menuarrow"\x3e\x3cspan\x3e{label}\x3c/span\x3e\x3c/span\x3e');CKEDITOR.menu=CKEDITOR.tools.createClass({$:function(b,c){c=this._.definition=c||{};this.id=CKEDITOR.tools.getNextId();this.editor=b;this.items=[];this._.listeners=[];this._.level=c.level||1;var a=CKEDITOR.tools.extend({},c.panel,{css:[CKEDITOR.skin.getPath("editor")],level:this._.level-1,block:{}}),d=a.block.attributes=a.attributes||{};!d.role&&(d.role="menu");this._.panelDefinition=a},_:{onShow:function(){var a=this.editor.getSelection(),c=a&&a.getStartElement(),k=this.editor.elementPath(),d=this._.listeners;this.removeAll();for(var l=0;l<d.length;l++){var b=d[l](c,a,k);if(b){for(var r in b){var m=this.editor.getMenuItem(r);!m||m.command&&!this.editor.getCommand(m.command).state||(m.state=b[r],this.add(m))}}}},onClick:function(a){this.hide();if(a.onClick){a.onClick()}else{a.command&&this.editor.execCommand(a.command)}},onEscape:function(a){var b=this.parent;b?b._.panel.hideChild(1):27==a&&this.hide(1);return !1},onHide:function(){this.onHide&&this.onHide()},showSubMenu:function(c){var l=this._.subMenu,a=this.items[c];if(a=a.getItems&&a.getItems()){l?l.removeAll():(l=this._.subMenu=new CKEDITOR.menu(this.editor,CKEDITOR.tools.extend({},this._.definition,{level:this._.level+1},!0)),l.parent=this,l._.onClick=CKEDITOR.tools.bind(this._.onClick,this));for(var m in a){var b=this.editor.getMenuItem(m);b&&(b.state=a[m],l.add(b))}var d=this._.panel.getBlock(this.id).element.getDocument().getById(this.id+String(c));setTimeout(function(){l.show(d,2)},0)}else{this._.panel.hideChild(1)}}},proto:{add:function(a){a.order||(a.order=this.items.length);this.items.push(a)},removeAll:function(){this.items=[]},show:function(l,m,n,b){if(!this.parent&&(this._.onShow(),!this.items.length)){return}m=m||("rtl"==this.editor.lang.dir?2:1);var q=this.items,a=this.editor,C=this._.panel,A=this._.element;if(!C){C=this._.panel=new CKEDITOR.ui.floatPanel(this.editor,CKEDITOR.document.getBody(),this._.panelDefinition,this._.level);C.onEscape=CKEDITOR.tools.bind(function(i){if(!1===this._.onEscape(i)){return !1}},this);C.onShow=function(){C._.panel.getHolderElement().getParent().addClass("cke").addClass("cke_reset_all")};C.onHide=CKEDITOR.tools.bind(function(){this._.onHide&&this._.onHide()},this);A=C.addBlock(this.id,this._.panelDefinition.block);A.autoSize=!0;var p=A.keys;p[40]="next";p[9]="next";p[38]="prev";p[CKEDITOR.SHIFT+9]="prev";p["rtl"==a.lang.dir?37:39]=CKEDITOR.env.ie?"mouseup":"click";p[32]=CKEDITOR.env.ie?"mouseup":"click";CKEDITOR.env.ie&&(p[13]="mouseup");A=this._.element=A.element;p=A.getDocument();p.getBody().setStyle("overflow","hidden");p.getElementsByTag("html").getItem(0).setStyle("overflow","hidden");this._.itemOverFn=CKEDITOR.tools.addFunction(function(i){clearTimeout(this._.showSubTimeout);this._.showSubTimeout=CKEDITOR.tools.setTimeout(this._.showSubMenu,a.config.menu_subMenuDelay||400,this,[i])},this);this._.itemOutFn=CKEDITOR.tools.addFunction(function(){clearTimeout(this._.showSubTimeout)},this);this._.itemClickFn=CKEDITOR.tools.addFunction(function(i){var j=this.items[i];if(j.state==CKEDITOR.TRISTATE_DISABLED){this.hide(1)}else{if(j.getItems){this._.showSubMenu(i)}else{this._.onClick(j)}}},this)}e(q);for(var p=a.elementPath(),p=['\x3cdiv class\x3d"cke_menu'+(p&&p.direction()!=a.lang.dir?" cke_mixed_dir_content":"")+'" role\x3d"presentation"\x3e'],B=q.length,d=B&&q[0].group,c=0;c<B;c++){var k=q[c];d!=k.group&&(p.push('\x3cdiv class\x3d"cke_menuseparator" role\x3d"separator"\x3e\x3c/div\x3e'),d=k.group);k.render(this,c,p)}p.push("\x3c/div\x3e");A.setHtml(p.join(""));CKEDITOR.ui.fire("ready",this);this.parent?this.parent._.panel.showAsChild(C,this.id,l,m,n,b):C.showBlock(this.id,l,m,n,b);a.fire("menuShow",[C])},addListener:function(a){this._.listeners.push(a)},hide:function(a){this._.onHide&&this._.onHide();this._.panel&&this._.panel.hide(a)}}});CKEDITOR.menuItem=CKEDITOR.tools.createClass({$:function(b,c,a){CKEDITOR.tools.extend(this,a,{order:0,className:"cke_menubutton__"+c});this.group=b._.menuGroups[this.group];this.editor=b;this.name=c},proto:{render:function(w,x,a){var l=w.id+String(x),c="undefined"==typeof this.state?CKEDITOR.TRISTATE_OFF:this.state,v="",u=c==CKEDITOR.TRISTATE_ON?"on":c==CKEDITOR.TRISTATE_DISABLED?"disabled":"off";this.role in {menuitemcheckbox:1,menuitemradio:1}&&(v=' aria-checked\x3d"'+(c==CKEDITOR.TRISTATE_ON?"true":"false")+'"');var d=this.getItems,b="\x26#"+("rtl"==this.editor.lang.dir?"9668":"9658")+";",k=this.name;this.icon&&!/\./.test(this.icon)&&(k=this.icon);w={id:l,name:this.name,iconName:k,label:this.label,cls:this.className||"",state:u,hasPopup:d?"true":"false",disabled:c==CKEDITOR.TRISTATE_DISABLED,title:this.label,href:"javascript:void('"+(this.label||"").replace("'")+"')",hoverFn:w._.itemOverFn,moveOutFn:w._.itemOutFn,clickFn:w._.itemClickFn,index:x,iconStyle:CKEDITOR.skin.getIconStyle(k,"rtl"==this.editor.lang.dir,k==this.icon?null:this.icon,this.iconOffset),arrowHtml:d?g.output({label:b}):"",role:this.role?this.role:"menuitem",ariaChecked:v};h.output(w,a)}}})})();CKEDITOR.config.menu_groups="clipboard,form,tablecell,tablecellproperties,tablerow,tablecolumn,table,anchor,link,image,flash,checkbox,radio,textfield,hiddenfield,imagebutton,button,select,textarea,div";CKEDITOR.plugins.add("contextmenu",{requires:"menu",onLoad:function(){CKEDITOR.plugins.contextMenu=CKEDITOR.tools.createClass({base:CKEDITOR.menu,$:function(a){this.base.call(this,a,{panel:{className:"cke_menu_panel",attributes:{"aria-label":a.lang.contextmenu.options}}})},proto:{addTarget:function(a,e){a.on("contextmenu",function(m){m=m.data;var b=CKEDITOR.env.webkit?f:CKEDITOR.env.mac?m.$.metaKey:m.$.ctrlKey;if(!e||!b){m.preventDefault();if(CKEDITOR.env.mac&&CKEDITOR.env.webkit){var b=this.editor,n=(new CKEDITOR.dom.elementPath(m.getTarget(),b.editable())).contains(function(i){return i.hasAttribute("contenteditable")},!0);n&&"false"==n.getAttribute("contenteditable")&&b.getSelection().fake(n)}var n=m.getTarget().getDocument(),c=m.getTarget().getDocument().getDocumentElement(),b=!n.equals(CKEDITOR.document),n=n.getWindow().getScrollPosition(),g=b?m.$.clientX:m.$.pageX||n.x+m.$.clientX,h=b?m.$.clientY:m.$.pageY||n.y+m.$.clientY;CKEDITOR.tools.setTimeout(function(){this.open(c,null,g,h)},CKEDITOR.env.ie?200:0,this)}},this);if(CKEDITOR.env.webkit){var f,d=function(){f=0};a.on("keydown",function(b){f=CKEDITOR.env.mac?b.data.$.metaKey:b.data.$.ctrlKey});a.on("keyup",d);a.on("contextmenu",d)}},open:function(a,e,f,d){this.editor.focus();a=a||CKEDITOR.document.getDocumentElement();this.editor.selectionChange(1);this.show(a,e,f,d)}}})},beforeInit:function(a){var d=a.contextMenu=new CKEDITOR.plugins.contextMenu(a);a.on("contentDom",function(){d.addTarget(a.editable(),!1!==a.config.browserContextMenuOnCtrl)});a.addCommand("contextMenu",{exec:function(){a.contextMenu.open(a.document.getBody())}});a.setKeystroke(CKEDITOR.SHIFT+121,"contextMenu");a.setKeystroke(CKEDITOR.CTRL+CKEDITOR.SHIFT+121,"contextMenu")}});CKEDITOR.plugins.add("resize",{init:function(l){function p(i){var j=n.width,e=n.height,d=j+(i.data.$.screenX-c.x)*("rtl"==q?-1:1);i=e+(i.data.$.screenY-c.y);r&&(j=Math.max(k.resize_minWidth,Math.min(d,k.resize_maxWidth)));f&&(e=Math.max(k.resize_minHeight,Math.min(i,k.resize_maxHeight)));l.resize(r?j:null,e)}function a(){CKEDITOR.document.removeListener("mousemove",p);CKEDITOR.document.removeListener("mouseup",a);l.document&&(l.document.removeListener("mousemove",p),l.document.removeListener("mouseup",a))}var k=l.config,h=l.ui.spaceId("resizer"),q=l.element?l.element.getDirection(1):"ltr";!k.resize_dir&&(k.resize_dir="vertical");void 0===k.resize_maxWidth&&(k.resize_maxWidth=3000);void 0===k.resize_maxHeight&&(k.resize_maxHeight=3000);void 0===k.resize_minWidth&&(k.resize_minWidth=750);void 0===k.resize_minHeight&&(k.resize_minHeight=250);if(!1!==k.resize_enabled){var b=null,c,n,r=("both"==k.resize_dir||"horizontal"==k.resize_dir)&&k.resize_minWidth!=k.resize_maxWidth,f=("both"==k.resize_dir||"vertical"==k.resize_dir)&&k.resize_minHeight!=k.resize_maxHeight,g=CKEDITOR.tools.addFunction(function(d){b||(b=l.getResizable());n={width:b.$.offsetWidth||0,height:b.$.offsetHeight||0};c={x:d.screenX,y:d.screenY};k.resize_minWidth>n.width&&(k.resize_minWidth=n.width);k.resize_minHeight>n.height&&(k.resize_minHeight=n.height);CKEDITOR.document.on("mousemove",p);CKEDITOR.document.on("mouseup",a);l.document&&(l.document.on("mousemove",p),l.document.on("mouseup",a));d.preventDefault&&d.preventDefault()});l.on("destroy",function(){CKEDITOR.tools.removeFunction(g)});l.on("uiSpace",function(d){if("bottom"==d.data.space){var i="";r&&!f&&(i=" cke_resizer_horizontal");!r&&f&&(i=" cke_resizer_vertical");var e='\x3cspan id\x3d"'+h+'" class\x3d"cke_resizer'+i+" cke_resizer_"+q+'" title\x3d"'+CKEDITOR.tools.htmlEncode(l.lang.common.resize)+'" onmousedown\x3d"CKEDITOR.tools.callFunction('+g+', event)"\x3e'+("ltr"==q?"â¢":"â£")+"\x3c/span\x3e";"ltr"==q&&"ltr"==i?d.data.html+=e:d.data.html=e+d.data.html}},l,null,100);l.on("maximize",function(d){l.ui.space("resizer")[d.data==CKEDITOR.TRISTATE_ON?"hide":"show"]()})}}});(function(){var f='\x3ca id\x3d"{id}" class\x3d"cke_button cke_button__{name} cke_button_{state} {cls}"'+(CKEDITOR.env.gecko&&!CKEDITOR.env.hc?"":" href\x3d\"javascript:void('{titleJs}')\"")+' title\x3d"{title}" tabindex\x3d"-1" hidefocus\x3d"true" role\x3d"button" aria-labelledby\x3d"{id}_label" aria-haspopup\x3d"{hasArrow}" aria-disabled\x3d"{ariaDisabled}"';CKEDITOR.env.gecko&&CKEDITOR.env.mac&&(f+=' onkeypress\x3d"return false;"');CKEDITOR.env.gecko&&(f+=' onblur\x3d"this.style.cssText \x3d this.style.cssText;"');var f=f+(' onkeydown\x3d"return CKEDITOR.tools.callFunction({keydownFn},event);" onfocus\x3d"return CKEDITOR.tools.callFunction({focusFn},event);" '+(CKEDITOR.env.ie?'onclick\x3d"return false;" onmouseup':"onclick")+'\x3d"CKEDITOR.tools.callFunction({clickFn},this);return false;"\x3e\x3cspan class\x3d"cke_button_icon cke_button__{iconName}_icon" style\x3d"{style}"'),f=f+'\x3e\x26nbsp;\x3c/span\x3e\x3cspan id\x3d"{id}_label" class\x3d"cke_button_label cke_button__{name}_label" aria-hidden\x3d"false"\x3e{label}\x3c/span\x3e{arrowHtml}\x3c/a\x3e',c=CKEDITOR.addTemplate("buttonArrow",'\x3cspan class\x3d"cke_button_arrow"\x3e'+(CKEDITOR.env.hc?"\x26#9660;":"")+"\x3c/span\x3e"),e=CKEDITOR.addTemplate("button",f);CKEDITOR.plugins.add("button",{beforeInit:function(a){a.ui.addHandler(CKEDITOR.UI_BUTTON,CKEDITOR.ui.button.handler)}});CKEDITOR.UI_BUTTON="button";CKEDITOR.ui.button=function(a){CKEDITOR.tools.extend(this,a,{title:a.label,click:a.click||function(b){b.execCommand(a.command)}});this._={}};CKEDITOR.ui.button.handler={create:function(a){return new CKEDITOR.ui.button(a)}};CKEDITOR.ui.button.prototype={render:function(g,k){function p(){var i=g.mode;i&&(i=this.modes[i]?void 0!==F[i]?F[i]:CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,i=g.readOnly&&!this.readOnly?CKEDITOR.TRISTATE_DISABLED:i,this.setState(i),this.refresh&&this.refresh())}var b=CKEDITOR.env,h=this._.id=CKEDITOR.tools.getNextId(),u="",v=this.command,l;this._.editor=g;var q={id:h,button:this,editor:g,focus:function(){CKEDITOR.document.getById(h).focus()},execute:function(){this.button.click(g)},attach:function(i){this.button.attach(i)}},a=CKEDITOR.tools.addFunction(function(i){if(q.onkey){return i=new CKEDITOR.dom.event(i),!1!==q.onkey(q,i.getKeystroke())}}),d=CKEDITOR.tools.addFunction(function(i){var j;q.onfocus&&(j=!1!==q.onfocus(q,new CKEDITOR.dom.event(i)));return j}),m=0;q.clickFn=l=CKEDITOR.tools.addFunction(function(){m&&(g.unlockSelection(1),m=0);q.execute();b.iOS&&g.focus()});if(this.modes){var F={};g.on("beforeModeUnload",function(){g.mode&&this._.state!=CKEDITOR.TRISTATE_DISABLED&&(F[g.mode]=this._.state)},this);g.on("activeFilterChange",p,this);g.on("mode",p,this);!this.readOnly&&g.on("readOnly",p,this)}else{v&&(v=g.getCommand(v))&&(v.on("state",function(){this.setState(v.state)},this),u+=v.state==CKEDITOR.TRISTATE_ON?"on":v.state==CKEDITOR.TRISTATE_DISABLED?"disabled":"off")}if(this.directional){g.on("contentDirChanged",function(o){var i=CKEDITOR.document.getById(this._.id),j=i.getFirst();o=o.data;o!=g.lang.dir?i.addClass("cke_"+o):i.removeClass("cke_ltr").removeClass("cke_rtl");j.setAttribute("style",CKEDITOR.skin.getIconStyle(E,"rtl"==o,this.icon,this.iconOffset))},this)}v||(u+="off");var n=this.name||this.command,E=n;this.icon&&!/\./.test(this.icon)&&(E=this.icon,this.icon=null);u={id:h,name:n,iconName:E,label:this.label,cls:this.className||"",state:u,ariaDisabled:"disabled"==u?"true":"false",title:this.title,titleJs:b.gecko&&!b.hc?"":(this.title||"").replace("'",""),hasArrow:this.hasArrow?"true":"false",keydownFn:a,focusFn:d,clickFn:l,style:CKEDITOR.skin.getIconStyle(E,"rtl"==g.lang.dir,this.icon,this.iconOffset),arrowHtml:this.hasArrow?c.output():""};e.output(u,k);if(this.onRender){this.onRender()}return q},setState:function(a){if(this._.state==a){return !1}this._.state=a;var b=CKEDITOR.document.getById(this._.id);return b?(b.setState(a,"cke_button"),a==CKEDITOR.TRISTATE_DISABLED?b.setAttribute("aria-disabled",!0):b.removeAttribute("aria-disabled"),this.hasArrow?(a=a==CKEDITOR.TRISTATE_ON?this._.editor.lang.button.selectedLabel.replace(/%1/g,this.label):this.label,CKEDITOR.document.getById(this._.id+"_label").setText(a)):a==CKEDITOR.TRISTATE_ON?b.setAttribute("aria-pressed",!0):b.removeAttribute("aria-pressed"),!0):!1},getState:function(){return this._.state},toFeature:function(a){if(this._.feature){return this._.feature}var b=this;this.allowedContent||this.requiredContent||!this.command||(b=a.getCommand(this.command)||b);return this._.feature=b}};CKEDITOR.ui.prototype.addButton=function(a,b){this.add(a,CKEDITOR.UI_BUTTON,b)}})();(function(){function g(o){function a(){for(var u=c(),j=CKEDITOR.tools.clone(o.config.toolbarGroups)||f(o),l=0;l<j.length;l++){var n=j[l];if("/"!=n){"string"==typeof n&&(n=j[l]={name:n});var k,i=n.groups;if(i){for(var m=0;m<i.length;m++){k=i[m],(k=u[k])&&q(n,k)}}(k=u[n.name])&&q(n,k)}}return j}function c(){var j={},k,i,l;for(k in o.ui.items){i=o.ui.items[k],l=i.toolbar||"others",l=l.split(","),i=l[0],l=parseInt(l[1]||-1,10),j[i]||(j[i]=[]),j[i].push({name:k,order:l})}for(i in j){j[i]=j[i].sort(function(n,m){return n.order==m.order?0:0>m.order?-1:0>n.order?1:n.order<m.order?-1:1})}return j}function q(k,i){if(i.length){k.items?k.items.push(o.ui.create("-")):k.items=[];for(var j;j=i.shift();){j="string"==typeof j?j:j.name,p&&-1!=CKEDITOR.tools.indexOf(p,j)||(j=o.ui.create(j))&&o.addFeature(j)&&k.items.push(j)}}}function d(j){var m=[],k,i,l;for(k=0;k<j.length;++k){i=j[k],l={},"/"==i?m.push(i):CKEDITOR.tools.isArray(i)?(q(l,CKEDITOR.tools.clone(i)),m.push(l)):i.items&&(q(l,CKEDITOR.tools.clone(i.items)),l.name=i.name,m.push(l))}return m}var p=o.config.removeButtons,p=p&&p.split(","),b=o.config.toolbar;"string"==typeof b&&(b=o.config["toolbar_"+b]);return o.toolbar=b?d(b):a()}function f(a){return a._.toolbarGroups||(a._.toolbarGroups=[{name:"document",groups:["mode","document","doctools"]},{name:"clipboard",groups:["clipboard","undo"]},{name:"editing",groups:["find","selection","spellchecker"]},{name:"forms"},"/",{name:"basicstyles",groups:["basicstyles","cleanup"]},{name:"paragraph",groups:["list","indent","blocks","align","bidi"]},{name:"links"},{name:"insert"},"/",{name:"styles"},{name:"colors"},{name:"tools"},{name:"others"},{name:"about"}])}var h=function(){this.toolbars=[];this.focusCommandExecuted=!1};h.prototype.focus=function(){for(var d=0,b;b=this.toolbars[d++];){for(var c=0,a;a=b.items[c++];){if(a.focus){a.focus();return}}}};var e={modes:{wysiwyg:1,source:1},readOnly:1,exec:function(a){a.toolbox&&(a.toolbox.focusCommandExecuted=!0,CKEDITOR.env.ie||CKEDITOR.env.air?setTimeout(function(){a.toolbox.focus()},100):a.toolbox.focus())}};CKEDITOR.plugins.add("toolbar",{requires:"button",init:function(c){var a,b=function(r,o){var q,d="rtl"==c.lang.dir,p=c.config.toolbarGroupCycling,k=d?37:39,d=d?39:37,p=void 0===p||p;switch(o){case 9:case CKEDITOR.SHIFT+9:for(;!q||!q.items.length;){if(q=9==o?(q?q.next:r.toolbar.next)||c.toolbox.toolbars[0]:(q?q.previous:r.toolbar.previous)||c.toolbox.toolbars[c.toolbox.toolbars.length-1],q.items.length){for(r=q.items[a?q.items.length-1:0];r&&!r.focus;){(r=a?r.previous:r.next)||(q=0)}}}r&&r.focus();return !1;case k:q=r;do{q=q.next,!q&&p&&(q=r.toolbar.items[0])}while(q&&!q.focus);q?q.focus():b(r,9);return !1;case 40:return r.button&&r.button.hasArrow?(c.once("panelShow",function(i){i.data._.panel._.currentBlock.onKeyDown(40)}),r.execute()):b(r,40==o?k:d),!1;case d:case 38:q=r;do{q=q.previous,!q&&p&&(q=r.toolbar.items[r.toolbar.items.length-1])}while(q&&!q.focus);q?q.focus():(a=1,b(r,CKEDITOR.SHIFT+9),a=0);return !1;case 27:return c.focus(),!1;case 13:case 32:return r.execute(),!1}return !0};c.on("uiSpace",function(k){if(k.data.space==c.config.toolbarLocation){k.removeListener();c.toolbox=new h;var l=CKEDITOR.tools.getNextId(),d=['\x3cspan id\x3d"',l,'" class\x3d"cke_voice_label"\x3e',c.lang.toolbar.toolbars,"\x3c/span\x3e",'\x3cspan id\x3d"'+c.ui.spaceId("toolbox")+'" class\x3d"cke_toolbox" role\x3d"group" aria-labelledby\x3d"',l,'" onmousedown\x3d"return false;"\x3e'],l=!1!==c.config.toolbarStartupExpanded,m,q;c.config.toolbarCanCollapse&&c.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE&&d.push('\x3cspan class\x3d"cke_toolbox_main"'+(l?"\x3e":' style\x3d"display:none"\x3e'));for(var A=c.toolbox.toolbars,n=g(c),r=0;r<n.length;r++){var t,u=0,O,v=n[r],P;if(v){if(m&&(d.push("\x3c/span\x3e"),q=m=0),"/"===v){d.push('\x3cspan class\x3d"cke_toolbar_break"\x3e\x3c/span\x3e')}else{P=v.items||v;for(var Q=0;Q<P.length;Q++){var p=P[Q],z;if(p){var R=function(i){i=i.render(c,d);x=u.items.push(i)-1;0<x&&(i.previous=u.items[x-1],i.previous.next=i);i.toolbar=u;i.onkey=b;i.onfocus=function(){c.toolbox.focusCommandExecuted||c.focus()}};if(p.type==CKEDITOR.UI_SEPARATOR){q=m&&p}else{z=!1!==p.canGroup;if(!u){t=CKEDITOR.tools.getNextId();u={id:t,items:[]};O=v.name&&(c.lang.toolbar.toolbarGroups[v.name]||v.name);d.push('\x3cspan id\x3d"',t,'" class\x3d"cke_toolbar"',O?' aria-labelledby\x3d"'+t+'_label"':"",' role\x3d"toolbar"\x3e');O&&d.push('\x3cspan id\x3d"',t,'_label" class\x3d"cke_voice_label"\x3e',O,"\x3c/span\x3e");d.push('\x3cspan class\x3d"cke_toolbar_start"\x3e\x3c/span\x3e');var x=A.push(u)-1;0<x&&(u.previous=A[x-1],u.previous.next=u)}z?m||(d.push('\x3cspan class\x3d"cke_toolgroup" role\x3d"presentation"\x3e'),m=1):m&&(d.push("\x3c/span\x3e"),m=0);q&&(R(q),q=0);R(p)}}}m&&(d.push("\x3c/span\x3e"),q=m=0);u&&d.push('\x3cspan class\x3d"cke_toolbar_end"\x3e\x3c/span\x3e\x3c/span\x3e')}}}c.config.toolbarCanCollapse&&d.push("\x3c/span\x3e");if(c.config.toolbarCanCollapse&&c.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE){var w=CKEDITOR.tools.addFunction(function(){c.execCommand("toolbarCollapse")});c.on("destroy",function(){CKEDITOR.tools.removeFunction(w)});c.addCommand("toolbarCollapse",{readOnly:1,exec:function(o){var j=o.ui.space("toolbar_collapser"),s=j.getPrevious(),B=o.ui.space("contents"),y=s.getParent(),C=parseInt(B.$.style.height,10),i=y.$.offsetHeight,D=j.hasClass("cke_toolbox_collapser_min");D?(s.show(),j.removeClass("cke_toolbox_collapser_min"),j.setAttribute("title",o.lang.toolbar.toolbarCollapse)):(s.hide(),j.addClass("cke_toolbox_collapser_min"),j.setAttribute("title",o.lang.toolbar.toolbarExpand));j.getFirst().setText(D?"â²":"â");B.setStyle("height",C-(y.$.offsetHeight-i)+"px");o.fire("resize",{outerHeight:o.container.$.offsetHeight,contentsHeight:B.$.offsetHeight,outerWidth:o.container.$.offsetWidth})},modes:{wysiwyg:1,source:1}});c.setKeystroke(CKEDITOR.ALT+(CKEDITOR.env.ie||CKEDITOR.env.webkit?189:109),"toolbarCollapse");d.push('\x3ca title\x3d"'+(l?c.lang.toolbar.toolbarCollapse:c.lang.toolbar.toolbarExpand)+'" id\x3d"'+c.ui.spaceId("toolbar_collapser")+'" tabIndex\x3d"-1" class\x3d"cke_toolbox_collapser');l||d.push(" cke_toolbox_collapser_min");d.push('" onclick\x3d"CKEDITOR.tools.callFunction('+w+')"\x3e','\x3cspan class\x3d"cke_arrow"\x3e\x26#9650;\x3c/span\x3e',"\x3c/a\x3e")}d.push("\x3c/span\x3e");k.data.html+=d.join("")}});c.on("destroy",function(){if(this.toolbox){var p,d=0,q,n,o;for(p=this.toolbox.toolbars;d<p.length;d++){for(n=p[d].items,q=0;q<n.length;q++){o=n[q],o.clickFn&&CKEDITOR.tools.removeFunction(o.clickFn),o.keyDownFn&&CKEDITOR.tools.removeFunction(o.keyDownFn)}}}});c.on("uiReady",function(){var d=c.ui.space("toolbox");d&&c.focusManager.add(d,1)});c.addCommand("toolbarFocus",e);c.setKeystroke(CKEDITOR.ALT+121,"toolbarFocus");c.ui.add("-",CKEDITOR.UI_SEPARATOR,{});c.ui.addHandler(CKEDITOR.UI_SEPARATOR,{create:function(){return{render:function(j,d){d.push('\x3cspan class\x3d"cke_toolbar_separator" role\x3d"separator"\x3e\x3c/span\x3e');return{}}}}})}});CKEDITOR.ui.prototype.addToolbarGroup=function(m,b,c){var a=f(this.editor),d=0===b,n={name:m};if(c){if(c=CKEDITOR.tools.search(a,function(i){return i.name==c})){!c.groups&&(c.groups=[]);if(b&&(b=CKEDITOR.tools.indexOf(c.groups,b),0<=b)){c.groups.splice(b+1,0,m);return}d?c.groups.splice(0,0,m):c.groups.push(m);return}b=null}b&&(b=CKEDITOR.tools.indexOf(a,function(i){return i.name==b}));d?a.splice(0,0,m):"number"==typeof b?a.splice(b+1,0,n):a.push(m)}})();CKEDITOR.UI_SEPARATOR="separator";CKEDITOR.config.toolbarLocation="top";(function(){function d(q,a){function c(i){i=b.list[i];if(i.equals(q.editable())||"true"==i.getAttribute("contenteditable")){var j=q.createRange();j.selectNodeContents(i);j.select()}else{q.getSelection().selectElement(i)}q.focus()}function e(){k&&k.setHtml('\x3cspan class\x3d"cke_path_empty"\x3e\x26nbsp;\x3c/span\x3e');delete b.list}var l=q.ui.spaceId("path"),k,b=q._.elementsPath,m=b.idBase;a.html+='\x3cspan id\x3d"'+l+'_label" class\x3d"cke_voice_label"\x3e'+q.lang.elementspath.eleLabel+'\x3c/span\x3e\x3cspan id\x3d"'+l+'" class\x3d"cke_path" role\x3d"group" aria-labelledby\x3d"'+l+'_label"\x3e\x3cspan class\x3d"cke_path_empty"\x3e\x26nbsp;\x3c/span\x3e\x3c/span\x3e';q.on("uiReady",function(){var i=q.ui.space("path");i&&q.focusManager.add(i,1)});b.onClick=c;var n=CKEDITOR.tools.addFunction(c),p=CKEDITOR.tools.addFunction(function(i,j){var o=b.idBase,r;j=new CKEDITOR.dom.event(j);r="rtl"==q.lang.dir;switch(j.getKeystroke()){case r?39:37:case 9:return(r=CKEDITOR.document.getById(o+(i+1)))||(r=CKEDITOR.document.getById(o+"0")),r.focus(),!1;case r?37:39:case CKEDITOR.SHIFT+9:return(r=CKEDITOR.document.getById(o+(i-1)))||(r=CKEDITOR.document.getById(o+(b.list.length-1))),r.focus(),!1;case 27:return q.focus(),!1;case 13:case 32:return c(i),!1}return !0});q.on("selectionChange",function(){for(var D=[],F=b.list=[],H=[],s=b.filters,E=!0,r=q.elementPath().elements,G,o=r.length;o--;){var j=r[o],u=0;G=j.data("cke-display-name")?j.data("cke-display-name"):j.data("cke-real-element-type")?j.data("cke-real-element-type"):j.getName();(E=j.hasAttribute("contenteditable")?"true"==j.getAttribute("contenteditable"):E)||j.hasAttribute("contenteditable")||(u=1);for(var i=0;i<s.length;i++){var t=s[i](j,G);if(!1===t){u=1;break}G=t||G}u||(F.unshift(j),H.unshift(G))}F=F.length;for(s=0;s<F;s++){G=H[s],E=q.lang.elementspath.eleTitle.replace(/%1/,G),G=f.output({id:m+s,label:E,text:G,jsTitle:"javascript:void('"+G+"')",index:s,keyDownFn:p,clickFn:n}),D.unshift(G)}k||(k=CKEDITOR.document.getById(l));H=k;H.setHtml(D.join("")+'\x3cspan class\x3d"cke_path_empty"\x3e\x26nbsp;\x3c/span\x3e');q.fire("elementsPathUpdate",{space:H})});q.on("readOnly",e);q.on("contentDomUnload",e);q.addCommand("elementsPathFocus",g.toolbarFocus);q.setKeystroke(CKEDITOR.ALT+122,"elementsPathFocus")}var g={toolbarFocus:{editorFocus:!1,readOnly:1,exec:function(a){(a=CKEDITOR.document.getById(a._.elementsPath.idBase+"0"))&&a.focus(CKEDITOR.env.ie||CKEDITOR.env.air)}}},h="";CKEDITOR.env.gecko&&CKEDITOR.env.mac&&(h+=' onkeypress\x3d"return false;"');CKEDITOR.env.gecko&&(h+=' onblur\x3d"this.style.cssText \x3d this.style.cssText;"');var f=CKEDITOR.addTemplate("pathItem",'\x3ca id\x3d"{id}" href\x3d"{jsTitle}" tabindex\x3d"-1" class\x3d"cke_path_item" title\x3d"{label}"'+h+' hidefocus\x3d"true"  onkeydown\x3d"return CKEDITOR.tools.callFunction({keyDownFn},{index}, event );" onclick\x3d"CKEDITOR.tools.callFunction({clickFn},{index}); return false;" role\x3d"button" aria-label\x3d"{label}"\x3e{text}\x3c/a\x3e');CKEDITOR.plugins.add("elementspath",{init:function(a){a._.elementsPath={idBase:"cke_elementspath_"+CKEDITOR.tools.getNextNumber()+"_",filters:[]};a.on("uiSpace",function(b){"bottom"==b.data.space&&d(a,b.data)})}})})();(function(){function r(c,a,b){b=c.config.forceEnterMode||b;"wysiwyg"==c.mode&&(a||(a=c.activeEnterMode),c.elementPath().isContextFor("p")||(a=CKEDITOR.ENTER_BR,b=1),c.fire("saveSnapshot"),a==CKEDITOR.ENTER_BR?j(c,a,null,b):k(c,a,null,b),c.fire("saveSnapshot"))}function l(b){b=b.getSelection().getRanges(!0);for(var a=b.length-1;0<a;a--){b[a].deleteContents()}return b[0]}function o(b){var a=b.startContainer.getAscendant(function(c){return c.type==CKEDITOR.NODE_ELEMENT&&"true"==c.getAttribute("contenteditable")},!0);if(b.root.equals(a)){return b}a=new CKEDITOR.dom.range(a);a.moveToRange(b);return a}CKEDITOR.plugins.add("enterkey",{init:function(a){a.addCommand("enter",{modes:{wysiwyg:1},editorFocus:!1,exec:function(b){r(b)}});a.addCommand("shiftEnter",{modes:{wysiwyg:1},editorFocus:!1,exec:function(b){r(b,b.activeShiftEnterMode,1)}});a.setKeystroke([[13,"enter"],[CKEDITOR.SHIFT+13,"shiftEnter"]])}});var p=CKEDITOR.dom.walker.whitespaces(),q=CKEDITOR.dom.walker.bookmark();CKEDITOR.plugins.enterkey={enterBlock:function(a,c,K,i){if(K=K||l(a)){K=o(K);var g=K.document,F=K.checkStartOfBlock(),H=K.checkEndOfBlock(),G=a.elementPath(K.startContainer),b=G.block,I=c==CKEDITOR.ENTER_DIV?"div":"p",e;if(F&&H){if(b&&(b.is("li")||b.getParent().is("li"))){b.is("li")||(b=b.getParent());K=b.getParent();e=K.getParent();i=!b.hasPrevious();var J=!b.hasNext(),I=a.getSelection(),h=I.createBookmarks(),F=b.getDirection(1),H=b.getAttribute("class"),f=b.getAttribute("style"),d=e.getDirection(1)!=F;a=a.enterMode!=CKEDITOR.ENTER_BR||d||f||H;if(e.is("li")){i||J?(i&&J&&K.remove(),b[J?"insertAfter":"insertBefore"](e)):b.breakParent(e)}else{if(a){if(G.block.is("li")?(e=g.createElement(c==CKEDITOR.ENTER_P?"p":"div"),d&&e.setAttribute("dir",F),f&&e.setAttribute("style",f),H&&e.setAttribute("class",H),b.moveChildren(e)):e=G.block,i||J){e[i?"insertBefore":"insertAfter"](K)}else{b.breakParent(K),e.insertAfter(K)}}else{if(b.appendBogus(!0),i||J){for(;g=b[i?"getFirst":"getLast"]();){g[i?"insertBefore":"insertAfter"](K)}}else{for(b.breakParent(K);g=b.getLast();){g.insertAfter(K)}}}b.remove()}I.selectBookmarks(h);return}if(b&&b.getParent().is("blockquote")){b.breakParent(b.getParent());b.getPrevious().getFirst(CKEDITOR.dom.walker.invisible(1))||b.getPrevious().remove();b.getNext().getFirst(CKEDITOR.dom.walker.invisible(1))||b.getNext().remove();K.moveToElementEditStart(b);K.select();return}}else{if(b&&b.is("pre")&&!H){j(a,c,K,i);return}}if(F=K.splitBlock(I)){c=F.previousBlock;b=F.nextBlock;G=F.wasStartOfBlock;a=F.wasEndOfBlock;b?(h=b.getParent(),h.is("li")&&(b.breakParent(h),b.move(b.getNext(),1))):c&&(h=c.getParent())&&h.is("li")&&(c.breakParent(h),h=c.getNext(),K.moveToElementEditStart(h),c.move(c.getPrevious()));if(G||a){if(c){if(c.is("li")||!m.test(c.getName())&&!c.is("pre")){e=c.clone()}}else{b&&(e=b.clone())}e?i&&!e.is("li")&&e.renameNode(I):h&&h.is("li")?e=h:(e=g.createElement(I),c&&(J=c.getDirection())&&e.setAttribute("dir",J));if(g=F.elementPath){for(i=0,I=g.elements.length;i<I;i++){h=g.elements[i];if(h.equals(g.block)||h.equals(g.blockLimit)){break}CKEDITOR.dtd.$removeEmpty[h.getName()]&&(h=h.clone(),e.moveChildren(h),e.append(h))}}e.appendBogus();e.getParent()||K.insertNode(e);e.is("li")&&e.removeAttribute("value");!CKEDITOR.env.ie||!G||a&&c.getChildCount()||(K.moveToElementEditStart(a?c:e),K.select());K.moveToElementEditStart(G&&!a?b:e)}else{b.is("li")&&(e=K.clone(),e.selectNodeContents(b),e=new CKEDITOR.dom.walker(e),e.evaluator=function(s){return !(q(s)||p(s)||s.type==CKEDITOR.NODE_ELEMENT&&s.getName() in CKEDITOR.dtd.$inline&&!(s.getName() in CKEDITOR.dtd.$empty))},(h=e.next())&&h.type==CKEDITOR.NODE_ELEMENT&&h.is("ul","ol")&&(CKEDITOR.env.needsBrFiller?g.createElement("br"):g.createText("Â ")).insertBefore(h)),b&&K.moveToElementEditStart(b)}K.select();K.scrollIntoView()}}},enterBr:function(h,a,g,c){if(g=g||l(h)){var b=g.document,d=g.checkEndOfBlock(),f=new CKEDITOR.dom.elementPath(h.getSelection().getStartElement()),e=f.block,i=e&&f.block.getName();c||"li"!=i?(!c&&d&&m.test(i)?(d=e.getDirection())?(b=b.createElement("div"),b.setAttribute("dir",d),b.insertAfter(e),g.setStart(b,0)):(b.createElement("br").insertAfter(e),CKEDITOR.env.gecko&&b.createText("").insertAfter(e),g.setStartAt(e.getNext(),CKEDITOR.env.ie?CKEDITOR.POSITION_BEFORE_START:CKEDITOR.POSITION_AFTER_START)):(h="pre"==i&&CKEDITOR.env.ie&&8>CKEDITOR.env.version?b.createText("\r"):b.createElement("br"),g.deleteContents(),g.insertNode(h),CKEDITOR.env.needsBrFiller?(b.createText("").insertAfter(h),d&&(e||f.blockLimit).appendBogus(),h.getNext().$.nodeValue="",g.setStartAt(h.getNext(),CKEDITOR.POSITION_AFTER_START)):g.setStartAt(h,CKEDITOR.POSITION_AFTER_END)),g.collapse(!0),g.select(),g.scrollIntoView()):k(h,a,g,c)}}};var n=CKEDITOR.plugins.enterkey,j=n.enterBr,k=n.enterBlock,m=/^h[1-6]$/})();(function(){function b(f,a){var c={},g=[],q={nbsp:"Â ",shy:"",gt:"\x3e",lt:"\x3c",amp:"\x26",apos:"'",quot:'"'};f=f.replace(/\b(nbsp|shy|gt|lt|amp|apos|quot)(?:,|$)/g,function(k,j){var i=a?"\x26"+j+";":q[j];c[i]=a?q[j]:"\x26"+j+";";g.push(i);return""});if(!a&&f){f=f.split(",");var e=document.createElement("div"),h;e.innerHTML="\x26"+f.join(";\x26")+";";h=e.innerHTML;e=null;for(e=0;e<h.length;e++){var d=h.charAt(e);c[d]="\x26"+f[e]+";";g.push(d)}}c.regex=g.join(a?"|":"");return c}CKEDITOR.plugins.add("entities",{afterInit:function(c){function g(i){return l[i]}function h(i){return"force"!=d.entities_processNumerical&&a[i]?a[i]:"\x26#"+i.charCodeAt(0)+";"}var d=c.config;if(c=(c=c.dataProcessor)&&c.htmlFilter){var f=[];!1!==d.basicEntities&&f.push("nbsp,gt,lt,amp");d.entities&&(f.length&&f.push("quot,iexcl,cent,pound,curren,yen,brvbar,sect,uml,copy,ordf,laquo,not,shy,reg,macr,deg,plusmn,sup2,sup3,acute,micro,para,middot,cedil,sup1,ordm,raquo,frac14,frac12,frac34,iquest,times,divide,fnof,bull,hellip,prime,Prime,oline,frasl,weierp,image,real,trade,alefsym,larr,uarr,rarr,darr,harr,crarr,lArr,uArr,rArr,dArr,hArr,forall,part,exist,empty,nabla,isin,notin,ni,prod,sum,minus,lowast,radic,prop,infin,ang,and,or,cap,cup,int,there4,sim,cong,asymp,ne,equiv,le,ge,sub,sup,nsub,sube,supe,oplus,otimes,perp,sdot,lceil,rceil,lfloor,rfloor,lang,rang,loz,spades,clubs,hearts,diams,circ,tilde,ensp,emsp,thinsp,zwnj,zwj,lrm,rlm,ndash,mdash,lsquo,rsquo,sbquo,ldquo,rdquo,bdquo,dagger,Dagger,permil,lsaquo,rsaquo,euro"),d.entities_latin&&f.push("Agrave,Aacute,Acirc,Atilde,Auml,Aring,AElig,Ccedil,Egrave,Eacute,Ecirc,Euml,Igrave,Iacute,Icirc,Iuml,ETH,Ntilde,Ograve,Oacute,Ocirc,Otilde,Ouml,Oslash,Ugrave,Uacute,Ucirc,Uuml,Yacute,THORN,szlig,agrave,aacute,acirc,atilde,auml,aring,aelig,ccedil,egrave,eacute,ecirc,euml,igrave,iacute,icirc,iuml,eth,ntilde,ograve,oacute,ocirc,otilde,ouml,oslash,ugrave,uacute,ucirc,uuml,yacute,thorn,yuml,OElig,oelig,Scaron,scaron,Yuml"),d.entities_greek&&f.push("Alpha,Beta,Gamma,Delta,Epsilon,Zeta,Eta,Theta,Iota,Kappa,Lambda,Mu,Nu,Xi,Omicron,Pi,Rho,Sigma,Tau,Upsilon,Phi,Chi,Psi,Omega,alpha,beta,gamma,delta,epsilon,zeta,eta,theta,iota,kappa,lambda,mu,nu,xi,omicron,pi,rho,sigmaf,sigma,tau,upsilon,phi,chi,psi,omega,thetasym,upsih,piv"),d.entities_additional&&f.push(d.entities_additional));var a=b(f.join(",")),e=a.regex?"["+a.regex+"]":"a^";delete a.regex;d.entities&&d.entities_processNumerical&&(e="[^ -~]|"+e);var e=new RegExp(e,"g"),l=b("nbsp,gt,lt,amp,shy",!0),s=new RegExp(l.regex,"g");c.addRules({text:function(i){return i.replace(s,g).replace(e,h)}},{applyToAll:!0,excludeNestedEditable:!0})}}})})();CKEDITOR.config.basicEntities=!0;CKEDITOR.config.entities=!0;CKEDITOR.config.entities_latin=!0;CKEDITOR.config.entities_greek=!0;CKEDITOR.config.entities_additional="#39";CKEDITOR.plugins.add("popup");CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{popup:function(h,d,e,g){d=d||"80%";e=e||"70%";"string"==typeof d&&1<d.length&&"%"==d.substr(d.length-1,1)&&(d=parseInt(window.screen.width*parseInt(d,10)/100,10));"string"==typeof e&&1<e.length&&"%"==e.substr(e.length-1,1)&&(e=parseInt(window.screen.height*parseInt(e,10)/100,10));640>d&&(d=640);420>e&&(e=420);var a=parseInt((window.screen.height-e)/2,10),b=parseInt((window.screen.width-d)/2,10);g=(g||"location\x3dno,menubar\x3dno,toolbar\x3dno,dependent\x3dyes,minimizable\x3dno,modal\x3dyes,alwaysRaised\x3dyes,resizable\x3dyes,scrollbars\x3dyes")+",width\x3d"+d+",height\x3d"+e+",top\x3d"+a+",left\x3d"+b;var f=window.open("",null,g,!0);if(!f){return !1}try{-1==navigator.userAgent.toLowerCase().indexOf(" chrome/")&&(f.moveTo(b,a),f.resizeTo(d,e)),f.focus(),f.location.href=h}catch(c){window.open(h,null,g,!0)}return !0}});(function(){function n(c,a){var b=[];if(a){for(var d in a){b.push(d+"\x3d"+encodeURIComponent(a[d]))}}else{return c}return c+(-1!=c.indexOf("?")?"\x26":"?")+b.join("\x26")}function p(a){a+="";return a.charAt(0).toUpperCase()+a.substr(1)}function h(){var c=this.getDialog(),a=c.getParentEditor();a._.filebrowserSe=this;var b=a.config["filebrowser"+p(c.getName())+"WindowWidth"]||a.config.filebrowserWindowWidth||"80%",c=a.config["filebrowser"+p(c.getName())+"WindowHeight"]||a.config.filebrowserWindowHeight||"70%",d=this.filebrowser.params||{};d.CKEditor=a.name;d.CKEditorFuncNum=a._.filebrowserFn;d.langCode||(d.langCode=a.langCode);d=n(this.filebrowser.url,d);a.popup(d,b,c,a.config.filebrowserWindowFeatures||a.config.fileBrowserWindowFeatures)}function k(){var a=this.getDialog();a.getParentEditor()._.filebrowserSe=this;return a.getContentElement(this["for"][0],this["for"][1]).getInputElement().$.value&&a.getContentElement(this["for"][0],this["for"][1]).getAction()?!0:!1}function l(c,a,b){var d=b.params||{};d.CKEditor=c.name;d.CKEditorFuncNum=c._.filebrowserFn;d.langCode||(d.langCode=c.langCode);a.action=n(b.url,d);a.filebrowser=b}function g(b,d,e,c){if(c&&c.length){for(var f,j=c.length;j--;){if(f=c[j],"hbox"!=f.type&&"vbox"!=f.type&&"fieldset"!=f.type||g(b,d,e,f.children),f.filebrowser){if("string"==typeof f.filebrowser&&(f.filebrowser={action:"fileButton"==f.type?"QuickUpload":"Browse",target:f.filebrowser}),"Browse"==f.filebrowser.action){var i=f.filebrowser.url;void 0===i&&(i=b.config["filebrowser"+p(d)+"BrowseUrl"],void 0===i&&(i=b.config.filebrowserBrowseUrl));i&&(f.onClick=h,f.filebrowser.url=i,f.hidden=!1)}else{if("QuickUpload"==f.filebrowser.action&&f["for"]&&(i=f.filebrowser.url,void 0===i&&(i=b.config["filebrowser"+p(d)+"UploadUrl"],void 0===i&&(i=b.config.filebrowserUploadUrl)),i)){var a=f.onClick;f.onClick=function(q){var r=q.sender;if(a&&!1===a.call(r,q)){return !1}if(k.call(r,q)){q=r.getDialog().getContentElement(this["for"][0],this["for"][1]).getInputElement();if(r=new CKEDITOR.dom.element(q.$.form)){(q=r.$.elements.ckCsrfToken)?q=new CKEDITOR.dom.element(q):(q=new CKEDITOR.dom.element("input"),q.setAttributes({name:"ckCsrfToken",type:"hidden"}),r.append(q)),q.setAttribute("value",CKEDITOR.tools.getCsrfToken())}return !0}return !1};f.filebrowser.url=i;f.hidden=!1;l(b,e.getContents(f["for"][0]).get(f["for"][1]),f.filebrowser)}}}}}}function o(c,a,b){if(-1!==b.indexOf(";")){b=b.split(";");for(var d=0;d<b.length;d++){if(o(c,a,b[d])){return !0}}return !1}return(c=c.getContents(a).get(b).filebrowser)&&c.url}function m(d,a){var b=this._.filebrowserSe.getDialog(),e=this._.filebrowserSe["for"],c=this._.filebrowserSe.filebrowser.onSelect;e&&b.getContentElement(e[0],e[1]).reset();if("function"!=typeof a||!1!==a.call(this._.filebrowserSe)){if(!c||!1!==c.call(this._.filebrowserSe,d,a)){if("string"==typeof a&&a&&alert(a),d&&(e=this._.filebrowserSe,b=e.getDialog(),e=e.filebrowser.target||null)){if(e=e.split(":"),c=b.getContentElement(e[0],e[1])){c.setValue(d),b.selectPage(e[0])}}}}}CKEDITOR.plugins.add("filebrowser",{requires:"popup",init:function(a){a._.filebrowserFn=CKEDITOR.tools.addFunction(m,a);a.on("destroy",function(){CKEDITOR.tools.removeFunction(this._.filebrowserFn)})}});CKEDITOR.on("dialogDefinition",function(c){if(c.editor.plugins.filebrowser){for(var a=c.data.definition,b,d=0;d<a.contents.length;++d){if(b=a.contents[d]){g(c.editor,c.data.name,a,b.elements),b.hidden&&b.filebrowser&&(b.hidden=!o(a,b.id,b.filebrowser))}}}})})();(function(){function d(l){var o=l.config,q=l.fire("uiSpace",{space:"top",html:""}).html,b=function(){function m(s,t,w){p.setStyle(t,e(w));p.setStyle("position",s)}function i(s){var t=u.getDocumentPosition();switch(s){case"top":m("absolute","top",t.y-j-n);break;case"pin":m("fixed","top",g);break;case"bottom":m("absolute","top",t.y+(h.height||h.bottom-h.top)+n)}v=s}var v,u,G,h,r,j,I,H=o.floatSpaceDockedOffsetX||0,n=o.floatSpaceDockedOffsetY||0,x=o.floatSpacePinnedOffsetX||0,g=o.floatSpacePinnedOffsetY||0;return function(s){if(u=l.editable()){var t=s&&"focus"==s.name;t&&p.show();l.fire("floatingSpaceLayout",{show:t});p.removeStyle("left");p.removeStyle("right");G=p.getClientRect();h=u.getClientRect();r=f.getViewPaneSize();j=G.height;I="pageXOffset" in f.$?f.$.pageXOffset:CKEDITOR.document.$.documentElement.scrollLeft;v?(j+n<=h.top?i("top"):j+n>r.height-h.bottom?i("pin"):i("bottom"),s=r.width/2,s=o.floatSpacePreferRight?"right":0<h.left&&h.right<r.width&&h.width>G.width?"rtl"==o.contentsLangDirection?"right":"left":s-h.left>h.right-s?"left":"right",G.width>r.width?(s="left",t=0):(t="left"==s?0<h.left?h.left:0:h.right<r.width?r.width-h.right:0,t+G.width>r.width&&(s="left"==s?"right":"left",t=0)),p.setStyle(s,e(("pin"==v?x:H)+t+("pin"==v?0:"left"==s?I:-I)))):(v="pin",i("pin"),b(s))}}}();if(q){var k=new CKEDITOR.template('\x3cdiv id\x3d"cke_{name}" class\x3d"cke {id} cke_reset_all cke_chrome cke_editor_{name} cke_float cke_{langDir} '+CKEDITOR.env.cssClass+'" dir\x3d"{langDir}" title\x3d"'+(CKEDITOR.env.gecko?" ":"")+'" lang\x3d"{langCode}" role\x3d"application" style\x3d"{style}"'+(l.title?' aria-labelledby\x3d"cke_{name}_arialbl"':" ")+"\x3e"+(l.title?'\x3cspan id\x3d"cke_{name}_arialbl" class\x3d"cke_voice_label"\x3e{voiceLabel}\x3c/span\x3e':" ")+'\x3cdiv class\x3d"cke_inner"\x3e\x3cdiv id\x3d"{topId}" class\x3d"cke_top" role\x3d"presentation"\x3e{content}\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e'),p=CKEDITOR.document.getBody().append(CKEDITOR.dom.element.createFromHtml(k.output({content:q,id:l.id,langDir:l.lang.dir,langCode:l.langCode,name:l.name,style:"display:none;z-index:"+(o.baseFloatZIndex-1),topId:l.ui.spaceId("top"),voiceLabel:l.title}))),c=CKEDITOR.tools.eventsBuffer(500,b),a=CKEDITOR.tools.eventsBuffer(100,b);p.unselectable();p.on("mousedown",function(g){g=g.data;g.getTarget().hasAscendant("a",1)||g.preventDefault()});l.on("focus",function(g){b(g);l.on("change",c.input);f.on("scroll",a.input);f.on("resize",a.input)});l.on("blur",function(){p.hide();l.removeListener("change",c.input);f.removeListener("scroll",a.input);f.removeListener("resize",a.input)});l.on("destroy",function(){f.removeListener("scroll",a.input);f.removeListener("resize",a.input);p.clearCustomData();p.remove()});l.focusManager.hasFocus&&p.show();l.focusManager.add(p,1)}}var f=CKEDITOR.document.getWindow(),e=CKEDITOR.tools.cssLength;CKEDITOR.plugins.add("floatingspace",{init:function(a){a.on("loaded",function(){d(this)},null,null,20)}})})();CKEDITOR.plugins.add("listblock",{requires:"panel",onLoad:function(){var g=CKEDITOR.addTemplate("panel-list",'\x3cul role\x3d"presentation" class\x3d"cke_panel_list"\x3e{items}\x3c/ul\x3e'),h=CKEDITOR.addTemplate("panel-list-item",'\x3cli id\x3d"{id}" class\x3d"cke_panel_listItem" role\x3dpresentation\x3e\x3ca id\x3d"{id}_option" _cke_focus\x3d1 hidefocus\x3dtrue title\x3d"{title}" href\x3d"javascript:void(\'{val}\')"  {onclick}\x3d"CKEDITOR.tools.callFunction({clickFn},\'{val}\'); return false;" role\x3d"option"\x3e{text}\x3c/a\x3e\x3c/li\x3e'),e=CKEDITOR.addTemplate("panel-list-group",'\x3ch1 id\x3d"{id}" class\x3d"cke_panel_grouptitle" role\x3d"presentation" \x3e{label}\x3c/h1\x3e'),f=/\'/g;CKEDITOR.ui.panel.prototype.addListBlock=function(a,b){return this.addBlock(a,new CKEDITOR.ui.listBlock(this.getHolderElement(),b))};CKEDITOR.ui.listBlock=CKEDITOR.tools.createClass({base:CKEDITOR.ui.panel.block,$:function(b,c){c=c||{};var a=c.attributes||(c.attributes={});(this.multiSelect=!!c.multiSelect)&&(a["aria-multiselectable"]=!0);!a.role&&(a.role="listbox");this.base.apply(this,arguments);this.element.setAttribute("role",a.role);a=this.keys;a[40]="next";a[9]="next";a[38]="prev";a[CKEDITOR.SHIFT+9]="prev";a[32]=CKEDITOR.env.ie?"mouseup":"click";CKEDITOR.env.ie&&(a[13]="mouseup");this._.pendingHtml=[];this._.pendingList=[];this._.items={};this._.groups={}},_:{close:function(){if(this._.started){var a=g.output({items:this._.pendingList.join("")});this._.pendingList=[];this._.pendingHtml.push(a);delete this._.started}},getClick:function(){this._.click||(this._.click=CKEDITOR.tools.addFunction(function(a){var b=this.toggle(a);if(this.onClick){this.onClick(a,b)}},this));return this._.click}},proto:{add:function(d,k,a){var b=CKEDITOR.tools.getNextId();this._.started||(this._.started=1,this._.size=this._.size||0);this._.items[d]=b;var c;c=CKEDITOR.tools.htmlEncodeAttr(d).replace(f,"\\'");d={id:b,val:c,onclick:CKEDITOR.env.ie?'onclick\x3d"return false;" onmouseup':"onclick",clickFn:this._.getClick(),title:CKEDITOR.tools.htmlEncodeAttr(a||d),text:k||d};this._.pendingList.push(h.output(d))},startGroup:function(a){this._.close();var b=CKEDITOR.tools.getNextId();this._.groups[a]=b;this._.pendingHtml.push(e.output({id:b,label:a}))},commit:function(){this._.close();this.element.appendHtml(this._.pendingHtml.join(""));delete this._.size;this._.pendingHtml=[]},toggle:function(a){var b=this.isMarked(a);b?this.unmark(a):this.mark(a);return !b},hideGroup:function(a){var b=(a=this.element.getDocument().getById(this._.groups[a]))&&a.getNext();a&&(a.setStyle("display","none"),b&&"ul"==b.getName()&&b.setStyle("display","none"))},hideItem:function(a){this.element.getDocument().getById(this._.items[a]).setStyle("display","none")},showAll:function(){var d=this._.items,k=this._.groups,a=this.element.getDocument(),b;for(b in d){a.getById(d[b]).setStyle("display","")}for(var c in k){d=a.getById(k[c]),b=d.getNext(),d.setStyle("display",""),b&&"ul"==b.getName()&&b.setStyle("display","")}},mark:function(a){this.multiSelect||this.unmarkAll();a=this._.items[a];var b=this.element.getDocument().getById(a);b.addClass("cke_selected");this.element.getDocument().getById(a+"_option").setAttribute("aria-selected",!0);this.onMark&&this.onMark(b)},unmark:function(b){var c=this.element.getDocument();b=this._.items[b];var a=c.getById(b);a.removeClass("cke_selected");c.getById(b+"_option").removeAttribute("aria-selected");this.onUnmark&&this.onUnmark(a)},unmarkAll:function(){var c=this._.items,d=this.element.getDocument(),a;for(a in c){var b=c[a];d.getById(b).removeClass("cke_selected");d.getById(b+"_option").removeAttribute("aria-selected")}this.onUnmark&&this.onUnmark()},isMarked:function(a){return this.element.getDocument().getById(this._.items[a]).hasClass("cke_selected")},focus:function(c){this._.focusIndex=-1;var d=this.element.getElementsByTag("a"),a,b=-1;if(c){for(a=this.element.getDocument().getById(this._.items[c]).getFirst();c=d.getItem(++b);){if(c.equals(a)){this._.focusIndex=b;break}}}else{this.element.focus()}a&&setTimeout(function(){a.focus()},0)}}})}});CKEDITOR.plugins.add("richcombo",{requires:"floatpanel,listblock,button",beforeInit:function(b){b.ui.addHandler(CKEDITOR.UI_RICHCOMBO,CKEDITOR.ui.richCombo.handler)}});(function(){var c='\x3cspan id\x3d"{id}" class\x3d"cke_combo cke_combo__{name} {cls}" role\x3d"presentation"\x3e\x3cspan id\x3d"{id}_label" class\x3d"cke_combo_label"\x3e{label}\x3c/span\x3e\x3ca class\x3d"cke_combo_button" title\x3d"{title}" tabindex\x3d"-1"'+(CKEDITOR.env.gecko&&!CKEDITOR.env.hc?"":" href\x3d\"javascript:void('{titleJs}')\"")+' hidefocus\x3d"true" role\x3d"button" aria-labelledby\x3d"{id}_label" aria-haspopup\x3d"true"';CKEDITOR.env.gecko&&CKEDITOR.env.mac&&(c+=' onkeypress\x3d"return false;"');CKEDITOR.env.gecko&&(c+=' onblur\x3d"this.style.cssText \x3d this.style.cssText;"');var c=c+(' onkeydown\x3d"return CKEDITOR.tools.callFunction({keydownFn},event,this);" onfocus\x3d"return CKEDITOR.tools.callFunction({focusFn},event);" '+(CKEDITOR.env.ie?'onclick\x3d"return false;" onmouseup':"onclick")+'\x3d"CKEDITOR.tools.callFunction({clickFn},this);return false;"\x3e\x3cspan id\x3d"{id}_text" class\x3d"cke_combo_text cke_combo_inlinelabel"\x3e{label}\x3c/span\x3e\x3cspan class\x3d"cke_combo_open"\x3e\x3cspan class\x3d"cke_combo_arrow"\x3e'+(CKEDITOR.env.hc?"\x26#9660;":CKEDITOR.env.air?"\x26nbsp;":"")+"\x3c/span\x3e\x3c/span\x3e\x3c/a\x3e\x3c/span\x3e"),d=CKEDITOR.addTemplate("combo",c);CKEDITOR.UI_RICHCOMBO="richcombo";CKEDITOR.ui.richCombo=CKEDITOR.tools.createClass({$:function(a){CKEDITOR.tools.extend(this,a,{canGroup:!1,title:a.label,modes:{wysiwyg:1},editorFocus:1});a=this.panel||{};delete this.panel;this.id=CKEDITOR.tools.getNextNumber();this.document=a.parent&&a.parent.getDocument()||CKEDITOR.document;a.className="cke_combopanel";a.block={multiSelect:a.multiSelect,attributes:a.attributes};a.toolbarRelated=!0;this._={panelDefinition:a,items:{}}},proto:{renderHtml:function(a){var b=[];this.render(a,b);return b.join("")},render:function(m,n){function e(){if(this.getState()!=CKEDITOR.TRISTATE_ON){var i=this.modes[m.mode]?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED;m.readOnly&&!this.readOnly&&(i=CKEDITOR.TRISTATE_DISABLED);this.setState(i);this.setValue("");i!=CKEDITOR.TRISTATE_DISABLED&&this.refresh&&this.refresh()}}var x=CKEDITOR.env,f="cke_"+this.id,a=CKEDITOR.tools.addFunction(function(i){g&&(m.unlockSelection(1),g=0);w.execute(i)},this),b=this,w={id:f,combo:this,focus:function(){CKEDITOR.document.getById(f).getChild(1).focus()},execute:function(i){var k=b._;if(k.state!=CKEDITOR.TRISTATE_DISABLED){if(b.createPanel(m),k.on){k.panel.hide()}else{b.commit();var j=b.getValue();j?k.list.mark(j):k.list.unmarkAll();k.panel.showBlock(b.id,new CKEDITOR.dom.element(i),4)}}},clickFn:a};m.on("activeFilterChange",e,this);m.on("mode",e,this);m.on("selectionChange",e,this);!this.readOnly&&m.on("readOnly",e,this);var h=CKEDITOR.tools.addFunction(function(k,i){k=new CKEDITOR.dom.event(k);var j=k.getKeystroke();if(40==j){m.once("panelShow",function(o){o.data._.panel._.currentBlock.onKeyDown(40)})}switch(j){case 13:case 32:case 40:CKEDITOR.tools.callFunction(a,i);break;default:w.onkey(w,j)}k.preventDefault()}),l=CKEDITOR.tools.addFunction(function(){w.onfocus&&w.onfocus()}),g=0;w.keyDownFn=h;x={id:f,name:this.name||this.command,label:this.label,title:this.title,cls:this.className||"",titleJs:x.gecko&&!x.hc?"":(this.title||"").replace("'",""),keydownFn:h,focusFn:l,clickFn:a};d.output(x,n);if(this.onRender){this.onRender()}return w},createPanel:function(f){if(!this._.panel){var h=this._.panelDefinition,q=this._.panelDefinition.block,e=h.parent||CKEDITOR.document.getBody(),b="cke_combopanel__"+this.name,r=new CKEDITOR.ui.floatPanel(f,e,h),a=r.addListBlock(this.id,q),k=this;r.onShow=function(){this.element.addClass(b);k.setState(CKEDITOR.TRISTATE_ON);k._.on=1;k.editorFocus&&!f.focusManager.hasFocus&&f.focus();if(k.onOpen){k.onOpen()}f.once("panelShow",function(){a.focus(!a.multiSelect&&k.getValue())})};r.onHide=function(g){this.element.removeClass(b);k.setState(k.modes&&k.modes[f.mode]?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED);k._.on=0;if(!g&&k.onClose){k.onClose()}};r.onEscape=function(){r.hide(1)};a.onClick=function(g,i){k.onClick&&k.onClick.call(k,g,i);r.hide()};this._.panel=r;this._.list=a;r.getBlock(this.id).onHide=function(){k._.on=0;k.setState(CKEDITOR.TRISTATE_OFF)};this.init&&this.init()}},setValue:function(b,g){this._.value=b;var a=this.document.getById("cke_"+this.id+"_text");a&&(b||g?a.removeClass("cke_combo_inlinelabel"):(g=this.label,a.addClass("cke_combo_inlinelabel")),a.setText("undefined"!=typeof g?g:b))},getValue:function(){return this._.value||""},unmarkAll:function(){this._.list.unmarkAll()},mark:function(a){this._.list.mark(a)},hideItem:function(a){this._.list.hideItem(a)},hideGroup:function(a){this._.list.hideGroup(a)},showAll:function(){this._.list.showAll()},add:function(b,g,a){this._.items[b]=a||b;this._.list.add(b,g,a)},startGroup:function(a){this._.list.startGroup(a)},commit:function(){this._.committed||(this._.list.commit(),this._.committed=1,CKEDITOR.ui.fire("ready",this));this._.committed=1},setState:function(a){if(this._.state!=a){var b=this.document.getById("cke_"+this.id);b.setState(a,"cke_combo");a==CKEDITOR.TRISTATE_DISABLED?b.setAttribute("aria-disabled",!0):b.removeAttribute("aria-disabled");this._.state=a}},getState:function(){return this._.state},enable:function(){this._.state==CKEDITOR.TRISTATE_DISABLED&&this.setState(this._.lastState)},disable:function(){this._.state!=CKEDITOR.TRISTATE_DISABLED&&(this._.lastState=this._.state,this.setState(CKEDITOR.TRISTATE_DISABLED))}},statics:{handler:{create:function(a){return new CKEDITOR.ui.richCombo(a)}}}});CKEDITOR.ui.prototype.addRichCombo=function(a,b){this.add(a,CKEDITOR.UI_RICHCOMBO,b)}})();CKEDITOR.plugins.add("format",{requires:"richcombo",init:function(m){if(!m.blockless){for(var c=m.config,n=m.lang.format,h=c.format_tags.split(";"),a={},k=0,l=[],d=0;d<h.length;d++){var f=h[d],g=new CKEDITOR.style(c["format_"+f]);if(!m.filter.customConfig||m.filter.check(g)){k++,a[f]=g,a[f]._.enterMode=m.config.enterMode,l.push(g)}}0!==k&&m.ui.addRichCombo("Format",{label:n.label,title:n.panelTitle,toolbar:"styles,20",allowedContent:l,panel:{css:[CKEDITOR.skin.getPath("editor")].concat(c.contentsCss),multiSelect:!1,attributes:{"aria-label":n.panelTitle}},init:function(){this.startGroup(n.panelTitle);for(var e in a){var b=n["tag_"+e];this.add(e,a[e].buildPreview(b),b)}},onClick:function(b){m.focus();m.fire("saveSnapshot");b=a[b];var e=m.elementPath();m[b.checkActive(e,m)?"removeStyle":"applyStyle"](b);setTimeout(function(){m.fire("saveSnapshot")},0)},onRender:function(){m.on("selectionChange",function(b){var i=this.getValue();b=b.data.path;this.refresh();for(var e in a){if(a[e].checkActive(b,m)){e!=i&&this.setValue(e,m.lang.format["tag_"+e]);return}}this.setValue("")},this)},onOpen:function(){this.showAll();for(var b in a){m.activeFilter.check(a[b])||this.hideItem(b)}},refresh:function(){var b=m.elementPath();if(b){if(b.isContextFor("p")){for(var e in a){if(m.activeFilter.check(a[e])){return}}}this.setState(CKEDITOR.TRISTATE_DISABLED)}}})}}});CKEDITOR.config.format_tags="p;h1;h2;h3;h4;h5;h6;pre;address;div";CKEDITOR.config.format_p={element:"p"};CKEDITOR.config.format_div={element:"div"};CKEDITOR.config.format_pre={element:"pre"};CKEDITOR.config.format_address={element:"address"};CKEDITOR.config.format_h1={element:"h1"};CKEDITOR.config.format_h2={element:"h2"};CKEDITOR.config.format_h3={element:"h3"};CKEDITOR.config.format_h4={element:"h4"};CKEDITOR.config.format_h5={element:"h5"};CKEDITOR.config.format_h6={element:"h6"};(function(){var b={canUndo:!1,exec:function(a){var e=a.document.createElement("hr");a.insertElement(e)},allowedContent:"hr",requiredContent:"hr"};CKEDITOR.plugins.add("horizontalrule",{init:function(a){a.blockless||(a.addCommand("horizontalrule",b),a.ui.addButton&&a.ui.addButton("HorizontalRule",{label:a.lang.horizontalrule.toolbar,command:"horizontalrule",toolbar:"insert,40"}))}})})();CKEDITOR.plugins.add("htmlwriter",{init:function(b){var a=new CKEDITOR.htmlWriter;a.forceSimpleAmpersand=b.config.forceSimpleAmpersand;a.indentationChars=b.config.dataIndentationChars||"\t";b.dataProcessor.writer=a}});CKEDITOR.htmlWriter=CKEDITOR.tools.createClass({base:CKEDITOR.htmlParser.basicWriter,$:function(){this.base();this.indentationChars="\t";this.selfClosingEnd=" /\x3e";this.lineBreakChars="\n";this.sortAttributes=1;this._.indent=0;this._.indentation="";this._.inPre=0;this._.rules={};var b=CKEDITOR.dtd,a;for(a in CKEDITOR.tools.extend({},b.$nonBodyContent,b.$block,b.$listItem,b.$tableContent)){this.setRules(a,{indent:!b[a]["#"],breakBeforeOpen:1,breakBeforeClose:!b[a]["#"],breakAfterClose:1,needsSpace:a in b.$block&&!(a in {li:1,dt:1,dd:1})})}this.setRules("br",{breakAfterOpen:1});this.setRules("title",{indent:0,breakAfterOpen:0});this.setRules("style",{indent:0,breakBeforeClose:1});this.setRules("pre",{breakAfterOpen:1,indent:0})},proto:{openTag:function(b){var a=this._.rules[b];this._.afterCloser&&a&&a.needsSpace&&this._.needsSpace&&this._.output.push("\n");this._.indent?this.indentation():a&&a.breakBeforeOpen&&(this.lineBreak(),this.indentation());this._.output.push("\x3c",b);this._.afterCloser=0},openTagClose:function(c,b){var a=this._.rules[c];b?(this._.output.push(this.selfClosingEnd),a&&a.breakAfterClose&&(this._.needsSpace=a.needsSpace)):(this._.output.push("\x3e"),a&&a.indent&&(this._.indentation+=this.indentationChars));a&&a.breakAfterOpen&&this.lineBreak();"pre"==c&&(this._.inPre=1)},attribute:function(b,a){"string"==typeof a&&(this.forceSimpleAmpersand&&(a=a.replace(/&amp;/g,"\x26")),a=CKEDITOR.tools.htmlEncodeAttr(a));this._.output.push(" ",b,'\x3d"',a,'"')},closeTag:function(b){var a=this._.rules[b];a&&a.indent&&(this._.indentation=this._.indentation.substr(this.indentationChars.length));this._.indent?this.indentation():a&&a.breakBeforeClose&&(this.lineBreak(),this.indentation());this._.output.push("\x3c/",b,"\x3e");"pre"==b&&(this._.inPre=0);a&&a.breakAfterClose&&(this.lineBreak(),this._.needsSpace=a.needsSpace);this._.afterCloser=1},text:function(b){this._.indent&&(this.indentation(),!this._.inPre&&(b=CKEDITOR.tools.ltrim(b)));this._.output.push(b)},comment:function(b){this._.indent&&this.indentation();this._.output.push("\x3c!--",b,"--\x3e")},lineBreak:function(){!this._.inPre&&0<this._.output.length&&this._.output.push(this.lineBreakChars);this._.indent=1},indentation:function(){!this._.inPre&&this._.indentation&&this._.output.push(this._.indentation);this._.indent=0},reset:function(){this._.output=[];this._.indent=0;this._.indentation="";this._.afterCloser=0;this._.inPre=0},setRules:function(c,b){var a=this._.rules[c];a?CKEDITOR.tools.extend(a,b,!0):this._.rules[c]=b}}});(function(){function f(d){function a(i){var j=!1;b.attachListener(b,"keydown",function(){var k=r.getBody().getElementsByTag(i);if(!j){for(var l=0;l<k.count();l++){k.getItem(l).setCustomData("retain",!0)}j=!0}},null,null,1);b.attachListener(b,"keyup",function(){var k=r.getElementsByTag(i);j&&(1!=k.count()||k.getItem(0).getCustomData("retain")||k.getItem(0).remove(1),j=!1)})}var q=this.editor,r=d.document,s=r.body,t=r.getElementById("cke_actscrpt");t&&t.parentNode.removeChild(t);(t=r.getElementById("cke_shimscrpt"))&&t.parentNode.removeChild(t);(t=r.getElementById("cke_basetagscrpt"))&&t.parentNode.removeChild(t);s.contentEditable=!0;CKEDITOR.env.ie&&(s.hideFocus=!0,s.disabled=!0,s.removeAttribute("disabled"));delete this._.isLoadingData;this.$=s;r=new CKEDITOR.dom.document(r);this.setup();this.fixInitialSelection();var b=this;CKEDITOR.env.ie&&!CKEDITOR.env.edge&&r.getDocumentElement().addClass(r.$.compatMode);CKEDITOR.env.ie&&!CKEDITOR.env.edge&&q.enterMode!=CKEDITOR.ENTER_P?a("p"):CKEDITOR.env.edge&&q.enterMode!=CKEDITOR.ENTER_DIV&&a("div");if(CKEDITOR.env.webkit||CKEDITOR.env.ie&&10<CKEDITOR.env.version){r.getDocumentElement().on("mousedown",function(i){i.data.getTarget().is("html")&&setTimeout(function(){q.editable().focus()})})}g(q);try{q.document.$.execCommand("2D-position",!1,!0)}catch(c){}(CKEDITOR.env.gecko||CKEDITOR.env.ie&&"CSS1Compat"==q.document.$.compatMode)&&this.attachListener(this,"keydown",function(k){var i=k.data.getKeystroke();if(33==i||34==i){if(CKEDITOR.env.ie){setTimeout(function(){q.getSelection().scrollIntoView()},0)}else{if(q.window.$.innerHeight>this.$.offsetHeight){var j=q.createRange();j[33==i?"moveToElementEditStart":"moveToElementEditEnd"](this);j.select();k.data.preventDefault()}}}});CKEDITOR.env.ie&&this.attachListener(r,"blur",function(){try{r.$.selection.empty()}catch(i){}});CKEDITOR.env.iOS&&this.attachListener(r,"touchend",function(){d.focus()});s=q.document.getElementsByTag("title").getItem(0);s.data("cke-title",s.getText());CKEDITOR.env.ie&&(q.document.$.title=this._.docTitle);CKEDITOR.tools.setTimeout(function(){"unloaded"==this.status&&(this.status="ready");q.fire("contentDom");this._.isPendingFocus&&(q.focus(),this._.isPendingFocus=!1);setTimeout(function(){q.fire("dataReady")},0)},0,this)}function g(d){function c(){var i;d.editable().attachListener(d,"selectionChange",function(){var j=d.getSelection().getSelectedElement();j&&(i&&(i.detachEvent("onresizestart",k),i=null),j.$.attachEvent("onresizestart",k),i=j.$)})}function k(i){i.returnValue=!1}if(CKEDITOR.env.gecko){try{var a=d.document.$;a.execCommand("enableObjectResizing",!1,!d.config.disableObjectResizing);a.execCommand("enableInlineTableEditing",!1,!d.config.disableNativeTableHandles)}catch(b){}}else{CKEDITOR.env.ie&&11>CKEDITOR.env.version&&d.config.disableObjectResizing&&c(d)}}function h(){var b=[];if(8<=CKEDITOR.document.$.documentMode){b.push("html.CSS1Compat [contenteditable\x3dfalse]{min-height:0 !important}");var a=[],c;for(c in CKEDITOR.dtd.$removeEmpty){a.push("html.CSS1Compat "+c+"[contenteditable\x3dfalse]")}b.push(a.join(",")+"{display:inline-block}")}else{CKEDITOR.env.gecko&&(b.push("html{height:100% !important}"),b.push("img:-moz-broken{-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}"))}b.push("html{cursor:text;*cursor:auto}");b.push("img,input,textarea{cursor:default}");return b.join("\n")}CKEDITOR.plugins.add("wysiwygarea",{init:function(a){a.config.fullPage&&a.addFeature({allowedContent:"html head title; style [media,type]; body (*)[id]; meta link [*]",requiredContent:"body"});a.addMode("wysiwyg",function(u){function k(i){i&&i.removeListener();a.editable(new e(a,s.$.contentWindow.document.body));a.setData(a.getData(1),u)}var r="document.open();"+(CKEDITOR.env.ie?"("+CKEDITOR.tools.fixDomain+")();":"")+"document.close();",r=CKEDITOR.env.air?"javascript:void(0)":CKEDITOR.env.ie&&!CKEDITOR.env.edge?"javascript:void(function(){"+encodeURIComponent(r)+"}())":"",s=CKEDITOR.dom.element.createFromHtml('\x3ciframe src\x3d"'+r+'" frameBorder\x3d"0"\x3e\x3c/iframe\x3e');s.setStyles({width:"100%",height:"100%"});s.addClass("cke_wysiwyg_frame").addClass("cke_reset");r=a.ui.space("contents");r.append(s);var t=CKEDITOR.env.ie&&!CKEDITOR.env.edge||CKEDITOR.env.gecko;if(t){s.on("load",k)}var b=a.title,c=a.fire("ariaEditorHelpLabel",{}).label;b&&(CKEDITOR.env.ie&&c&&(b+=", "+c),s.setAttribute("title",b));if(c){var b=CKEDITOR.tools.getNextId(),d=CKEDITOR.dom.element.createFromHtml('\x3cspan id\x3d"'+b+'" class\x3d"cke_voice_label"\x3e'+c+"\x3c/span\x3e");r.append(d,1);s.setAttribute("aria-describedby",b)}a.on("beforeModeUnload",function(i){i.removeListener();d&&d.remove()});s.setAttributes({tabIndex:a.tabIndex,allowTransparency:"true"});!t&&k();a.fire("ariaWidget",s)})}});CKEDITOR.editor.prototype.addContentsCss=function(b){var a=this.config,c=a.contentsCss;CKEDITOR.tools.isArray(c)||(a.contentsCss=c?[c]:[]);a.contentsCss.push(b)};var e=CKEDITOR.tools.createClass({$:function(){this.base.apply(this,arguments);this._.frameLoadedHandler=CKEDITOR.tools.addFunction(function(a){CKEDITOR.tools.setTimeout(f,0,this,a)},this);this._.docTitle=this.getWindow().getFrame().getAttribute("title")},base:CKEDITOR.editable,proto:{setData:function(w,d){var x=this.editor;if(d){this.setHtml(w),this.fixInitialSelection(),x.fire("dataReady")}else{this._.isLoadingData=!0;x._.dataStore={id:1};var a=x.config,b=a.fullPage,c=a.docType,k=CKEDITOR.tools.buildStyleHtml(h()).replace(/<style>/,'\x3cstyle data-cke-temp\x3d"1"\x3e');b||(k+=CKEDITOR.tools.buildStyleHtml(x.config.contentsCss));var l=a.baseHref?'\x3cbase href\x3d"'+a.baseHref+'" data-cke-temp\x3d"1" /\x3e':"";b&&(w=w.replace(/<!DOCTYPE[^>]*>/i,function(i){x.docType=c=i;return""}).replace(/<\?xml\s[^\?]*\?>/i,function(i){x.xmlDeclaration=i;return""}));w=x.dataProcessor.toHtml(w);b?(/<body[\s|>]/.test(w)||(w="\x3cbody\x3e"+w),/<html[\s|>]/.test(w)||(w="\x3chtml\x3e"+w+"\x3c/html\x3e"),/<head[\s|>]/.test(w)?/<title[\s|>]/.test(w)||(w=w.replace(/<head[^>]*>/,"$\x26\x3ctitle\x3e\x3c/title\x3e")):w=w.replace(/<html[^>]*>/,"$\x26\x3chead\x3e\x3ctitle\x3e\x3c/title\x3e\x3c/head\x3e"),l&&(w=w.replace(/<head[^>]*?>/,"$\x26"+l)),w=w.replace(/<\/head\s*>/,k+"$\x26"),w=c+w):w=a.docType+'\x3chtml dir\x3d"'+a.contentsLangDirection+'" lang\x3d"'+(a.contentsLanguage||x.langCode)+'"\x3e\x3chead\x3e\x3ctitle\x3e'+this._.docTitle+"\x3c/title\x3e"+l+k+"\x3c/head\x3e\x3cbody"+(a.bodyId?' id\x3d"'+a.bodyId+'"':"")+(a.bodyClass?' class\x3d"'+a.bodyClass+'"':"")+"\x3e"+w+"\x3c/body\x3e\x3c/html\x3e";CKEDITOR.env.gecko&&(w=w.replace(/<body/,'\x3cbody contenteditable\x3d"true" '),20000>CKEDITOR.env.version&&(w=w.replace(/<body[^>]*>/,"$\x26\x3c!-- cke-content-start --\x3e")));a='\x3cscript id\x3d"cke_actscrpt" type\x3d"text/javascript"'+(CKEDITOR.env.ie?' defer\x3d"defer" ':"")+"\x3evar wasLoaded\x3d0;function onload(){if(!wasLoaded)window.parent.CKEDITOR.tools.callFunction("+this._.frameLoadedHandler+",window);wasLoaded\x3d1;}"+(CKEDITOR.env.ie?"onload();":'document.addEventListener("DOMContentLoaded", onload, false );')+"\x3c/script\x3e";CKEDITOR.env.ie&&9>CKEDITOR.env.version&&(a+='\x3cscript id\x3d"cke_shimscrpt"\x3ewindow.parent.CKEDITOR.tools.enableHtml5Elements(document)\x3c/script\x3e');l&&CKEDITOR.env.ie&&10>CKEDITOR.env.version&&(a+='\x3cscript id\x3d"cke_basetagscrpt"\x3evar baseTag \x3d document.querySelector( "base" );baseTag.href \x3d baseTag.href;\x3c/script\x3e');w=w.replace(/(?=\s*<\/(:?head)>)/,a);this.clearCustomData();this.clearListeners();x.fire("contentDomUnload");var u=this.getDocument();try{u.write(w)}catch(v){setTimeout(function(){u.write(w)},0)}}},getData:function(m){if(m){return this.getHtml()}m=this.editor;var d=m.config,n=d.fullPage,a=n&&m.docType,b=n&&m.xmlDeclaration,c=this.getDocument(),n=n?c.getDocumentElement().getOuterHtml():c.getBody().getHtml();CKEDITOR.env.gecko&&d.enterMode!=CKEDITOR.ENTER_BR&&(n=n.replace(/<br>(?=\s*(:?$|<\/body>))/,""));n=m.dataProcessor.toDataFormat(n);b&&(n=b+"\n"+n);a&&(n=a+"\n"+n);return n},focus:function(){this._.isLoadingData?this._.isPendingFocus=!0:e.baseProto.focus.call(this)},detach:function(){var c=this.editor,b=c.document,d;try{d=c.window.getFrame()}catch(a){}e.baseProto.detach.call(this);this.clearCustomData();b.getDocumentElement().clearCustomData();CKEDITOR.tools.removeFunction(this._.frameLoadedHandler);d&&d.getParent()?(d.clearCustomData(),(c=d.removeCustomData("onResize"))&&c.removeListener(),d.remove()):CKEDITOR.warn("editor-destroy-iframe")}}})})();CKEDITOR.config.disableObjectResizing=!1;CKEDITOR.config.disableNativeTableHandles=!0;CKEDITOR.config.disableNativeSpellChecker=!0;(function(){function c(b,a){a||(a=b.getSelection().getSelectedElement());if(a&&a.is("img")&&!a.data("cke-realelement")&&!a.isReadOnly()){return a}}function d(b){var a=b.getStyle("float");if("inherit"==a||"none"==a){a=0}a||(a=b.getAttribute("align"));return a}CKEDITOR.plugins.add("image",{requires:"dialog",init:function(b){if(!b.plugins.image2){CKEDITOR.dialog.add("image",this.path+"dialogs/image.js");var a="img[alt,!src]{border-style,border-width,float,height,margin,margin-bottom,margin-left,margin-right,margin-top,width}";CKEDITOR.dialog.isTabEnabled(b,"image","advanced")&&(a="img[alt,dir,id,lang,longdesc,!src,title]{*}(*)");b.addCommand("image",new CKEDITOR.dialogCommand("image",{allowedContent:a,requiredContent:"img[alt,src]",contentTransformations:[["img{width}: sizeToStyle","img[width]: sizeToAttribute"],["img{float}: alignmentToStyle","img[align]: alignmentToAttribute"]]}));b.ui.addButton&&b.ui.addButton("Image",{label:b.lang.common.image,command:"image",toolbar:"insert,10"});b.on("doubleclick",function(h){var g=h.data.element;!g.is("img")||g.data("cke-realelement")||g.isReadOnly()||(h.data.dialog="image")});b.addMenuItems&&b.addMenuItems({image:{label:b.lang.image.menu,command:"image",group:"image"}});b.contextMenu&&b.contextMenu.addListener(function(f){if(c(b,f)){return{image:CKEDITOR.TRISTATE_OFF}}})}},afterInit:function(b){function a(h){var g=b.getCommand("justify"+h);if(g){if("left"==h||"right"==h){g.on("exec",function(f){var e=c(b),k;e&&(k=d(e),k==h?(e.removeStyle("float"),h==d(e)&&e.removeAttribute("align")):e.setStyle("float",h),f.cancel())})}g.on("refresh",function(f){var e=c(b);e&&(e=d(e),this.setState(e==h?CKEDITOR.TRISTATE_ON:"right"==h||"left"==h?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED),f.cancel())})}}b.plugins.image2||(a("left"),a("right"),a("center"),a("block"))}})})();CKEDITOR.config.image_removeLinkByEmptyURL=!0;(function(){function e(c,j){var a,b;j.on("refresh",function(h){var i=[d],g;for(g in h.data.states){i.push(h.data.states[g])}this.setState(CKEDITOR.tools.search(i,f)?f:d)},j,null,100);j.on("exec",function(g){a=c.getSelection();b=a.createBookmarks(1);g.data||(g.data={});g.data.done=!1},j,null,0);j.on("exec",function(){c.forceNextSelectionCheck();a.selectBookmarks(b)},j,null,100)}var d=CKEDITOR.TRISTATE_DISABLED,f=CKEDITOR.TRISTATE_OFF;CKEDITOR.plugins.add("indent",{init:function(a){var b=CKEDITOR.plugins.indent.genericDefinition;e(a,a.addCommand("indent",new b(!0)));e(a,a.addCommand("outdent",new b));a.ui.addButton&&(a.ui.addButton("Indent",{label:a.lang.indent.indent,command:"indent",directional:!0,toolbar:"indent,20"}),a.ui.addButton("Outdent",{label:a.lang.indent.outdent,command:"outdent",directional:!0,toolbar:"indent,10"}));a.on("dirChanged",function(l){var u=a.createRange(),h=l.data.node;u.setStartBefore(h);u.setEndAfter(h);for(var n=new CKEDITOR.dom.walker(u),s;s=n.next();){if(s.type==CKEDITOR.NODE_ELEMENT){if(!s.equals(h)&&s.getDirection()){u.setStartAfter(s),n=new CKEDITOR.dom.walker(u)}else{var t=a.config.indentClasses;if(t){for(var c="ltr"==l.data.dir?["_rtl",""]:["","_rtl"],g=0;g<t.length;g++){s.hasClass(t[g]+c[0])&&(s.removeClass(t[g]+c[0]),s.addClass(t[g]+c[1]))}}t=s.getStyle("margin-right");c=s.getStyle("margin-left");t?s.setStyle("margin-left",t):s.removeStyle("margin-left");c?s.setStyle("margin-right",c):s.removeStyle("margin-right")}}}})}});CKEDITOR.plugins.indent={genericDefinition:function(a){this.isIndent=!!a;this.startDisabled=!this.isIndent},specificDefinition:function(b,c,a){this.name=c;this.editor=b;this.jobs={};this.enterBr=b.config.enterMode==CKEDITOR.ENTER_BR;this.isIndent=!!a;this.relatedGlobal=a?"indent":"outdent";this.indentKey=a?9:CKEDITOR.SHIFT+9;this.database={}},registerCommands:function(a,b){a.on("pluginsLoaded",function(){for(var c in b){(function(m,n){var l=m.getCommand(n.relatedGlobal),k;for(k in n.jobs){l.on("exec",function(g){g.data.done||(m.fire("lockSnapshot"),n.execJob(m,k)&&(g.data.done=!0),m.fire("unlockSnapshot"),CKEDITOR.dom.element.clearAllMarkers(n.database))},this,null,k),l.on("refresh",function(g){g.data.states||(g.data.states={});g.data.states[n.name+"@"+k]=n.refreshJob(m,k,g.data.path)},this,null,k)}m.addFeature(n)})(this,b[c])}})}};CKEDITOR.plugins.indent.genericDefinition.prototype={context:"p",exec:function(){}};CKEDITOR.plugins.indent.specificDefinition.prototype={execJob:function(b,c){var a=this.jobs[c];if(a.state!=d){return a.exec.call(this,b)}},refreshJob:function(b,c,a){c=this.jobs[c];b.activeFilter.checkFeature(this)?c.state=c.refresh.call(this,b,a):c.state=d;return c.state},getContext:function(a){return a.contains(this.context)}}})();(function(){function h(p){function a(t){for(var C=q.startContainer,r=q.endContainer;C&&!C.getParent().equals(t);){C=C.getParent()}for(;r&&!r.getParent().equals(t);){r=r.getParent()}if(!C||!r){return !1}for(var E=C,C=[],G=!1;!G;){E.equals(r)&&(G=!0),C.push(E),E=E.getNext()}if(1>C.length){return !1}E=t.getParents(!0);for(r=0;r<E.length;r++){if(E[r].getName&&e[E[r].getName()]){t=E[r];break}}for(var E=c.isIndent?1:-1,r=C[0],C=C[C.length-1],G=CKEDITOR.plugins.list.listToArray(t,f),s=G[C.getCustomData("listarray_index")].indent,r=r.getCustomData("listarray_index");r<=C.getCustomData("listarray_index");r++){if(G[r].indent+=E,0<E){var F=G[r].parent;G[r].parent=new CKEDITOR.dom.element(F.getName(),F.getDocument())}}for(r=C.getCustomData("listarray_index")+1;r<G.length&&G[r].indent>s;r++){G[r].indent+=E}C=CKEDITOR.plugins.list.arrayToList(G,f,null,p.config.enterMode,t.getDirection());if(!c.isIndent){var D;if((D=t.getParent())&&D.is("li")){for(var E=C.listNode.getChildren(),u=[],o,r=E.count()-1;0<=r;r--){(o=E.getItem(r))&&o.is&&o.is("li")&&u.push(o)}}}C&&C.listNode.replace(t);if(u&&u.length){for(r=0;r<u.length;r++){for(o=t=u[r];(o=o.getNext())&&o.is&&o.getName() in e;){CKEDITOR.env.needsNbspFiller&&!t.getFirst(i)&&t.append(q.document.createText("Â ")),t.append(o)}t.insertAfter(D)}}C&&p.fire("contentDomInvalidated");return !0}for(var c=this,f=this.database,e=this.context,d=p.getSelection(),d=(d&&d.getRanges()).createIterator(),q;q=d.getNextRange();){for(var g=q.getCommonAncestor();g&&(g.type!=CKEDITOR.NODE_ELEMENT||!e[g.getName()]);){if(p.editable().equals(g)){g=!1;break}g=g.getParent()}g||(g=q.startPath().contains(e))&&q.setEndAt(g,CKEDITOR.POSITION_BEFORE_END);if(!g){var b=q.getEnclosedNode();b&&b.type==CKEDITOR.NODE_ELEMENT&&b.getName() in e&&(q.setStartAt(b,CKEDITOR.POSITION_AFTER_START),q.setEndAt(b,CKEDITOR.POSITION_BEFORE_END),g=b)}g&&q.startContainer.type==CKEDITOR.NODE_ELEMENT&&q.startContainer.getName() in e&&(b=new CKEDITOR.dom.walker(q),b.evaluator=l,q.startContainer=b.next());g&&q.endContainer.type==CKEDITOR.NODE_ELEMENT&&q.endContainer.getName() in e&&(b=new CKEDITOR.dom.walker(q),b.evaluator=l,q.endContainer=b.previous());if(g){return a(g)}}return 0}function l(a){return a.type==CKEDITOR.NODE_ELEMENT&&a.is("li")}function i(a){return j(a)&&k(a)}var j=CKEDITOR.dom.walker.whitespaces(!0),k=CKEDITOR.dom.walker.bookmark(!1,!0),m=CKEDITOR.TRISTATE_DISABLED,n=CKEDITOR.TRISTATE_OFF;CKEDITOR.plugins.add("indentlist",{requires:"indent",init:function(a){function b(d){c.specificDefinition.apply(this,arguments);this.requiredContent=["ul","ol"];d.on("key",function(f){if("wysiwyg"==d.mode&&f.data.keyCode==this.indentKey){var e=this.getContext(d.elementPath());!e||this.isIndent&&CKEDITOR.plugins.indentList.firstItemInPath(this.context,d.elementPath(),e)||(d.execCommand(this.relatedGlobal),f.cancel())}},this);this.jobs[this.isIndent?10:30]={refresh:this.isIndent?function(g,e){var p=this.getContext(e),f=CKEDITOR.plugins.indentList.firstItemInPath(this.context,e,p);return p&&this.isIndent&&!f?n:m}:function(e,f){return !this.getContext(f)||this.isIndent?m:n},exec:CKEDITOR.tools.bind(h,this)}}var c=CKEDITOR.plugins.indent;c.registerCommands(a,{indentlist:new b(a,"indentlist",!0),outdentlist:new b(a,"outdentlist")});CKEDITOR.tools.extend(b.prototype,c.specificDefinition.prototype,{context:{ol:1,ul:1}})}});CKEDITOR.plugins.indentList={};CKEDITOR.plugins.indentList.firstItemInPath=function(a,b,d){var c=b.contains(l);d||(d=b.contains(a));return d&&c&&c.equals(d.getFirst(l))}})();(function(){function h(c,d){var a=f.exec(c),b=f.exec(d);if(a){if(!a[2]&&"px"==b[2]){return b[1]}if("px"==a[2]&&!b[2]){return b[1]+"px"}}return d}var j=CKEDITOR.htmlParser.cssStyle,i=CKEDITOR.tools.cssLength,f=/^((?:\d*(?:\.\d+))|(?:\d+))(.*)?$/i,g={elements:{$:function(c){var d=c.attributes;if((d=(d=(d=d&&d["data-cke-realelement"])&&new CKEDITOR.htmlParser.fragment.fromHtml(decodeURIComponent(d)))&&d.children[0])&&c.attributes["data-cke-resizable"]){var a=(new j(c)).rules;c=d.attributes;var b=a.width,a=a.height;b&&(c.width=h(c.width,b));a&&(c.height=h(c.height,a))}return d}}};CKEDITOR.plugins.add("fakeobjects",{init:function(a){a.filter.allow("img[!data-cke-realelement,src,alt,title](*){*}","fakeobjects")},afterInit:function(a){(a=(a=a.dataProcessor)&&a.htmlFilter)&&a.addRules(g,{applyToAll:!0})}});CKEDITOR.editor.prototype.createFakeElement=function(d,e,a,b){var c=this.lang.fakeobjects,c=c[a]||c.unknown;e={"class":e,"data-cke-realelement":encodeURIComponent(d.getOuterHtml()),"data-cke-real-node-type":d.type,alt:c,title:c,align:d.getAttribute("align")||""};CKEDITOR.env.hc||(e.src=CKEDITOR.tools.transparentImageData);a&&(e["data-cke-real-element-type"]=a);b&&(e["data-cke-resizable"]=b,a=new j,b=d.getAttribute("width"),d=d.getAttribute("height"),b&&(a.rules.width=i(b)),d&&(a.rules.height=i(d)),a.populate(e));return this.document.createElement("img",{attributes:e})};CKEDITOR.editor.prototype.createFakeParserElement=function(e,m,a,b){var c=this.lang.fakeobjects,c=c[a]||c.unknown,d;d=new CKEDITOR.htmlParser.basicWriter;e.writeHtml(d);d=d.getHtml();m={"class":m,"data-cke-realelement":encodeURIComponent(d),"data-cke-real-node-type":e.type,alt:c,title:c,align:e.attributes.align||""};CKEDITOR.env.hc||(m.src=CKEDITOR.tools.transparentImageData);a&&(m["data-cke-real-element-type"]=a);b&&(m["data-cke-resizable"]=b,b=e.attributes,e=new j,a=b.width,b=b.height,void 0!==a&&(e.rules.width=i(a)),void 0!==b&&(e.rules.height=i(b)),e.populate(m));return new CKEDITOR.htmlParser.element("img",m)};CKEDITOR.editor.prototype.restoreRealElement=function(b){if(b.data("cke-real-node-type")!=CKEDITOR.NODE_ELEMENT){return null}var c=CKEDITOR.dom.element.createFromHtml(decodeURIComponent(b.data("cke-realelement")),this.document);if(b.data("cke-resizable")){var a=b.getStyle("width");b=b.getStyle("height");a&&c.setAttribute("width",h(c.getAttribute("width"),a));b&&c.setAttribute("height",h(c.getAttribute("height"),b))}return c}})();(function(){function v(a){return a.replace(/'/g,"\\$\x26")}function x(b){for(var a,e=b.length,d=[],c=0;c<e;c++){a=b.charCodeAt(c),d.push(a)}return"String.fromCharCode("+d.join(",")+")"}function z(b,a){var g=b.plugins.link,e=g.compiledProtectionFunction.params,d,c;c=[g.compiledProtectionFunction.name,"("];for(var f=0;f<e.length;f++){g=e[f].toLowerCase(),d=a[g],0<f&&c.push(","),c.push("'",d?v(encodeURIComponent(a[g])):"","'")}c.push(")");return c.join("")}function t(b){b=b.config.emailProtection||"";var a;b&&"encode"!=b&&(a={},b.replace(/^([^(]+)\(([^)]+)\)$/,function(e,c,d){a.name=c;a.params=[];d.replace(/[^,\s]+/g,function(f){a.params.push(f)})}));return a}CKEDITOR.plugins.add("link",{requires:"dialog,fakeobjects",onLoad:function(){function b(d){return c.replace(/%1/g,"rtl"==d?"right":"left").replace(/%2/g,"cke_contents_"+d)}var a="background:url("+CKEDITOR.getUrl(this.path+"images"+(CKEDITOR.env.hidpi?"/hidpi":"")+"/anchor.png")+") no-repeat %1 center;border:1px dotted #00f;background-size:16px;",c=".%2 a.cke_anchor,.%2 a.cke_anchor_empty,.cke_editable.%2 a[name],.cke_editable.%2 a[data-cke-saved-name]{"+a+"padding-%1:18px;cursor:auto;}.%2 img.cke_anchor{"+a+"width:16px;min-height:15px;height:1.15em;vertical-align:text-bottom;}";CKEDITOR.addCss(b("ltr")+b("rtl"))},init:function(b){var a="a[!href]";CKEDITOR.dialog.isTabEnabled(b,"link","advanced")&&(a=a.replace("]",",accesskey,charset,dir,id,lang,name,rel,tabindex,title,type]{*}(*)"));CKEDITOR.dialog.isTabEnabled(b,"link","target")&&(a=a.replace("]",",target,onclick]"));b.addCommand("link",new CKEDITOR.dialogCommand("link",{allowedContent:a,requiredContent:"a[href]"}));b.addCommand("anchor",new CKEDITOR.dialogCommand("anchor",{allowedContent:"a[!name,id]",requiredContent:"a[name]"}));b.addCommand("unlink",new CKEDITOR.unlinkCommand);b.addCommand("removeAnchor",new CKEDITOR.removeAnchorCommand);b.setKeystroke(CKEDITOR.CTRL+76,"link");b.ui.addButton&&(b.ui.addButton("Link",{label:b.lang.link.toolbar,command:"link",toolbar:"links,10"}),b.ui.addButton("Unlink",{label:b.lang.link.unlink,command:"unlink",toolbar:"links,20"}),b.ui.addButton("Anchor",{label:b.lang.link.anchor.toolbar,command:"anchor",toolbar:"links,30"}));CKEDITOR.dialog.add("link",this.path+"dialogs/link.js");CKEDITOR.dialog.add("anchor",this.path+"dialogs/anchor.js");b.on("doubleclick",function(c){var d=CKEDITOR.plugins.link.getSelectedLink(b)||c.data.element;d.isReadOnly()||(d.is("a")?(c.data.dialog=!d.getAttribute("name")||d.getAttribute("href")&&d.getChildCount()?"link":"anchor",c.data.link=d):CKEDITOR.plugins.link.tryRestoreFakeAnchor(b,d)&&(c.data.dialog="anchor"))},null,null,0);b.on("doubleclick",function(c){c.data.dialog in {link:1,anchor:1}&&c.data.link&&b.getSelection().selectElement(c.data.link)},null,null,20);b.addMenuItems&&b.addMenuItems({anchor:{label:b.lang.link.anchor.menu,command:"anchor",group:"anchor",order:1},removeAnchor:{label:b.lang.link.anchor.remove,command:"removeAnchor",group:"anchor",order:5},link:{label:b.lang.link.menu,command:"link",group:"link",order:1},unlink:{label:b.lang.link.unlink,command:"unlink",group:"link",order:5}});b.contextMenu&&b.contextMenu.addListener(function(c){if(!c||c.isReadOnly()){return null}c=CKEDITOR.plugins.link.tryRestoreFakeAnchor(b,c);if(!c&&!(c=CKEDITOR.plugins.link.getSelectedLink(b))){return null}var d={};c.getAttribute("href")&&c.getChildCount()&&(d={link:CKEDITOR.TRISTATE_OFF,unlink:CKEDITOR.TRISTATE_OFF});c&&c.hasAttribute("name")&&(d.anchor=d.removeAnchor=CKEDITOR.TRISTATE_OFF);return d});this.compiledProtectionFunction=t(b)},afterInit:function(b){b.dataProcessor.dataFilter.addRules({elements:{a:function(c){return c.attributes.name?c.children.length?null:b.createFakeParserElement(c,"cke_anchor","anchor"):null}}});var a=b._.elementsPath&&b._.elementsPath.filters;a&&a.push(function(c,d){if("a"==d&&(CKEDITOR.plugins.link.tryRestoreFakeAnchor(b,c)||c.getAttribute("name")&&(!c.getAttribute("href")||!c.getChildCount()))){return"anchor"}})}});var B=/^javascript:/,C=/^mailto:([^?]+)(?:\?(.+))?$/,D=/subject=([^;?:@&=$,\/]*)/i,m=/body=([^;?:@&=$,\/]*)/i,n=/^#(.*)$/,p=/^((?:http|https|ftp|news):\/\/)?(.*)$/,q=/^(_(?:self|top|parent|blank))$/,u=/^javascript:void\(location\.href='mailto:'\+String\.fromCharCode\(([^)]+)\)(?:\+'(.*)')?\)$/,w=/^javascript:([^(]+)\(([^)]+)\)$/,y=/\s*window.open\(\s*this\.href\s*,\s*(?:'([^']*)'|null)\s*,\s*'([^']*)'\s*\)\s*;\s*return\s*false;*\s*/,A=/(?:^|,)([^=]+)=(\d+|yes|no)/gi,r={id:"advId",dir:"advLangDir",accessKey:"advAccessKey",name:"advName",lang:"advLangCode",tabindex:"advTabIndex",title:"advTitle",type:"advContentType","class":"advCSSClasses",charset:"advCharset",style:"advStyles",rel:"advRel"};CKEDITOR.plugins.link={getSelectedLink:function(b){var a=b.getSelection(),c=a.getSelectedElement();return c&&c.is("a")?c:(a=a.getRanges()[0])?(a.shrink(CKEDITOR.SHRINK_TEXT),b.elementPath(a.getCommonAncestor()).contains("a",1)):null},getEditorAnchors:function(b){for(var a=b.editable(),f=a.isInline()&&!b.plugins.divarea?b.document:a,a=f.getElementsByTag("a"),f=f.getElementsByTag("img"),e=[],d=0,c;c=a.getItem(d++);){(c.data("cke-saved-name")||c.hasAttribute("name"))&&e.push({name:c.data("cke-saved-name")||c.getAttribute("name"),id:c.getAttribute("id")})}for(d=0;c=f.getItem(d++);){(c=this.tryRestoreFakeAnchor(b,c))&&e.push({name:c.getAttribute("name"),id:c.getAttribute("id")})}return e},fakeAnchor:!0,tryRestoreFakeAnchor:function(b,a){if(a&&a.data("cke-real-element-type")&&"anchor"==a.data("cke-real-element-type")){var c=b.restoreRealElement(a);if(c.data("cke-saved-name")){return c}}},parseLinkAttributes:function(h,g){var f=g&&(g.data("cke-saved-href")||g.getAttribute("href"))||"",b=h.plugins.link.compiledProtectionFunction,a=h.config.emailProtection,i,c={};f.match(B)&&("encode"==a?f=f.replace(u,function(l,j,k){k=k||"";return"mailto:"+String.fromCharCode.apply(String,j.split(","))+k.replace(/\\'/g,"'")}):a&&f.replace(w,function(F,k,l){if(k==b.name){c.type="email";F=c.email={};k=/(^')|('$)/g;l=l.match(/[^,\s]+/g);for(var s=l.length,E,j,o=0;o<s;o++){E=decodeURIComponent,j=l[o].replace(k,"").replace(/\\'/g,"'"),j=E(j),E=b.params[o].toLowerCase(),F[E]=j}F.address=[F.name,F.domain].join("@")}}));if(!c.type){if(a=f.match(n)){c.type="anchor",c.anchor={},c.anchor.name=c.anchor.id=a[1]}else{if(a=f.match(C)){i=f.match(D);f=f.match(m);c.type="email";var e=c.email={};e.address=a[1];i&&(e.subject=decodeURIComponent(i[1]));f&&(e.body=decodeURIComponent(f[1]))}else{f&&(i=f.match(p))&&(c.type="url",c.url={},c.url.protocol=i[1],c.url.url=i[2])}}}if(g){if(f=g.getAttribute("target")){c.target={type:f.match(q)?f:"frame",name:f}}else{if(f=(f=g.data("cke-pa-onclick")||g.getAttribute("onclick"))&&f.match(y)){for(c.target={type:"popup",name:f[1]};a=A.exec(f[2]);){"yes"!=a[2]&&"1"!=a[2]||a[1] in {height:1,width:1,top:1,left:1}?isFinite(a[2])&&(c.target[a[1]]=a[2]):c.target[a[1]]=!0}}}var f={},d;for(d in r){(a=g.getAttribute(d))&&(f[r[d]]=a)}if(d=g.data("cke-saved-name")||f.advName){f.advName=d}CKEDITOR.tools.isEmpty(f)||(c.advanced=f)}return c},getLinkAttributes:function(g,f){var e=g.config.emailProtection||"",j={};switch(f.type){case"url":var e=f.url&&void 0!==f.url.protocol?f.url.protocol:"http://",i=f.url&&CKEDITOR.tools.trim(f.url.url)||"";j["data-cke-saved-href"]=0===i.indexOf("/")?i:e+i;break;case"anchor":e=f.anchor&&f.anchor.id;j["data-cke-saved-href"]="#"+(f.anchor&&f.anchor.name||e||"");break;case"email":var h=f.email,i=h.address;switch(e){case"":case"encode":var k=encodeURIComponent(h.subject||""),b=encodeURIComponent(h.body||""),h=[];k&&h.push("subject\x3d"+k);b&&h.push("body\x3d"+b);h=h.length?"?"+h.join("\x26"):"";"encode"==e?(e=["javascript:void(location.href\x3d'mailto:'+",x(i)],h&&e.push("+'",v(h),"'"),e.push(")")):e=["mailto:",i,h];break;default:e=i.split("@",2),h.name=e[0],h.domain=e[1],e=["javascript:",z(g,h)]}j["data-cke-saved-href"]=e.join("")}if(f.target){if("popup"==f.target.type){for(var e=["window.open(this.href, '",f.target.name||"","', '"],a="resizable status location toolbar menubar fullscreen scrollbars dependent".split(" "),i=a.length,k=function(l){f.target[l]&&a.push(l+"\x3d"+f.target[l])},h=0;h<i;h++){a[h]+=f.target[a[h]]?"\x3dyes":"\x3dno"}k("width");k("left");k("height");k("top");e.push(a.join(","),"'); return false;");j["data-cke-pa-onclick"]=e.join("")}else{"notSet"!=f.target.type&&f.target.name&&(j.target=f.target.name)}}if(f.advanced){for(var c in r){(e=f.advanced[r[c]])&&(j[c]=e)}j.name&&(j["data-cke-saved-name"]=j.name)}j["data-cke-saved-href"]&&(j.href=j["data-cke-saved-href"]);c={target:1,onclick:1,"data-cke-pa-onclick":1,"data-cke-saved-name":1};f.advanced&&CKEDITOR.tools.extend(c,r);for(var d in j){delete c[d]}return{set:j,removed:CKEDITOR.tools.objectKeys(c)}}};CKEDITOR.unlinkCommand=function(){};CKEDITOR.unlinkCommand.prototype={exec:function(b){var a=new CKEDITOR.style({element:"a",type:CKEDITOR.STYLE_INLINE,alwaysRemoveElement:1});b.removeStyle(a)},refresh:function(b,a){var c=a.lastElement&&a.lastElement.getAscendant("a",!0);c&&"a"==c.getName()&&c.getAttribute("href")&&c.getChildCount()?this.setState(CKEDITOR.TRISTATE_OFF):this.setState(CKEDITOR.TRISTATE_DISABLED)},contextSensitive:1,startDisabled:1,requiredContent:"a[href]"};CKEDITOR.removeAnchorCommand=function(){};CKEDITOR.removeAnchorCommand.prototype={exec:function(b){var a=b.getSelection(),d=a.createBookmarks(),c;if(a&&(c=a.getSelectedElement())&&(c.getChildCount()?c.is("a"):CKEDITOR.plugins.link.tryRestoreFakeAnchor(b,c))){c.remove(1)}else{if(c=CKEDITOR.plugins.link.getSelectedLink(b)){c.hasAttribute("href")?(c.removeAttributes({name:1,"data-cke-saved-name":1}),c.removeClass("cke_anchor")):c.remove(1)}}a.selectBookmarks(d)},requiredContent:"a[name]"};CKEDITOR.tools.extend(CKEDITOR.config,{linkShowAdvancedTab:!0,linkShowTargetTab:!0})})();(function(){function u(e,b,h){function f(l){if(!(!(d=g[l?"getFirst":"getLast"]())||d.is&&d.isBlockBoundary()||!(c=b.root[l?"getPrevious":"getNext"](CKEDITOR.dom.walker.invisible(!0)))||c.is&&c.isBlockBoundary({br:1}))){e.document.createElement("br")[l?"insertBefore":"insertAfter"](d)}}for(var i=CKEDITOR.plugins.list.listToArray(b.root,h),j=[],a=0;a<b.contents.length;a++){var k=b.contents[a];(k=k.getAscendant("li",!0))&&!k.getCustomData("list_item_processed")&&(j.push(k),CKEDITOR.dom.element.setMarker(h,k,"list_item_processed",!0))}k=null;for(a=0;a<j.length;a++){k=j[a].getCustomData("listarray_index"),i[k].indent=-1}for(a=k+1;a<i.length;a++){if(i[a].indent>i[a-1].indent+1){j=i[a-1].indent+1-i[a].indent;for(k=i[a].indent;i[a]&&i[a].indent>=k;){i[a].indent+=j,a++}a--}}var g=CKEDITOR.plugins.list.arrayToList(i,h,null,e.config.enterMode,b.root.getAttribute("dir")).listNode,d,c;f(!0);f();g.replace(b.root);e.fire("contentDomInvalidated")}function A(a,b){this.name=a;this.context=this.type=b;this.allowedContent=b+" li";this.requiredContent=b}function o(e,f,b,a){for(var c,d;c=e[a?"getLast":"getFirst"](v);){(d=c.getDirection(1))!==f.getDirection(1)&&c.setAttribute("dir",d),c.remove(),b?c[a?"insertBefore":"insertAfter"](b):f.append(c,a)}}function p(a){function b(d){var c=a[d?"getPrevious":"getNext"](r);c&&c.type==CKEDITOR.NODE_ELEMENT&&c.is(a.getName())&&(o(a,c,null,!d),a.remove(),a=c)}b();b(1)}function q(a){return a.type==CKEDITOR.NODE_ELEMENT&&(a.getName() in CKEDITOR.dtd.$block||a.getName() in CKEDITOR.dtd.$listItem)&&CKEDITOR.dtd[a.getName()]["#"]}function B(e,d,h){e.fire("saveSnapshot");h.enlarge(CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS);var f=h.extractContents();d.trim(!1,!0);var i=d.createBookmark(),a=new CKEDITOR.dom.elementPath(d.startContainer),c=a.block,a=a.lastElement.getAscendant("li",1)||c,b=new CKEDITOR.dom.elementPath(h.startContainer),g=b.contains(CKEDITOR.dtd.$listItem),b=b.contains(CKEDITOR.dtd.$list);c?(c=c.getBogus())&&c.remove():b&&(c=b.getPrevious(r))&&x(c)&&c.remove();(c=f.getLast())&&c.type==CKEDITOR.NODE_ELEMENT&&c.is("br")&&c.remove();(c=d.startContainer.getChild(d.startOffset))?f.insertBefore(c):d.startContainer.append(f);g&&(f=z(g))&&(a.contains(g)?(o(f,g.getParent(),g),f.remove()):a.append(f));for(;h.checkStartOfBlock()&&h.checkEndOfBlock();){b=h.startPath();f=b.block;if(!f){break}f.is("li")&&(a=f.getParent(),f.equals(a.getLast(r))&&f.equals(a.getFirst(r))&&(f=a));h.moveToPosition(f,CKEDITOR.POSITION_BEFORE_START);f.remove()}h=h.clone();f=e.editable();h.setEndAt(f,CKEDITOR.POSITION_BEFORE_END);h=new CKEDITOR.dom.walker(h);h.evaluator=function(j){return r(j)&&!x(j)};(h=h.next())&&h.type==CKEDITOR.NODE_ELEMENT&&h.getName() in CKEDITOR.dtd.$list&&p(h);d.moveToBookmark(i);d.select();e.fire("saveSnapshot")}function z(a){return(a=a.getLast(r))&&a.type==CKEDITOR.NODE_ELEMENT&&a.getName() in s?a:null}var s={ol:1,ul:1},w=CKEDITOR.dom.walker.whitespaces(),t=CKEDITOR.dom.walker.bookmark(),r=function(a){return !(w(a)||t(a))},x=CKEDITOR.dom.walker.bogus();CKEDITOR.plugins.list={listToArray:function(e,b,h,f,i){if(!s[e.getName()]){return[]}f||(f=0);h||(h=[]);for(var j=0,l=e.getChildCount();j<l;j++){var k=e.getChild(j);k.type==CKEDITOR.NODE_ELEMENT&&k.getName() in CKEDITOR.dtd.$list&&CKEDITOR.plugins.list.listToArray(k,b,h,f+1);if("li"==k.$.nodeName.toLowerCase()){var g={parent:e,indent:f,element:k,contents:[]};i?g.grandparent=i:(g.grandparent=e.getParent(),g.grandparent&&"li"==g.grandparent.$.nodeName.toLowerCase()&&(g.grandparent=g.grandparent.getParent()));b&&CKEDITOR.dom.element.setMarker(b,k,"listarray_index",h.length);h.push(g);for(var d=0,c=k.getChildCount(),a;d<c;d++){a=k.getChild(d),a.type==CKEDITOR.NODE_ELEMENT&&s[a.getName()]?CKEDITOR.plugins.list.listToArray(a,b,h,f+1,g.grandparent):g.contents.push(a)}}}return h},arrayToList:function(b,k,e,c,f){e||(e=0);if(!b||b.length<e+1){return null}for(var g,i=b[e].parent.getDocument(),h=new CKEDITOR.dom.documentFragment(i),d=null,a=e,m=Math.max(b[e].indent,0),j=null,C,l,ad=c==CKEDITOR.ENTER_P?"p":"div";;){var Y=b[a];g=Y.grandparent;C=Y.element.getDirection(1);if(Y.indent==m){d&&b[a].parent.getName()==d.getName()||(d=b[a].parent.clone(!1,1),f&&d.setAttribute("dir",f),h.append(d));j=d.append(Y.element.clone(0,1));C!=d.getDirection(1)&&j.setAttribute("dir",C);for(g=0;g<Y.contents.length;g++){j.append(Y.contents[g].clone(1,1))}a++}else{if(Y.indent==Math.max(m,0)+1){Y=b[a-1].element.getDirection(1),a=CKEDITOR.plugins.list.arrayToList(b,null,a,c,Y!=C?C:null),!j.getChildCount()&&CKEDITOR.env.needsNbspFiller&&7>=i.$.documentMode&&j.append(i.createText("Â ")),j.append(a.listNode),a=a.nextIndex}else{if(-1==Y.indent&&!e&&g){s[g.getName()]?(j=Y.element.clone(!1,!0),C!=g.getDirection(1)&&j.setAttribute("dir",C)):j=new CKEDITOR.dom.documentFragment(i);var d=g.getDirection(1)!=C,ae=Y.element,ac=ae.getAttribute("class"),af=ae.getAttribute("style"),n=j.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT&&(c!=CKEDITOR.ENTER_BR||d||af||ac),aa,D=Y.contents.length,ab;for(g=0;g<D;g++){if(aa=Y.contents[g],t(aa)&&1<D){n?ab=aa.clone(1,1):j.append(aa.clone(1,1))}else{if(aa.type==CKEDITOR.NODE_ELEMENT&&aa.isBlockBoundary()){d&&!aa.getDirection()&&aa.setAttribute("dir",C);l=aa;var Z=ae.getAttribute("style");Z&&l.setAttribute("style",Z.replace(/([^;])$/,"$1;")+(l.getAttribute("style")||""));ac&&aa.addClass(ac);l=null;ab&&(j.append(ab),ab=null);j.append(aa.clone(1,1))}else{n?(l||(l=i.createElement(ad),j.append(l),d&&l.setAttribute("dir",C)),af&&l.setAttribute("style",af),ac&&l.setAttribute("class",ac),ab&&(l.append(ab),ab=null),l.append(aa.clone(1,1))):j.append(aa.clone(1,1))}}}ab&&((l||j).append(ab),ab=null);j.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT&&a!=b.length-1&&(CKEDITOR.env.needsBrFiller&&(C=j.getLast())&&C.type==CKEDITOR.NODE_ELEMENT&&C.is("br")&&C.remove(),(C=j.getLast(r))&&C.type==CKEDITOR.NODE_ELEMENT&&C.is(CKEDITOR.dtd.$block)||j.append(i.createElement("br")));C=j.$.nodeName.toLowerCase();"div"!=C&&"p"!=C||j.appendBogus();h.append(j);d=null;a++}else{return null}}}l=null;if(b.length<=a||Math.max(b[a].indent,0)<m){break}}if(k){for(b=h.getFirst();b;){if(b.type==CKEDITOR.NODE_ELEMENT&&(CKEDITOR.dom.element.clearMarkers(k,b),b.getName() in CKEDITOR.dtd.$listItem&&(e=b,i=f=c=void 0,c=e.getDirection()))){for(f=e.getParent();f&&!(i=f.getDirection());){f=f.getParent()}c==i&&e.removeAttribute("dir")}b=b.getNextSourceNode()}}return{listNode:h,nextIndex:a}}};var y=/^h[1-6]$/,v=CKEDITOR.dom.walker.nodeType(CKEDITOR.NODE_ELEMENT);A.prototype={exec:function(l){this.refresh(l,l.elementPath());var j=l.config,a=l.getSelection(),K=a&&a.getRanges();if(this.state==CKEDITOR.TRISTATE_OFF){var b=l.editable();if(b.getFirst(r)){var c=1==K.length&&K[0];(j=c&&c.getEnclosedNode())&&j.is&&this.type==j.getName()&&this.setState(CKEDITOR.TRISTATE_ON)}else{j.enterMode==CKEDITOR.ENTER_BR?b.appendBogus():K[0].fixBlock(1,j.enterMode==CKEDITOR.ENTER_P?"p":"div"),a.selectRanges(K)}}for(var j=a.createBookmarks(!0),b=[],f={},K=K.createIterator(),e=0;(c=K.getNextRange())&&++e;){var M=c.getBoundaryNodes(),i=M.startNode,n=M.endNode;i.type==CKEDITOR.NODE_ELEMENT&&"td"==i.getName()&&c.setStartAt(M.startNode,CKEDITOR.POSITION_AFTER_START);n.type==CKEDITOR.NODE_ELEMENT&&"td"==n.getName()&&c.setEndAt(M.endNode,CKEDITOR.POSITION_BEFORE_END);c=c.createIterator();for(c.forceBrBreak=this.state==CKEDITOR.TRISTATE_OFF;M=c.getNextParagraph();){if(!M.getCustomData("list_block")){CKEDITOR.dom.element.setMarker(f,M,"list_block",1);for(var h=l.elementPath(M),i=h.elements,n=0,h=h.blockLimit,L,k=i.length-1;0<=k&&(L=i[k]);k--){if(s[L.getName()]&&h.contains(L)){h.removeCustomData("list_group_object_"+e);(i=L.getCustomData("list_group_object"))?i.contents.push(M):(i={root:L,contents:[M]},b.push(i),CKEDITOR.dom.element.setMarker(f,L,"list_group_object",i));n=1;break}}n||(n=h,n.getCustomData("list_group_object_"+e)?n.getCustomData("list_group_object_"+e).contents.push(M):(i={root:n,contents:[M]},CKEDITOR.dom.element.setMarker(f,n,"list_group_object_"+e,i),b.push(i)))}}}for(L=[];0<b.length;){if(i=b.shift(),this.state==CKEDITOR.TRISTATE_OFF){if(s[i.root.getName()]){K=l;e=i;i=f;c=L;n=CKEDITOR.plugins.list.listToArray(e.root,i);h=[];for(M=0;M<e.contents.length;M++){k=e.contents[M],(k=k.getAscendant("li",!0))&&!k.getCustomData("list_item_processed")&&(h.push(k),CKEDITOR.dom.element.setMarker(i,k,"list_item_processed",!0))}for(var k=e.root.getDocument(),g=void 0,d=void 0,M=0;M<h.length;M++){var m=h[M].getCustomData("listarray_index"),g=n[m].parent;g.is(this.type)||(d=k.createElement(this.type),g.copyAttributes(d,{start:1,type:1}),d.removeStyle("list-style-type"),n[m].parent=d)}i=CKEDITOR.plugins.list.arrayToList(n,i,null,K.config.enterMode);n=void 0;h=i.listNode.getChildCount();for(M=0;M<h&&(n=i.listNode.getChild(M));M++){n.getName()==this.type&&c.push(n)}i.listNode.replace(e.root);K.fire("contentDomInvalidated")}else{n=l;c=i;M=L;h=c.contents;K=c.root.getDocument();e=[];1==h.length&&h[0].equals(c.root)&&(i=K.createElement("div"),h[0].moveChildren&&h[0].moveChildren(i),h[0].append(i),h[0]=i);c=c.contents[0].getParent();for(k=0;k<h.length;k++){c=c.getCommonAncestor(h[k].getParent())}g=n.config.useComputedState;n=i=void 0;g=void 0===g||g;for(k=0;k<h.length;k++){for(d=h[k];m=d.getParent();){if(m.equals(c)){e.push(d);!n&&d.getDirection()&&(n=1);d=d.getDirection(g);null!==i&&(i=i&&i!=d?null:d);break}d=m}}if(!(1>e.length)){h=e[e.length-1].getNext();k=K.createElement(this.type);M.push(k);for(g=M=void 0;e.length;){M=e.shift(),g=K.createElement("li"),d=M,d.is("pre")||y.test(d.getName())||"false"==d.getAttribute("contenteditable")?M.appendTo(g):(M.copyAttributes(g),i&&M.getDirection()&&(g.removeStyle("direction"),g.removeAttribute("dir")),M.moveChildren(g),M.remove()),g.appendTo(k)}i&&n&&k.setAttribute("dir",i);h?k.insertBefore(h):k.appendTo(c)}}}else{this.state==CKEDITOR.TRISTATE_ON&&s[i.root.getName()]&&u.call(this,l,i,f)}}for(k=0;k<L.length;k++){p(L[k])}CKEDITOR.dom.element.clearAllMarkers(f);a.selectBookmarks(j);l.focus()},refresh:function(c,d){var b=d.contains(s,1),a=d.blockLimit||d.root;b&&a.contains(b)?this.setState(b.is(this.type)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF):this.setState(CKEDITOR.TRISTATE_OFF)}};CKEDITOR.plugins.add("list",{requires:"indentlist",init:function(a){a.blockless||(a.addCommand("numberedlist",new A("numberedlist","ol")),a.addCommand("bulletedlist",new A("bulletedlist","ul")),a.ui.addButton&&(a.ui.addButton("NumberedList",{label:a.lang.list.numberedlist,command:"numberedlist",directional:!0,toolbar:"list,10"}),a.ui.addButton("BulletedList",{label:a.lang.list.bulletedlist,command:"bulletedlist",directional:!0,toolbar:"list,20"})),a.on("key",function(b){var g=b.data.domEvent.getKey(),e;if("wysiwyg"==a.mode&&g in {8:1,46:1}){var h=a.getSelection().getRanges()[0],i=h&&h.startPath();if(h&&h.collapsed){var k=8==g,j=a.editable(),f=new CKEDITOR.dom.walker(h.clone());f.evaluator=function(l){return r(l)&&!x(l)};f.guard=function(l,m){return !(m&&l.type==CKEDITOR.NODE_ELEMENT&&l.is("table"))};g=h.clone();if(k){var d;(d=i.contains(s))&&h.checkBoundaryOfElement(d,CKEDITOR.START)&&(d=d.getParent())&&d.is("li")&&(d=z(d))?(e=d,d=d.getPrevious(r),g.moveToPosition(d&&x(d)?d:e,CKEDITOR.POSITION_BEFORE_START)):(f.range.setStartAt(j,CKEDITOR.POSITION_AFTER_START),f.range.setEnd(h.startContainer,h.startOffset),(d=f.previous())&&d.type==CKEDITOR.NODE_ELEMENT&&(d.getName() in s||d.is("li"))&&(d.is("li")||(f.range.selectNodeContents(d),f.reset(),f.evaluator=q,d=f.previous()),e=d,g.moveToElementEditEnd(e),g.moveToPosition(g.endPath().block,CKEDITOR.POSITION_BEFORE_END)));if(e){B(a,g,h),b.cancel()}else{var c=i.contains(s);c&&h.checkBoundaryOfElement(c,CKEDITOR.START)&&(e=c.getFirst(r),h.checkBoundaryOfElement(e,CKEDITOR.START)&&(d=c.getPrevious(r),z(e)?d&&(h.moveToElementEditEnd(d),h.select()):a.execCommand("outdent"),b.cancel()))}}else{if(e=i.contains("li")){if(f.range.setEndAt(j,CKEDITOR.POSITION_BEFORE_END),k=(j=e.getLast(r))&&q(j)?j:e,i=0,(d=f.next())&&d.type==CKEDITOR.NODE_ELEMENT&&d.getName() in s&&d.equals(j)?(i=1,d=f.next()):h.checkBoundaryOfElement(k,CKEDITOR.END)&&(i=2),i&&d){h=h.clone();h.moveToElementEditStart(d);if(1==i&&(g.optimize(),!g.startContainer.equals(e))){for(e=g.startContainer;e.is(CKEDITOR.dtd.$inline);){c=e,e=e.getParent()}c&&g.moveToPosition(c,CKEDITOR.POSITION_AFTER_END)}2==i&&(g.moveToPosition(g.endPath().block,CKEDITOR.POSITION_BEFORE_END),h.endPath().block&&h.moveToPosition(h.endPath().block,CKEDITOR.POSITION_AFTER_START));B(a,g,h);b.cancel()}}else{f.range.setEndAt(j,CKEDITOR.POSITION_BEFORE_END),(d=f.next())&&d.type==CKEDITOR.NODE_ELEMENT&&d.is(s)&&(d=d.getFirst(r),i.block&&h.checkStartOfBlock()&&h.checkEndOfBlock()?(i.block.remove(),h.moveToElementEditStart(d),h.select()):z(d)?(h.moveToElementEditStart(d),h.select()):(h=h.clone(),h.moveToElementEditStart(d),B(a,g,h)),b.cancel())}}setTimeout(function(){a.selectionChange(1)})}}}))}})})();(function(){function ah(c,a,b){return P(a)&&P(b)&&b.equals(a.getNext(function(d){return !(E(d)||F(d)||T(d))}))}function n(a){this.upper=a[0];this.lower=a[1];this.set.apply(this,a.slice(2))}function aa(c){var a=c.element;if(a&&P(a)&&(a=a.getAscendant(c.triggers,!0))&&c.editable.contains(a)){var b=ab(a);if("true"==b.getAttribute("contenteditable")){return a}if(b.is(c.triggers)){return b}}return null}function am(c,a,b){R(c,a);R(c,b);c=a.size.bottom;b=b.size.top;return c&&b?0|(c+b)/2:c||b}function W(c,a,b){return a=a[b?"getPrevious":"getNext"](function(d){return d&&d.type==CKEDITOR.NODE_TEXT&&!E(d)||P(d)&&!T(d)&&!A(c,d)})}function Q(c,a,b){return c>a&&c<b}function ab(b,a){if(b.data("cke-editable")){return null}for(a||(b=b.getParent());b&&!b.data("cke-editable");){if(b.hasAttribute("contenteditable")){return b}b=b.getParent()}return null}function X(c){var a=c.doc,b=G('\x3cspan contenteditable\x3d"false" style\x3d"'+ac+"position:absolute;border-top:1px dashed "+c.boxColor+'"\x3e\x3c/span\x3e',a),d=CKEDITOR.getUrl(this.path+"images/"+(S.hidpi?"hidpi/":"")+"icon"+(c.rtl?"-rtl":"")+".png");U(b,{attach:function(){this.wrap.getParent()||this.wrap.appendTo(c.editable,!0);return this},lineChildren:[U(G('\x3cspan title\x3d"'+c.editor.lang.magicline.title+'" contenteditable\x3d"false"\x3e\x26#8629;\x3c/span\x3e',a),{base:ac+"height:17px;width:17px;"+(c.rtl?"left":"right")+":17px;background:url("+d+") center no-repeat "+c.boxColor+";cursor:pointer;"+(S.hc?"font-size: 15px;line-height:14px;border:1px solid #fff;text-align:center;":"")+(S.hidpi?"background-size: 9px 10px;":""),looks:["top:-8px; border-radius: 2px;","top:-17px; border-radius: 2px 2px 0px 0px;","top:-1px; border-radius: 0px 0px 2px 2px;"]}),U(G(aj,a),{base:ak+"left:0px;border-left-color:"+c.boxColor+";",looks:["border-width:8px 0 8px 8px;top:-8px","border-width:8px 0 0 8px;top:-8px","border-width:0 0 8px 8px;top:0px"]}),U(G(aj,a),{base:ak+"right:0px;border-right-color:"+c.boxColor+";",looks:["border-width:8px 8px 8px 0;top:-8px","border-width:8px 8px 0 0;top:-8px","border-width:0 8px 8px 0;top:0px"]})],detach:function(){this.wrap.getParent()&&this.wrap.remove();return this},mouseNear:function(){R(c,this);var f=c.holdDistance,e=this.size;return e&&Q(c.mouse.y,e.top-f,e.bottom+f)&&Q(c.mouse.x,e.left-f,e.right+f)?!0:!1},place:function(){var e=c.view,f=c.editable,g=c.trigger,i=g.upper,h=g.lower,j=i||h,m=j.getParent(),k={};this.trigger=g;i&&R(c,i,!0);h&&R(c,h,!0);R(c,m,!0);c.inInlineMode&&H(c,!0);m.equals(f)?(k.left=e.scroll.x,k.right=-e.scroll.x,k.width=""):(k.left=j.size.left-j.size.margin.left+e.scroll.x-(c.inInlineMode?e.editable.left+e.editable.border.left:0),k.width=j.size.outerWidth+j.size.margin.left+j.size.margin.right+e.scroll.x,k.right="");i&&h?k.top=i.size.margin.bottom===h.size.margin.top?0|i.size.bottom+i.size.margin.bottom/2:i.size.margin.bottom<h.size.margin.top?i.size.bottom+i.size.margin.bottom:i.size.bottom+i.size.margin.bottom-h.size.margin.top:i?h||(k.top=i.size.bottom+i.size.margin.bottom):k.top=h.size.top-h.size.margin.top;g.is(C)||Q(k.top,e.scroll.y-15,e.scroll.y+5)?(k.top=c.inInlineMode?0:e.scroll.y,this.look(C)):g.is(D)||Q(k.top,e.pane.bottom-5,e.pane.bottom+15)?(k.top=c.inInlineMode?e.editable.height+e.editable.padding.top+e.editable.padding.bottom:e.pane.bottom-1,this.look(D)):(c.inInlineMode&&(k.top-=e.editable.top+e.editable.border.top),this.look(Y));c.inInlineMode&&(k.top--,k.top+=e.editable.scroll.top,k.left+=e.editable.scroll.left);for(var l in k){k[l]=CKEDITOR.tools.cssLength(k[l])}this.setStyles(k)},look:function(f){if(this.oldLook!=f){for(var g=this.lineChildren.length,e;g--;){(e=this.lineChildren[g]).setAttribute("style",e.base+e.looks[0|f/2])}this.oldLook=f}},wrap:new ad("span",c.doc)});for(a=b.lineChildren.length;a--;){b.lineChildren[a].appendTo(b)}b.look(Y);b.appendTo(b.wrap);b.unselectable();b.lineChildren[0].on("mouseup",function(e){b.detach();ae(c,function(g){var f=c.line.trigger;g[f.is(I)?"insertBefore":"insertAfter"](f.is(I)?f.lower:f.upper)},!0);c.editor.focus();S.ie||c.enterMode==CKEDITOR.ENTER_BR||c.hotNode.scrollIntoView();e.data.preventDefault(!0)});b.on("mousedown",function(e){e.data.preventDefault(!0)});c.line=b}function ae(e,a,b){var f=new CKEDITOR.dom.range(e.doc),c=e.editor,d;S.ie&&e.enterMode==CKEDITOR.ENTER_BR?d=e.doc.createText(J):(d=(d=ab(e.element,!0))&&d.data("cke-enter-mode")||e.enterMode,d=new ad(K[d],e.doc),d.is("br")||e.doc.createText(J).appendTo(d));b&&c.fire("saveSnapshot");a(d);f.moveToPosition(d,CKEDITOR.POSITION_AFTER_START);c.getSelection().selectRanges([f]);e.hotNode=d;b&&c.fire("saveSnapshot")}function al(b,a){return{canUndo:!0,modes:{wysiwyg:1},exec:function(){function c(f){var d=S.ie&&9>S.version?" ":J,e=b.hotNode&&b.hotNode.getText()==d&&b.element.equals(b.hotNode)&&b.lastCmdDirection===!!a;ae(b,function(g){e&&b.hotNode&&b.hotNode.remove();g[a?"insertAfter":"insertBefore"](f);g.setAttributes({"data-cke-magicline-hot":1,"data-cke-magicline-dir":!!a});b.lastCmdDirection=!!a});S.ie||b.enterMode==CKEDITOR.ENTER_BR||b.hotNode.scrollIntoView();b.line.detach()}return function(f){f=f.getSelection().getStartElement();var d;f=f.getAscendant(an,1);if(!z(b,f)&&f&&!f.equals(b.editable)&&!f.contains(b.editable)){(d=ab(f))&&"false"==d.getAttribute("contenteditable")&&(f=d);b.element=f;d=W(b,f,!a);var e;P(d)&&d.is(b.triggers)&&d.is(v)&&(!W(b,d,!a)||(e=W(b,d,!a))&&P(e)&&e.is(b.triggers))?c(d):(e=aa(b,f),P(e)&&(W(b,e,!a)?(f=W(b,e,!a))&&P(f)&&f.is(b.triggers)&&c(e):c(e)))}}}()}}function A(c,a){if(!a||a.type!=CKEDITOR.NODE_ELEMENT||!a.$){return !1}var b=c.line;return b.wrap.equals(a)||b.wrap.contains(a)}function P(a){return a&&a.type==CKEDITOR.NODE_ELEMENT&&a.$}function T(b){if(!P(b)){return !1}var a;(a=O(b))||(P(b)?(a={left:1,right:1,center:1},a=!(!a[b.getComputedStyle("float")]&&!a[b.getAttribute("align")])):a=!1);return a}function O(a){return !!{absolute:1,fixed:1}[a.getComputedStyle("position")]}function L(b,a){return P(a)?a.is(b.triggers):null}function z(d,a){if(!a){return !1}for(var b=a.getParents(1),e=b.length;e--;){for(var c=d.tabuList.length;c--;){if(b[e].hasAttribute(d.tabuList[c])){return !0}}}return !1}function ai(c,a,b){a=a[b?"getLast":"getFirst"](function(d){return c.isRelevant(d)&&!d.is(V)});if(!a){return !1}R(c,a);return b?a.size.top>c.mouse.y:a.size.bottom<c.mouse.y}function t(e){var a=e.editable,b=e.mouse,f=e.view,c=e.triggerOffset;H(e);var d=b.y>(e.inInlineMode?f.editable.top+f.editable.height/2:Math.min(f.editable.height,f.pane.height)/2),a=a[d?"getLast":"getFirst"](function(g){return !(E(g)||F(g))});if(!a){return null}A(e,a)&&(a=e.line.wrap[d?"getPrevious":"getNext"](function(g){return !(E(g)||F(g))}));if(!P(a)||T(a)||!L(e,a)){return null}R(e,a);return !d&&0<=a.size.top&&Q(b.y,0,a.size.top+c)?(e=e.inInlineMode||0===f.scroll.y?C:Y,new n([null,a,I,M,e])):d&&a.size.bottom<=f.pane.height&&Q(b.y,a.size.bottom-c,f.pane.height)?(e=e.inInlineMode||Q(a.size.bottom,f.pane.height-c,f.pane.height)?D:Y,new n([a,null,y,M,e])):null}function ap(d){var f=d.mouse,g=d.view,e=d.triggerOffset,h=aa(d);if(!h){return null}R(d,h);var e=Math.min(e,0|h.size.outerHeight/2),i=[],c,b;if(Q(f.y,h.size.top-1,h.size.top+e)){b=!1}else{if(Q(f.y,h.size.bottom-e,h.size.bottom+1)){b=!0}else{return null}}if(T(h)||ai(d,h,b)||h.getParent().is(r)){return null}var a=W(d,h,!b);if(a){if(a&&a.type==CKEDITOR.NODE_TEXT){return null}if(P(a)){if(T(a)||!L(d,a)||a.getParent().is(r)){return null}i=[a,h][b?"reverse":"concat"]().concat([af,M])}}else{h.equals(d.editable[b?"getLast":"getFirst"](d.isRelevant))?(H(d),b&&Q(f.y,h.size.bottom-e,g.pane.height)&&Q(h.size.bottom,g.pane.height-e,g.pane.height)?c=D:Q(f.y,0,h.size.top+e)&&(c=C)):c=Y,i=[null,h][b?"reverse":"concat"]().concat([b?y:I,M,c,h.equals(d.editable[b?"getLast":"getFirst"](d.isRelevant))?b?D:C:Y])}return 0 in i?new n(i):null}function ag(d,f,g,e){for(var h=f.getDocumentPosition(),i={},b={},a={},j={},c=Z.length;c--;){i[Z[c]]=parseInt(f.getComputedStyle.call(f,"border-"+Z[c]+"-width"),10)||0,a[Z[c]]=parseInt(f.getComputedStyle.call(f,"padding-"+Z[c]),10)||0,b[Z[c]]=parseInt(f.getComputedStyle.call(f,"margin-"+Z[c]),10)||0}g&&!e||N(d,e);j.top=h.y-(g?0:d.view.scroll.y);j.left=h.x-(g?0:d.view.scroll.x);j.outerWidth=f.$.offsetWidth;j.outerHeight=f.$.offsetHeight;j.height=j.outerHeight-(a.top+a.bottom+i.top+i.bottom);j.width=j.outerWidth-(a.left+a.right+i.left+i.right);j.bottom=j.top+j.outerHeight;j.right=j.left+j.outerWidth;d.inInlineMode&&(j.scroll={top:f.$.scrollTop,left:f.$.scrollLeft});return U({border:i,padding:a,margin:b,ignoreScroll:g},j,!0)}function R(c,a,b){if(!P(a)){return a.size=null}if(!a.size){a.size={}}else{if(a.size.ignoreScroll==b&&a.size.date>new Date-x){return null}}return U(a.size,ag(c,a,b),{date:+new Date},!0)}function H(b,a){b.view.editable=ag(b,b.editable,a,!0)}function N(c,a){c.view||(c.view={});var b=c.view;if(!(!a&&b&&b.date>new Date-x)){var d=c.win,b=d.getScrollPosition(),d=d.getViewPaneSize();U(c.view,{scroll:{x:b.x,y:b.y,width:c.doc.$.documentElement.scrollWidth-d.width,height:c.doc.$.documentElement.scrollHeight-d.height},pane:{width:d.width,height:d.height,bottom:d.height+b.y},date:+new Date},!0)}}function u(c,f,g,e){for(var h=e,i=e,a=0,k=!1,j=!1,b=c.view.pane.height,d=c.mouse;d.y+a<b&&0<d.y-a;){k||(k=f(h,e));j||(j=f(i,e));!k&&0<d.y-a&&(h=g(c,{x:d.x,y:d.y-a}));!j&&d.y+a<b&&(i=g(c,{x:d.x,y:d.y+a}));if(k&&j){break}a+=2}return new n([h,i,null,null])}CKEDITOR.plugins.add("magicline",{init:function(f){var a=f.config,b=a.magicline_triggerOffset||30,g={editor:f,enterMode:a.enterMode,triggerOffset:b,holdDistance:0|b*(a.magicline_holdDistance||0.5),boxColor:a.magicline_color||"#ff0000",rtl:"rtl"==a.contentsLangDirection,tabuList:["data-cke-hidden-sel"].concat(a.magicline_tabuList||[]),triggers:a.magicline_everywhere?an:{table:1,hr:1,div:1,ul:1,ol:1,dl:1,form:1,blockquote:1}},c,d,e;g.isRelevant=function(h){return P(h)&&!A(g,h)&&!T(h)};f.on("contentDom",function(){var i=f.editable(),j=f.document,h=f.window;U(g,{editable:i,inInlineMode:i.isInline(),doc:j,win:h,hotNode:null},!0);g.boundary=g.inInlineMode?g.editable:g.doc.getDocumentElement();i.is(B.$inline)||(g.inInlineMode&&!O(i)&&i.setStyles({position:"relative",top:null,left:null}),X.call(this,g),N(g),i.attachListener(f,"beforeUndoImage",function(){g.line.detach()}),i.attachListener(f,"beforeGetData",function(){g.line.wrap.getParent()&&(g.line.detach(),f.once("getData",function(){g.line.attach()},null,null,1000))},null,null,0),i.attachListener(g.inInlineMode?j:j.getWindow().getFrame(),"mouseout",function(l){if("wysiwyg"==f.mode){if(g.inInlineMode){var m=l.data.$.clientX;l=l.data.$.clientY;N(g);H(g,!0);var o=g.view.editable,k=g.view.scroll;m>o.left-k.x&&m<o.right-k.x&&l>o.top-k.y&&l<o.bottom-k.y||(clearTimeout(e),e=null,g.line.detach())}else{clearTimeout(e),e=null,g.line.detach()}}}),i.attachListener(i,"keyup",function(){g.hiddenMode=0}),i.attachListener(i,"keydown",function(k){if("wysiwyg"==f.mode){switch(k.data.getKeystroke()){case 2228240:case 16:g.hiddenMode=1,g.line.detach()}}}),i.attachListener(g.inInlineMode?i:j,"mousemove",function(l){d=!0;if("wysiwyg"==f.mode&&!f.readOnly&&!e){var k={x:l.data.$.clientX,y:l.data.$.clientY};e=setTimeout(function(){g.mouse=k;e=g.trigger=null;N(g);d&&!g.hiddenMode&&f.focusManager.hasFocus&&!g.line.mouseNear()&&(g.element=ao(g,!0))&&((g.trigger=t(g)||ap(g)||q(g))&&!z(g,g.trigger.upper||g.trigger.lower)?g.line.attach().place():(g.trigger=null,g.line.detach()),d=!1)},30)}}),i.attachListener(h,"scroll",function(){"wysiwyg"==f.mode&&(g.line.detach(),S.webkit&&(g.hiddenMode=1,clearTimeout(c),c=setTimeout(function(){g.mouseDown||(g.hiddenMode=0)},50)))}),i.attachListener(w?j:h,"mousedown",function(){"wysiwyg"==f.mode&&(g.line.detach(),g.hiddenMode=1,g.mouseDown=1)}),i.attachListener(w?j:h,"mouseup",function(){g.hiddenMode=0;g.mouseDown=0}),f.addCommand("accessPreviousSpace",al(g)),f.addCommand("accessNextSpace",al(g,!0)),f.setKeystroke([[a.magicline_keystrokePrevious,"accessPreviousSpace"],[a.magicline_keystrokeNext,"accessNextSpace"]]),f.on("loadSnapshot",function(){var l,m,o,k;for(k in {p:1,br:1,div:1}){for(l=f.document.getElementsByTag(k),o=l.count();o--;){if((m=l.getItem(o)).data("cke-magicline-hot")){g.hotNode=m;g.lastCmdDirection="true"===m.data("cke-magicline-dir")?!0:!1;return}}}}),this.backdoor={accessFocusSpace:ae,boxTrigger:n,isLine:A,getAscendantTrigger:aa,getNonEmptyNeighbour:W,getSize:ag,that:g,triggerEdge:ap,triggerEditable:t,triggerExpand:q})},this)}});var U=CKEDITOR.tools.extend,ad=CKEDITOR.dom.element,G=ad.createFromHtml,S=CKEDITOR.env,w=CKEDITOR.env.ie&&9>CKEDITOR.env.version,B=CKEDITOR.dtd,K={},I=128,y=64,af=32,M=16,C=4,D=2,Y=1,J="Â ",r=B.$listItem,V=B.$tableContent,v=U({},B.$nonEditable,B.$empty),an=B.$block,x=100,ac="width:0px;height:0px;padding:0px;margin:0px;display:block;z-index:9999;color:#fff;position:absolute;font-size: 0px;line-height:0px;",ak=ac+"border-color:transparent;display:block;border-style:solid;",aj="\x3cspan\x3e"+J+"\x3c/span\x3e";K[CKEDITOR.ENTER_BR]="br";K[CKEDITOR.ENTER_P]="p";K[CKEDITOR.ENTER_DIV]="div";n.prototype={set:function(c,a,b){this.properties=c+a+(b||Y);return this},is:function(a){return(this.properties&a)==a}};var ao=function(){function a(c,b){var d=c.$.elementFromPoint(b.x,b.y);return d&&d.nodeType?new CKEDITOR.dom.element(d):null}return function(b,c,g){if(!b.mouse){return null}var d=b.doc,e=b.line.wrap;g=g||b.mouse;var f=a(d,g);c&&A(b,f)&&(e.hide(),f=a(d,g),e.show());return !f||f.type!=CKEDITOR.NODE_ELEMENT||!f.$||S.ie&&9>S.version&&!b.boundary.equals(f)&&!b.boundary.contains(f)?null:f}}(),E=CKEDITOR.dom.walker.whitespaces(),F=CKEDITOR.dom.walker.nodeType(CKEDITOR.NODE_COMMENT),q=function(){function b(d){var e=d.element,f,g,j;if(!P(e)||e.contains(d.editable)||e.isReadOnly()){return null}j=u(d,function(l,m){return !m.equals(l)},function(l,m){return ao(l,!0,m)},e);f=j.upper;g=j.lower;if(ah(d,f,g)){return j.set(af,8)}if(f&&e.contains(f)){for(;!f.getParent().equals(e);){f=f.getParent()}}else{f=e.getFirst(function(l){return a(d,l)})}if(g&&e.contains(g)){for(;!g.getParent().equals(e);){g=g.getParent()}}else{g=e.getLast(function(l){return a(d,l)})}if(!f||!g){return null}R(d,f);R(d,g);if(!Q(d.mouse.y,f.size.top,g.size.bottom)){return null}for(var e=Number.MAX_VALUE,i,h,k,c;g&&!g.equals(f)&&(h=f.getNext(d.isRelevant));){i=Math.abs(am(d,f,h)-d.mouse.y),i<e&&(e=i,k=f,c=h),f=h,R(d,f)}if(!k||!c||!Q(d.mouse.y,k.size.top,c.size.bottom)){return null}j.upper=k;j.lower=c;return j.set(af,8)}function a(c,d){return !(d&&d.type==CKEDITOR.NODE_TEXT||F(d)||T(d)||A(c,d)||d.type==CKEDITOR.NODE_ELEMENT&&d.$&&d.is("br"))}return function(c){var f=b(c),d;if(d=f){d=f.upper;var e=f.lower;d=!d||!e||T(e)||T(d)||e.equals(d)||d.equals(e)||e.contains(d)||d.contains(e)?!1:L(c,d)&&L(c,e)&&ah(c,d,e)?!0:!1}return d?f:null}}(),Z=["top","left","right","bottom"]})();CKEDITOR.config.magicline_keystrokePrevious=CKEDITOR.CTRL+CKEDITOR.SHIFT+51;CKEDITOR.config.magicline_keystrokeNext=CKEDITOR.CTRL+CKEDITOR.SHIFT+52;(function(){function h(d){if(!d||d.type!=CKEDITOR.NODE_ELEMENT||"form"!=d.getName()){return[]}for(var b=[],c=["style","className"],e=0;e<c.length;e++){var a=d.$.elements.namedItem(c[e]);a&&(a=new CKEDITOR.dom.element(a),b.push([a,a.nextSibling]),a.remove())}return b}function j(d,b){if(d&&d.type==CKEDITOR.NODE_ELEMENT&&"form"==d.getName()&&0<b.length){for(var c=b.length-1;0<=c;c--){var e=b[c][0],a=b[c][1];a?e.insertBefore(a):e.appendTo(d)}}}function i(d,b){var c=h(d),e={},a=d.$;b||(e["class"]=a.className||"",a.className="");e.inline=a.style.cssText||"";b||(a.style.cssText="position: static; overflow: visible");j(c);return e}function f(c,a){var b=h(c),d=c.$;"class" in a&&(d.className=a["class"]);"inline" in a&&(d.style.cssText=a.inline);j(b)}function g(c){if(!c.editable().isInline()){var a=CKEDITOR.instances,b;for(b in a){var d=a[b];"wysiwyg"!=d.mode||d.readOnly||(d=d.document.getBody(),d.setAttribute("contentEditable",!1),d.setAttribute("contentEditable",!0))}c.editable().hasFocus&&(c.toolbox.focus(),c.focus())}}CKEDITOR.plugins.add("maximize",{init:function(p){function c(){var k=b.getViewPaneSize();p.resize(k.width,k.height,null,!0)}if(p.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE){var d=p.lang,a=CKEDITOR.document,b=a.getWindow(),e,l,n,m=CKEDITOR.TRISTATE_OFF;p.addCommand("maximize",{modes:{wysiwyg:!CKEDITOR.env.iOS,source:!CKEDITOR.env.iOS},readOnly:1,editorFocus:!1,exec:function(){var o=p.container.getFirst(function(u){return u.type==CKEDITOR.NODE_ELEMENT&&u.hasClass("cke_inner")}),k=p.ui.space("contents");if("wysiwyg"==p.mode){var r=p.getSelection();e=r&&r.getRanges();l=b.getScrollPosition()}else{var q=p.editable().$;e=!CKEDITOR.env.ie&&[q.selectionStart,q.selectionEnd];l=[q.scrollLeft,q.scrollTop]}if(this.state==CKEDITOR.TRISTATE_OFF){b.on("resize",c);n=b.getScrollPosition();for(r=p.container;r=r.getParent();){r.setCustomData("maximize_saved_styles",i(r)),r.setStyle("z-index",p.config.baseFloatZIndex-5)}k.setCustomData("maximize_saved_styles",i(k,!0));o.setCustomData("maximize_saved_styles",i(o,!0));k={overflow:CKEDITOR.env.webkit?"":"hidden",width:0,height:0};a.getDocumentElement().setStyles(k);!CKEDITOR.env.gecko&&a.getDocumentElement().setStyle("position","fixed");CKEDITOR.env.gecko&&CKEDITOR.env.quirks||a.getBody().setStyles(k);CKEDITOR.env.ie?setTimeout(function(){b.$.scrollTo(0,0)},0):b.$.scrollTo(0,0);o.setStyle("position",CKEDITOR.env.gecko&&CKEDITOR.env.quirks?"fixed":"absolute");o.$.offsetLeft;o.setStyles({"z-index":p.config.baseFloatZIndex-5,left:"0px",top:"0px"});o.addClass("cke_maximized");c();k=o.getDocumentPosition();o.setStyles({left:-1*k.x+"px",top:-1*k.y+"px"});CKEDITOR.env.gecko&&g(p)}else{if(this.state==CKEDITOR.TRISTATE_ON){b.removeListener("resize",c);for(var r=[k,o],s=0;s<r.length;s++){f(r[s],r[s].getCustomData("maximize_saved_styles")),r[s].removeCustomData("maximize_saved_styles")}for(r=p.container;r=r.getParent();){f(r,r.getCustomData("maximize_saved_styles")),r.removeCustomData("maximize_saved_styles")}CKEDITOR.env.ie?setTimeout(function(){b.$.scrollTo(n.x,n.y)},0):b.$.scrollTo(n.x,n.y);o.removeClass("cke_maximized");CKEDITOR.env.webkit&&(o.setStyle("display","inline"),setTimeout(function(){o.setStyle("display","block")},0));p.fire("resize",{outerHeight:p.container.$.offsetHeight,contentsHeight:k.$.offsetHeight,outerWidth:p.container.$.offsetWidth})}}this.toggleState();if(r=this.uiItems[0]){k=this.state==CKEDITOR.TRISTATE_OFF?d.maximize.maximize:d.maximize.minimize,r=CKEDITOR.document.getById(r._.id),r.getChild(1).setHtml(k),r.setAttribute("title",k),r.setAttribute("href",'javascript:void("'+k+'");')}"wysiwyg"==p.mode?e?(CKEDITOR.env.gecko&&g(p),p.getSelection().selectRanges(e),(q=p.getSelection().getStartElement())&&q.scrollIntoView(!0)):b.$.scrollTo(l.x,l.y):(e&&(q.selectionStart=e[0],q.selectionEnd=e[1]),q.scrollLeft=l[0],q.scrollTop=l[1]);e=l=null;m=this.state;p.fire("maximize",this.state)},canUndo:!1});p.ui.addButton&&p.ui.addButton("Maximize",{label:d.maximize.maximize,command:"maximize",toolbar:"tools,10"});p.on("mode",function(){var k=p.getCommand("maximize");k.setState(k.state==CKEDITOR.TRISTATE_DISABLED?CKEDITOR.TRISTATE_DISABLED:m)},null,null,100)}}})})();(function(){var b={canUndo:!1,async:!0,exec:function(a){a.getClipboardData({title:a.lang.pastetext.title},function(d){d&&a.fire("paste",{type:"text",dataValue:d.dataValue,method:"paste",dataTransfer:CKEDITOR.plugins.clipboard.initPasteDataTransfer()});a.fire("afterCommandExec",{name:"pastetext",command:b,returnValue:!!d})})}};CKEDITOR.plugins.add("pastetext",{requires:"clipboard",init:function(a){a.addCommand("pastetext",b);a.ui.addButton&&a.ui.addButton("PasteText",{label:a.lang.pastetext.button,command:"pastetext",toolbar:"clipboard,40"});if(a.config.forcePasteAsPlainText){a.on("beforePaste",function(d){"html"!=d.data.type&&(d.data.type="text")})}a.on("pasteState",function(d){a.getCommand("pastetext").setState(d.data)})}})})();(function(){function c(f,a,b){var i=CKEDITOR.cleanWord;i?b():(f=CKEDITOR.getUrl(f.config.pasteFromWordCleanupFile||a+"filter/default.js"),CKEDITOR.scriptLoader.load(f,b,null,!0));return !i}function d(a){a.data.type="html"}CKEDITOR.plugins.add("pastefromword",{requires:"clipboard",init:function(f){var a=0,b=this.path;f.addCommand("pastefromword",{canUndo:!1,async:!0,exec:function(g){var e=this;a=1;g.once("beforePaste",d);g.getClipboardData({title:g.lang.pastefromword.title},function(i){i&&g.fire("paste",{type:"html",dataValue:i.dataValue,method:"paste",dataTransfer:CKEDITOR.plugins.clipboard.initPasteDataTransfer()});g.fire("afterCommandExec",{name:"pastefromword",command:e,returnValue:!!i})})}});f.ui.addButton&&f.ui.addButton("PasteFromWord",{label:f.lang.pastefromword.toolbar,command:"pastefromword",toolbar:"clipboard,50"});f.on("pasteState",function(e){f.getCommand("pastefromword").setState(e.data)});f.on("paste",function(k){var g=k.data,e=g.dataValue;if(e&&(a||/(class=\"?Mso|style=\"[^\"]*\bmso\-|w:WordDocument)/.test(e))){g.dontFilter=!0;var j=c(f,b,function(){if(j){f.fire("paste",g)}else{if(!f.config.pasteFromWordPromptCleanup||a||confirm(f.lang.pastefromword.confirmCleanup)){g.dataValue=CKEDITOR.cleanWord(e,f)}}a=0});j&&k.cancel()}},null,null,3)}})})();CKEDITOR.plugins.add("removeformat",{init:function(a){a.addCommand("removeFormat",CKEDITOR.plugins.removeformat.commands.removeformat);a.ui.addButton&&a.ui.addButton("RemoveFormat",{label:a.lang.removeformat.toolbar,command:"removeFormat",toolbar:"cleanup,10"})}});CKEDITOR.plugins.removeformat={commands:{removeformat:{exec:function(h){for(var a=h._.removeFormatRegex||(h._.removeFormatRegex=new RegExp("^(?:"+h.config.removeFormatTags.replace(/,/g,"|")+")$","i")),n=h._.removeAttributes||(h._.removeAttributes=h.config.removeFormatAttributes.split(",")),p=CKEDITOR.plugins.removeformat.filter,d=h.getSelection().getRanges(),e=d.createIterator(),f=function(g){return g.type==CKEDITOR.NODE_ELEMENT},l;l=e.getNextRange();){l.collapsed||l.enlarge(CKEDITOR.ENLARGE_ELEMENT);var c=l.createBookmark(),k=c.startNode,m=c.endNode,b=function(i){for(var g=h.elementPath(i),o=g.elements,j=1,q;(q=o[j])&&!q.equals(g.block)&&!q.equals(g.blockLimit);j++){a.test(q.getName())&&p(h,q)&&i.breakParent(q)}};b(k);if(m){for(b(m),k=k.getNextSourceNode(!0,CKEDITOR.NODE_ELEMENT);k&&!k.equals(m);){if(k.isReadOnly()){if(k.getPosition(m)&CKEDITOR.POSITION_CONTAINS){break}k=k.getNext(f)}else{b=k.getNextSourceNode(!1,CKEDITOR.NODE_ELEMENT),"img"==k.getName()&&k.data("cke-realelement")||!p(h,k)||(a.test(k.getName())?k.remove(1):(k.removeAttributes(n),h.fire("removeFormatCleanup",k))),k=b}}}l.moveToBookmark(c)}h.forceNextSelectionCheck();h.getSelection().selectRanges(d)}}},filter:function(a,h){for(var e=a._.removeFormatFilters||[],f=0;f<e.length;f++){if(!1===e[f](h)){return !1}}return !0}};CKEDITOR.editor.prototype.addRemoveFormatFilter=function(a){this._.removeFormatFilters||(this._.removeFormatFilters=[]);this._.removeFormatFilters.push(a)};CKEDITOR.config.removeFormatTags="b,big,cite,code,del,dfn,em,font,i,ins,kbd,q,s,samp,small,span,strike,strong,sub,sup,tt,u,var";CKEDITOR.config.removeFormatAttributes="class,style,lang,width,height,align,hspace,valign";(function(){var b={preserveState:!0,editorFocus:!1,readOnly:1,exec:function(a){this.toggleState();this.refresh(a)},refresh:function(a){if(a.document){var e=this.state==CKEDITOR.TRISTATE_ON?"attachClass":"removeClass";a.editable()[e]("cke_show_borders")}}};CKEDITOR.plugins.add("showborders",{modes:{wysiwyg:1},onLoad:function(){var a;a=(CKEDITOR.env.ie6Compat?[".%1 table.%2,",".%1 table.%2 td, .%1 table.%2 th","{","border : #d3d3d3 1px dotted","}"]:".%1 table.%2,;.%1 table.%2 \x3e tr \x3e td, .%1 table.%2 \x3e tr \x3e th,;.%1 table.%2 \x3e tbody \x3e tr \x3e td, .%1 table.%2 \x3e tbody \x3e tr \x3e th,;.%1 table.%2 \x3e thead \x3e tr \x3e td, .%1 table.%2 \x3e thead \x3e tr \x3e th,;.%1 table.%2 \x3e tfoot \x3e tr \x3e td, .%1 table.%2 \x3e tfoot \x3e tr \x3e th;{;border : #d3d3d3 1px dotted;}".split(";")).join("").replace(/%2/g,"cke_show_border").replace(/%1/g,"cke_show_borders ");CKEDITOR.addCss(a)},init:function(a){var e=a.addCommand("showborders",b);e.canUndo=!1;!1!==a.config.startupShowBorders&&e.setState(CKEDITOR.TRISTATE_ON);a.on("mode",function(){e.state!=CKEDITOR.TRISTATE_DISABLED&&e.refresh(a)},null,null,100);a.on("contentDom",function(){e.state!=CKEDITOR.TRISTATE_DISABLED&&e.refresh(a)});a.on("removeFormatCleanup",function(c){c=c.data;a.getCommand("showborders").state==CKEDITOR.TRISTATE_ON&&c.is("table")&&(!c.hasAttribute("border")||0>=parseInt(c.getAttribute("border"),10))&&c.addClass("cke_show_border")})},afterInit:function(a){var e=a.dataProcessor;a=e&&e.dataFilter;e=e&&e.htmlFilter;a&&a.addRules({elements:{table:function(d){d=d.attributes;var h=d["class"],c=parseInt(d.border,10);c&&!(0>=c)||h&&-1!=h.indexOf("cke_show_border")||(d["class"]=(h||"")+" cke_show_border")}}});e&&e.addRules({elements:{table:function(c){c=c.attributes;var d=c["class"];d&&(c["class"]=d.replace("cke_show_border","").replace(/\s{2}/," ").replace(/^\s+|\s+$/,""))}}})}});CKEDITOR.on("dialogDefinition",function(a){var e=a.data.name;if("table"==e||"tableProperties"==e){if(a=a.data.definition,e=a.getContents("info").get("txtBorder"),e.commit=CKEDITOR.tools.override(e.commit,function(c){return function(j,d){c.apply(this,arguments);var i=parseInt(this.getValue(),10);d[!i||0>=i?"addClass":"removeClass"]("cke_show_border")}}),a=(a=a.getContents("advanced"))&&a.get("advCSSClasses")){a.setup=CKEDITOR.tools.override(a.setup,function(c){return function(){c.apply(this,arguments);this.setValue(this.getValue().replace(/cke_show_border/,""))}}),a.commit=CKEDITOR.tools.override(a.commit,function(c){return function(g,d){c.apply(this,arguments);parseInt(d.getAttribute("border"),10)||d.addClass("cke_show_border")}})}}})})();(function(){CKEDITOR.plugins.add("sourcearea",{init:function(a){function d(){var c=e&&this.equals(CKEDITOR.document.getActive());this.hide();this.setStyle("height",this.getParent().$.clientHeight+"px");this.setStyle("width",this.getParent().$.clientWidth+"px");this.show();c&&this.focus()}if(a.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE){var f=CKEDITOR.plugins.sourcearea;a.addMode("source",function(c){var g=a.ui.space("contents").getDocument().createElement("textarea");g.setStyles(CKEDITOR.tools.extend({width:CKEDITOR.env.ie7Compat?"99%":"100%",height:"100%",resize:"none",outline:"none","text-align":"left"},CKEDITOR.tools.cssVendorPrefix("tab-size",a.config.sourceAreaTabSize||4)));g.setAttribute("dir","ltr");g.addClass("cke_source").addClass("cke_reset").addClass("cke_enable_context_menu");a.ui.space("contents").append(g);g=a.editable(new b(a,g));g.setData(a.getData(1));CKEDITOR.env.ie&&(g.attachListener(a,"resize",d,g),g.attachListener(CKEDITOR.document.getWindow(),"resize",d,g),CKEDITOR.tools.setTimeout(d,0,g));a.fire("ariaWidget",this);c()});a.addCommand("source",f.commands.source);a.ui.addButton&&a.ui.addButton("Source",{label:a.lang.sourcearea.toolbar,command:"source",toolbar:"mode,10"});a.on("mode",function(){a.getCommand("source").setState("source"==a.mode?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF)});var e=CKEDITOR.env.ie&&9==CKEDITOR.env.version}}});var b=CKEDITOR.tools.createClass({base:CKEDITOR.editable,proto:{setData:function(a){this.setValue(a);this.status="ready";this.editor.fire("dataReady")},getData:function(){return this.getValue()},insertHtml:function(){},insertElement:function(){},insertText:function(){},setReadOnly:function(a){this[(a?"set":"remove")+"Attribute"]("readOnly","readonly")},detach:function(){b.baseProto.detach.call(this);this.clearCustomData();this.remove()}}})})();CKEDITOR.plugins.sourcearea={commands:{source:{modes:{wysiwyg:1,source:1},editorFocus:!1,readOnly:1,exec:function(b){"wysiwyg"==b.mode&&b.fire("saveSnapshot");b.getCommand("source").setState(CKEDITOR.TRISTATE_DISABLED);b.setMode("source"==b.mode?"wysiwyg":"source")},canUndo:!1}}};CKEDITOR.plugins.add("specialchar",{availableLangs:{af:1,ar:1,bg:1,ca:1,cs:1,cy:1,da:1,de:1,"de-ch":1,el:1,en:1,"en-gb":1,eo:1,es:1,et:1,eu:1,fa:1,fi:1,fr:1,"fr-ca":1,gl:1,he:1,hr:1,hu:1,id:1,it:1,ja:1,km:1,ko:1,ku:1,lt:1,lv:1,nb:1,nl:1,no:1,pl:1,pt:1,"pt-br":1,ru:1,si:1,sk:1,sl:1,sq:1,sv:1,th:1,tr:1,tt:1,ug:1,uk:1,vi:1,zh:1,"zh-cn":1},requires:"dialog",init:function(a){var c=this;CKEDITOR.dialog.add("specialchar",this.path+"dialogs/specialchar.js");a.addCommand("specialchar",{exec:function(){var b=a.langCode,b=c.availableLangs[b]?b:c.availableLangs[b.replace(/-.*/,"")]?b.replace(/-.*/,""):"en";CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(c.path+"dialogs/lang/"+b+".js"),function(){CKEDITOR.tools.extend(a.lang.specialchar,c.langEntries[b]);a.openDialog("specialchar")})},modes:{wysiwyg:1},canUndo:!1});a.ui.addButton&&a.ui.addButton("SpecialChar",{label:a.lang.specialchar.toolbar,command:"specialchar",toolbar:"insert,50"})}});CKEDITOR.config.specialChars="! \x26quot; # $ % \x26amp; ' ( ) * + - . / 0 1 2 3 4 5 6 7 8 9 : ; \x26lt; \x3d \x26gt; ? @ A B C D E F G H I J K L M N O P Q R S T U V W X Y Z [ ] ^ _ ` a b c d e f g h i j k l m n o p q r s t u v w x y z { | } ~ \x26euro; \x26lsquo; \x26rsquo; \x26ldquo; \x26rdquo; \x26ndash; \x26mdash; \x26iexcl; \x26cent; \x26pound; \x26curren; \x26yen; \x26brvbar; \x26sect; \x26uml; \x26copy; \x26ordf; \x26laquo; \x26not; \x26reg; \x26macr; \x26deg; \x26sup2; \x26sup3; \x26acute; \x26micro; \x26para; \x26middot; \x26cedil; \x26sup1; \x26ordm; \x26raquo; \x26frac14; \x26frac12; \x26frac34; \x26iquest; \x26Agrave; \x26Aacute; \x26Acirc; \x26Atilde; \x26Auml; \x26Aring; \x26AElig; \x26Ccedil; \x26Egrave; \x26Eacute; \x26Ecirc; \x26Euml; \x26Igrave; \x26Iacute; \x26Icirc; \x26Iuml; \x26ETH; \x26Ntilde; \x26Ograve; \x26Oacute; \x26Ocirc; \x26Otilde; \x26Ouml; \x26times; \x26Oslash; \x26Ugrave; \x26Uacute; \x26Ucirc; \x26Uuml; \x26Yacute; \x26THORN; \x26szlig; \x26agrave; \x26aacute; \x26acirc; \x26atilde; \x26auml; \x26aring; \x26aelig; \x26ccedil; \x26egrave; \x26eacute; \x26ecirc; \x26euml; \x26igrave; \x26iacute; \x26icirc; \x26iuml; \x26eth; \x26ntilde; \x26ograve; \x26oacute; \x26ocirc; \x26otilde; \x26ouml; \x26divide; \x26oslash; \x26ugrave; \x26uacute; \x26ucirc; \x26uuml; \x26yacute; \x26thorn; \x26yuml; \x26OElig; \x26oelig; \x26#372; \x26#374 \x26#373 \x26#375; \x26sbquo; \x26#8219; \x26bdquo; \x26hellip; \x26trade; \x26#9658; \x26bull; \x26rarr; \x26rArr; \x26hArr; \x26diams; \x26asymp;".split(" ");CKEDITOR.plugins.add("menubutton",{requires:"button,menu",onLoad:function(){var b=function(a){var c=this._,g=c.menu;c.state!==CKEDITOR.TRISTATE_DISABLED&&(c.on&&g?g.hide():(c.previousState=c.state,g||(g=c.menu=new CKEDITOR.menu(a,{panel:{className:"cke_menu_panel",attributes:{"aria-label":a.lang.common.options}}}),g.onHide=CKEDITOR.tools.bind(function(){var d=this.command?a.getCommand(this.command).modes:this.modes;this.setState(!d||d[a.mode]?c.previousState:CKEDITOR.TRISTATE_DISABLED);c.on=0},this),this.onMenu&&g.addListener(this.onMenu)),this.setState(CKEDITOR.TRISTATE_ON),c.on=1,setTimeout(function(){g.show(CKEDITOR.document.getById(c.id),4)},0)))};CKEDITOR.ui.menuButton=CKEDITOR.tools.createClass({base:CKEDITOR.ui.button,$:function(a){delete a.panel;this.base(a);this.hasArrow=!0;this.click=b},statics:{handler:{create:function(a){return new CKEDITOR.ui.menuButton(a)}}}})},beforeInit:function(b){b.ui.addHandler(CKEDITOR.UI_MENUBUTTON,CKEDITOR.ui.menuButton.handler)}});CKEDITOR.UI_MENUBUTTON="menubutton";CKEDITOR.plugins.add("scayt",{requires:"menubutton,dialog",tabToOpen:null,dialogName:"scaytDialog",init:function(d){var a=this,b=CKEDITOR.plugins.scayt;this.bindEvents(d);this.parseConfig(d);this.addRule(d);CKEDITOR.dialog.add(this.dialogName,CKEDITOR.getUrl(this.path+"dialogs/options.js"));this.addMenuItems(d);var e=d.lang.scayt,c=CKEDITOR.env;d.ui.add("Scayt",CKEDITOR.UI_MENUBUTTON,{label:e.text_title,title:d.plugins.wsc?d.lang.wsc.title:e.text_title,modes:{wysiwyg:!(c.ie&&(8>c.version||c.quirks))},toolbar:"spellchecker,20",refresh:function(){var f=d.ui.instances.Scayt.getState();d.scayt&&(f=b.state.scayt[d.name]?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF);d.fire("scaytButtonState",f)},onRender:function(){var f=this;d.on("scaytButtonState",function(g){void 0!==typeof g.data&&f.setState(g.data)})},onMenu:function(){var f=d.scayt;d.getMenuItem("scaytToggle").label=d.lang.scayt[f&&b.state.scayt[d.name]?"btn_disable":"btn_enable"];f={scaytToggle:CKEDITOR.TRISTATE_OFF,scaytOptions:f?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,scaytLangs:f?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,scaytDict:f?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,scaytAbout:f?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,WSC:d.plugins.wsc?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED};d.config.scayt_uiTabs[0]||delete f.scaytOptions;d.config.scayt_uiTabs[1]||delete f.scaytLangs;d.config.scayt_uiTabs[2]||delete f.scaytDict;return f}});d.contextMenu&&d.addMenuItems&&(d.contextMenu.addListener(function(g,h){var j=d.scayt,f,i;j&&(i=j.getSelectionNode())&&(f=a.menuGenerator(d,i),j.showBanner("."+d.contextMenu._.definition.panel.className.split(" ").join(" .")));return f}),d.contextMenu._.onHide=CKEDITOR.tools.override(d.contextMenu._.onHide,function(f){return function(){var g=d.scayt;g&&g.hideBanner();return f.apply(this)}}))},addMenuItems:function(d){var a=this,b=CKEDITOR.plugins.scayt;d.addMenuGroup("scaytButton");for(var e=d.config.scayt_contextMenuItemsOrder.split("|"),c=0;c<e.length;c++){e[c]="scayt_"+e[c]}if((e=["grayt_description","grayt_suggest","grayt_control"].concat(e))&&e.length){for(c=0;c<e.length;c++){d.addMenuGroup(e[c],c-10)}}d.addCommand("scaytToggle",{exec:function(f){var g=f.scayt;b.state.scayt[f.name]=!b.state.scayt[f.name];!0===b.state.scayt[f.name]?g||b.createScayt(f):g&&b.destroy(f)}});d.addCommand("scaytAbout",{exec:function(f){f.scayt.tabToOpen="about";f.lockSelection();f.openDialog(a.dialogName)}});d.addCommand("scaytOptions",{exec:function(f){f.scayt.tabToOpen="options";f.lockSelection();f.openDialog(a.dialogName)}});d.addCommand("scaytLangs",{exec:function(f){f.scayt.tabToOpen="langs";f.lockSelection();f.openDialog(a.dialogName)}});d.addCommand("scaytDict",{exec:function(f){f.scayt.tabToOpen="dictionaries";f.lockSelection();f.openDialog(a.dialogName)}});e={scaytToggle:{label:d.lang.scayt.btn_enable,group:"scaytButton",command:"scaytToggle"},scaytAbout:{label:d.lang.scayt.btn_about,group:"scaytButton",command:"scaytAbout"},scaytOptions:{label:d.lang.scayt.btn_options,group:"scaytButton",command:"scaytOptions"},scaytLangs:{label:d.lang.scayt.btn_langs,group:"scaytButton",command:"scaytLangs"},scaytDict:{label:d.lang.scayt.btn_dictionaries,group:"scaytButton",command:"scaytDict"}};d.plugins.wsc&&(e.WSC={label:d.lang.wsc.toolbar,group:"scaytButton",onClick:function(){var f=CKEDITOR.plugins.scayt,h=d.scayt,g=d.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?d.container.getText():d.document.getBody().getText();(g=g.replace(/\s/g,""))?(h&&f.state.scayt[d.name]&&h.setMarkupPaused&&h.setMarkupPaused(!0),d.lockSelection(),d.execCommand("checkspell")):alert("Nothing to check!")}});d.addMenuItems(e)},bindEvents:function(e){var g=CKEDITOR.plugins.scayt,a=e.elementMode==CKEDITOR.ELEMENT_MODE_INLINE,f=function(){g.destroy(e)},b=function(){!g.state.scayt[e.name]||e.readOnly||e.scayt||g.createScayt(e)},c=function(){var h=e.editable();h.attachListener(h,"focus",function(l){CKEDITOR.plugins.scayt&&!e.scayt&&setTimeout(b,0);l=CKEDITOR.plugins.scayt&&CKEDITOR.plugins.scayt.state.scayt[e.name]&&e.scayt;var k,j;if((a||l)&&e._.savedSelection){l=e._.savedSelection.getSelectedElement();l=!l&&e._.savedSelection.getRanges();for(var i=0;i<l.length;i++){j=l[i],"string"===typeof j.startContainer.$.nodeValue&&(k=j.startContainer.getText().length,(k<j.startOffset||k<j.endOffset)&&e.unlockSelection(!1))}}},this,null,-10)},d=function(){a?e.config.scayt_inlineModeImmediateMarkup?b():(e.on("blur",function(){setTimeout(f,0)}),e.on("focus",b),e.focusManager.hasFocus&&b()):b();c();var h=e.editable();h.attachListener(h,"mousedown",function(j){j=j.data.getTarget();var i=e.widgets&&e.widgets.getByElement(j);i&&(i.wrapper=j.getAscendant(function(k){return k.hasAttribute("data-cke-widget-wrapper")},!0))},this,null,-10)};e.on("contentDom",d);e.on("beforeCommandExec",function(h){var i=e.scayt,j=null,k=!1,l=!0;h.data.name in g.options.disablingCommandExec&&"wysiwyg"==e.mode?i&&(g.destroy(e),e.fire("scaytButtonState",CKEDITOR.TRISTATE_DISABLED)):"bold"!==h.data.name&&"italic"!==h.data.name&&"underline"!==h.data.name&&"strike"!==h.data.name&&"subscript"!==h.data.name&&"superscript"!==h.data.name&&"enter"!==h.data.name&&"cut"!==h.data.name&&"language"!==h.data.name||!i||("cut"===h.data.name&&(l=!1,k=!0),"language"===h.data.name&&(j=(j=e.plugins.language.getCurrentLangElement(e))&&j.$,k=!0),e.fire("reloadMarkupScayt",{removeOptions:{removeInside:l,forceBookmark:k,selectionNode:j},timeout:0}))});e.on("beforeSetMode",function(h){if("source"==h.data){if(h=e.scayt){g.destroy(e),e.fire("scaytButtonState",CKEDITOR.TRISTATE_DISABLED)}e.document&&e.document.getBody().removeAttribute("_jquid")}});e.on("afterCommandExec",function(h){"wysiwyg"!=e.mode||"undo"!=h.data.name&&"redo"!=h.data.name||setTimeout(function(){var j=e.scayt,i=j&&j.getScaytLangList();i&&i.ltr&&i.rtl&&j.fire("startSpellCheck, startGrammarCheck")},250)});e.on("readOnly",function(h){var i;h&&(i=e.scayt,!0===h.editor.readOnly?i&&i.fire("removeMarkupInDocument",{}):i?i.fire("startSpellCheck, startGrammarCheck"):"wysiwyg"==h.editor.mode&&!0===g.state.scayt[h.editor.name]&&(g.createScayt(e),h.editor.fire("scaytButtonState",CKEDITOR.TRISTATE_ON)))});e.on("beforeDestroy",f);e.on("setData",function(){f();(e.elementMode==CKEDITOR.ELEMENT_MODE_INLINE||e.plugins.divarea)&&d()},this,null,50);e.on("reloadMarkupScayt",function(h){var i=h.data&&h.data.removeOptions;setTimeout(function(){var k=e.scayt,j=k&&k.getScaytLangList();j&&j.ltr&&j.rtl&&(e.document.fire("keydown",new CKEDITOR.dom.event({keyCode:37})),k.removeMarkupInSelectionNode(i),k.fire("startSpellCheck, startGrammarCheck"))},h.data&&h.data.timeout||0)});e.on("insertElement",function(){e.fire("reloadMarkupScayt",{removeOptions:{forceBookmark:!0}})},this,null,50);e.on("insertHtml",function(){e.fire("reloadMarkupScayt")},this,null,50);e.on("insertText",function(){e.fire("reloadMarkupScayt")},this,null,50);e.on("scaytDialogShown",function(h){h.data.selectPage(e.scayt.tabToOpen)})},parseConfig:function(d){var f=CKEDITOR.plugins.scayt;f.replaceOldOptionsNames(d.config);"boolean"!==typeof d.config.scayt_autoStartup&&(d.config.scayt_autoStartup=!1);f.state.scayt[d.name]=d.config.scayt_autoStartup;"boolean"!==typeof d.config.grayt_autoStartup&&(d.config.grayt_autoStartup=!1);"boolean"!==typeof d.config.scayt_inlineModeImmediateMarkup&&(d.config.scayt_inlineModeImmediateMarkup=!1);f.state.grayt[d.name]=d.config.grayt_autoStartup;d.config.scayt_contextCommands||(d.config.scayt_contextCommands="ignore|ignoreall|add");d.config.scayt_contextMenuItemsOrder||(d.config.scayt_contextMenuItemsOrder="suggest|moresuggest|control");d.config.scayt_sLang||(d.config.scayt_sLang="en_US");if(void 0===d.config.scayt_maxSuggestions||"number"!=typeof d.config.scayt_maxSuggestions||0>d.config.scayt_maxSuggestions){d.config.scayt_maxSuggestions=5}if(void 0===d.config.scayt_minWordLength||"number"!=typeof d.config.scayt_minWordLength||1>d.config.scayt_minWordLength){d.config.scayt_minWordLength=4}if(void 0===d.config.scayt_customDictionaryIds||"string"!==typeof d.config.scayt_customDictionaryIds){d.config.scayt_customDictionaryIds=""}if(void 0===d.config.scayt_userDictionaryName||"string"!==typeof d.config.scayt_userDictionaryName){d.config.scayt_userDictionaryName=null}if("string"===typeof d.config.scayt_uiTabs&&3===d.config.scayt_uiTabs.split(",").length){var g=[],e=[];d.config.scayt_uiTabs=d.config.scayt_uiTabs.split(",");CKEDITOR.tools.search(d.config.scayt_uiTabs,function(i){1===Number(i)||0===Number(i)?(e.push(!0),g.push(Number(i))):e.push(!1)});null===CKEDITOR.tools.search(e,!1)?d.config.scayt_uiTabs=g:d.config.scayt_uiTabs=[1,1,1]}else{d.config.scayt_uiTabs=[1,1,1]}"string"!=typeof d.config.scayt_serviceProtocol&&(d.config.scayt_serviceProtocol=null);"string"!=typeof d.config.scayt_serviceHost&&(d.config.scayt_serviceHost=null);"string"!=typeof d.config.scayt_servicePort&&(d.config.scayt_servicePort=null);"string"!=typeof d.config.scayt_servicePath&&(d.config.scayt_servicePath=null);d.config.scayt_moreSuggestions||(d.config.scayt_moreSuggestions="on");"string"!==typeof d.config.scayt_customerId&&(d.config.scayt_customerId="1:WvF0D4-UtPqN1-43nkD4-NKvUm2-daQqk3-LmNiI-z7Ysb4-mwry24-T8YrS3-Q2tpq2");"string"!==typeof d.config.scayt_srcUrl&&(f=document.location.protocol,f=-1!=f.search(/https?:/)?f:"http:",d.config.scayt_srcUrl=f+"//svc.webspellchecker.net/spellcheck31/lf/scayt3/ckscayt/ckscayt.js");"boolean"!==typeof CKEDITOR.config.scayt_handleCheckDirty&&(CKEDITOR.config.scayt_handleCheckDirty=!0);"boolean"!==typeof CKEDITOR.config.scayt_handleUndoRedo&&(CKEDITOR.config.scayt_handleUndoRedo=!0);CKEDITOR.config.scayt_handleUndoRedo=CKEDITOR.plugins.undo?CKEDITOR.config.scayt_handleUndoRedo:!1;"boolean"!==typeof d.config.scayt_multiLanguageMode&&(d.config.scayt_multiLanguageMode=!1);"object"!==typeof d.config.scayt_multiLanguageStyles&&(d.config.scayt_multiLanguageStyles={});d.config.scayt_ignoreAllCapsWords&&"boolean"!==typeof d.config.scayt_ignoreAllCapsWords&&(d.config.scayt_ignoreAllCapsWords=!1);d.config.scayt_ignoreDomainNames&&"boolean"!==typeof d.config.scayt_ignoreDomainNames&&(d.config.scayt_ignoreDomainNames=!1);d.config.scayt_ignoreWordsWithMixedCases&&"boolean"!==typeof d.config.scayt_ignoreWordsWithMixedCases&&(d.config.scayt_ignoreWordsWithMixedCases=!1);d.config.scayt_ignoreWordsWithNumbers&&"boolean"!==typeof d.config.scayt_ignoreWordsWithNumbers&&(d.config.scayt_ignoreWordsWithNumbers=!1);if(d.config.scayt_disableOptionsStorage){var f=CKEDITOR.tools.isArray(d.config.scayt_disableOptionsStorage)?d.config.scayt_disableOptionsStorage:"string"===typeof d.config.scayt_disableOptionsStorage?[d.config.scayt_disableOptionsStorage]:void 0,h="all options lang ignore-all-caps-words ignore-domain-names ignore-words-with-mixed-cases ignore-words-with-numbers".split(" "),a=["lang","ignore-all-caps-words","ignore-domain-names","ignore-words-with-mixed-cases","ignore-words-with-numbers"],b=CKEDITOR.tools.search,c=CKEDITOR.tools.indexOf;d.config.scayt_disableOptionsStorage=function(j){for(var l=[],i=0;i<j.length;i++){var k=j[i],m=!!b(j,"options");if(!b(h,k)||m&&b(a,function(n){if("lang"===n){return !1}})){return}b(a,k)&&a.splice(c(a,k),1);if("all"===k||m&&b(j,"lang")){return[]}"options"===k&&(a=["lang"])}return l=l.concat(a)}(f)}},addRule:function(d){var f=CKEDITOR.plugins.scayt,g=d.dataProcessor,e=g&&g.htmlFilter,h=d._.elementsPath&&d._.elementsPath.filters,g=g&&g.dataFilter,a=d.addRemoveFormatFilter,b=function(i){if(d.scayt&&(i.hasAttribute(f.options.data_attribute_name)||i.hasAttribute(f.options.problem_grammar_data_attribute))){return !1}},c=function(i){var j=!0;d.scayt&&(i.hasAttribute(f.options.data_attribute_name)||i.hasAttribute(f.options.problem_grammar_data_attribute))&&(j=!1);return j};h&&h.push(b);g&&g.addRules({elements:{span:function(j){var k=j.hasClass(f.options.misspelled_word_class)&&j.attributes[f.options.data_attribute_name],i=j.hasClass(f.options.problem_grammar_class)&&j.attributes[f.options.problem_grammar_data_attribute];f&&(k||i)&&delete j.name;return j}}});e&&e.addRules({elements:{span:function(j){var k=j.hasClass(f.options.misspelled_word_class)&&j.attributes[f.options.data_attribute_name],i=j.hasClass(f.options.problem_grammar_class)&&j.attributes[f.options.problem_grammar_data_attribute];f&&(k||i)&&delete j.name;return j}}});a&&a.call(d,c)},scaytMenuDefinition:function(a){var c=this;a=a.scayt;return{scayt:{scayt_ignore:{label:a.getLocal("btn_ignore"),group:"scayt_control",order:1,exec:function(b){b.scayt.ignoreWord()}},scayt_ignoreall:{label:a.getLocal("btn_ignoreAll"),group:"scayt_control",order:2,exec:function(b){b.scayt.ignoreAllWords()}},scayt_add:{label:a.getLocal("btn_addWord"),group:"scayt_control",order:3,exec:function(b){var d=b.scayt;setTimeout(function(){d.addWordToUserDictionary()},10)}},scayt_option:{label:a.getLocal("btn_options"),group:"scayt_control",order:4,exec:function(b){b.scayt.tabToOpen="options";b.lockSelection();b.openDialog(c.dialogName)},verification:function(b){return 1==b.config.scayt_uiTabs[0]?!0:!1}},scayt_language:{label:a.getLocal("btn_langs"),group:"scayt_control",order:5,exec:function(b){b.scayt.tabToOpen="langs";b.lockSelection();b.openDialog(c.dialogName)},verification:function(b){return 1==b.config.scayt_uiTabs[1]?!0:!1}},scayt_dictionary:{label:a.getLocal("btn_dictionaries"),group:"scayt_control",order:6,exec:function(b){b.scayt.tabToOpen="dictionaries";b.lockSelection();b.openDialog(c.dialogName)},verification:function(b){return 1==b.config.scayt_uiTabs[2]?!0:!1}},scayt_about:{label:a.getLocal("btn_about"),group:"scayt_control",order:7,exec:function(b){b.scayt.tabToOpen="about";b.lockSelection();b.openDialog(c.dialogName)}}},grayt:{grayt_problemdescription:{label:"Grammar problem description",group:"grayt_description",order:1,state:CKEDITOR.TRISTATE_DISABLED,exec:function(b){}},grayt_ignore:{label:a.getLocal("btn_ignore"),group:"grayt_control",order:2,exec:function(b){b.scayt.ignorePhrase()}}}}},buildSuggestionMenuItems:function(a,c,d){var b={},e={},f=d?"word":"phrase",g=d?"startGrammarCheck":"startSpellCheck",h=a.scayt;if(0<c.length&&"no_any_suggestions"!==c[0]){if(d){for(d=0;d<c.length;d++){var k="scayt_suggest_"+CKEDITOR.plugins.scayt.suggestions[d].replace(" ","_");a.addCommand(k,this.createCommand(CKEDITOR.plugins.scayt.suggestions[d],f,g));d<a.config.scayt_maxSuggestions?(a.addMenuItem(k,{label:c[d],command:k,group:"scayt_suggest",order:d+1}),b[k]=CKEDITOR.TRISTATE_OFF):(a.addMenuItem(k,{label:c[d],command:k,group:"scayt_moresuggest",order:d+1}),e[k]=CKEDITOR.TRISTATE_OFF,"on"===a.config.scayt_moreSuggestions&&(a.addMenuItem("scayt_moresuggest",{label:h.getLocal("btn_moreSuggestions"),group:"scayt_moresuggest",order:10,getItems:function(){return e}}),b.scayt_moresuggest=CKEDITOR.TRISTATE_OFF))}}else{for(d=0;d<c.length;d++){k="grayt_suggest_"+CKEDITOR.plugins.scayt.suggestions[d].replace(" ","_"),a.addCommand(k,this.createCommand(CKEDITOR.plugins.scayt.suggestions[d],f,g)),a.addMenuItem(k,{label:c[d],command:k,group:"grayt_suggest",order:d+1}),b[k]=CKEDITOR.TRISTATE_OFF}}}else{b.no_scayt_suggest=CKEDITOR.TRISTATE_DISABLED,a.addCommand("no_scayt_suggest",{exec:function(){}}),a.addMenuItem("no_scayt_suggest",{label:h.getLocal("btn_noSuggestions")||"no_scayt_suggest",command:"no_scayt_suggest",group:"scayt_suggest",order:0})}return b},menuGenerator:function(k,a){var b=k.scayt,l=this.scaytMenuDefinition(k),c={},d=k.config.scayt_contextCommands.split("|"),e=a.getAttribute(b.getLangAttribute())||b.getLang(),f,g;f=b.isScaytNode(a);g=b.isGraytNode(a);f?(l=l.scayt,c=a.getAttribute(b.getScaytNodeAttributeName()),b.fire("getSuggestionsList",{lang:e,word:c}),c=this.buildSuggestionMenuItems(k,CKEDITOR.plugins.scayt.suggestions,f)):g&&(l=l.grayt,c=a.getAttribute(b.getGraytNodeAttributeName()),g=b.getProblemDescriptionText(c,e),l.grayt_problemdescription&&g&&(l.grayt_problemdescription.label=g),b.fire("getGrammarSuggestionsList",{lang:e,phrase:c}),c=this.buildSuggestionMenuItems(k,CKEDITOR.plugins.scayt.suggestions,f));if(f&&"off"==k.config.scayt_contextCommands){return c}for(var h in l){f&&-1==CKEDITOR.tools.indexOf(d,h.replace("scayt_",""))&&"all"!=k.config.scayt_contextCommands||(c[h]="undefined"!=typeof l[h].state?l[h].state:CKEDITOR.TRISTATE_OFF,"function"!==typeof l[h].verification||l[h].verification(k)||delete c[h],k.addCommand(h,{exec:l[h].exec}),k.addMenuItem(h,{label:k.lang.scayt[l[h].label]||l[h].label,command:h,group:l[h].group,order:l[h].order}))}return c},createCommand:function(a,c,d){return{exec:function(b){b=b.scayt;var e={};e[c]=a;b.replaceSelectionNode(e);"startGrammarCheck"===d&&b.removeMarkupInSelectionNode({grammarOnly:!0});b.fire(d)}}}});CKEDITOR.plugins.scayt={state:{scayt:{},grayt:{}},suggestions:[],loadingHelper:{loadOrder:[]},isLoading:!1,options:{disablingCommandExec:{source:!0,newpage:!0,templates:!0},data_attribute_name:"data-scayt-word",misspelled_word_class:"scayt-misspell-word",problem_grammar_data_attribute:"data-grayt-phrase",problem_grammar_class:"gramm-problem"},backCompatibilityMap:{scayt_service_protocol:"scayt_serviceProtocol",scayt_service_host:"scayt_serviceHost",scayt_service_port:"scayt_servicePort",scayt_service_path:"scayt_servicePath",scayt_customerid:"scayt_customerId"},replaceOldOptionsNames:function(a){for(var c in a){c in this.backCompatibilityMap&&(a[this.backCompatibilityMap[c]]=a[c],delete a[c])}},createScayt:function(a){var c=this,d=CKEDITOR.plugins.scayt;this.loadScaytLibrary(a,function(e){var b=e.window&&e.window.getFrame()||e.editable();b?(b={lang:e.config.scayt_sLang,container:b.$,customDictionary:e.config.scayt_customDictionaryIds,userDictionaryName:e.config.scayt_userDictionaryName,localization:e.langCode,customer_id:e.config.scayt_customerId,debug:e.config.scayt_debug,data_attribute_name:c.options.data_attribute_name,misspelled_word_class:c.options.misspelled_word_class,problem_grammar_data_attribute:c.options.problem_grammar_data_attribute,problem_grammar_class:c.options.problem_grammar_class,"options-to-restore":e.config.scayt_disableOptionsStorage,focused:e.editable().hasFocus,ignoreElementsRegex:e.config.scayt_elementsToIgnore,minWordLength:e.config.scayt_minWordLength,multiLanguageMode:e.config.scayt_multiLanguageMode,multiLanguageStyles:e.config.scayt_multiLanguageStyles,graytAutoStartup:d.state.grayt[e.name]},e.config.scayt_serviceProtocol&&(b.service_protocol=e.config.scayt_serviceProtocol),e.config.scayt_serviceHost&&(b.service_host=e.config.scayt_serviceHost),e.config.scayt_servicePort&&(b.service_port=e.config.scayt_servicePort),e.config.scayt_servicePath&&(b.service_path=e.config.scayt_servicePath),"boolean"===typeof e.config.scayt_ignoreAllCapsWords&&(b["ignore-all-caps-words"]=e.config.scayt_ignoreAllCapsWords),"boolean"===typeof e.config.scayt_ignoreDomainNames&&(b["ignore-domain-names"]=e.config.scayt_ignoreDomainNames),"boolean"===typeof e.config.scayt_ignoreWordsWithMixedCases&&(b["ignore-words-with-mixed-cases"]=e.config.scayt_ignoreWordsWithMixedCases),"boolean"===typeof e.config.scayt_ignoreWordsWithNumbers&&(b["ignore-words-with-numbers"]=e.config.scayt_ignoreWordsWithNumbers),b=new SCAYT.CKSCAYT(b,function(){},function(){}),b.subscribe("suggestionListSend",function(l){for(var m={},k=[],f=0;f<l.suggestionList.length;f++){m["word_"+l.suggestionList[f]]||(m["word_"+l.suggestionList[f]]=l.suggestionList[f],k.push(l.suggestionList[f]))}CKEDITOR.plugins.scayt.suggestions=k}),b.subscribe("selectionIsChanged",function(f){e.getSelection().isLocked&&e.lockSelection()}),b.subscribe("graytStateChanged",function(f){d.state.grayt[e.name]=f.state}),e.scayt=b,e.fire("scaytButtonState",e.readOnly?CKEDITOR.TRISTATE_DISABLED:CKEDITOR.TRISTATE_ON)):d.state.scayt[e.name]=!1})},destroy:function(a){a.scayt&&a.scayt.destroy();delete a.scayt;a.fire("scaytButtonState",CKEDITOR.TRISTATE_OFF)},loadScaytLibrary:function(d,a){var b=this,e,c;this.loadingHelper[d.name]||("undefined"===typeof window.SCAYT||"function"!==typeof window.SCAYT.CKSCAYT?(this.loadingHelper[d.name]=a,this.loadingHelper.loadOrder.push(d.name),e=new Date,e=e.getTime(),c=d.config.scayt_srcUrl,c+=0<=c.indexOf("?")?"":"?"+e,this.loadingHelper.ckscaytLoading||(CKEDITOR.scriptLoader.load(c,function(f){if(f){CKEDITOR.fireOnce("scaytReady");for(var g=0;g<b.loadingHelper.loadOrder.length;g++){f=b.loadingHelper.loadOrder[g];if("function"===typeof b.loadingHelper[f]){b.loadingHelper[f](CKEDITOR.instances[f])}delete b.loadingHelper[f]}b.loadingHelper.loadOrder=[]}}),this.loadingHelper.ckscaytLoading=!0)):window.SCAYT&&"function"===typeof window.SCAYT.CKSCAYT&&(CKEDITOR.fireOnce("scaytReady"),d.scayt||"function"===typeof a&&a(d)))}};CKEDITOR.on("dialogDefinition",function(a){var c=a.data.name;a=a.data.definition.dialog;if("scaytDialog"===c){a.on("cancel",function(b){return !1},this,null,-1)}if("checkspell"===c){a.on("cancel",function(d){d=d.sender&&d.sender.getParentEditor();var h=CKEDITOR.plugins.scayt,b=d.scayt;b&&h.state.scayt[d.name]&&b.setMarkupPaused&&b.setMarkupPaused(!1);d.unlockSelection()},this,null,-2)}if("link"===c){a.on("ok",function(b){var d=b.sender&&b.sender.getParentEditor();d&&setTimeout(function(){d.fire("reloadMarkupScayt",{removeOptions:{removeInside:!0,forceBookmark:!0},timeout:0})},0)})}});CKEDITOR.on("scaytReady",function(){if(!0===CKEDITOR.config.scayt_handleCheckDirty){var a=CKEDITOR.editor.prototype;a.checkDirty=CKEDITOR.tools.override(a.checkDirty,function(b){return function(){var d=null,f=this.scayt;if(CKEDITOR.plugins.scayt&&CKEDITOR.plugins.scayt.state.scayt[this.name]&&this.scayt){if(d="ready"==this.status){var h=f.removeMarkupFromString(this.getSnapshot()),f=f.removeMarkupFromString(this._.previousValue),d=d&&f!==h}}else{d=b.call(this)}return d}});a.resetDirty=CKEDITOR.tools.override(a.resetDirty,function(b){return function(){var d=this.scayt;CKEDITOR.plugins.scayt&&CKEDITOR.plugins.scayt.state.scayt[this.name]&&this.scayt?this._.previousValue=d.removeMarkupFromString(this.getSnapshot()):b.call(this)}})}if(!0===CKEDITOR.config.scayt_handleUndoRedo){var a=CKEDITOR.plugins.undo.Image.prototype,c="function"==typeof a.equalsContent?"equalsContent":"equals";a[c]=CKEDITOR.tools.override(a[c],function(b){return function(d){var f=d.editor.scayt,g=this.contents,h=d.contents,l=null;CKEDITOR.plugins.scayt&&CKEDITOR.plugins.scayt.state.scayt[d.editor.name]&&d.editor.scayt&&(this.contents=f.removeMarkupFromString(g)||"",d.contents=f.removeMarkupFromString(h)||"");l=b.apply(this,arguments);this.contents=g;d.contents=h;return l}})}});(function(){CKEDITOR.plugins.add("stylescombo",{requires:"richcombo",init:function(g){var c=g.config,k=g.lang.stylescombo,j={},l=[],f=[];g.on("stylesSet",function(i){if(i=i.data.styles){for(var h,e,b,d=0,a=i.length;d<a;d++){(h=i[d],g.blockless&&h.element in CKEDITOR.dtd.$block||(e=h.name,h=new CKEDITOR.style(h),g.filter.customConfig&&!g.filter.check(h)))||(h._name=e,h._.enterMode=c.enterMode,h._.type=b=h.assignedTo||h.type,h._.weight=d+1000*(b==CKEDITOR.STYLE_OBJECT?1:b==CKEDITOR.STYLE_BLOCK?2:3),j[e]=h,l.push(h),f.push(h))}l.sort(function(p,o){return p._.weight-o._.weight})}});g.ui.addRichCombo("Styles",{label:k.label,title:k.panelTitle,toolbar:"styles,10",allowedContent:f,panel:{css:[CKEDITOR.skin.getPath("editor")].concat(c.contentsCss),multiSelect:!0,attributes:{"aria-label":k.panelTitle}},init:function(){var h,e,i,a,b,d;b=0;for(d=l.length;b<d;b++){h=l[b],e=h._name,a=h._.type,a!=i&&(this.startGroup(k["panelTitle"+String(a)]),i=a),this.add(e,h.type==CKEDITOR.STYLE_OBJECT?e:h.buildPreview(),e)}this.commit()},onClick:function(b){g.focus();g.fire("saveSnapshot");b=j[b];var a=g.elementPath();g[b.checkActive(a,g)?"removeStyle":"applyStyle"](b);g.fire("saveSnapshot")},onRender:function(){g.on("selectionChange",function(i){var h=this.getValue();i=i.data.path.elements;for(var e=0,a=i.length,b;e<a;e++){b=i[e];for(var d in j){if(j[d].checkElementRemovable(b,!0,g)){d!=h&&this.setValue(d);return}}}this.setValue("")},this)},onOpen:function(){var h=g.getSelection().getSelectedElement(),h=g.elementPath(h),e=[0,0,0,0];this.showAll();this.unmarkAll();for(var d in j){var a=j[d],b=a._.type;a.checkApplicable(h,g,g.activeFilter)?e[b]++:this.hideItem(d);a.checkActive(h,g)&&this.mark(d)}e[CKEDITOR.STYLE_BLOCK]||this.hideGroup(k["panelTitle"+String(CKEDITOR.STYLE_BLOCK)]);e[CKEDITOR.STYLE_INLINE]||this.hideGroup(k["panelTitle"+String(CKEDITOR.STYLE_INLINE)]);e[CKEDITOR.STYLE_OBJECT]||this.hideGroup(k["panelTitle"+String(CKEDITOR.STYLE_OBJECT)])},refresh:function(){var b=g.elementPath();if(b){for(var a in j){if(j[a].checkApplicable(b,g,g.activeFilter)){return}}this.setState(CKEDITOR.TRISTATE_DISABLED)}},reset:function(){j={};l=[]}})}})})();(function(){function f(a){return{editorFocus:!1,canUndo:!1,modes:{wysiwyg:1},exec:function(r){if(r.editable().hasFocus){var s=r.getSelection(),q;if(q=(new CKEDITOR.dom.elementPath(s.getCommonAncestor(),s.root)).contains({td:1,th:1},1)){var s=r.createRange(),p=CKEDITOR.tools.tryThese(function(){var i=q.getParent().$.cells[q.$.cellIndex+(a?-1:1)];i.parentNode.parentNode;return i},function(){var i=q.getParent(),i=i.getAscendant("table").$.rows[i.$.rowIndex+(a?-1:1)];return i.cells[a?i.cells.length-1:0]});if(p||a){if(p){p=new CKEDITOR.dom.element(p),s.moveToElementEditStart(p),s.checkStartOfBlock()&&s.checkEndOfBlock()||s.selectNodeContents(p)}else{return !0}}else{for(var b=q.getAscendant("table").$,p=q.getParent().$.cells,b=new CKEDITOR.dom.element(b.insertRow(-1),r.document),c=0,d=p.length;c<d;c++){b.append((new CKEDITOR.dom.element(p[c],r.document)).clone(!1,!1)).appendBogus()}s.moveToElementEditStart(b)}s.select(!0);return !0}}return !1}}}var e={editorFocus:!1,modes:{wysiwyg:1,source:1}},h={exec:function(a){a.container.focusNext(!0,a.tabIndex)}},g={exec:function(a){a.container.focusPrevious(!0,a.tabIndex)}};CKEDITOR.plugins.add("tab",{init:function(a){for(var b=!1!==a.config.enableTabKeyTools,c=a.config.tabSpaces||0,d="";c--;){d+="Â "}if(d){a.on("key",function(i){9==i.data.keyCode&&(a.insertText(d),i.cancel())})}if(b){a.on("key",function(i){(9==i.data.keyCode&&a.execCommand("selectNextCell")||i.data.keyCode==CKEDITOR.SHIFT+9&&a.execCommand("selectPreviousCell"))&&i.cancel()})}a.addCommand("blur",CKEDITOR.tools.extend(h,e));a.addCommand("blurBack",CKEDITOR.tools.extend(g,e));a.addCommand("selectNextCell",f());a.addCommand("selectPreviousCell",f(!0))}})})();CKEDITOR.dom.element.prototype.focusNext=function(k,h){var g=void 0===h?this.getTabIndex():h,f,c,d,e,b,a;if(0>=g){for(b=this.getNextSourceNode(k,CKEDITOR.NODE_ELEMENT);b;){if(b.isVisible()&&0===b.getTabIndex()){d=b;break}b=b.getNextSourceNode(!1,CKEDITOR.NODE_ELEMENT)}}else{for(b=this.getDocument().getBody().getFirst();b=b.getNextSourceNode(!1,CKEDITOR.NODE_ELEMENT);){if(!f){if(!c&&b.equals(this)){if(c=!0,k){if(!(b=b.getNextSourceNode(!0,CKEDITOR.NODE_ELEMENT))){break}f=1}}else{c&&!this.contains(b)&&(f=1)}}if(b.isVisible()&&!(0>(a=b.getTabIndex()))){if(f&&a==g){d=b;break}a>g&&(!d||!e||a<e)?(d=b,e=a):d||0!==a||(d=b,e=a)}}}d&&d.focus()};CKEDITOR.dom.element.prototype.focusPrevious=function(k,h){for(var g=void 0===h?this.getTabIndex():h,f,c,d,e=0,b,a=this.getDocument().getBody().getLast();a=a.getPreviousSourceNode(!1,CKEDITOR.NODE_ELEMENT);){if(!f){if(!c&&a.equals(this)){if(c=!0,k){if(!(a=a.getPreviousSourceNode(!0,CKEDITOR.NODE_ELEMENT))){break}f=1}}else{c&&!this.contains(a)&&(f=1)}}if(a.isVisible()&&!(0>(b=a.getTabIndex()))){if(0>=g){if(f&&0===b){d=a;break}b>e&&(d=a,e=b)}else{if(f&&b==g){d=a;break}b<g&&(!d||b>e)&&(d=a,e=b)}}}d&&d.focus()};CKEDITOR.plugins.add("table",{requires:"dialog",init:function(a){function e(b){return CKEDITOR.tools.extend(b||{},{contextSensitive:1,refresh:function(f,d){this.setState(d.contains("table",1)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED)}})}if(!a.blockless){var c=a.lang.table;a.addCommand("table",new CKEDITOR.dialogCommand("table",{context:"table",allowedContent:"table{width,height}[align,border,cellpadding,cellspacing,summary];caption tbody thead tfoot;th td tr[scope];"+(a.plugins.dialogadvtab?"table"+a.plugins.dialogadvtab.allowedContent():""),requiredContent:"table",contentTransformations:[["table{width}: sizeToStyle","table[width]: sizeToAttribute"]]}));a.addCommand("tableProperties",new CKEDITOR.dialogCommand("tableProperties",e()));a.addCommand("tableDelete",e({exec:function(f){var j=f.elementPath().contains("table",1);if(j){var d=j.getParent(),b=f.editable();1!=d.getChildCount()||d.is("td","th")||d.equals(b)||(j=d);f=f.createRange();f.moveToPosition(j,CKEDITOR.POSITION_BEFORE_START);j.remove();f.select()}}}));a.ui.addButton&&a.ui.addButton("Table",{label:c.toolbar,command:"table",toolbar:"insert,30"});CKEDITOR.dialog.add("table",this.path+"dialogs/table.js");CKEDITOR.dialog.add("tableProperties",this.path+"dialogs/table.js");a.addMenuItems&&a.addMenuItems({table:{label:c.menu,command:"tableProperties",group:"table",order:5},tabledelete:{label:c.deleteTable,command:"tableDelete",group:"table",order:1}});a.on("doubleclick",function(b){b.data.element.is("table")&&(b.data.dialog="tableProperties")});a.contextMenu&&a.contextMenu.addListener(function(){return{tabledelete:CKEDITOR.TRISTATE_OFF,table:CKEDITOR.TRISTATE_OFF}})}}});(function(){function m(d){function c(h){0<a.length||h.type!=CKEDITOR.NODE_ELEMENT||!z.test(h.getName())||h.getCustomData("selected_cell")||(CKEDITOR.dom.element.setMarker(b,h,"selected_cell",!0),a.push(h))}d=d.getRanges();for(var a=[],b={},g=0;g<d.length;g++){var e=d[g];if(e.collapsed){e=e.getCommonAncestor(),(e=e.getAscendant("td",!0)||e.getAscendant("th",!0))&&a.push(e)}else{var e=new CKEDITOR.dom.walker(e),f;for(e.guard=c;f=e.next();){f.type==CKEDITOR.NODE_ELEMENT&&f.is(CKEDITOR.dtd.table)||(f=f.getAscendant("td",!0)||f.getAscendant("th",!0))&&!f.getCustomData("selected_cell")&&(CKEDITOR.dom.element.setMarker(b,f,"selected_cell",!0),a.push(f))}}}CKEDITOR.dom.element.clearAllMarkers(b);return a}function w(a,i){for(var g=m(a),h=g[0],f=h.getAscendant("table"),h=h.getDocument(),b=g[0].getParent(),c=b.$.rowIndex,g=g[g.length-1],d=g.getParent().$.rowIndex+g.$.rowSpan-1,g=new CKEDITOR.dom.element(f.$.rows[d]),c=i?c:d,b=i?b:g,g=CKEDITOR.tools.buildTableMap(f),f=g[c],c=i?g[c-1]:g[c+1],g=g[0].length,h=h.createElement("tr"),d=0;f[d]&&d<g;d++){var e;1<f[d].rowSpan&&c&&f[d]==c[d]?(e=f[d],e.rowSpan+=1):(e=(new CKEDITOR.dom.element(f[d])).clone(),e.removeAttribute("rowSpan"),e.appendBogus(),h.append(e),e=e.$);d+=e.colSpan-1}i?h.insertBefore(b):h.insertAfter(b)}function o(j){if(j instanceof CKEDITOR.dom.selection){var i=m(j),g=i[0].getAscendant("table"),h=CKEDITOR.tools.buildTableMap(g);j=i[0].getParent().$.rowIndex;for(var i=i[i.length-1],f=i.getParent().$.rowIndex+i.$.rowSpan-1,i=[],k=j;k<=f;k++){for(var a=h[k],b=new CKEDITOR.dom.element(g.$.rows[k]),c=0;c<a.length;c++){var d=new CKEDITOR.dom.element(a[c]),e=d.getParent().$.rowIndex;1==d.$.rowSpan?d.remove():(--d.$.rowSpan,e==k&&(e=h[k+1],e[c-1]?d.insertAfter(new CKEDITOR.dom.element(e[c-1])):(new CKEDITOR.dom.element(g.$.rows[k+1])).append(d,1)));c+=d.$.colSpan-1}i.push(b)}h=g.$.rows;g=new CKEDITOR.dom.element(h[f+1]||(0<j?h[j-1]:null)||g.$.parentNode);for(k=i.length;0<=k;k--){o(i[k])}return g}j instanceof CKEDITOR.dom.element&&(g=j.getAscendant("table"),1==g.$.rows.length?g.remove():j.remove());return null}function p(j,i){for(var g=i?Infinity:0,h=0;h<j.length;h++){var f;f=j[h];for(var a=i,b=f.getParent().$.cells,c=0,d=0;d<b.length;d++){var e=b[d],c=c+(a?1:e.colSpan);if(e==f.$){break}}f=c-1;if(i?f<g:f>g){g=f}}return g}function u(d,c){for(var a=m(d),b=a[0].getAscendant("table"),h=p(a,1),a=p(a),h=c?h:a,e=CKEDITOR.tools.buildTableMap(b),b=[],a=[],f=e.length,g=0;g<f;g++){b.push(e[g][h]),a.push(c?e[g][h-1]:e[g][h+1])}for(g=0;g<f;g++){b[g]&&(1<b[g].colSpan&&a[g]==b[g]?(h=b[g],h.colSpan+=1):(h=(new CKEDITOR.dom.element(b[g])).clone(),h.removeAttribute("colSpan"),h.appendBogus(),h[c?"insertBefore":"insertAfter"].call(h,new CKEDITOR.dom.element(b[g])),h=h.$),g+=h.rowSpan-1)}}function s(d,c){var a=d.getStartElement();if(a=a.getAscendant("td",1)||a.getAscendant("th",1)){var b=a.clone();b.appendBogus();c?b.insertBefore(a):b.insertAfter(a)}}function r(d){if(d instanceof CKEDITOR.dom.selection){d=m(d);var c=d[0]&&d[0].getAscendant("table"),a;g:{var b=0;a=d.length-1;for(var g={},e,f;e=d[b++];){CKEDITOR.dom.element.setMarker(g,e,"delete_cell",!0)}for(b=0;e=d[b++];){if((f=e.getPrevious())&&!f.getCustomData("delete_cell")||(f=e.getNext())&&!f.getCustomData("delete_cell")){CKEDITOR.dom.element.clearAllMarkers(g);a=f;break g}}CKEDITOR.dom.element.clearAllMarkers(g);f=d[0].getParent();(f=f.getPrevious())?a=f.getLast():(f=d[a].getParent(),a=(f=f.getNext())?f.getChild(0):null)}for(f=d.length-1;0<=f;f--){r(d[f])}a?y(a,!0):c&&c.remove()}else{d instanceof CKEDITOR.dom.element&&(c=d.getParent(),1==c.getChildCount()?c.remove():d.remove())}}function y(d,c){var a=d.getDocument(),b=CKEDITOR.document;CKEDITOR.env.ie&&10==CKEDITOR.env.version&&(b.focus(),a.focus());a=new CKEDITOR.dom.range(a);a["moveToElementEdit"+(c?"End":"Start")](d)||(a.selectNodeContents(d),a.collapse(c?!1:!0));a.select(!0)}function t(c,b,a){c=c[b];if("undefined"==typeof a){return c}for(b=0;c&&b<c.length;b++){if(a.is&&c[b]==a.$){return b}if(b==a){return new CKEDITOR.dom.element(c[b])}}return a.is?-1:null}function q(e,d,b){var c=m(e),a;if((d?1!=c.length:2>c.length)||(a=e.getCommonAncestor())&&a.type==CKEDITOR.NODE_ELEMENT&&a.is("table")){return !1}var f;e=c[0];a=e.getAscendant("table");var g=CKEDITOR.tools.buildTableMap(a),h=g.length,i=g[0].length,k=e.getParent().$.rowIndex,n=t(g,k,e);if(d){var V;try{var U=parseInt(e.getAttribute("rowspan"),10)||1;f=parseInt(e.getAttribute("colspan"),10)||1;V=g["up"==d?k-U:"down"==d?k+U:k]["left"==d?n-f:"right"==d?n+f:n]}catch(Y){return !1}if(!V||e.$==V){return !1}c["up"==d||"left"==d?"unshift":"push"](new CKEDITOR.dom.element(V))}d=e.getDocument();var A=k,U=V=0,Z=!b&&new CKEDITOR.dom.documentFragment(d),W=0;for(d=0;d<c.length;d++){f=c[d];var l=f.getParent(),X=f.getFirst(),j=f.$.colSpan,aa=f.$.rowSpan,l=l.$.rowIndex,D=t(g,l,f),W=W+j*aa,U=Math.max(U,D-n+j);V=Math.max(V,l-k+aa);b||(j=f,(aa=j.getBogus())&&aa.remove(),j.trim(),f.getChildren().count()&&(l==A||!X||X.isBlockBoundary&&X.isBlockBoundary({br:1})||(A=Z.getLast(CKEDITOR.dom.walker.whitespaces(!0)),!A||A.is&&A.is("br")||Z.append("br")),f.moveChildren(Z)),d?f.remove():f.setHtml(""));A=l}if(b){return V*U==W}Z.moveChildren(e);e.appendBogus();U>=i?e.removeAttribute("rowSpan"):e.$.rowSpan=V;V>=h?e.removeAttribute("colSpan"):e.$.colSpan=U;b=new CKEDITOR.dom.nodeList(a.$.rows);c=b.count();for(d=c-1;0<=d;d--){a=b.getItem(d),a.$.cells.length||(a.remove(),c++)}return e}function v(j,i){var g=m(j);if(1<g.length){return !1}if(i){return !0}var g=g[0],h=g.getParent(),f=h.getAscendant("table"),k=CKEDITOR.tools.buildTableMap(f),a=h.$.rowIndex,b=t(k,a,g),c=g.$.rowSpan,d;if(1<c){d=Math.ceil(c/2);for(var c=Math.floor(c/2),h=a+d,f=new CKEDITOR.dom.element(f.$.rows[h]),k=t(k,h),e,h=g.clone(),a=0;a<k.length;a++){if(e=k[a],e.parentNode==f.$&&a>b){h.insertBefore(new CKEDITOR.dom.element(e));break}else{e=null}}e||f.append(h)}else{for(c=d=1,f=h.clone(),f.insertAfter(h),f.append(h=g.clone()),e=t(k,a),b=0;b<e.length;b++){e[b].rowSpan++}}h.appendBogus();g.$.rowSpan=d;h.$.rowSpan=c;1==d&&g.removeAttribute("rowSpan");1==c&&h.removeAttribute("rowSpan");return h}function x(j,i){var g=m(j);if(1<g.length){return !1}if(i){return !0}var g=g[0],h=g.getParent(),f=h.getAscendant("table"),f=CKEDITOR.tools.buildTableMap(f),a=t(f,h.$.rowIndex,g),b=g.$.colSpan;if(1<b){h=Math.ceil(b/2),b=Math.floor(b/2)}else{for(var b=h=1,c=[],d=0;d<f.length;d++){var e=f[d];c.push(e[a]);1<e[a].rowSpan&&(d+=e[a].rowSpan-1)}for(f=0;f<c.length;f++){c[f].colSpan++}}f=g.clone();f.insertAfter(g);f.appendBogus();g.$.colSpan=h;f.$.colSpan=b;1==h&&g.removeAttribute("colSpan");1==b&&f.removeAttribute("colSpan");return f}var z=/^(?:td|th)$/;CKEDITOR.plugins.tabletools={requires:"table,dialog,contextmenu",init:function(d){function c(e){return CKEDITOR.tools.extend(e||{},{contextSensitive:1,refresh:function(f,g){this.setState(g.contains({td:1,th:1},1)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED)}})}function a(f,g){var e=d.addCommand(f,g);d.addFeature(e)}var b=d.lang.table;a("cellProperties",new CKEDITOR.dialogCommand("cellProperties",c({allowedContent:"td th{width,height,border-color,background-color,white-space,vertical-align,text-align}[colspan,rowspan]",requiredContent:"table"})));CKEDITOR.dialog.add("cellProperties",this.path+"dialogs/tableCell.js");a("rowDelete",c({requiredContent:"table",exec:function(e){e=e.getSelection();y(o(e))}}));a("rowInsertBefore",c({requiredContent:"table",exec:function(e){e=e.getSelection();w(e,!0)}}));a("rowInsertAfter",c({requiredContent:"table",exec:function(e){e=e.getSelection();w(e)}}));a("columnDelete",c({requiredContent:"table",exec:function(f){f=f.getSelection();f=m(f);var g=f[0],h=f[f.length-1];f=g.getAscendant("table");for(var i=CKEDITOR.tools.buildTableMap(f),j,k,n=[],F=0,E=i.length;F<E;F++){for(var l=0,e=i[F].length;l<e;l++){i[F][l]==g.$&&(j=l),i[F][l]==h.$&&(k=l)}}for(F=j;F<=k;F++){for(l=0;l<i.length;l++){h=i[l],g=new CKEDITOR.dom.element(f.$.rows[l]),h=new CKEDITOR.dom.element(h[F]),h.$&&(1==h.$.colSpan?h.remove():--h.$.colSpan,l+=h.$.rowSpan-1,g.$.cells.length||n.push(g))}}k=f.$.rows[0]&&f.$.rows[0].cells;j=new CKEDITOR.dom.element(k[j]||(j?k[j-1]:f.$.parentNode));n.length==E&&f.remove();j&&y(j,!0)}}));a("columnInsertBefore",c({requiredContent:"table",exec:function(e){e=e.getSelection();u(e,!0)}}));a("columnInsertAfter",c({requiredContent:"table",exec:function(e){e=e.getSelection();u(e)}}));a("cellDelete",c({requiredContent:"table",exec:function(e){e=e.getSelection();r(e)}}));a("cellMerge",c({allowedContent:"td[colspan,rowspan]",requiredContent:"td[colspan,rowspan]",exec:function(e){y(q(e.getSelection()),!0)}}));a("cellMergeRight",c({allowedContent:"td[colspan]",requiredContent:"td[colspan]",exec:function(e){y(q(e.getSelection(),"right"),!0)}}));a("cellMergeDown",c({allowedContent:"td[rowspan]",requiredContent:"td[rowspan]",exec:function(e){y(q(e.getSelection(),"down"),!0)}}));a("cellVerticalSplit",c({allowedContent:"td[rowspan]",requiredContent:"td[rowspan]",exec:function(e){y(x(e.getSelection()))}}));a("cellHorizontalSplit",c({allowedContent:"td[colspan]",requiredContent:"td[colspan]",exec:function(e){y(v(e.getSelection()))}}));a("cellInsertBefore",c({requiredContent:"table",exec:function(e){e=e.getSelection();s(e,!0)}}));a("cellInsertAfter",c({requiredContent:"table",exec:function(e){e=e.getSelection();s(e)}}));d.addMenuItems&&d.addMenuItems({tablecell:{label:b.cell.menu,group:"tablecell",order:1,getItems:function(){var e=d.getSelection(),f=m(e);return{tablecell_insertBefore:CKEDITOR.TRISTATE_OFF,tablecell_insertAfter:CKEDITOR.TRISTATE_OFF,tablecell_delete:CKEDITOR.TRISTATE_OFF,tablecell_merge:q(e,null,!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_merge_right:q(e,"right",!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_merge_down:q(e,"down",!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_split_vertical:x(e,!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_split_horizontal:v(e,!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_properties:0<f.length?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED}}},tablecell_insertBefore:{label:b.cell.insertBefore,group:"tablecell",command:"cellInsertBefore",order:5},tablecell_insertAfter:{label:b.cell.insertAfter,group:"tablecell",command:"cellInsertAfter",order:10},tablecell_delete:{label:b.cell.deleteCell,group:"tablecell",command:"cellDelete",order:15},tablecell_merge:{label:b.cell.merge,group:"tablecell",command:"cellMerge",order:16},tablecell_merge_right:{label:b.cell.mergeRight,group:"tablecell",command:"cellMergeRight",order:17},tablecell_merge_down:{label:b.cell.mergeDown,group:"tablecell",command:"cellMergeDown",order:18},tablecell_split_horizontal:{label:b.cell.splitHorizontal,group:"tablecell",command:"cellHorizontalSplit",order:19},tablecell_split_vertical:{label:b.cell.splitVertical,group:"tablecell",command:"cellVerticalSplit",order:20},tablecell_properties:{label:b.cell.title,group:"tablecellproperties",command:"cellProperties",order:21},tablerow:{label:b.row.menu,group:"tablerow",order:1,getItems:function(){return{tablerow_insertBefore:CKEDITOR.TRISTATE_OFF,tablerow_insertAfter:CKEDITOR.TRISTATE_OFF,tablerow_delete:CKEDITOR.TRISTATE_OFF}}},tablerow_insertBefore:{label:b.row.insertBefore,group:"tablerow",command:"rowInsertBefore",order:5},tablerow_insertAfter:{label:b.row.insertAfter,group:"tablerow",command:"rowInsertAfter",order:10},tablerow_delete:{label:b.row.deleteRow,group:"tablerow",command:"rowDelete",order:15},tablecolumn:{label:b.column.menu,group:"tablecolumn",order:1,getItems:function(){return{tablecolumn_insertBefore:CKEDITOR.TRISTATE_OFF,tablecolumn_insertAfter:CKEDITOR.TRISTATE_OFF,tablecolumn_delete:CKEDITOR.TRISTATE_OFF}}},tablecolumn_insertBefore:{label:b.column.insertBefore,group:"tablecolumn",command:"columnInsertBefore",order:5},tablecolumn_insertAfter:{label:b.column.insertAfter,group:"tablecolumn",command:"columnInsertAfter",order:10},tablecolumn_delete:{label:b.column.deleteColumn,group:"tablecolumn",command:"columnDelete",order:15}});d.contextMenu&&d.contextMenu.addListener(function(f,g,e){return(f=e.contains({td:1,th:1},1))&&!f.isReadOnly()?{tablecell:CKEDITOR.TRISTATE_OFF,tablerow:CKEDITOR.TRISTATE_OFF,tablecolumn:CKEDITOR.TRISTATE_OFF}:null})},getSelectedCells:m};CKEDITOR.plugins.add("tabletools",CKEDITOR.plugins.tabletools)})();CKEDITOR.tools.buildTableMap=function(k){k=k.$.rows;for(var s=-1,l=[],m=0;m<k.length;m++){s++;!l[s]&&(l[s]=[]);for(var r=-1,p=0;p<k[m].cells.length;p++){var o=k[m].cells[p];for(r++;l[s][r];){r++}for(var t=isNaN(o.colSpan)?1:o.colSpan,o=isNaN(o.rowSpan)?1:o.rowSpan,q=0;q<o;q++){l[s+q]||(l[s+q]=[]);for(var n=0;n<t;n++){l[s+q][r+n]=k[m].cells[p]}}r+=t-1}}return l};(function(){var m=[CKEDITOR.CTRL+90,CKEDITOR.CTRL+89,CKEDITOR.CTRL+CKEDITOR.SHIFT+90],g={8:1,46:1};CKEDITOR.plugins.add("undo",{init:function(b){function i(o){j.enabled&&!1!==o.data.command.canUndo&&j.save()}function d(){j.enabled=b.readOnly?!1:"wysiwyg"==b.mode;j.onChange()}var j=b.undoManager=new h(b),c=j.editingHandler=new e(j),l=b.addCommand("undo",{exec:function(){j.undo()&&(b.selectionChange(),this.fire("afterUndo"))},startDisabled:!0,canUndo:!1}),a=b.addCommand("redo",{exec:function(){j.redo()&&(b.selectionChange(),this.fire("afterRedo"))},startDisabled:!0,canUndo:!1});b.setKeystroke([[m[0],"undo"],[m[1],"redo"],[m[2],"redo"]]);j.onChange=function(){l.setState(j.undoable()?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED);a.setState(j.redoable()?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED)};b.on("beforeCommandExec",i);b.on("afterCommandExec",i);b.on("saveSnapshot",function(o){j.save(o.data&&o.data.contentOnly)});b.on("contentDom",c.attachListeners,c);b.on("instanceReady",function(){b.fire("saveSnapshot")});b.on("beforeModeUnload",function(){"wysiwyg"==b.mode&&j.save(!0)});b.on("mode",d);b.on("readOnly",d);b.ui.addButton&&(b.ui.addButton("Undo",{label:b.lang.undo.undo,command:"undo",toolbar:"undo,10"}),b.ui.addButton("Redo",{label:b.lang.undo.redo,command:"redo",toolbar:"undo,20"}));b.resetUndo=function(){j.reset();b.fire("saveSnapshot")};b.on("updateSnapshot",function(){j.currentImage&&j.update()});b.on("lockSnapshot",function(o){o=o.data;j.lock(o&&o.dontUpdate,o&&o.forceUpdate)});b.on("unlockSnapshot",j.unlock,j)}});CKEDITOR.plugins.undo={};var h=CKEDITOR.plugins.undo.UndoManager=function(a){this.strokesRecorded=[0,0];this.locked=null;this.previousKeyGroup=-1;this.limit=a.config.undoStackSize||20;this.strokesLimit=25;this.editor=a;this.reset()};h.prototype={type:function(c,d){var a=h.getKeyGroup(c),b=this.strokesRecorded[a]+1;d=d||b>=this.strokesLimit;this.typing||(this.hasUndo=this.typing=!0,this.hasRedo=!1,this.onChange());d?(b=0,this.editor.fire("saveSnapshot")):this.editor.fire("change");this.strokesRecorded[a]=b;this.previousKeyGroup=a},keyGroupChanged:function(a){return h.getKeyGroup(a)!=this.previousKeyGroup},reset:function(){this.snapshots=[];this.index=-1;this.currentImage=null;this.hasRedo=this.hasUndo=!1;this.locked=null;this.resetType()},resetType:function(){this.strokesRecorded=[0,0];this.typing=!1;this.previousKeyGroup=-1},refreshState:function(){this.hasUndo=!!this.getNextImage(!0);this.hasRedo=!!this.getNextImage(!1);this.resetType();this.onChange()},save:function(d,i,a){var b=this.editor;if(this.locked||"ready"!=b.status||"wysiwyg"!=b.mode){return !1}var c=b.editable();if(!c||"ready"!=c.status){return !1}c=this.snapshots;i||(i=new k(b));if(!1===i.contents){return !1}if(this.currentImage){if(i.equalsContent(this.currentImage)){if(d||i.equalsSelection(this.currentImage)){return !1}}else{!1!==a&&b.fire("change")}}c.splice(this.index+1,c.length-this.index-1);c.length==this.limit&&c.shift();this.index=c.push(i)-1;this.currentImage=i;!1!==a&&this.refreshState();return !0},restoreImage:function(b){var c=this.editor,a;b.bookmarks&&(c.focus(),a=c.getSelection());this.locked={level:999};this.editor.loadSnapshot(b.contents);b.bookmarks?a.selectBookmarks(b.bookmarks):CKEDITOR.env.ie&&(a=this.editor.document.getBody().$.createTextRange(),a.collapse(!0),a.select());this.locked=null;this.index=b.index;this.currentImage=this.snapshots[this.index];this.update();this.refreshState();c.fire("change")},getNextImage:function(c){var d=this.snapshots,a=this.currentImage,b;if(a){if(c){for(b=this.index-1;0<=b;b--){if(c=d[b],!a.equalsContent(c)){return c.index=b,c}}}else{for(b=this.index+1;b<d.length;b++){if(c=d[b],!a.equalsContent(c)){return c.index=b,c}}}}return null},redoable:function(){return this.enabled&&this.hasRedo},undoable:function(){return this.enabled&&this.hasUndo},undo:function(){if(this.undoable()){this.save(!0);var a=this.getNextImage(!0);if(a){return this.restoreImage(a),!0}}return !1},redo:function(){if(this.redoable()&&(this.save(!0),this.redoable())){var a=this.getNextImage(!1);if(a){return this.restoreImage(a),!0}}return !1},update:function(b){if(!this.locked){b||(b=new k(this.editor));for(var c=this.index,a=this.snapshots;0<c&&this.currentImage.equalsContent(a[c-1]);){--c}a.splice(c,this.index-c+1,b);this.index=c;this.currentImage=b}},updateSelection:function(b){if(!this.snapshots.length){return !1}var c=this.snapshots,a=c[c.length-1];return a.equalsContent(b)&&!a.equalsSelection(b)?(this.currentImage=c[c.length-1]=b,!0):!1},lock:function(c,d){if(this.locked){this.locked.level++}else{if(c){this.locked={level:1}}else{var a=null;if(d){a=!0}else{var b=new k(this.editor,!0);this.currentImage&&this.currentImage.equalsContent(b)&&(a=b)}this.locked={update:a,level:1}}}},unlock:function(){if(this.locked&&!--this.locked.level){var a=this.locked.update;this.locked=null;if(!0===a){this.update()}else{if(a){var b=new k(this.editor,!0);a.equalsContent(b)||this.update()}}}}};h.navigationKeyCodes={37:1,38:1,39:1,40:1,36:1,35:1,33:1,34:1};h.keyGroups={PRINTABLE:0,FUNCTIONAL:1};h.isNavigationKey=function(a){return !!h.navigationKeyCodes[a]};h.getKeyGroup=function(a){var b=h.keyGroups;return g[a]?b.FUNCTIONAL:b.PRINTABLE};h.getOppositeKeyGroup=function(a){var b=h.keyGroups;return a==b.FUNCTIONAL?b.PRINTABLE:b.FUNCTIONAL};h.ieFunctionalKeysBug=function(a){return CKEDITOR.env.ie&&h.getKeyGroup(a)==h.keyGroups.FUNCTIONAL};var k=CKEDITOR.plugins.undo.Image=function(b,c){this.editor=b;b.fire("beforeUndoImage");var a=b.getSnapshot();CKEDITOR.env.ie&&a&&(a=a.replace(/\s+data-cke-expando=".*?"/g,""));this.contents=a;c||(this.bookmarks=(a=a&&b.getSelection())&&a.createBookmarks2(!0));b.fire("afterUndoImage")},n=/\b(?:href|src|name)="[^"]*?"/gi;k.prototype={equalsContent:function(a){var b=this.contents;a=a.contents;CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)&&(b=b.replace(n,""),a=a.replace(n,""));return b!=a?!1:!0},equalsSelection:function(d){var i=this.bookmarks;d=d.bookmarks;if(i||d){if(!i||!d||i.length!=d.length){return !1}for(var a=0;a<i.length;a++){var b=i[a],c=d[a];if(b.startOffset!=c.startOffset||b.endOffset!=c.endOffset||!CKEDITOR.tools.arrayCompare(b.start,c.start)||!CKEDITOR.tools.arrayCompare(b.end,c.end)){return !1}}}return !0}};var e=CKEDITOR.plugins.undo.NativeEditingHandler=function(a){this.undoManager=a;this.ignoreInputEvent=!1;this.keyEventsStack=new f;this.lastKeydownImage=null};e.prototype={onKeydown:function(a){var b=a.data.getKey();if(229!==b){if(-1<CKEDITOR.tools.indexOf(m,a.data.getKeystroke())){a.data.preventDefault()}else{if(this.keyEventsStack.cleanUp(a),a=this.undoManager,this.keyEventsStack.getLast(b)||this.keyEventsStack.push(b),this.lastKeydownImage=new k(a.editor),h.isNavigationKey(b)||this.undoManager.keyGroupChanged(b)){if(a.strokesRecorded[0]||a.strokesRecorded[1]){a.save(!1,this.lastKeydownImage,!1),a.resetType()}}}}},onInput:function(){if(this.ignoreInputEvent){this.ignoreInputEvent=!1}else{var a=this.keyEventsStack.getLast();a||(a=this.keyEventsStack.push(0));this.keyEventsStack.increment(a.keyCode);this.keyEventsStack.getTotalInputs()>=this.undoManager.strokesLimit&&(this.undoManager.type(a.keyCode,!0),this.keyEventsStack.resetInputs())}},onKeyup:function(b){var c=this.undoManager;b=b.data.getKey();var a=this.keyEventsStack.getTotalInputs();this.keyEventsStack.remove(b);if(!(h.ieFunctionalKeysBug(b)&&this.lastKeydownImage&&this.lastKeydownImage.equalsContent(new k(c.editor,!0)))){if(0<a){c.type(b)}else{if(h.isNavigationKey(b)){this.onNavigationKey(!0)}}}},onNavigationKey:function(a){var b=this.undoManager;!a&&b.save(!0,null,!1)||b.updateSelection(new k(b.editor));b.resetType()},ignoreInputEventListener:function(){this.ignoreInputEvent=!0},attachListeners:function(){var b=this.undoManager.editor,c=b.editable(),a=this;c.attachListener(c,"keydown",function(d){a.onKeydown(d);if(h.ieFunctionalKeysBug(d.data.getKey())){a.onInput()}},null,null,999);c.attachListener(c,CKEDITOR.env.ie?"keypress":"input",a.onInput,a,null,999);c.attachListener(c,"keyup",a.onKeyup,a,null,999);c.attachListener(c,"paste",a.ignoreInputEventListener,a,null,999);c.attachListener(c,"drop",a.ignoreInputEventListener,a,null,999);c.attachListener(c.isInline()?c:b.document.getDocumentElement(),"click",function(){a.onNavigationKey()},null,null,999);c.attachListener(this.undoManager.editor,"blur",function(){a.keyEventsStack.remove(9)},null,null,999)}};var f=CKEDITOR.plugins.undo.KeyEventsStack=function(){this.stack=[]};f.prototype={push:function(a){a=this.stack.push({keyCode:a,inputs:0});return this.stack[a-1]},getLastIndex:function(a){if("number"!=typeof a){return this.stack.length-1}for(var b=this.stack.length;b--;){if(this.stack[b].keyCode==a){return b}}return -1},getLast:function(a){a=this.getLastIndex(a);return -1!=a?this.stack[a]:null},increment:function(a){this.getLast(a).inputs++},remove:function(a){a=this.getLastIndex(a);-1!=a&&this.stack.splice(a,1)},resetInputs:function(a){if("number"==typeof a){this.getLast(a).inputs=0}else{for(a=this.stack.length;a--;){this.stack[a].inputs=0}}},getTotalInputs:function(){for(var a=this.stack.length,b=0;a--;){b+=this.stack[a].inputs}return b},cleanUp:function(a){a=a.data.$;a.ctrlKey||a.metaKey||this.remove(17);a.shiftKey||this.remove(16);a.altKey||this.remove(18)}}})();CKEDITOR.plugins.add("wsc",{requires:"dialog",parseApi:function(a){a.config.wsc_onFinish="function"===typeof a.config.wsc_onFinish?a.config.wsc_onFinish:function(){};a.config.wsc_onClose="function"===typeof a.config.wsc_onClose?a.config.wsc_onClose:function(){}},parseConfig:function(a){a.config.wsc_customerId=a.config.wsc_customerId||CKEDITOR.config.wsc_customerId||"1:ua3xw1-2XyGJ3-GWruD3-6OFNT1-oXcuB1-nR6Bp4-hgQHc-EcYng3-sdRXG3-NOfFk";a.config.wsc_customDictionaryIds=a.config.wsc_customDictionaryIds||CKEDITOR.config.wsc_customDictionaryIds||"";a.config.wsc_userDictionaryName=a.config.wsc_userDictionaryName||CKEDITOR.config.wsc_userDictionaryName||"";a.config.wsc_customLoaderScript=a.config.wsc_customLoaderScript||CKEDITOR.config.wsc_customLoaderScript;CKEDITOR.config.wsc_cmd=a.config.wsc_cmd||CKEDITOR.config.wsc_cmd||"spell";CKEDITOR.config.wsc_version="v4.3.0-master-d769233";CKEDITOR.config.wsc_removeGlobalVariable=!0},init:function(a){var b=CKEDITOR.env;this.parseConfig(a);this.parseApi(a);a.addCommand("checkspell",new CKEDITOR.dialogCommand("checkspell")).modes={wysiwyg:!CKEDITOR.env.opera&&!CKEDITOR.env.air&&document.domain==window.location.hostname&&!(b.ie&&(8>b.version||b.quirks))};"undefined"==typeof a.plugins.scayt&&a.ui.addButton&&a.ui.addButton("SpellChecker",{label:a.lang.wsc.toolbar,click:function(c){var d=c.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?c.container.getText():c.document.getBody().getText();(d=d.replace(/\s/g,""))?c.execCommand("checkspell"):alert("Nothing to check!")},toolbar:"spellchecker,10"});CKEDITOR.dialog.add("checkspell",this.path+(CKEDITOR.env.ie&&7>=CKEDITOR.env.version?"dialogs/wsc_ie.js":window.postMessage?"dialogs/wsc.js":"dialogs/wsc_ie.js"))}});CKEDITOR.config.plugins="dialogui,dialog,about,a11yhelp,basicstyles,blockquote,clipboard,panel,floatpanel,menu,contextmenu,resize,button,toolbar,elementspath,enterkey,entities,popup,filebrowser,floatingspace,listblock,richcombo,format,horizontalrule,htmlwriter,wysiwygarea,image,indent,indentlist,fakeobjects,link,list,magicline,maximize,pastetext,pastefromword,removeformat,showborders,sourcearea,specialchar,menubutton,scayt,stylescombo,tab,table,tabletools,undo,wsc";CKEDITOR.config.skin="moono";(function(){var b=function(h,g){var f=CKEDITOR.getUrl("plugins/"+g);h=h.split(",");for(var a=0;a<h.length;a++){CKEDITOR.skin.icons[h[a]]={path:f,offset:-h[++a],bgsize:h[++a]}}};if(CKEDITOR.env.hidpi){b("about,0,,bold,24,,italic,48,,strike,72,,subscript,96,,superscript,120,,underline,144,,blockquote,168,,copy-rtl,192,,copy,216,,cut-rtl,240,,cut,264,,paste-rtl,288,,paste,312,,horizontalrule,336,,image,360,,indent-rtl,384,,indent,408,,outdent-rtl,432,,outdent,456,,anchor-rtl,480,,anchor,504,,link,528,,unlink,552,,bulletedlist-rtl,576,,bulletedlist,600,,numberedlist-rtl,624,,numberedlist,648,,maximize,672,,pastetext-rtl,696,,pastetext,720,,pastefromword-rtl,744,,pastefromword,768,,removeformat,792,,source-rtl,816,,source,840,,specialchar,864,,scayt,888,,table,912,,redo-rtl,936,,redo,960,,undo-rtl,984,,undo,1008,,spellchecker,1032,","icons_hidpi.png")}else{b("about,0,auto,bold,24,auto,italic,48,auto,strike,72,auto,subscript,96,auto,superscript,120,auto,underline,144,auto,blockquote,168,auto,copy-rtl,192,auto,copy,216,auto,cut-rtl,240,auto,cut,264,auto,paste-rtl,288,auto,paste,312,auto,horizontalrule,336,auto,image,360,auto,indent-rtl,384,auto,indent,408,auto,outdent-rtl,432,auto,outdent,456,auto,anchor-rtl,480,auto,anchor,504,auto,link,528,auto,unlink,552,auto,bulletedlist-rtl,576,auto,bulletedlist,600,auto,numberedlist-rtl,624,auto,numberedlist,648,auto,maximize,672,auto,pastetext-rtl,696,auto,pastetext,720,auto,pastefromword-rtl,744,auto,pastefromword,768,auto,removeformat,792,auto,source-rtl,816,auto,source,840,auto,specialchar,864,auto,scayt,888,auto,table,912,auto,redo-rtl,936,auto,redo,960,auto,undo-rtl,984,auto,undo,1008,auto,spellchecker,1032,auto","icons.png")}})();CKEDITOR.lang.languages={af:1,sq:1,ar:1,eu:1,bn:1,bs:1,bg:1,ca:1,"zh-cn":1,zh:1,hr:1,cs:1,da:1,nl:1,en:1,"en-au":1,"en-ca":1,"en-gb":1,eo:1,et:1,fo:1,fi:1,fr:1,"fr-ca":1,gl:1,ka:1,de:1,"de-ch":1,el:1,gu:1,he:1,hi:1,hu:1,is:1,id:1,it:1,ja:1,km:1,ko:1,ku:1,lv:1,lt:1,mk:1,ms:1,mn:1,no:1,nb:1,fa:1,pl:1,"pt-br":1,pt:1,ro:1,ru:1,sr:1,"sr-latn":1,si:1,sk:1,sl:1,es:1,sv:1,tt:1,th:1,tr:1,ug:1,uk:1,vi:1,cy:1}}());
(function(){var a,b,c,d,e=[].slice,f=function(j,k){return function(){return j.apply(k,arguments)}},g={}.hasOwnProperty,h=function(l,m){function j(){this.constructor=l}for(var k in m){g.call(m,k)&&(l[k]=m[k])}return j.prototype=m.prototype,l.prototype=new j,l.__super__=m.prototype,l},i=[].indexOf||function(k){for(var l=0,j=this.length;j>l;l++){if(l in this&&this[l]===k){return l}}return -1};b=window.Morris={},a=jQuery,b.EventEmitter=function(){function j(){}return j.prototype.on=function(k,l){return null==this.handlers&&(this.handlers={}),null==this.handlers[k]&&(this.handlers[k]=[]),this.handlers[k].push(l),this},j.prototype.fire=function(){var o,q,k,l,m,n,p;if(k=arguments[0],o=2<=arguments.length?e.call(arguments,1):[],null!=this.handlers&&null!=this.handlers[k]){for(n=this.handlers[k],p=[],l=0,m=n.length;m>l;l++){q=n[l],p.push(q.apply(null,o))}return p}},j}(),b.commas=function(m){var n,l,j,k;return null!=m?(j=0>m?"-":"",n=Math.abs(m),l=Math.floor(n).toFixed(0),j+=l.replace(/(?=(?:\d{3})+$)(?!^)/g,","),k=n.toString(),k.length>l.length&&(j+=k.slice(l.length)),j):"-"},b.pad2=function(j){return(10>j?"0":"")+j},b.Grid=function(j){function k(m){this.resizeHandler=f(this.resizeHandler,this);var l=this;if(this.el="string"==typeof m.element?a(document.getElementById(m.element)):a(m.element),null==this.el||0===this.el.length){throw new Error("Graph container element not found")}"static"===this.el.css("position")&&this.el.css("position","relative"),this.options=a.extend({},this.gridDefaults,this.defaults||{},m),"string"==typeof this.options.units&&(this.options.postUnits=m.units),this.raphael=new Raphael(this.el[0]),this.elementWidth=null,this.elementHeight=null,this.dirty=!1,this.selectFrom=null,this.init&&this.init(),this.setData(this.options.data),this.el.bind("mousemove",function(r){var v,n,p,q,o;return n=l.el.offset(),o=r.pageX-n.left,l.selectFrom?(v=l.data[l.hitTest(Math.min(o,l.selectFrom))]._x,p=l.data[l.hitTest(Math.max(o,l.selectFrom))]._x,q=p-v,l.selectionRect.attr({x:v,width:q})):l.fire("hovermove",o,r.pageY-n.top)}),this.el.bind("mouseleave",function(){return l.selectFrom&&(l.selectionRect.hide(),l.selectFrom=null),l.fire("hoverout")}),this.el.bind("touchstart touchmove touchend",function(o){var p,n;return n=o.originalEvent.touches[0]||o.originalEvent.changedTouches[0],p=l.el.offset(),l.fire("hovermove",n.pageX-p.left,n.pageY-p.top)}),this.el.bind("click",function(n){var o;return o=l.el.offset(),l.fire("gridclick",n.pageX-o.left,n.pageY-o.top)}),this.options.rangeSelect&&(this.selectionRect=this.raphael.rect(0,0,0,this.el.innerHeight()).attr({fill:this.options.rangeSelectColor,stroke:!1}).toBack().hide(),this.el.bind("mousedown",function(n){var o;return o=l.el.offset(),l.startRange(n.pageX-o.left)}),this.el.bind("mouseup",function(n){var o;return o=l.el.offset(),l.endRange(n.pageX-o.left),l.fire("hovermove",n.pageX-o.left,n.pageY-o.top)})),this.options.resize&&a(window).bind("resize",function(){return null!=l.timeoutId&&window.clearTimeout(l.timeoutId),l.timeoutId=window.setTimeout(l.resizeHandler,100)}),this.el.css("-webkit-tap-highlight-color","rgba(0,0,0,0)"),this.postInit&&this.postInit()}return h(k,j),k.prototype.gridDefaults={dateFormat:null,axes:!0,grid:!0,gridLineColor:"#aaa",gridStrokeWidth:0.5,gridTextColor:"#888",gridTextSize:12,gridTextFamily:"sans-serif",gridTextWeight:"normal",hideHover:!1,yLabelFormat:null,xLabelAngle:0,numLines:5,padding:25,parseTime:!0,postUnits:"",preUnits:"",ymax:"auto",ymin:"auto 0",goals:[],goalStrokeWidth:1,goalLineColors:["#666633","#999966","#cc6666","#663333"],events:[],eventStrokeWidth:1,eventLineColors:["#005a04","#ccffbb","#3a5f0b","#005502"],rangeSelect:null,rangeSelectColor:"#eef",resize:!1},k.prototype.setData=function(K,M){var O,Q,S,l,m,n,o,p,q,r,J,L,N,P,R;return null==M&&(M=!0),this.options.data=K,null==K||0===K.length?(this.data=[],this.raphael.clear(),null!=this.hover&&this.hover.hide(),void 0):(L=this.cumulative?0:null,N=this.cumulative?0:null,this.options.goals.length>0&&(m=Math.min.apply(Math,this.options.goals),l=Math.max.apply(Math,this.options.goals),N=null!=N?Math.min(N,m):m,L=null!=L?Math.max(L,l):l),this.data=function(){var s,t,u;for(u=[],S=s=0,t=K.length;t>s;S=++s){o=K[S],n={src:o},n.label=o[this.options.xkey],this.options.parseTime?(n.x=b.parseDate(n.label),this.options.dateFormat?n.label=this.options.dateFormat(n.x):"number"==typeof n.label&&(n.label=new Date(n.label).toString())):(n.x=S,this.options.xLabelFormat&&(n.label=this.options.xLabelFormat(n))),q=0,n.y=function(){var x,y,v,w;for(v=this.options.ykeys,w=[],Q=x=0,y=v.length;y>x;Q=++x){J=v[Q],P=o[J],"string"==typeof P&&(P=parseFloat(P)),null!=P&&"number"!=typeof P&&(P=null),null!=P&&(this.cumulative?q+=P:null!=L?(L=Math.max(P,L),N=Math.min(P,N)):L=N=P),this.cumulative&&null!=q&&(L=Math.max(q,L),N=Math.min(q,N)),w.push(P)}return w}.call(this),u.push(n)}return u}.call(this),this.options.parseTime&&(this.data=this.data.sort(function(s,t){return(s.x>t.x)-(t.x>s.x)})),this.xmin=this.data[0].x,this.xmax=this.data[this.data.length-1].x,this.events=[],this.options.events.length>0&&(this.events=this.options.parseTime?function(){var v,s,t,u;for(t=this.options.events,u=[],v=0,s=t.length;s>v;v++){O=t[v],u.push(b.parseDate(O))}return u}.call(this):this.options.events,this.xmax=Math.max(this.xmax,Math.max.apply(Math,this.events)),this.xmin=Math.min(this.xmin,Math.min.apply(Math,this.events))),this.xmin===this.xmax&&(this.xmin-=1,this.xmax+=1),this.ymin=this.yboundary("min",N),this.ymax=this.yboundary("max",L),this.ymin===this.ymax&&(N&&(this.ymin-=1),this.ymax+=1),((R=this.options.axes)===!0||"both"===R||"y"===R||this.options.grid===!0)&&(this.options.ymax===this.gridDefaults.ymax&&this.options.ymin===this.gridDefaults.ymin?(this.grid=this.autoGridLines(this.ymin,this.ymax,this.options.numLines),this.ymin=Math.min(this.ymin,this.grid[0]),this.ymax=Math.max(this.ymax,this.grid[this.grid.length-1])):(p=(this.ymax-this.ymin)/(this.options.numLines-1),this.grid=function(){var u,v,s,t;for(t=[],r=u=v=this.ymin,s=this.ymax;p>0?s>=u:u>=s;r=u+=p){t.push(r)}return t}.call(this))),this.dirty=!0,M?this.redraw():void 0)},k.prototype.yboundary=function(n,o){var l,m;return l=this.options["y"+n],"string"==typeof l?"auto"===l.slice(0,4)?l.length>5?(m=parseInt(l.slice(5),10),null==o?m:Math[n](o,m)):null!=o?o:0:parseInt(l,10):l},k.prototype.autoGridLines=function(l,m,n){var o,p,q,r,E,F,G,H,I;return E=m-l,I=Math.floor(Math.log(E)/Math.log(10)),G=Math.pow(10,I),p=Math.floor(l/G)*G,o=Math.ceil(m/G)*G,F=(o-p)/(n-1),1===G&&F>1&&Math.ceil(F)!==F&&(F=Math.ceil(F),o=p+F*(n-1)),0>p&&o>0&&(p=Math.floor(l/F)*F,o=Math.ceil(m/F)*F),1>F?(r=Math.floor(Math.log(F)/Math.log(10)),q=function(){var s,t;for(t=[],H=s=p;F>0?o>=s:s>=o;H=s+=F){t.push(parseFloat(H.toFixed(1-r)))}return t}()):q=function(){var s,t;for(t=[],H=s=p;F>0?o>=s:s>=o;H=s+=F){t.push(H)}return t}(),q},k.prototype._calc=function(){var r,q,z,l,m,n,o,p;return m=this.el.width(),z=this.el.height(),(this.elementWidth!==m||this.elementHeight!==z||this.dirty)&&(this.elementWidth=m,this.elementHeight=z,this.dirty=!1,this.left=this.options.padding,this.right=this.elementWidth-this.options.padding,this.top=this.options.padding,this.bottom=this.elementHeight-this.options.padding,((o=this.options.axes)===!0||"both"===o||"y"===o)&&(n=function(){var u,v,s,t;for(s=this.grid,t=[],u=0,v=s.length;v>u;u++){q=s[u],t.push(this.measureText(this.yAxisFormat(q)).width)}return t}.call(this),this.left+=Math.max.apply(Math,n)),((p=this.options.axes)===!0||"both"===p||"x"===p)&&(r=function(){var t,u,s;for(s=[],l=t=0,u=this.data.length;u>=0?u>t:t>u;l=u>=0?++t:--t){s.push(this.measureText(this.data[l].text,-this.options.xLabelAngle).height)}return s}.call(this),this.bottom-=Math.max.apply(Math,r)),this.width=Math.max(1,this.right-this.left),this.height=Math.max(1,this.bottom-this.top),this.dx=this.width/(this.xmax-this.xmin),this.dy=this.height/(this.ymax-this.ymin),this.calc)?this.calc():void 0},k.prototype.transY=function(l){return this.bottom-(l-this.ymin)*this.dy},k.prototype.transX=function(l){return 1===this.data.length?(this.left+this.right)/2:this.left+(l-this.xmin)*this.dx},k.prototype.redraw=function(){return this.raphael.clear(),this._calc(),this.drawGrid(),this.drawGoals(),this.drawEvents(),this.draw?this.draw():void 0},k.prototype.measureText=function(n,o){var l,m;return null==o&&(o=0),m=this.raphael.text(100,100,n).attr("font-size",this.options.gridTextSize).attr("font-family",this.options.gridTextFamily).attr("font-weight",this.options.gridTextWeight).rotate(o),l=m.getBBox(),m.remove(),l},k.prototype.yAxisFormat=function(l){return this.yLabelFormat(l)},k.prototype.yLabelFormat=function(l){return"function"==typeof this.options.yLabelFormat?this.options.yLabelFormat(l):""+this.options.preUnits+b.commas(l)+this.options.postUnits},k.prototype.drawGrid=function(){var r,q,z,l,m,n,o,p;if(this.options.grid!==!1||(m=this.options.axes)===!0||"both"===m||"y"===m){for(n=this.grid,p=[],z=0,l=n.length;l>z;z++){r=n[z],q=this.transY(r),((o=this.options.axes)===!0||"both"===o||"y"===o)&&this.drawYAxisLabel(this.left-this.options.padding/2,q,this.yAxisFormat(r)),this.options.grid?p.push(this.drawGridLine("M"+this.left+","+q+"H"+(this.left+this.width))):p.push(void 0)}return p}},k.prototype.drawGoals=function(){var p,r,l,m,n,o,q;for(o=this.options.goals,q=[],l=m=0,n=o.length;n>m;l=++m){r=o[l],p=this.options.goalLineColors[l%this.options.goalLineColors.length],q.push(this.drawGoal(r,p))}return q},k.prototype.drawEvents=function(){var p,r,l,m,n,o,q;for(o=this.events,q=[],l=m=0,n=o.length;n>m;l=++m){r=o[l],p=this.options.eventLineColors[l%this.options.eventLineColors.length],q.push(this.drawEvent(r,p))}return q},k.prototype.drawGoal=function(l,m){return this.raphael.path("M"+this.left+","+this.transY(l)+"H"+this.right).attr("stroke",m).attr("stroke-width",this.options.goalStrokeWidth)},k.prototype.drawEvent=function(l,m){return this.raphael.path("M"+this.transX(l)+","+this.bottom+"V"+this.top).attr("stroke",m).attr("stroke-width",this.options.eventStrokeWidth)},k.prototype.drawYAxisLabel=function(m,n,l){return this.raphael.text(m,n,l).attr("font-size",this.options.gridTextSize).attr("font-family",this.options.gridTextFamily).attr("font-weight",this.options.gridTextWeight).attr("fill",this.options.gridTextColor).attr("text-anchor","end")},k.prototype.drawGridLine=function(l){return this.raphael.path(l).attr("stroke",this.options.gridLineColor).attr("stroke-width",this.options.gridStrokeWidth)},k.prototype.startRange=function(l){return this.hover.hide(),this.selectFrom=l,this.selectionRect.attr({x:l,width:0}).show()},k.prototype.endRange=function(m){var n,l;return this.selectFrom?(l=Math.min(this.selectFrom,m),n=Math.max(this.selectFrom,m),this.options.rangeSelect.call(this.el,{start:this.data[this.hitTest(l)].x,end:this.data[this.hitTest(n)].x}),this.selectFrom=null):void 0},k.prototype.resizeHandler=function(){return this.timeoutId=null,this.raphael.setSize(this.el.width(),this.el.height()),this.redraw()},k}(b.EventEmitter),b.parseDate=function(j){var k,l,m,n,o,p,q,r,E,F,G;return"number"==typeof j?j:(l=j.match(/^(\d+) Q(\d)$/),n=j.match(/^(\d+)-(\d+)$/),o=j.match(/^(\d+)-(\d+)-(\d+)$/),q=j.match(/^(\d+) W(\d+)$/),r=j.match(/^(\d+)-(\d+)-(\d+)[ T](\d+):(\d+)(Z|([+-])(\d\d):?(\d\d))?$/),E=j.match(/^(\d+)-(\d+)-(\d+)[ T](\d+):(\d+):(\d+(\.\d+)?)(Z|([+-])(\d\d):?(\d\d))?$/),l?new Date(parseInt(l[1],10),3*parseInt(l[2],10)-1,1).getTime():n?new Date(parseInt(n[1],10),parseInt(n[2],10)-1,1).getTime():o?new Date(parseInt(o[1],10),parseInt(o[2],10)-1,parseInt(o[3],10)).getTime():q?(F=new Date(parseInt(q[1],10),0,1),4!==F.getDay()&&F.setMonth(0,1+(4-F.getDay()+7)%7),F.getTime()+604800000*parseInt(q[2],10)):r?r[6]?(p=0,"Z"!==r[6]&&(p=60*parseInt(r[8],10)+parseInt(r[9],10),"+"===r[7]&&(p=0-p)),Date.UTC(parseInt(r[1],10),parseInt(r[2],10)-1,parseInt(r[3],10),parseInt(r[4],10),parseInt(r[5],10)+p)):new Date(parseInt(r[1],10),parseInt(r[2],10)-1,parseInt(r[3],10),parseInt(r[4],10),parseInt(r[5],10)).getTime():E?(G=parseFloat(E[6]),k=Math.floor(G),m=Math.round(1000*(G-k)),E[8]?(p=0,"Z"!==E[8]&&(p=60*parseInt(E[10],10)+parseInt(E[11],10),"+"===E[9]&&(p=0-p)),Date.UTC(parseInt(E[1],10),parseInt(E[2],10)-1,parseInt(E[3],10),parseInt(E[4],10),parseInt(E[5],10)+p,k,m)):new Date(parseInt(E[1],10),parseInt(E[2],10)-1,parseInt(E[3],10),parseInt(E[4],10),parseInt(E[5],10),k,m).getTime()):new Date(parseInt(j,10),0,1).getTime())},b.Hover=function(){function j(k){null==k&&(k={}),this.options=a.extend({},b.Hover.defaults,k),this.el=a("<div class='"+this.options["class"]+"'></div>"),this.el.hide(),this.options.parent.append(this.el)}return j.defaults={"class":"morris-hover morris-default-style"},j.prototype.update=function(l,m,k){return l?(this.html(l),this.show(),this.moveTo(m,k)):this.hide()},j.prototype.html=function(k){return this.el.html(k)},j.prototype.moveTo=function(q,p){var r,k,l,m,n,o;return n=this.options.parent.innerWidth(),m=this.options.parent.innerHeight(),k=this.el.outerWidth(),r=this.el.outerHeight(),l=Math.min(Math.max(0,q-k/2),n-k),null!=p?(o=p-r-10,0>o&&(o=p+10,o+r>m&&(o=m/2-r/2))):o=m/2-r/2,this.el.css({left:l+"px",top:parseInt(o)+"px"})},j.prototype.show=function(){return this.el.show()},j.prototype.hide=function(){return this.el.hide()},j}(),b.Line=function(j){function k(l){return this.hilight=f(this.hilight,this),this.onHoverOut=f(this.onHoverOut,this),this.onHoverMove=f(this.onHoverMove,this),this.onGridClick=f(this.onGridClick,this),this instanceof b.Line?(k.__super__.constructor.call(this,l),void 0):new b.Line(l)}return h(k,j),k.prototype.init=function(){return"always"!==this.options.hideHover?(this.hover=new b.Hover({parent:this.el}),this.on("hovermove",this.onHoverMove),this.on("hoverout",this.onHoverOut),this.on("gridclick",this.onGridClick)):void 0},k.prototype.defaults={lineWidth:3,pointSize:4,lineColors:["#0b62a4","#7A92A3","#4da74d","#afd8f8","#edc240","#cb4b4b","#9440ed"],pointStrokeWidths:[1],pointStrokeColors:["#ffffff"],pointFillColors:[],smooth:!0,xLabels:"auto",xLabelFormat:null,xLabelMargin:24,hideHover:!1},k.prototype.calc=function(){return this.calcPoints(),this.generatePaths()},k.prototype.calcPoints=function(){var p,q,l,n,o,m;for(o=this.data,m=[],l=0,n=o.length;n>l;l++){p=o[l],p._x=this.transX(p.x),p._y=function(){var r,t,u,s;for(u=p.y,s=[],r=0,t=u.length;t>r;r++){q=u[r],null!=q?s.push(this.transY(q)):s.push(q)}return s}.call(this),m.push(p._ymax=Math.min.apply(Math,[this.bottom].concat(function(){var r,t,u,s;for(u=p._y,s=[],r=0,t=u.length;t>r;r++){q=u[r],null!=q&&s.push(q)}return s}())))}return m},k.prototype.hitTest=function(p){var q,l,n,o,m;if(0===this.data.length){return null}for(m=this.data.slice(1),q=n=0,o=m.length;o>n&&(l=m[q],!(p<(l._x+this.data[q]._x)/2));q=++n){}return q},k.prototype.onGridClick=function(m,n){var l;return l=this.hitTest(m),this.fire("click",l,this.data[l].src,m,n)},k.prototype.onHoverMove=function(l){var m;return m=this.hitTest(l),this.displayHoverForRow(m)},k.prototype.onHoverOut=function(){return this.options.hideHover!==!1?this.displayHoverForRow(null):void 0},k.prototype.displayHoverForRow=function(l){var m;return null!=l?((m=this.hover).update.apply(m,this.hoverContentForRow(l)),this.hilight(l)):(this.hover.hide(),this.hilight())},k.prototype.hoverContentForRow=function(r){var q,z,l,m,n,o,p;for(l=this.data[r],q="<div class='morris-hover-row-label'>"+l.label+"</div>",p=l.y,z=n=0,o=p.length;o>n;z=++n){m=p[z],q+="<div class='morris-hover-point' style='color: "+this.colorFor(l,z,"label")+"'>\n  "+this.options.labels[z]+":\n  "+this.yLabelFormat(m)+"\n</div>"}return"function"==typeof this.options.hoverCallback&&(q=this.options.hoverCallback(r,this.options,q,l.src)),[q,l._x,l._ymax]},k.prototype.generatePaths=function(){var o,l,m,n;return this.paths=function(){var q,r,t,p;for(p=[],l=q=0,r=this.options.ykeys.length;r>=0?r>q:q>r;l=r>=0?++q:--q){n="boolean"==typeof this.options.smooth?this.options.smooth:(t=this.options.ykeys[l],i.call(this.options.smooth,t)>=0),o=function(){var y,z,s,x;for(s=this.data,x=[],y=0,z=s.length;z>y;y++){m=s[y],void 0!==m._y[l]&&x.push({x:m._x,y:m._y[l]})}return x}.call(this),o.length>1?p.push(b.Line.createPath(o,n,this.bottom)):p.push(null)}return p}.call(this)},k.prototype.draw=function(){var l;return((l=this.options.axes)===!0||"both"===l||"x"===l)&&this.drawXAxis(),this.drawSeries(),this.options.hideHover===!1?this.displayHoverForRow(this.data.length-1):void 0},k.prototype.drawXAxis=function(){var l,m,n,o,p,q,r,D,E,F,G=this;for(r=this.bottom+this.options.padding/2,p=null,o=null,l=function(w,y){var t,u,v,x,s;return t=G.drawXAxisLabel(G.transX(y),r,w),s=t.getBBox(),t.transform("r"+-G.options.xLabelAngle),u=t.getBBox(),t.transform("t0,"+u.height/2+"..."),0!==G.options.xLabelAngle&&(x=-0.5*s.width*Math.cos(G.options.xLabelAngle*Math.PI/180),t.transform("t"+x+",0...")),u=t.getBBox(),(null==p||p>=u.x+u.width||null!=o&&o>=u.x)&&u.x>=0&&u.x+u.width<G.el.width()?(0!==G.options.xLabelAngle&&(v=1.25*G.options.gridTextSize/Math.sin(G.options.xLabelAngle*Math.PI/180),o=u.x-v),p=u.x-G.options.xLabelMargin):t.remove()},n=this.options.parseTime?1===this.data.length&&"auto"===this.options.xLabels?[[this.data[0].label,this.data[0].x]]:b.labelSeries(this.xmin,this.xmax,this.width,this.options.xLabels,this.options.xLabelFormat):function(){var u,v,s,t;for(s=this.data,t=[],u=0,v=s.length;v>u;u++){q=s[u],t.push([q.label,q.x])}return t}.call(this),n.reverse(),F=[],D=0,E=n.length;E>D;D++){m=n[D],F.push(l(m[0],m[1]))}return F},k.prototype.drawSeries=function(){var p,q,l,n,o,m;for(this.seriesPoints=[],p=q=n=this.options.ykeys.length-1;0>=n?0>=q:q>=0;p=0>=n?++q:--q){this._drawLineFor(p)}for(m=[],p=l=o=this.options.ykeys.length-1;0>=o?0>=l:l>=0;p=0>=o?++l:--l){m.push(this._drawPointFor(p))}return m},k.prototype._drawPointFor=function(p){var r,l,m,n,o,q;for(this.seriesPoints[p]=[],o=this.data,q=[],m=0,n=o.length;n>m;m++){l=o[m],r=null,null!=l._y[p]&&(r=this.drawLinePoint(l._x,l._y[p],this.colorFor(l,p,"point"),p)),q.push(this.seriesPoints[p].push(r))}return q},k.prototype._drawLineFor=function(l){var m;return m=this.paths[l],null!==m?this.drawLinePath(m,this.colorFor(null,l,"line"),l):void 0},k.createPath=function(K,M,O){var Q,S,l,m,n,o,p,q,r,J,L,N,P,R;for(p="",M&&(l=b.Line.gradients(K)),q={y:null},m=P=0,R=K.length;R>P;m=++P){Q=K[m],null!=Q.y&&(null!=q.y?M?(S=l[m],o=l[m-1],n=(Q.x-q.x)/4,r=q.x+n,L=Math.min(O,q.y+n*o),J=Q.x-n,N=Math.min(O,Q.y-n*S),p+="C"+r+","+L+","+J+","+N+","+Q.x+","+Q.y):p+="L"+Q.x+","+Q.y:M&&null==l[m]||(p+="M"+Q.x+","+Q.y)),q=Q}return p},k.gradients=function(l){var m,n,o,p,q,r,B,C;for(n=function(s,t){return(s.y-t.y)/(s.x-t.x)},C=[],o=r=0,B=l.length;B>r;o=++r){m=l[o],null!=m.y?(p=l[o+1]||{y:null},q=l[o-1]||{y:null},null!=q.y&&null!=p.y?C.push(n(q,p)):null!=q.y?C.push(n(q,m)):null!=p.y?C.push(n(m,p)):C.push(null)):C.push(null)}return C},k.prototype.hilight=function(p){var q,l,n,o,m;if(null!==this.prevHilight&&this.prevHilight!==p){for(q=l=0,o=this.seriesPoints.length-1;o>=0?o>=l:l>=o;q=o>=0?++l:--l){this.seriesPoints[q][this.prevHilight]&&this.seriesPoints[q][this.prevHilight].animate(this.pointShrinkSeries(q))}}if(null!==p&&this.prevHilight!==p){for(q=n=0,m=this.seriesPoints.length-1;m>=0?m>=n:n>=m;q=m>=0?++n:--n){this.seriesPoints[q][p]&&this.seriesPoints[q][p].animate(this.pointGrowSeries(q))}}return this.prevHilight=p},k.prototype.colorFor=function(m,n,l){return"function"==typeof this.options.lineColors?this.options.lineColors.call(this,m,n,l):"point"===l?this.options.pointFillColors[n%this.options.pointFillColors.length]||this.options.lineColors[n%this.options.lineColors.length]:this.options.lineColors[n%this.options.lineColors.length]},k.prototype.drawXAxisLabel=function(m,n,l){return this.raphael.text(m,n,l).attr("font-size",this.options.gridTextSize).attr("font-family",this.options.gridTextFamily).attr("font-weight",this.options.gridTextWeight).attr("fill",this.options.gridTextColor)},k.prototype.drawLinePath=function(m,n,l){return this.raphael.path(m).attr("stroke",n).attr("stroke-width",this.lineWidthForSeries(l))},k.prototype.drawLinePoint=function(n,o,l,m){return this.raphael.circle(n,o,this.pointSizeForSeries(m)).attr("fill",l).attr("stroke-width",this.pointStrokeWidthForSeries(m)).attr("stroke",this.pointStrokeColorForSeries(m))},k.prototype.pointStrokeWidthForSeries=function(l){return this.options.pointStrokeWidths[l%this.options.pointStrokeWidths.length]},k.prototype.pointStrokeColorForSeries=function(l){return this.options.pointStrokeColors[l%this.options.pointStrokeColors.length]},k.prototype.lineWidthForSeries=function(l){return this.options.lineWidth instanceof Array?this.options.lineWidth[l%this.options.lineWidth.length]:this.options.lineWidth},k.prototype.pointSizeForSeries=function(l){return this.options.pointSize instanceof Array?this.options.pointSize[l%this.options.pointSize.length]:this.options.pointSize},k.prototype.pointGrowSeries=function(l){return Raphael.animation({r:this.pointSizeForSeries(l)+3},25,"linear")},k.prototype.pointShrinkSeries=function(l){return Raphael.animation({r:this.pointSizeForSeries(l)},25,"linear")},k}(b.Grid),b.labelSeries=function(K,M,j,k,l){var m,n,p,r,G,H,I,J,L,o,q;if(p=200*(M-K)/j,n=new Date(K),I=b.LABEL_SPECS[k],void 0===I){for(q=b.AUTO_LABEL_ORDER,L=0,o=q.length;o>L;L++){if(r=q[L],H=b.LABEL_SPECS[r],p>=H.span){I=H;break}}}for(void 0===I&&(I=b.LABEL_SPECS.second),l&&(I=a.extend({},I,{fmt:l})),m=I.start(n),G=[];(J=m.getTime())<=M;){J>=K&&G.push([I.fmt(m),J]),I.incr(m)}return G},c=function(j){return{span:60*j*1000,start:function(k){return new Date(k.getFullYear(),k.getMonth(),k.getDate(),k.getHours())},fmt:function(k){return""+b.pad2(k.getHours())+":"+b.pad2(k.getMinutes())},incr:function(k){return k.setUTCMinutes(k.getUTCMinutes()+j)}}},d=function(j){return{span:1000*j,start:function(k){return new Date(k.getFullYear(),k.getMonth(),k.getDate(),k.getHours(),k.getMinutes())},fmt:function(k){return""+b.pad2(k.getHours())+":"+b.pad2(k.getMinutes())+":"+b.pad2(k.getSeconds())},incr:function(k){return k.setUTCSeconds(k.getUTCSeconds()+j)}}},b.LABEL_SPECS={decade:{span:172800000000,start:function(j){return new Date(j.getFullYear()-j.getFullYear()%10,0,1)},fmt:function(j){return""+j.getFullYear()},incr:function(j){return j.setFullYear(j.getFullYear()+10)}},year:{span:17280000000,start:function(j){return new Date(j.getFullYear(),0,1)},fmt:function(j){return""+j.getFullYear()},incr:function(j){return j.setFullYear(j.getFullYear()+1)}},month:{span:2419200000,start:function(j){return new Date(j.getFullYear(),j.getMonth(),1)},fmt:function(j){return""+j.getFullYear()+"-"+b.pad2(j.getMonth()+1)},incr:function(j){return j.setMonth(j.getMonth()+1)}},week:{span:604800000,start:function(j){return new Date(j.getFullYear(),j.getMonth(),j.getDate())},fmt:function(j){return""+j.getFullYear()+"-"+b.pad2(j.getMonth()+1)+"-"+b.pad2(j.getDate())},incr:function(j){return j.setDate(j.getDate()+7)}},day:{span:86400000,start:function(j){return new Date(j.getFullYear(),j.getMonth(),j.getDate())},fmt:function(j){return""+j.getFullYear()+"-"+b.pad2(j.getMonth()+1)+"-"+b.pad2(j.getDate())},incr:function(j){return j.setDate(j.getDate()+1)}},hour:c(60),"30min":c(30),"15min":c(15),"10min":c(10),"5min":c(5),minute:c(1),"30sec":d(30),"15sec":d(15),"10sec":d(10),"5sec":d(5),second:d(1)},b.AUTO_LABEL_ORDER=["decade","year","month","week","day","hour","30min","15min","10min","5min","minute","30sec","15sec","10sec","5sec","second"],b.Area=function(l){function j(m){var n;return this instanceof b.Area?(n=a.extend({},k,m),this.cumulative=!n.behaveLikeLine,"auto"===n.fillOpacity&&(n.fillOpacity=n.behaveLikeLine?0.8:1),j.__super__.constructor.call(this,n),void 0):new b.Area(m)}var k;return h(j,l),k={fillOpacity:"auto",behaveLikeLine:!1},j.prototype.calcPoints=function(){var q,x,m,n,o,p,r;for(p=this.data,r=[],n=0,o=p.length;o>n;n++){q=p[n],q._x=this.transX(q.x),x=0,q._y=function(){var t,v,s,u;for(s=q.y,u=[],t=0,v=s.length;v>t;t++){m=s[t],this.options.behaveLikeLine?u.push(this.transY(m)):(x+=m||0,u.push(this.transY(x)))}return u}.call(this),r.push(q._ymax=Math.max.apply(Math,q._y))}return r},j.prototype.drawSeries=function(){var z,r,A,m,n,o,p,q;for(this.seriesPoints=[],r=this.options.behaveLikeLine?function(){o=[];for(var s=0,t=this.options.ykeys.length-1;t>=0?t>=s:s>=t;t>=0?s++:s--){o.push(s)}return o}.apply(this):function(){p=[];for(var s=n=this.options.ykeys.length-1;0>=n?0>=s:s>=0;0>=n?s++:s--){p.push(s)}return p}.apply(this),q=[],A=0,m=r.length;m>A;A++){z=r[A],this._drawFillFor(z),this._drawLineFor(z),q.push(this._drawPointFor(z))}return q},j.prototype._drawFillFor=function(m){var n;return n=this.paths[m],null!==n?(n+="L"+this.transX(this.xmax)+","+this.bottom+"L"+this.transX(this.xmin)+","+this.bottom+"Z",this.drawFilledPath(n,this.fillForSeries(m))):void 0},j.prototype.fillForSeries=function(m){var n;return n=Raphael.rgb2hsl(this.colorFor(this.data[m],m,"line")),Raphael.hsl(n.h,this.options.behaveLikeLine?0.9*n.s:0.75*n.s,Math.min(0.98,this.options.behaveLikeLine?1.2*n.l:1.25*n.l))},j.prototype.drawFilledPath=function(m,n){return this.raphael.path(m).attr("fill",n).attr("fill-opacity",this.options.fillOpacity).attr("stroke","none")},j}(b.Line),b.Bar=function(j){function k(l){return this.onHoverOut=f(this.onHoverOut,this),this.onHoverMove=f(this.onHoverMove,this),this.onGridClick=f(this.onGridClick,this),this instanceof b.Bar?(k.__super__.constructor.call(this,a.extend({},l,{parseTime:!1})),void 0):new b.Bar(l)}return h(k,j),k.prototype.init=function(){return this.cumulative=this.options.stacked,"always"!==this.options.hideHover?(this.hover=new b.Hover({parent:this.el}),this.on("hovermove",this.onHoverMove),this.on("hoverout",this.onHoverOut),this.on("gridclick",this.onGridClick)):void 0},k.prototype.defaults={barSizeRatio:0.75,barGap:3,barColors:["#0b62a4","#7a92a3","#4da74d","#afd8f8","#edc240","#cb4b4b","#9440ed"],barOpacity:1,barRadius:[0,0,0,0],xLabelMargin:50},k.prototype.calc=function(){var l;return this.calcBars(),this.options.hideHover===!1?(l=this.hover).update.apply(l,this.hoverContentForRow(this.data.length-1)):void 0},k.prototype.calcBars=function(){var p,r,l,m,n,o,q;for(o=this.data,q=[],p=m=0,n=o.length;n>m;p=++m){r=o[p],r._x=this.left+this.width*(p+0.5)/this.data.length,q.push(r._y=function(){var v,u,s,t;for(s=r.y,t=[],v=0,u=s.length;u>v;v++){l=s[v],null!=l?t.push(this.transY(l)):t.push(null)}return t}.call(this))}return q},k.prototype.draw=function(){var l;return((l=this.options.axes)===!0||"both"===l||"x"===l)&&this.drawXAxis(),this.drawSeries()},k.prototype.drawXAxis=function(){var K,l,m,n,o,p,q,r,F,G,H,I,J;for(G=this.bottom+(this.options.xAxisLabelTopPadding||this.options.padding/2),q=null,p=null,J=[],K=H=0,I=this.data.length;I>=0?I>H:H>I;K=I>=0?++H:--H){r=this.data[this.data.length-1-K],l=this.drawXAxisLabel(r._x,G,r.label),F=l.getBBox(),l.transform("r"+-this.options.xLabelAngle),m=l.getBBox(),l.transform("t0,"+m.height/2+"..."),0!==this.options.xLabelAngle&&(o=-0.5*F.width*Math.cos(this.options.xLabelAngle*Math.PI/180),l.transform("t"+o+",0...")),(null==q||q>=m.x+m.width||null!=p&&p>=m.x)&&m.x>=0&&m.x+m.width<this.el.width()?(0!==this.options.xLabelAngle&&(n=1.25*this.options.gridTextSize/Math.sin(this.options.xLabelAngle*Math.PI/180),p=m.x-n),J.push(q=m.x-this.options.xLabelMargin)):J.push(l.remove())}return J},k.prototype.drawSeries=function(){var K,M,O,l,m,n,o,p,q,r,H,I,J,L,N;return O=this.width/this.options.data.length,p=this.options.stacked?1:this.options.ykeys.length,K=(O*this.options.barSizeRatio-this.options.barGap*(p-1))/p,this.options.barSize&&(K=Math.min(K,this.options.barSize)),I=O-K*p-this.options.barGap*(p-1),o=I/2,N=this.ymin<=0&&this.ymax>=0?this.transY(0):null,this.bars=function(){var u,v,s,t;for(s=this.data,t=[],l=u=0,v=s.length;v>u;l=++u){q=s[l],m=0,t.push(function(){var y,z,w,x;for(w=q._y,x=[],r=y=0,z=w.length;z>y;r=++y){L=w[r],null!==L?(N?(J=Math.min(L,N),M=Math.max(L,N)):(J=L,M=this.bottom),n=this.left+l*O+o,this.options.stacked||(n+=r*(K+this.options.barGap)),H=M-J,this.options.verticalGridCondition&&this.options.verticalGridCondition(q.x)&&this.drawBar(this.left+l*O,this.top,O,Math.abs(this.top-this.bottom),this.options.verticalGridColor,this.options.verticalGridOpacity,this.options.barRadius),this.options.stacked&&(J-=m),this.drawBar(n,J,K,H,this.colorFor(q,r,"bar"),this.options.barOpacity,this.options.barRadius),x.push(m+=H)):x.push(null)}return x}.call(this))}return t}.call(this)},k.prototype.colorFor=function(o,p,n){var l,m;return"function"==typeof this.options.barColors?(l={x:o.x,y:o.y[p],label:o.label},m={index:p,key:this.options.ykeys[p],label:this.options.labels[p]},this.options.barColors.call(this,l,m,n)):this.options.barColors[p%this.options.barColors.length]},k.prototype.hitTest=function(l){return 0===this.data.length?null:(l=Math.max(Math.min(l,this.right),this.left),Math.min(this.data.length-1,Math.floor((l-this.left)/(this.width/this.data.length))))},k.prototype.onGridClick=function(m,n){var l;return l=this.hitTest(m),this.fire("click",l,this.data[l].src,m,n)},k.prototype.onHoverMove=function(m){var n,l;return n=this.hitTest(m),(l=this.hover).update.apply(l,this.hoverContentForRow(n))},k.prototype.onHoverOut=function(){return this.options.hideHover!==!1?this.hover.hide():void 0},k.prototype.hoverContentForRow=function(l){var m,n,o,p,q,r,B,C;for(o=this.data[l],m="<div class='morris-hover-row-label'>"+o.label+"</div>",C=o.y,n=r=0,B=C.length;B>r;n=++r){q=C[n],m+="<div class='morris-hover-point' style='color: "+this.colorFor(o,n,"label")+"'>\n  "+this.options.labels[n]+":\n  "+this.yLabelFormat(q)+"\n</div>"}return"function"==typeof this.options.hoverCallback&&(m=this.options.hoverCallback(l,this.options,m,o.src)),p=this.left+(l+0.5)*this.width/this.data.length,[m,p]},k.prototype.drawXAxisLabel=function(n,o,l){var m;return m=this.raphael.text(n,o,l).attr("font-size",this.options.gridTextSize).attr("font-family",this.options.gridTextFamily).attr("font-weight",this.options.gridTextWeight).attr("fill",this.options.gridTextColor)},k.prototype.drawBar=function(l,m,n,o,p,q,r){var B,C;return B=Math.max.apply(Math,r),C=0===B||B>o?this.raphael.rect(l,m,n,o):this.raphael.path(this.roundedRect(l,m,n,o,r)),C.attr("fill",p).attr("fill-opacity",q).attr("stroke","none")},k.prototype.roundedRect=function(o,p,n,l,m){return null==m&&(m=[0,0,0,0]),["M",o,m[0]+p,"Q",o,p,o+m[0],p,"L",o+n-m[1],p,"Q",o+n,p,o+n,p+m[1],"L",o+n,p+l-m[2],"Q",o+n,p+l,o+n-m[2],p+l,"L",o+m[3],p+l,"Q",o,p+l,o,p+l-m[3],"Z"]},k}(b.Grid),b.Donut=function(j){function k(l){this.resizeHandler=f(this.resizeHandler,this),this.select=f(this.select,this),this.click=f(this.click,this);var m=this;if(!(this instanceof b.Donut)){return new b.Donut(l)}if(this.options=a.extend({},this.defaults,l),this.el="string"==typeof l.element?a(document.getElementById(l.element)):a(l.element),null===this.el||0===this.el.length){throw new Error("Graph placeholder not found.")}void 0!==l.data&&0!==l.data.length&&(this.raphael=new Raphael(this.el[0]),this.options.resize&&a(window).bind("resize",function(){return null!=m.timeoutId&&window.clearTimeout(m.timeoutId),m.timeoutId=window.setTimeout(m.resizeHandler,100)}),this.setData(l.data))}return h(k,j),k.prototype.defaults={colors:["#0B62A4","#3980B5","#679DC6","#95BBD7","#B0CCE1","#095791","#095085","#083E67","#052C48","#042135"],backgroundColor:"#FFFFFF",labelColor:"#000000",formatter:b.commas,resize:!1},k.prototype.redraw=function(){var l,m,n,o,p,q,r,s,t,u,w,V,W,X,Y,Z,aa,ab,ac,ad,ae,v,x;for(this.raphael.clear(),m=this.el.width()/2,n=this.el.height()/2,W=(Math.min(m,n)-10)/3,w=0,ad=this.values,X=0,aa=ad.length;aa>X;X++){V=ad[X],w+=V}for(s=5/(2*W),l=1.9999*Math.PI-s*this.data.length,q=0,p=0,this.segments=[],ae=this.values,o=Y=0,ab=ae.length;ab>Y;o=++Y){V=ae[o],t=q+s+l*(V/w),u=new b.DonutSegment(m,n,2*W,W,q,t,this.data[o].color||this.options.colors[p%this.options.colors.length],this.options.backgroundColor,p,this.raphael),u.render(),this.segments.push(u),u.on("hover",this.select),u.on("click",this.click),q=t,p+=1}for(this.text1=this.drawEmptyDonutLabel(m,n-10,this.options.labelColor,15,800),this.text2=this.drawEmptyDonutLabel(m,n+10,this.options.labelColor,14),r=Math.max.apply(Math,this.values),p=0,v=this.values,x=[],Z=0,ac=v.length;ac>Z;Z++){if(V=v[Z],V===r){this.select(p);break}x.push(p+=1)}return x},k.prototype.setData=function(l){var m;return this.data=l,this.values=function(){var q,n,o,p;for(o=this.data,p=[],q=0,n=o.length;n>q;q++){m=o[q],p.push(parseFloat(m.value))}return p}.call(this),this.redraw()},k.prototype.click=function(l){return this.fire("click",l,this.data[l])},k.prototype.select=function(p){var r,l,m,n,o,q;for(q=this.segments,n=0,o=q.length;o>n;n++){l=q[n],l.deselect()}return m=this.segments[p],m.select(),r=this.data[p],this.setLabels(r.label,this.options.formatter(r.value,r))},k.prototype.setLabels=function(l,m){var n,o,p,q,r,C,D,E;return n=2*(Math.min(this.el.width()/2,this.el.height()/2)-10)/3,q=1.8*n,p=n/2,o=n/3,this.text1.attr({text:l,transform:""}),r=this.text1.getBBox(),C=Math.min(q/r.width,p/r.height),this.text1.attr({transform:"S"+C+","+C+","+(r.x+r.width/2)+","+(r.y+r.height)}),this.text2.attr({text:m,transform:""}),D=this.text2.getBBox(),E=Math.min(q/D.width,o/D.height),this.text2.attr({transform:"S"+E+","+E+","+(D.x+D.width/2)+","+D.y})},k.prototype.drawEmptyDonutLabel=function(p,q,l,n,o){var m;return m=this.raphael.text(p,q,"").attr("font-size",n).attr("fill",l),null!=o&&m.attr("font-weight",o),m},k.prototype.resizeHandler=function(){return this.timeoutId=null,this.raphael.setSize(this.el.width(),this.el.height()),this.redraw()},k}(b.EventEmitter),b.DonutSegment=function(j){function k(l,n,o,p,q,r,B,C,D,m){this.cx=l,this.cy=n,this.inner=o,this.outer=p,this.color=B,this.backgroundColor=C,this.index=D,this.raphael=m,this.deselect=f(this.deselect,this),this.select=f(this.select,this),this.sin_p0=Math.sin(q),this.cos_p0=Math.cos(q),this.sin_p1=Math.sin(r),this.cos_p1=Math.cos(r),this.is_long=r-q>Math.PI?1:0,this.path=this.calcSegment(this.inner+3,this.inner+this.outer-5),this.selectedPath=this.calcSegment(this.inner+3,this.inner+this.outer),this.hilight=this.calcArc(this.inner)}return h(k,j),k.prototype.calcArcPoints=function(l){return[this.cx+l*this.sin_p0,this.cy+l*this.cos_p0,this.cx+l*this.sin_p1,this.cy+l*this.cos_p1]},k.prototype.calcSegment=function(l,m){var n,o,p,q,r,E,F,G,H,I;return H=this.calcArcPoints(l),n=H[0],p=H[1],o=H[2],q=H[3],I=this.calcArcPoints(m),r=I[0],F=I[1],E=I[2],G=I[3],"M"+n+","+p+("A"+l+","+l+",0,"+this.is_long+",0,"+o+","+q)+("L"+E+","+G)+("A"+m+","+m+",0,"+this.is_long+",1,"+r+","+F)+"Z"},k.prototype.calcArc=function(p){var q,l,n,o,m;return m=this.calcArcPoints(p),q=m[0],n=m[1],l=m[2],o=m[3],"M"+q+","+n+("A"+p+","+p+",0,"+this.is_long+",0,"+l+","+o)},k.prototype.render=function(){var l=this;return this.arc=this.drawDonutArc(this.hilight,this.color),this.seg=this.drawDonutSegment(this.path,this.color,this.backgroundColor,function(){return l.fire("hover",l.index)},function(){return l.fire("click",l.index)})},k.prototype.drawDonutArc=function(l,m){return this.raphael.path(l).attr({stroke:m,"stroke-width":2,opacity:0})},k.prototype.drawDonutSegment=function(o,p,n,l,m){return this.raphael.path(o).attr({fill:p,stroke:n,"stroke-width":3}).hover(l).click(m)},k.prototype.select=function(){return this.selected?void 0:(this.seg.animate({path:this.selectedPath},150,"<>"),this.arc.animate({opacity:1},150,"<>"),this.selected=!0)},k.prototype.deselect=function(){return this.selected?(this.seg.animate({path:this.path},150,"<>"),this.arc.animate({opacity:0},150,"<>"),this.selected=!1):void 0},k}(b.EventEmitter)}).call(this);
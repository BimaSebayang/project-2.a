(function(c){var d={set:{colors:1,values:1,backgroundColor:1,scaleColors:1,normalizeFunction:1,focus:1},get:{selectedRegions:1,selectedMarkers:1,mapObject:1,regionName:1}};c.fn.vectorMap=function(b){var a,e,h,a=this.children(".jvectormap-container").data("mapObject");if(b==="addMap"){jvm.WorldMap.maps[arguments[1]]=arguments[2]}else{if(!(b!=="set"&&b!=="get"||!d[b][arguments[1]])){return e=arguments[1].charAt(0).toUpperCase()+arguments[1].substr(1),a[b+e].apply(a,Array.prototype.slice.call(arguments,2))}b=b||{},b.container=this,a=new jvm.WorldMap(b)}return this}})(jQuery),function(h){function e(i){var a=i||window.event,c=[].slice.call(arguments,1),m=0,d=!0,b=0,n=0;return i=h.event.fix(a),i.type="mousewheel",a.wheelDelta&&(m=a.wheelDelta/120),a.detail&&(m=-a.detail/3),n=m,a.axis!==undefined&&a.axis===a.HORIZONTAL_AXIS&&(n=0,b=-1*m),a.wheelDeltaY!==undefined&&(n=a.wheelDeltaY/120),a.wheelDeltaX!==undefined&&(b=-1*a.wheelDeltaX/120),c.unshift(i,m,b,n),(h.event.dispatch||h.event.handle).apply(this,c)}var f=["DOMMouseScroll","mousewheel"];if(h.event.fixHooks){for(var g=f.length;g;){h.event.fixHooks[f[--g]]=h.event.mouseHooks}}h.event.special.mousewheel={setup:function(){if(this.addEventListener){for(var a=f.length;a;){this.addEventListener(f[--a],e,!1)}}else{this.onmousewheel=e}},teardown:function(){if(this.removeEventListener){for(var a=f.length;a;){this.removeEventListener(f[--a],e,!1)}}else{this.onmousewheel=null}}},h.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",a)}})}(jQuery);var jvm={inherits:function(d,e){function f(){}f.prototype=e.prototype,d.prototype=new f,d.prototype.constructor=d,d.parentClass=e},mixin:function(d,e){var f;for(f in e.prototype){e.prototype.hasOwnProperty(f)&&(d.prototype[f]=e.prototype[f])}},min:function(d){var e=Number.MAX_VALUE,f;if(d instanceof Array){for(f=0;f<d.length;f++){d[f]<e&&(e=d[f])}}else{for(f in d){d[f]<e&&(e=d[f])}}return e},max:function(d){var e=Number.MIN_VALUE,f;if(d instanceof Array){for(f=0;f<d.length;f++){d[f]>e&&(e=d[f])}}else{for(f in d){d[f]>e&&(e=d[f])}}return e},keys:function(d){var e=[],f;for(f in d){e.push(f)}return e},values:function(h){var f=[],g,e;for(e=0;e<arguments.length;e++){h=arguments[e];for(g in h){f.push(h[g])}}return f}};jvm.$=jQuery,jvm.AbstractElement=function(c,d){this.node=this.createElement(c),this.name=c,this.properties={},d&&this.set(d)},jvm.AbstractElement.prototype.set=function(d,e){var f;if(typeof d=="object"){for(f in d){this.properties[f]=d[f],this.applyAttr(f,d[f])}}else{this.properties[d]=e,this.applyAttr(d,e)}},jvm.AbstractElement.prototype.get=function(b){return this.properties[b]},jvm.AbstractElement.prototype.applyAttr=function(c,d){this.node.setAttribute(c,d)},jvm.AbstractElement.prototype.remove=function(){jvm.$(this.node).remove()},jvm.AbstractCanvasElement=function(d,e,f){this.container=d,this.setSize(e,f),this.rootElement=new jvm[this.classPrefix+"GroupElement"],this.node.appendChild(this.rootElement.node),this.container.appendChild(this.node)},jvm.AbstractCanvasElement.prototype.add=function(c,d){d=d||this.rootElement,d.add(c),c.canvas=this},jvm.AbstractCanvasElement.prototype.addPath=function(h,f,g){var e=new jvm[this.classPrefix+"PathElement"](h,f);return this.add(e,g),e},jvm.AbstractCanvasElement.prototype.addCircle=function(h,f,g){var e=new jvm[this.classPrefix+"CircleElement"](h,f);return this.add(e,g),e},jvm.AbstractCanvasElement.prototype.addGroup=function(c){var d=new jvm[this.classPrefix+"GroupElement"];return c?c.node.appendChild(d.node):this.node.appendChild(d.node),d.canvas=this,d},jvm.AbstractShapeElement=function(d,e,f){this.style=f||{},this.style.current={},this.isHovered=!1,this.isSelected=!1,this.updateStyle()},jvm.AbstractShapeElement.prototype.setHovered=function(b){this.isHovered!==b&&(this.isHovered=b,this.updateStyle())},jvm.AbstractShapeElement.prototype.setSelected=function(b){this.isSelected!==b&&(this.isSelected=b,this.updateStyle(),jvm.$(this.node).trigger("selected",[b]))},jvm.AbstractShapeElement.prototype.setStyle=function(d,e){var f={};typeof d=="object"?f=d:f[d]=e,jvm.$.extend(this.style.current,f),this.updateStyle()},jvm.AbstractShapeElement.prototype.updateStyle=function(){var b={};jvm.AbstractShapeElement.mergeStyles(b,this.style.initial),jvm.AbstractShapeElement.mergeStyles(b,this.style.current),this.isHovered&&jvm.AbstractShapeElement.mergeStyles(b,this.style.hover),this.isSelected&&(jvm.AbstractShapeElement.mergeStyles(b,this.style.selected),this.isHovered&&jvm.AbstractShapeElement.mergeStyles(b,this.style.selectedHover)),this.set(b)},jvm.AbstractShapeElement.mergeStyles=function(d,e){var f;e=e||{};for(f in e){e[f]===null?delete d[f]:d[f]=e[f]}},jvm.SVGElement=function(c,d){jvm.SVGElement.parentClass.apply(this,arguments)},jvm.inherits(jvm.SVGElement,jvm.AbstractElement),jvm.SVGElement.svgns="http://www.w3.org/2000/svg",jvm.SVGElement.prototype.createElement=function(b){return document.createElementNS(jvm.SVGElement.svgns,b)},jvm.SVGElement.prototype.addClass=function(b){this.node.setAttribute("class",b)},jvm.SVGElement.prototype.getElementCtr=function(b){return jvm["SVG"+b]},jvm.SVGElement.prototype.getBBox=function(){return this.node.getBBox()},jvm.SVGGroupElement=function(){jvm.SVGGroupElement.parentClass.call(this,"g")},jvm.inherits(jvm.SVGGroupElement,jvm.SVGElement),jvm.SVGGroupElement.prototype.add=function(b){this.node.appendChild(b.node)},jvm.SVGCanvasElement=function(d,e,f){this.classPrefix="SVG",jvm.SVGCanvasElement.parentClass.call(this,"svg"),jvm.AbstractCanvasElement.apply(this,arguments)},jvm.inherits(jvm.SVGCanvasElement,jvm.SVGElement),jvm.mixin(jvm.SVGCanvasElement,jvm.AbstractCanvasElement),jvm.SVGCanvasElement.prototype.setSize=function(c,d){this.width=c,this.height=d,this.node.setAttribute("width",c),this.node.setAttribute("height",d)},jvm.SVGCanvasElement.prototype.applyTransformParams=function(d,e,f){this.scale=d,this.transX=e,this.transY=f,this.rootElement.node.setAttribute("transform","scale("+d+") translate("+e+", "+f+")")},jvm.SVGShapeElement=function(d,e,f){jvm.SVGShapeElement.parentClass.call(this,d,e),jvm.AbstractShapeElement.apply(this,arguments)},jvm.inherits(jvm.SVGShapeElement,jvm.SVGElement),jvm.mixin(jvm.SVGShapeElement,jvm.AbstractShapeElement),jvm.SVGPathElement=function(c,d){jvm.SVGPathElement.parentClass.call(this,"path",c,d),this.node.setAttribute("fill-rule","evenodd")},jvm.inherits(jvm.SVGPathElement,jvm.SVGShapeElement),jvm.SVGCircleElement=function(c,d){jvm.SVGCircleElement.parentClass.call(this,"circle",c,d)},jvm.inherits(jvm.SVGCircleElement,jvm.SVGShapeElement),jvm.VMLElement=function(c,d){jvm.VMLElement.VMLInitialized||jvm.VMLElement.initializeVML(),jvm.VMLElement.parentClass.apply(this,arguments)},jvm.inherits(jvm.VMLElement,jvm.AbstractElement),jvm.VMLElement.VMLInitialized=!1,jvm.VMLElement.initializeVML=function(){try{document.namespaces.rvml||document.namespaces.add("rvml","urn:schemas-microsoft-com:vml"),jvm.VMLElement.prototype.createElement=function(a){return document.createElement("<rvml:"+a+' class="rvml">')}}catch(b){jvm.VMLElement.prototype.createElement=function(a){return document.createElement("<"+a+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}document.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)"),jvm.VMLElement.VMLInitialized=!0},jvm.VMLElement.prototype.getElementCtr=function(b){return jvm["VML"+b]},jvm.VMLElement.prototype.addClass=function(b){jvm.$(this.node).addClass(b)},jvm.VMLElement.prototype.applyAttr=function(c,d){this.node[c]=d},jvm.VMLElement.prototype.getBBox=function(){var b=jvm.$(this.node);return{x:b.position().left/this.canvas.scale,y:b.position().top/this.canvas.scale,width:b.width()/this.canvas.scale,height:b.height()/this.canvas.scale}},jvm.VMLGroupElement=function(){jvm.VMLGroupElement.parentClass.call(this,"group"),this.node.style.left="0px",this.node.style.top="0px",this.node.coordorigin="0 0"},jvm.inherits(jvm.VMLGroupElement,jvm.VMLElement),jvm.VMLGroupElement.prototype.add=function(b){this.node.appendChild(b.node)},jvm.VMLCanvasElement=function(d,e,f){this.classPrefix="VML",jvm.VMLCanvasElement.parentClass.call(this,"group"),jvm.AbstractCanvasElement.apply(this,arguments),this.node.style.position="absolute"},jvm.inherits(jvm.VMLCanvasElement,jvm.VMLElement),jvm.mixin(jvm.VMLCanvasElement,jvm.AbstractCanvasElement),jvm.VMLCanvasElement.prototype.setSize=function(j,e){var i,k,h,l;this.width=j,this.height=e,this.node.style.width=j+"px",this.node.style.height=e+"px",this.node.coordsize=j+" "+e,this.node.coordorigin="0 0";if(this.rootElement){i=this.rootElement.node.getElementsByTagName("shape");for(h=0,l=i.length;h<l;h++){i[h].coordsize=j+" "+e,i[h].style.width=j+"px",i[h].style.height=e+"px"}k=this.node.getElementsByTagName("group");for(h=0,l=k.length;h<l;h++){k[h].coordsize=j+" "+e,k[h].style.width=j+"px",k[h].style.height=e+"px"}}},jvm.VMLCanvasElement.prototype.applyTransformParams=function(d,e,f){this.scale=d,this.transX=e,this.transY=f,this.rootElement.node.coordorigin=this.width-e-this.width/100+","+(this.height-f-this.height/100),this.rootElement.node.coordsize=this.width/d+","+this.height/d},jvm.VMLShapeElement=function(c,d){jvm.VMLShapeElement.parentClass.call(this,c,d),this.fillElement=new jvm.VMLElement("fill"),this.strokeElement=new jvm.VMLElement("stroke"),this.node.appendChild(this.fillElement.node),this.node.appendChild(this.strokeElement.node),this.node.stroked=!1,jvm.AbstractShapeElement.apply(this,arguments)},jvm.inherits(jvm.VMLShapeElement,jvm.VMLElement),jvm.mixin(jvm.VMLShapeElement,jvm.AbstractShapeElement),jvm.VMLShapeElement.prototype.applyAttr=function(c,d){switch(c){case"fill":this.node.fillcolor=d;break;case"fill-opacity":this.fillElement.node.opacity=Math.round(d*100)+"%";break;case"stroke":d==="none"?this.node.stroked=!1:this.node.stroked=!0,this.node.strokecolor=d;break;case"stroke-opacity":this.strokeElement.node.opacity=Math.round(d*100)+"%";break;case"stroke-width":parseInt(d,10)===0?this.node.stroked=!1:this.node.stroked=!0,this.node.strokeweight=d;break;case"d":this.node.path=jvm.VMLPathElement.pathSvgToVml(d);break;default:jvm.VMLShapeElement.parentClass.prototype.applyAttr.apply(this,arguments)}},jvm.VMLPathElement=function(d,e){var f=new jvm.VMLElement("skew");jvm.VMLPathElement.parentClass.call(this,"shape",d,e),this.node.coordorigin="0 0",f.node.on=!0,f.node.matrix="0.01,0,0,0.01,0,0",f.node.offset="0,0",this.node.appendChild(f.node)},jvm.inherits(jvm.VMLPathElement,jvm.VMLShapeElement),jvm.VMLPathElement.prototype.applyAttr=function(c,d){c==="d"?this.node.path=jvm.VMLPathElement.pathSvgToVml(d):jvm.VMLShapeElement.prototype.applyAttr.call(this,c,d)},jvm.VMLPathElement.pathSvgToVml=function(j){var e="",i=0,k=0,h,l;return j=j.replace(/(-?\d+)e(-?\d+)/g,"0"),j.replace(/([MmLlHhVvCcSs])\s*((?:-?\d*(?:\.\d+)?\s*,?\s*)+)/g,function(b,d,a,f){a=a.replace(/(\d)-/g,"$1,-").replace(/^\s+/g,"").replace(/\s+$/g,"").replace(/\s+/g,",").split(","),a[0]||a.shift();for(var g=0,c=a.length;g<c;g++){a[g]=Math.round(100*a[g])}switch(d){case"m":return i+=a[0],k+=a[1],"t"+a.join(",");case"M":return i=a[0],k=a[1],"m"+a.join(",");case"l":return i+=a[0],k+=a[1],"r"+a.join(",");case"L":return i=a[0],k=a[1],"l"+a.join(",");case"h":return i+=a[0],"r"+a[0]+",0";case"H":return i=a[0],"l"+i+","+k;case"v":return k+=a[0],"r0,"+a[0];case"V":return k=a[0],"l"+i+","+k;case"c":return h=i+a[a.length-4],l=k+a[a.length-3],i+=a[a.length-2],k+=a[a.length-1],"v"+a.join(",");case"C":return h=a[a.length-4],l=a[a.length-3],i=a[a.length-2],k=a[a.length-1],"c"+a.join(",");case"s":return a.unshift(k-l),a.unshift(i-h),h=i+a[a.length-4],l=k+a[a.length-3],i+=a[a.length-2],k+=a[a.length-1],"v"+a.join(",");case"S":return a.unshift(k+k-l),a.unshift(i+i-h),h=a[a.length-4],l=a[a.length-3],i=a[a.length-2],k=a[a.length-1],"c"+a.join(",")}return""}).replace(/z/g,"e")},jvm.VMLCircleElement=function(c,d){jvm.VMLCircleElement.parentClass.call(this,"oval",c,d)},jvm.inherits(jvm.VMLCircleElement,jvm.VMLShapeElement),jvm.VMLCircleElement.prototype.applyAttr=function(c,d){switch(c){case"r":this.node.style.width=d*2+"px",this.node.style.height=d*2+"px",this.applyAttr("cx",this.get("cx")||0),this.applyAttr("cy",this.get("cy")||0);break;case"cx":if(!d){return}this.node.style.left=d-(this.get("r")||0)+"px";break;case"cy":if(!d){return}this.node.style.top=d-(this.get("r")||0)+"px";break;default:jvm.VMLCircleElement.parentClass.prototype.applyAttr.call(this,c,d)}},jvm.VectorCanvas=function(d,e,f){return this.mode=window.SVGAngle?"svg":"vml",this.mode=="svg"?this.impl=new jvm.SVGCanvasElement(d,e,f):this.impl=new jvm.VMLCanvasElement(d,e,f),this.impl},jvm.SimpleScale=function(b){this.scale=b},jvm.SimpleScale.prototype.getValue=function(b){return b},jvm.OrdinalScale=function(b){this.scale=b},jvm.OrdinalScale.prototype.getValue=function(b){return this.scale[b]},jvm.NumericScale=function(h,f,g,e){this.scale=[],f=f||"linear",h&&this.setScale(h),f&&this.setNormalizeFunction(f),g&&this.setMin(g),e&&this.setMax(e)},jvm.NumericScale.prototype={setMin:function(b){this.clearMinValue=b,typeof this.normalize=="function"?this.minValue=this.normalize(b):this.minValue=b},setMax:function(b){this.clearMaxValue=b,typeof this.normalize=="function"?this.maxValue=this.normalize(b):this.maxValue=b},setScale:function(c){var d;for(d=0;d<c.length;d++){this.scale[d]=[c[d]]}},setNormalizeFunction:function(b){b==="polynomial"?this.normalize=function(a){return Math.pow(a,0.2)}:b==="linear"?delete this.normalize:this.normalize=b,this.setMin(this.clearMinValue),this.setMax(this.clearMaxValue)},getValue:function(j){var e=[],i=0,k,h=0,l;typeof this.normalize=="function"&&(j=this.normalize(j));for(h=0;h<this.scale.length-1;h++){k=this.vectorLength(this.vectorSubtract(this.scale[h+1],this.scale[h])),e.push(k),i+=k}l=(this.maxValue-this.minValue)/i;for(h=0;h<e.length;h++){e[h]*=l}h=0,j-=this.minValue;while(j-e[h]>=0){j-=e[h],h++}return h==this.scale.length-1?j=this.vectorToNum(this.scale[h]):j=this.vectorToNum(this.vectorAdd(this.scale[h],this.vectorMult(this.vectorSubtract(this.scale[h+1],this.scale[h]),j/e[h]))),j},vectorToNum:function(d){var e=0,f;for(f=0;f<d.length;f++){e+=Math.round(d[f])*Math.pow(256,d.length-f-1)}return e},vectorSubtract:function(h,f){var g=[],e;for(e=0;e<h.length;e++){g[e]=h[e]-f[e]}return g},vectorAdd:function(h,f){var g=[],e;for(e=0;e<h.length;e++){g[e]=h[e]+f[e]}return g},vectorMult:function(h,f){var g=[],e;for(e=0;e<h.length;e++){g[e]=h[e]*f}return g},vectorLength:function(d){var e=0,f;for(f=0;f<d.length;f++){e+=d[f]*d[f]}return Math.sqrt(e)}},jvm.ColorScale=function(h,f,g,e){jvm.ColorScale.parentClass.apply(this,arguments)},jvm.inherits(jvm.ColorScale,jvm.NumericScale),jvm.ColorScale.prototype.setScale=function(c){var d;for(d=0;d<c.length;d++){this.scale[d]=jvm.ColorScale.rgbToArray(c[d])}},jvm.ColorScale.prototype.getValue=function(b){return jvm.ColorScale.numToRgb(jvm.ColorScale.parentClass.prototype.getValue.call(this,b))},jvm.ColorScale.arrayToRgb=function(h){var f="#",g,e;for(e=0;e<h.length;e++){g=h[e].toString(16),f+=g.length==1?"0"+g:g}return f},jvm.ColorScale.numToRgb=function(b){b=b.toString(16);while(b.length<6){b="0"+b}return"#"+b},jvm.ColorScale.rgbToArray=function(b){return b=b.substr(1),[parseInt(b.substr(0,2),16),parseInt(b.substr(2,2),16),parseInt(b.substr(4,2),16)]},jvm.DataSeries=function(d,e){var f;d=d||{},d.attribute=d.attribute||"fill",this.elements=e,this.params=d,d.attributes&&this.setAttributes(d.attributes),jvm.$.isArray(d.scale)?(f=d.attribute==="fill"||d.attribute==="stroke"?jvm.ColorScale:jvm.NumericScale,this.scale=new f(d.scale,d.normalizeFunction,d.min,d.max)):d.scale?this.scale=new jvm.OrdinalScale(d.scale):this.scale=new jvm.SimpleScale(d.scale),this.values=d.values||{},this.setValues(this.values)},jvm.DataSeries.prototype={setAttributes:function(h,f){var g=h,e;if(typeof h=="string"){this.elements[h]&&this.elements[h].setStyle(this.params.attribute,f)}else{for(e in g){this.elements[e]&&this.elements[e].element.setStyle(this.params.attribute,g[e])}}},setValues:function(j){var e=Number.MIN_VALUE,i=Number.MAX_VALUE,k,h,l={};if(this.scale instanceof jvm.OrdinalScale||this.scale instanceof jvm.SimpleScale){for(h in j){j[h]?l[h]=this.scale.getValue(j[h]):l[h]=this.elements[h].element.style.initial[this.params.attribute]}}else{if(!this.params.min||!this.params.max){for(h in j){k=parseFloat(j[h]),k>e&&(e=j[h]),k<i&&(i=k)}this.params.min||this.scale.setMin(i),this.params.max||this.scale.setMax(e),this.params.min=i,this.params.max=e}for(h in j){k=parseFloat(j[h]),isNaN(k)?l[h]=this.elements[h].element.style.initial[this.params.attribute]:l[h]=this.scale.getValue(k)}}this.setAttributes(l),jvm.$.extend(this.values,j)},clear:function(){var c,d={};for(c in this.values){this.elements[c]&&(d[c]=this.elements[c].element.style.initial[this.params.attribute])}this.setAttributes(d),this.values={}},setScale:function(b){this.scale.setScale(b),this.values&&this.setValues(this.values)},setNormalizeFunction:function(b){this.scale.setNormalizeFunction(b),this.values&&this.setValues(this.values)}},jvm.Proj={degRad:180/Math.PI,radDeg:Math.PI/180,radius:6381372,sgn:function(b){return b>0?1:b<0?-1:b},mill:function(d,e,f){return{x:this.radius*(e-f)*this.radDeg,y:-this.radius*Math.log(Math.tan((45+0.4*d)*this.radDeg))/0.8}},mill_inv:function(d,e,f){return{lat:(2.5*Math.atan(Math.exp(0.8*e/this.radius))-5*Math.PI/8)*this.degRad,lng:(f*this.radDeg+d/this.radius)*this.degRad}},merc:function(d,e,f){return{x:this.radius*(e-f)*this.radDeg,y:-this.radius*Math.log(Math.tan(Math.PI/4+d*Math.PI/360))}},merc_inv:function(d,e,f){return{lat:(2*Math.atan(Math.exp(e/this.radius))-Math.PI/2)*this.degRad,lng:(f*this.radDeg+d/this.radius)*this.degRad}},aea:function(t,e,i){var r=0,f=i*this.radDeg,c=29.5*this.radDeg,l=45.5*this.radDeg,o=t*this.radDeg,p=e*this.radDeg,u=(Math.sin(c)+Math.sin(l))/2,h=Math.cos(c)*Math.cos(c)+2*u*Math.sin(c),s=u*(p-f),a=Math.sqrt(h-2*u*Math.sin(o))/u,n=Math.sqrt(h-2*u*Math.sin(r))/u;return{x:a*Math.sin(s)*this.radius,y:-(n-a*Math.cos(s))*this.radius}},aea_inv:function(t,e,i){var r=t/this.radius,f=e/this.radius,c=0,l=i*this.radDeg,o=29.5*this.radDeg,p=45.5*this.radDeg,u=(Math.sin(o)+Math.sin(p))/2,h=Math.cos(o)*Math.cos(o)+2*u*Math.sin(o),s=Math.sqrt(h-2*u*Math.sin(c))/u,a=Math.sqrt(r*r+(s-f)*(s-f)),n=Math.atan(r/(s-f));return{lat:Math.asin((h-a*a*u*u)/(2*u))*this.degRad,lng:(l+n/u)*this.degRad}},lcc:function(a,o,i){var r=0,f=i*this.radDeg,n=o*this.radDeg,l=33*this.radDeg,s=45*this.radDeg,t=a*this.radDeg,c=Math.log(Math.cos(l)*(1/Math.cos(s)))/Math.log(Math.tan(Math.PI/4+s/2)*(1/Math.tan(Math.PI/4+l/2))),h=Math.cos(l)*Math.pow(Math.tan(Math.PI/4+l/2),c)/c,u=h*Math.pow(1/Math.tan(Math.PI/4+t/2),c),e=h*Math.pow(1/Math.tan(Math.PI/4+r/2),c);return{x:u*Math.sin(c*(n-f))*this.radius,y:-(e-u*Math.cos(c*(n-f)))*this.radius}},lcc_inv:function(t,e,i){var r=t/this.radius,f=e/this.radius,c=0,l=i*this.radDeg,o=33*this.radDeg,p=45*this.radDeg,u=Math.log(Math.cos(o)*(1/Math.cos(p)))/Math.log(Math.tan(Math.PI/4+p/2)*(1/Math.tan(Math.PI/4+o/2))),h=Math.cos(o)*Math.pow(Math.tan(Math.PI/4+o/2),u)/u,s=h*Math.pow(1/Math.tan(Math.PI/4+c/2),u),a=this.sgn(u)*Math.sqrt(r*r+(s-f)*(s-f)),n=Math.atan(r/(s-f));return{lat:(2*Math.atan(Math.pow(h/a,1/u))-Math.PI/2)*this.degRad,lng:(l+n/u)*this.degRad}}},jvm.WorldMap=function(d){var e=this,f;this.params=jvm.$.extend(!0,{},jvm.WorldMap.defaultParams,d);if(!jvm.WorldMap.maps[this.params.map]){throw new Error("Attempt to use map which was not loaded: "+this.params.map)}this.mapData=jvm.WorldMap.maps[this.params.map],this.markers={},this.regions={},this.regionsColors={},this.regionsData={},this.container=jvm.$("<div>").css({width:"100%",height:"100%"}).addClass("jvectormap-container"),this.params.container.append(this.container),this.container.data("mapObject",this),this.container.css({position:"relative",overflow:"hidden"}),this.defaultWidth=this.mapData.width,this.defaultHeight=this.mapData.height,this.setBackgroundColor(this.params.backgroundColor),this.onResize=function(){e.setSize()},jvm.$(window).resize(this.onResize);for(f in jvm.WorldMap.apiEvents){this.params[f]&&this.container.bind(jvm.WorldMap.apiEvents[f]+".jvectormap",this.params[f])}this.canvas=new jvm.VectorCanvas(this.container[0],this.width,this.height),"ontouchstart" in window||window.DocumentTouch&&document instanceof DocumentTouch?this.params.bindTouchEvents&&this.bindContainerTouchEvents():this.bindContainerEvents(),this.bindElementEvents(),this.createLabel(),this.params.zoomButtons&&this.bindZoomButtons(),this.createRegions(),this.createMarkers(this.params.markers||{}),this.setSize(),this.params.focusOn&&(typeof this.params.focusOn=="object"?this.setFocus.call(this,this.params.focusOn.scale,this.params.focusOn.x,this.params.focusOn.y):this.setFocus.call(this,this.params.focusOn)),this.params.selectedRegions&&this.setSelectedRegions(this.params.selectedRegions),this.params.selectedMarkers&&this.setSelectedMarkers(this.params.selectedMarkers),this.params.series&&this.createSeries()},jvm.WorldMap.prototype={transX:0,transY:0,scale:1,baseTransX:0,baseTransY:0,baseScale:1,width:0,height:0,setBackgroundColor:function(b){this.container.css("background-color",b)},resize:function(){var b=this.baseScale;this.width/this.height>this.defaultWidth/this.defaultHeight?(this.baseScale=this.height/this.defaultHeight,this.baseTransX=Math.abs(this.width-this.defaultWidth*this.baseScale)/(2*this.baseScale)):(this.baseScale=this.width/this.defaultWidth,this.baseTransY=Math.abs(this.height-this.defaultHeight*this.baseScale)/(2*this.baseScale)),this.scale*=this.baseScale/b,this.transX*=this.baseScale/b,this.transY*=this.baseScale/b},setSize:function(){this.width=this.container.width(),this.height=this.container.height(),this.resize(),this.canvas.setSize(this.width,this.height),this.applyTransform()},reset:function(){var c,d;for(c in this.series){for(d=0;d<this.series[c].length;d++){this.series[c][d].clear()}}this.scale=this.baseScale,this.transX=this.baseTransX,this.transY=this.baseTransY,this.applyTransform()},applyTransform:function(){var h,f,g,e;this.defaultWidth*this.scale<=this.width?(h=(this.width-this.defaultWidth*this.scale)/(2*this.scale),g=(this.width-this.defaultWidth*this.scale)/(2*this.scale)):(h=0,g=(this.width-this.defaultWidth*this.scale)/this.scale),this.defaultHeight*this.scale<=this.height?(f=(this.height-this.defaultHeight*this.scale)/(2*this.scale),e=(this.height-this.defaultHeight*this.scale)/(2*this.scale)):(f=0,e=(this.height-this.defaultHeight*this.scale)/this.scale),this.transY>f?this.transY=f:this.transY<e&&(this.transY=e),this.transX>h?this.transX=h:this.transX<g&&(this.transX=g),this.canvas.applyTransformParams(this.scale,this.transX,this.transY),this.markers&&this.repositionMarkers(),this.container.trigger("viewportChange",[this.scale/this.baseScale,this.transX,this.transY])},bindContainerEvents:function(){var h=!1,f,g,e=this;this.container.mousemove(function(a){return h&&(e.transX-=(f-a.pageX)/e.scale,e.transY-=(g-a.pageY)/e.scale,e.applyTransform(),f=a.pageX,g=a.pageY),!1}).mousedown(function(a){return h=!0,f=a.pageX,g=a.pageY,!1}),jvm.$("body").mouseup(function(){h=!1}),this.params.zoomOnScroll&&this.container.mousewheel(function(b,d,q,i){var c=jvm.$(e.container).offset(),a=b.pageX-c.left,n=b.pageY-c.top,o=Math.pow(1.3,i);e.label.hide(),e.setScale(e.scale*o,a,n),b.preventDefault()})},bindContainerTouchEvents:function(){var n,e,p=this,r,o,a,q,i,m=function(c){var h=c.originalEvent.touches,f,d,b,g;c.type=="touchstart"&&(i=0),h.length==1?(i==1&&(b=p.transX,g=p.transY,p.transX-=(r-h[0].pageX)/p.scale,p.transY-=(o-h[0].pageY)/p.scale,p.applyTransform(),p.label.hide(),(b!=p.transX||g!=p.transY)&&c.preventDefault()),r=h[0].pageX,o=h[0].pageY):h.length==2&&(i==2?(d=Math.sqrt(Math.pow(h[0].pageX-h[1].pageX,2)+Math.pow(h[0].pageY-h[1].pageY,2))/e,p.setScale(n*d,a,q),p.label.hide(),c.preventDefault()):(f=jvm.$(p.container).offset(),h[0].pageX>h[1].pageX?a=h[1].pageX+(h[0].pageX-h[1].pageX)/2:a=h[0].pageX+(h[1].pageX-h[0].pageX)/2,h[0].pageY>h[1].pageY?q=h[1].pageY+(h[0].pageY-h[1].pageY)/2:q=h[0].pageY+(h[1].pageY-h[0].pageY)/2,a-=f.left,q-=f.top,n=p.scale,e=Math.sqrt(Math.pow(h[0].pageX-h[1].pageX,2)+Math.pow(h[0].pageY-h[1].pageY,2)))),i=h.length};jvm.$(this.container).bind("touchstart",m),jvm.$(this.container).bind("touchmove",m)},bindElementEvents:function(){var c=this,d;this.container.mousemove(function(){d=!0}),this.container.delegate("[class~='jvectormap-element']","mouseover mouseout",function(b){var p=this,r=jvm.$(this).attr("class").baseVal?jvm.$(this).attr("class").baseVal:jvm.$(this).attr("class"),o=r.indexOf("jvectormap-region")===-1?"marker":"region",a=o=="region"?jvm.$(this).attr("data-code"):jvm.$(this).attr("data-index"),q=o=="region"?c.regions[a].element:c.markers[a].element,f=o=="region"?c.mapData.paths[a].name:c.markers[a].config.name||"",i=jvm.$.Event(o+"LabelShow.jvectormap"),n=jvm.$.Event(o+"Over.jvectormap");b.type=="mouseover"?(c.container.trigger(n,[a]),n.isDefaultPrevented()||q.setHovered(!0),c.label.text(f),c.container.trigger(i,[c.label,a]),i.isDefaultPrevented()||(c.label.show(),c.labelWidth=c.label.width(),c.labelHeight=c.label.height())):(q.setHovered(!1),c.label.hide(),c.container.trigger(o+"Out.jvectormap",[a]))}),this.container.delegate("[class~='jvectormap-element']","mousedown",function(a){d=!1}),this.container.delegate("[class~='jvectormap-element']","mouseup",function(a){var i=this,l=jvm.$(this).attr("class").baseVal?jvm.$(this).attr("class").baseVal:jvm.$(this).attr("class"),k=l.indexOf("jvectormap-region")===-1?"marker":"region",b=k=="region"?jvm.$(this).attr("data-code"):jvm.$(this).attr("data-index"),m=jvm.$.Event(k+"Click.jvectormap"),n=k=="region"?c.regions[b].element:c.markers[b].element;if(!d){c.container.trigger(m,[b]);if(k==="region"&&c.params.regionsSelectable||k==="marker"&&c.params.markersSelectable){m.isDefaultPrevented()||(c.params[k+"sSelectableOne"]&&c.clearSelected(k+"s"),n.setSelected(!n.isSelected))}}})},bindZoomButtons:function(){var b=this;jvm.$("<div/>").addClass("jvectormap-zoomin").text("+").appendTo(this.container),jvm.$("<div/>").addClass("jvectormap-zoomout").html("&#x2212;").appendTo(this.container),this.container.find(".jvectormap-zoomin").click(function(){b.setScale(b.scale*b.params.zoomStep,b.width/2,b.height/2)}),this.container.find(".jvectormap-zoomout").click(function(){b.setScale(b.scale/b.params.zoomStep,b.width/2,b.height/2)})},createLabel:function(){var b=this;this.label=jvm.$("<div/>").addClass("jvectormap-label").appendTo(jvm.$("body")),this.container.mousemove(function(a){var e=a.pageX-15-b.labelWidth,f=a.pageY-15-b.labelHeight;e<5&&(e=a.pageX+15),f<5&&(f=a.pageY+15),b.label.is(":visible")&&b.label.css({left:e,top:f})})},setScale:function(j,e,i,k){var h,l=jvm.$.Event("zoom.jvectormap");j>this.params.zoomMax*this.baseScale?j=this.params.zoomMax*this.baseScale:j<this.params.zoomMin*this.baseScale&&(j=this.params.zoomMin*this.baseScale),typeof e!="undefined"&&typeof i!="undefined"&&(h=j/this.scale,k?(this.transX=e+this.defaultWidth*(this.width/(this.defaultWidth*j))/2,this.transY=i+this.defaultHeight*(this.height/(this.defaultHeight*j))/2):(this.transX-=(h-1)/j*e,this.transY-=(h-1)/j*i)),this.scale=j,this.applyTransform(),this.container.trigger(l,[j/this.baseScale])},setFocus:function(m,p,k){var n,e,o,l,i;if(jvm.$.isArray(m)||this.regions[m]){jvm.$.isArray(m)?l=m:l=[m];for(i=0;i<l.length;i++){this.regions[l[i]]&&(e=this.regions[l[i]].element.getBBox(),e&&(typeof n=="undefined"?n=e:(o={x:Math.min(n.x,e.x),y:Math.min(n.y,e.y),width:Math.max(n.x+n.width,e.x+e.width)-Math.min(n.x,e.x),height:Math.max(n.y+n.height,e.y+e.height)-Math.min(n.y,e.y)},n=o)))}this.setScale(Math.min(this.width/n.width,this.height/n.height),-(n.x+n.width/2),-(n.y+n.height/2),!0)}else{m*=this.baseScale,this.setScale(m,-p*this.defaultWidth,-k*this.defaultHeight,!0)}},getSelected:function(d){var e,f=[];for(e in this[d]){this[d][e].element.isSelected&&f.push(e)}return f},getSelectedRegions:function(){return this.getSelected("regions")},getSelectedMarkers:function(){return this.getSelected("markers")},setSelected:function(d,e){var f;typeof e!="object"&&(e=[e]);if(jvm.$.isArray(e)){for(f=0;f<e.length;f++){this[d][e[f]].element.setSelected(!0)}}else{for(f in e){this[d][f].element.setSelected(!!e[f])}}},setSelectedRegions:function(b){this.setSelected("regions",b)},setSelectedMarkers:function(b){this.setSelected("markers",b)},clearSelected:function(h){var f={},g=this.getSelected(h),e;for(e=0;e<g.length;e++){f[g[e]]=!1}this.setSelected(h,f)},clearSelectedRegions:function(){this.clearSelected("regions")},clearSelectedMarkers:function(){this.clearSelected("markers")},getMapObject:function(){return this},getRegionName:function(b){return this.mapData.paths[b].name},createRegions:function(){var d,e,f=this;for(d in this.mapData.paths){e=this.canvas.addPath({d:this.mapData.paths[d].path,"data-code":d},jvm.$.extend(!0,{},this.params.regionStyle)),jvm.$(e.node).bind("selected",function(a,b){f.container.trigger("regionSelected.jvectormap",[jvm.$(this).attr("data-code"),b,f.getSelectedRegions()])}),e.addClass("jvectormap-region jvectormap-element"),this.regions[d]={element:e,config:this.mapData.paths[d]}}},createMarkers:function(l){var e,j,m,i,n,k=this;this.markersGroup=this.markersGroup||this.canvas.addGroup();if(jvm.$.isArray(l)){n=l.slice(),l={};for(e=0;e<n.length;e++){l[e]=n[e]}}for(e in l){i=l[e] instanceof Array?{latLng:l[e]}:l[e],m=this.getMarkerPosition(i),m!==!1&&(j=this.canvas.addCircle({"data-index":e,cx:m.x,cy:m.y},jvm.$.extend(!0,{},this.params.markerStyle,{initial:i.style||{}}),this.markersGroup),j.addClass("jvectormap-marker jvectormap-element"),jvm.$(j.node).bind("selected",function(a,b){k.container.trigger("markerSelected.jvectormap",[jvm.$(this).attr("data-index"),b,k.getSelectedMarkers()])}),this.markers[e]&&this.removeMarkers([e]),this.markers[e]={element:j,config:i})}},repositionMarkers:function(){var c,d;for(c in this.markers){d=this.getMarkerPosition(this.markers[c].config),d!==!1&&this.markers[c].element.setStyle({cx:d.x,cy:d.y})}},getMarkerPosition:function(b){return jvm.WorldMap.maps[this.params.map].projection?this.latLngToPoint.apply(this,b.latLng||[0,0]):{x:b.coords[0]*this.scale+this.transX*this.scale,y:b.coords[1]*this.scale+this.transY*this.scale}},addMarker:function(l,e,j){var m={},i=[],n,k,j=j||[];m[l]=e;for(k=0;k<j.length;k++){n={},n[l]=j[k],i.push(n)}this.addMarkers(m,i)},addMarkers:function(d,e){var f;e=e||[],this.createMarkers(d);for(f=0;f<e.length;f++){this.series.markers[f].setValues(e[f]||{})}},removeMarkers:function(c){var d;for(d=0;d<c.length;d++){this.markers[c[d]].element.remove(),delete this.markers[c[d]]}},removeAllMarkers:function(){var c,d=[];for(c in this.markers){d.push(c)}this.removeMarkers(d)},latLngToPoint:function(n,e){var r,t=jvm.WorldMap.maps[this.params.map].projection,q=t.centralMeridian,a=this.width-this.baseTransX*2*this.baseScale,s=this.height-this.baseTransY*2*this.baseScale,f,i,o=this.scale/this.baseScale;return e<-180+q&&(e+=360),r=jvm.Proj[t.type](n,e,q),f=this.getInsetForPoint(r.x,r.y),f?(i=f.bbox,r.x=(r.x-i[0].x)/(i[1].x-i[0].x)*f.width*this.scale,r.y=(r.y-i[0].y)/(i[1].y-i[0].y)*f.height*this.scale,{x:r.x+this.transX*this.scale+f.left*this.scale,y:r.y+this.transY*this.scale+f.top*this.scale}):!1},pointToLatLng:function(n,e){var r=jvm.WorldMap.maps[this.params.map].projection,t=r.centralMeridian,q=jvm.WorldMap.maps[this.params.map].insets,a,s,f,i,o;for(a=0;a<q.length;a++){s=q[a],f=s.bbox,i=n-(this.transX*this.scale+s.left*this.scale),o=e-(this.transY*this.scale+s.top*this.scale),i=i/(s.width*this.scale)*(f[1].x-f[0].x)+f[0].x,o=o/(s.height*this.scale)*(f[1].y-f[0].y)+f[0].y;if(i>f[0].x&&i<f[1].x&&o>f[0].y&&o<f[1].y){return jvm.Proj[r.type+"_inv"](i,-o,t)}}return !1},getInsetForPoint:function(i,e){var h=jvm.WorldMap.maps[this.params.map].insets,j,g;for(j=0;j<h.length;j++){g=h[j].bbox;if(i>g[0].x&&i<g[1].x&&e>g[0].y&&e<g[1].y){return h[j]}}},createSeries:function(){var c,d;this.series={markers:[],regions:[]};for(d in this.params.series){for(c=0;c<this.params.series[d].length;c++){this.series[d][c]=new jvm.DataSeries(this.params.series[d][c],this[d])}}},remove:function(){this.label.remove(),this.container.remove(),jvm.$(window).unbind("resize",this.onResize)}},jvm.WorldMap.maps={},jvm.WorldMap.defaultParams={map:"world_mill_en",backgroundColor:"#505050",zoomButtons:!0,zoomOnScroll:!0,zoomMax:8,zoomMin:1,zoomStep:1.6,regionsSelectable:!1,markersSelectable:!1,bindTouchEvents:!0,regionStyle:{initial:{fill:"white","fill-opacity":1,stroke:"none","stroke-width":0,"stroke-opacity":1},hover:{"fill-opacity":0.8},selected:{fill:"yellow"},selectedHover:{}},markerStyle:{initial:{fill:"grey",stroke:"#505050","fill-opacity":1,"stroke-width":1,"stroke-opacity":1,r:5},hover:{stroke:"black","stroke-width":2},selected:{fill:"blue"},selectedHover:{}}},jvm.WorldMap.apiEvents={onRegionLabelShow:"regionLabelShow",onRegionOver:"regionOver",onRegionOut:"regionOut",onRegionClick:"regionClick",onRegionSelected:"regionSelected",onMarkerLabelShow:"markerLabelShow",onMarkerOver:"markerOver",onMarkerOut:"markerOut",onMarkerClick:"markerClick",onMarkerSelected:"markerSelected",onViewportChange:"viewportChange"};
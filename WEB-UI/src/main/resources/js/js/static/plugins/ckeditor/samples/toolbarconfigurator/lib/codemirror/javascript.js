(function(b){"object"==typeof exports&&"object"==typeof module?b(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],b):b(CodeMirror)})(function(b){b.defineMode("javascript",function(G,S){function Q(c,d,e){ae=c;aj=e;return d}function V(h,c){var e=h.next();if('"'==e||"'"==e){return c.tokenize=ad(e),c.tokenize(h,c)}if("."==e&&h.match(/^\d+(?:[eE][+\-]?\d+)?/)){return Q("number","number")}if("."==e&&h.match("..")){return Q("spread","meta")}if(/[\[\]{}\(\),;\:\.]/.test(e)){return Q(e)}if("\x3d"==e&&h.eat("\x3e")){return Q("\x3d\x3e","operator")}if("0"==e&&h.eat(/x/i)){return h.eatWhile(/[\da-f]/i),Q("number","number")}if(/\d/.test(e)){return h.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/),Q("number","number")}if("/"==e){if(h.eat("*")){return c.tokenize=al,al(h,c)}if(h.eat("/")){return h.skipToEnd(),Q("comment","comment")}if("operator"==c.lastType||"keyword c"==c.lastType||"sof"==c.lastType||/^[\[{}\(,;:]$/.test(c.lastType)){h:for(var e=!1,d,i=!1;null!=(d=h.next());){if(!e){if("/"==d&&!i){break h}"["==d?i=!0:i&&"]"==d&&(i=!1)}e=!e&&"\\"==d}h.match(/^\b(([gimyu])(?![gimyu]*\2))+\b/);return Q("regexp","string-2")}h.eatWhile(am);return Q("operator","operator",h.current())}if("`"==e){return c.tokenize=au,au(h,c)}if("#"==e){return h.skipToEnd(),Q("error","error")}if(am.test(e)){return h.eatWhile(am),Q("operator","operator",h.current())}if(av.test(e)){return h.eatWhile(av),e=h.current(),(d=ar.propertyIsEnumerable(e)&&ar[e])&&"."!=c.lastType?Q(d.type,d.style,e):Q("variable","variable",e)}}function ad(c){return function(d,h){var e=!1,i;if(an&&"@"==d.peek()&&d.match(m)){return h.tokenize=V,Q("jsonld-keyword","meta")}for(;null!=(i=d.next())&&(i!=c||e);){e=!e&&"\\"==i}e||(h.tokenize=V);return Q("string","string")}}function al(c,d){for(var h=!1,e;e=c.next();){if("/"==e&&h){d.tokenize=V;break}h="*"==e}return Q("comment","comment")}function au(c,d){for(var h=!1,e;null!=(e=c.next());){if(!h&&("`"==e||"$"==e&&c.eat("{"))){d.tokenize=V;break}h=!h&&"\\"==e}return Q("quasi","string-2",c.current())}function aw(d,h){h.fatArrowAt&&(h.fatArrowAt=null);var j=d.string.indexOf("\x3d\x3e",d.start);if(!(0>j)){for(var i=0,e=!1,j=j-1;0<=j;--j){var o=d.string.charAt(j),c="([{}])".indexOf(o);if(0<=c&&3>c){if(!i){++j;break}if(0==--i){break}}else{if(3<=c&&6>c){++i}else{if(av.test(o)){e=!0}else{if(/["'\/]/.test(o)){return}if(e&&!i){++j;break}}}}}e&&!i&&(h.fatArrowAt=j)}}function O(e,i,h,j,c,d){this.indented=e;this.column=i;this.type=h;this.prev=c;this.info=d;null!=j&&(this.align=j)}function I(){for(var c=arguments.length-1;0<=c;c--){H.cc.push(arguments[c])}}function E(){I.apply(null,arguments);return !0}function W(d){function c(h){for(;h;h=h.next){if(h.name==d){return !0}}return !1}var e=H.state;e.context?(H.marked="def",c(e.localVars)||(e.localVars={name:d,next:e.localVars})):!c(e.globalVars)&&S.globalVars&&(e.globalVars={name:d,next:e.globalVars})}function X(){H.state.context={prev:H.state.context,vars:H.state.localVars};H.state.localVars=u}function Y(){H.state.localVars=H.state.context.vars;H.state.context=H.state.context.prev}function M(d,c){var e=function(){var i=H.state,j=i.indented;if("stat"==i.lexical.type){j=i.lexical.indented}else{for(var h=i.lexical;h&&")"==h.type&&h.align;h=h.prev){j=h.indented}}i.lexical=new O(j,H.stream.column(),d,null,i.lexical,c)};e.lex=!0;return e}function L(){var c=H.state;c.lexical.prev&&(")"==c.lexical.type&&(c.indented=c.lexical.indented),c.lexical=c.lexical.prev)}function N(c){function d(e){return e==c?E():";"==c?I():E(d)}return d}function R(c,d){return"var"==c?E(M("vardef",d.length),ax,N(";"),L):"keyword a"==c?E(M("form"),P,R,L):"keyword b"==c?E(M("form"),R,L):"{"==c?E(M("}"),ay,L):";"==c?E():"if"==c?("else"==H.state.lexical.info&&H.state.cc[H.state.cc.length-1]==L&&H.state.cc.pop()(),E(M("form"),P,R,L,k)):"function"==c?E(U):"for"==c?E(M("form"),r,R,L):"variable"==c?E(M("stat"),A):"switch"==c?E(M("form"),P,M("}","switch"),N("{"),ay,L,L):"case"==c?E(P,N(":")):"default"==c?E(N(":")):"catch"==c?E(M("form"),X,N("("),az,N(")"),R,L,Y):"module"==c?E(M("form"),X,bh,Y,L):"class"==c?E(M("form"),bd,L):"export"==c?E(M("form"),Z,L):"import"==c?E(M("form"),l,L):I(M("stat"),P,N(";"),L)}function P(c){return y(c,!1)}function T(c){return y(c,!0)}function y(c,d){if(H.state.fatArrowAt==H.stream.start){var e=d?be:ak;if("("==c){return E(X,M(")"),af(bi,")"),L,N("\x3d\x3e"),e,Y)}if("variable"==c){return I(X,bi,N("\x3d\x3e"),e,Y)}}e=d?a0:ao;return t.hasOwnProperty(c)?E(e):"function"==c?E(U,e):"keyword c"==c?E(d?K:ba):"("==c?E(M(")"),ba,ap,N(")"),L,e):"operator"==c||"spread"==c?E(d?T:P):"["==c?E(M("]"),z,L,e):"{"==c?ag(bg,"}",null,e):"quasi"==c?I(aq,e):E()}function ba(c){return c.match(/[;\}\)\],]/)?I():I(P)}function K(c){return c.match(/[;\}\)\],]/)?I():I(T)}function ao(c,d){return","==c?E(P):a0(c,d,!1)}function a0(d,c,h){var e=0==h?ao:a0,i=0==h?P:T;if("\x3d\x3e"==d){return E(X,h?be:ak,Y)}if("operator"==d){return/\+\+|--/.test(c)?E(e):"?"==c?E(P,N(":"),i):E(i)}if("quasi"==d){return I(aq,e)}if(";"!=d){if("("==d){return ag(T,")","call",e)}if("."==d){return E(x,e)}if("["==d){return E(M("]"),ba,N("]"),L,e)}}}function aq(c,d){return"quasi"!=c?I():"${"!=d.slice(d.length-2)?E(aq):E(P,D)}function D(c){if("}"==c){return H.marked="string-2",H.state.tokenize=au,E(aq)}}function ak(c){aw(H.stream,H.state);return I("{"==c?R:P)}function be(c){aw(H.stream,H.state);return I("{"==c?R:T)}function A(c){return":"==c?E(L,R):I(ao,N(";"),L)}function x(c){if("variable"==c){return H.marked="property",E()}}function bg(c,d){if("variable"==c||"keyword"==H.style){return H.marked="property","get"==d||"set"==d?E(ai):E(ah)}if("number"==c||"string"==c){return H.marked=an?"property":H.style+" property",E(ah)}if("jsonld-keyword"==c){return E(ah)}if("["==c){return E(P,N("]"),ah)}}function ai(c){if("variable"!=c){return I(ah)}H.marked="property";return E(U)}function ah(c){if(":"==c){return E(T)}if("("==c){return I(U)}}function af(c,d){function e(h){return","==h?(h=H.state.lexical,"call"==h.info&&(h.pos=(h.pos||0)+1),E(c,e)):h==d?E():E(N(d))}return function(h){return h==d?E():I(c,e)}}function ag(c,d,h){for(var e=3;e<arguments.length;e++){H.cc.push(arguments[e])}return E(M(d,h),af(c,d),L)}function ay(c){return"}"==c?E():I(R,ay)}function g(c){if(q&&":"==c){return E(J)}}function J(c){if("variable"==c){return H.marked="variable-3",E()}}function ax(){return I(bi,g,bb,f)}function bi(c,d){if("variable"==c){return W(d),E()}if("["==c){return ag(bi,"]")}if("{"==c){return ag(n,"}")}}function n(c,d){if("variable"==c&&!H.stream.match(/^\s*:/,!1)){return W(d),E(bb)}"variable"==c&&(H.marked="property");return E(N(":"),bi,bb)}function bb(c,d){if("\x3d"==d){return E(T)}}function f(c){if(","==c){return E(ax)}}function k(c,d){if("keyword b"==c&&"else"==d){return E(M("form","else"),R,L)}}function r(c){if("("==c){return E(M(")"),v,N(")"),L)}}function v(c){return"var"==c?E(ax,N(";"),at):";"==c?E(at):"variable"==c?E(B):I(P,N(";"),at)}function B(c,d){return"in"==d||"of"==d?(H.marked="keyword",E(P)):E(ao,at)}function at(c,d){return";"==c?E(w):"in"==d||"of"==d?(H.marked="keyword",E(P)):I(P,N(";"),w)}function w(c){")"!=c&&E(P)}function U(c,d){if("*"==d){return H.marked="keyword",E(U)}if("variable"==c){return W(d),E(U)}if("("==c){return E(X,M(")"),af(az,")"),L,R,Y)}}function az(c){return"spread"==c?E(az):I(bi,g)}function bd(c,d){if("variable"==c){return W(d),E(C)}}function C(c,d){if("extends"==d){return E(P,C)}if("{"==c){return E(M("}"),bj,L)}}function bj(c,d){if("variable"==c||"keyword"==H.style){if("static"==d){return H.marked="keyword",E(bj)}H.marked="property";return"get"==d||"set"==d?E(bl,U,bj):E(U,bj)}if("*"==d){return H.marked="keyword",E(bj)}if(";"==c){return E(bj)}if("}"==c){return E()}}function bl(c){if("variable"!=c){return I()}H.marked="property";return E()}function bh(c,d){if("string"==c){return E(R)}if("variable"==c){return W(d),E(bc)}}function Z(c,d){return"*"==d?(H.marked="keyword",E(bc,N(";"))):"default"==d?(H.marked="keyword",E(P,N(";"))):I(R)}function l(c){return"string"==c?E():I(bf,bc)}function bf(c,d){if("{"==c){return ag(bf,"}")}"variable"==c&&W(d);"*"==d&&(H.marked="keyword");return E(F)}function F(c,d){if("as"==d){return H.marked="keyword",E(bf)}}function bc(c,d){if("from"==d){return H.marked="keyword",E(P)}}function z(c){return"]"==c?E():I(T,aa)}function aa(c){return"for"==c?I(ap,N("]")):","==c?E(af(K,"]")):I(af(T,"]"))}function ap(c){if("for"==c){return E(r,ap)}if("if"==c){return E(P,ap)}}var bk=G.indentUnit,a=S.statementIndent,an=S.jsonld,bm=S.json||an,q=S.typescript,av=S.wordCharacters||/[\w$\xa1-\uffff]/,ar=function(){function d(p){return{type:p,style:"keyword"}}var h=d("keyword a"),e=d("keyword b"),i=d("keyword c"),j=d("operator"),c={type:"atom",style:"atom"},h={"if":d("if"),"while":h,"with":h,"else":e,"do":e,"try":e,"finally":e,"return":i,"break":i,"continue":i,"new":i,"delete":i,"throw":i,"debugger":i,"var":d("var"),"const":d("var"),let:d("var"),"function":d("function"),"catch":d("catch"),"for":d("for"),"switch":d("switch"),"case":d("case"),"default":d("default"),"in":j,"typeof":j,"instanceof":j,"true":c,"false":c,"null":c,undefined:c,NaN:c,Infinity:c,"this":d("this"),module:d("module"),"class":d("class"),"super":d("atom"),yield:i,"export":d("export"),"import":d("import"),"extends":i};if(q){var e={type:"variable",style:"variable-3"},e={"interface":d("interface"),"extends":d("extends"),constructor:d("constructor"),"public":d("public"),"private":d("private"),"protected":d("protected"),"static":d("static"),string:e,number:e,bool:e,any:e},o;for(o in e){h[o]=e[o]}}return h}(),am=/[+\-*&%=<>!?|~^]/,m=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/,ae,aj,t={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,"this":!0,"jsonld-keyword":!0},H={state:null,column:null,marked:null,cc:null},u={name:"this",next:{name:"arguments"}};L.lex=!0;return{startState:function(c){c={tokenize:V,lastType:"sof",cc:[],lexical:new O((c||0)-bk,0,"block",!1),localVars:S.localVars,context:S.localVars&&{vars:S.localVars},indented:0};S.globalVars&&"object"==typeof S.globalVars&&(c.globalVars=S.globalVars);return c},token:function(e,i){e.sol()&&(i.lexical.hasOwnProperty("align")||(i.lexical.align=!1),i.indented=e.indentation(),aw(e,i));if(i.tokenize!=al&&e.eatSpace()){return null}var j=i.tokenize(e,i);if("comment"==ae){return j}i.lastType="operator"!=ae||"++"!=aj&&"--"!=aj?ae:"incdec";e:{var h=ae,c=aj,d=i.cc;H.state=i;H.stream=e;H.marked=null;H.cc=d;H.style=j;i.lexical.hasOwnProperty("align")||(i.lexical.align=!0);for(;;){if((d.length?d.pop():bm?P:R)(h,c)){for(;d.length&&d[d.length-1].lex;){d.pop()()}if(H.marked){j=H.marked;break e}if(h="variable"==h){i:{for(h=i.localVars;h;h=h.next){if(h.name==c){h=!0;break i}}for(d=i.context;d;d=d.prev){for(h=d.vars;h;h=h.next){if(h.name==c){h=!0;break i}}}h=void 0}}if(h){j="variable-2";break e}break e}}}return j},indent:function(d,e){if(d.tokenize==al){return b.Pass}if(d.tokenize!=V){return 0}var i=e&&e.charAt(0),h=d.lexical;if(!/^\s*else\b/.test(e)){for(var j=d.cc.length-1;0<=j;--j){var c=d.cc[j];if(c==L){h=h.prev}else{if(c!=k){break}}}}"stat"==h.type&&"}"==i&&(h=h.prev);a&&")"==h.type&&"stat"==h.prev.type&&(h=h.prev);j=h.type;c=i==j;return"vardef"==j?h.indented+("operator"==d.lastType||","==d.lastType?h.info+1:0):"form"==j&&"{"==i?h.indented:"form"==j?h.indented+bk:"stat"==j?(i=h.indented,h="operator"==d.lastType||","==d.lastType||am.test(e.charAt(0))||/[,.]/.test(e.charAt(0)),i+(h?a||bk:0)):"switch"!=h.info||c||0==S.doubleIndentSwitch?h.align?h.column+(c?0:1):h.indented+(c?0:bk):h.indented+(/^(?:case|default)\b/.test(e)?bk:2*bk)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:bm?null:"/*",blockCommentEnd:bm?null:"*/",lineComment:bm?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:bm?"json":"javascript",jsonldMode:an,jsonMode:bm}});b.registerHelper("wordChars","javascript",/[\w$]/);b.defineMIME("text/javascript","javascript");b.defineMIME("text/ecmascript","javascript");b.defineMIME("application/javascript","javascript");b.defineMIME("application/x-javascript","javascript");b.defineMIME("application/ecmascript","javascript");b.defineMIME("application/json",{name:"javascript",json:!0});b.defineMIME("application/x-json",{name:"javascript",json:!0});b.defineMIME("application/ld+json",{name:"javascript",jsonld:!0});b.defineMIME("text/typescript",{name:"javascript",typescript:!0});b.defineMIME("application/typescript",{name:"javascript",typescript:!0})});
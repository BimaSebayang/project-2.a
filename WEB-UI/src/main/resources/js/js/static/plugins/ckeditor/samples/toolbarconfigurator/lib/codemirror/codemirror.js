(function(b){if("object"==typeof exports&&"object"==typeof module){module.exports=b()}else{if("function"==typeof define&&define.amd){return define([],b)}this.CodeMirror=b()}})(function(){function hn(e,f){if(!(this instanceof hn)){return new hn(e,f)}this.options=f=f?Z(f):{};Z(j6,f,!1);i8(f);var a=f.value;"string"==typeof a&&(a=new gd(a,f.mode));this.doc=a;var b=new hn.inputStyles[f.inputStyle](this),b=this.display=new iM(e,a,b);b.wrapper.CodeMirror=this;iZ(this);kf(this);f.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap");f.autofocus&&!R&&b.input.focus();kz(this);this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,cutIncoming:!1,draggingText:!1,highlight:new dc,keySeq:null,specialChars:null};var c=this;cd&&11>da&&setTimeout(function(){c.display.input.reset(!0)},20);A(this);jj||(kv(),jj=!0);ad(this);this.curOp.forceUpdate=!0;jT(this,a);f.autofocus&&!R||c.hasFocus()?setTimeout(a4(h7,this),20):gG(this);for(var d in gh){if(gh.hasOwnProperty(d)){gh[d](this,f[d],hS)}}a8(this);f.finishInit&&f.finishInit(this);for(a=0;a<F.length;++a){F[a](this)}gU(this);fx&&f.lineWrapping&&"optimizelegibility"==getComputedStyle(b.lineDiv).textRendering&&(b.lineDiv.style.textRendering="auto")}function iM(b,c,a){this.input=a;this.scrollbarFiller=ht("div",null,"CodeMirror-scrollbar-filler");this.scrollbarFiller.setAttribute("cm-not-content","true");this.gutterFiller=ht("div",null,"CodeMirror-gutter-filler");this.gutterFiller.setAttribute("cm-not-content","true");this.lineDiv=ht("div",null,"CodeMirror-code");this.selectionDiv=ht("div",null,null,"position: relative; z-index: 1");this.cursorDiv=ht("div",null,"CodeMirror-cursors");this.measure=ht("div",null,"CodeMirror-measure");this.lineMeasure=ht("div",null,"CodeMirror-measure");this.lineSpace=ht("div",[this.measure,this.lineMeasure,this.selectionDiv,this.cursorDiv,this.lineDiv],null,"position: relative; outline: none");this.mover=ht("div",[ht("div",[this.lineSpace],"CodeMirror-lines")],null,"position: relative");this.sizer=ht("div",[this.mover],"CodeMirror-sizer");this.sizerWidth=null;this.heightForcer=ht("div",null,null,"position: absolute; height: "+N+"px; width: 1px;");this.gutters=ht("div",null,"CodeMirror-gutters");this.lineGutter=null;this.scroller=ht("div",[this.sizer,this.heightForcer,this.gutters],"CodeMirror-scroll");this.scroller.setAttribute("tabIndex","-1");this.wrapper=ht("div",[this.scrollbarFiller,this.gutterFiller,this.scroller],"CodeMirror");cd&&8>da&&(this.gutters.style.zIndex=-1,this.scroller.style.paddingRight=0);fx||jZ&&R||(this.scroller.draggable=!0);b&&(b.appendChild?b.appendChild(this.wrapper):b(this.wrapper));this.reportedViewFrom=this.reportedViewTo=this.viewFrom=this.viewTo=c.first;this.view=[];this.externalMeasured=this.renderedView=null;this.lastWrapHeight=this.lastWrapWidth=this.viewOffset=0;this.updateLineNumbers=null;this.nativeBarWidth=this.barHeight=this.barWidth=0;this.scrollbarsClipped=!1;this.lineNumWidth=this.lineNumInnerWidth=this.lineNumChars=null;this.alignWidgets=!1;this.maxLine=this.cachedCharWidth=this.cachedTextHeight=this.cachedPaddingH=null;this.maxLineLength=0;this.maxLineChanged=!1;this.wheelDX=this.wheelDY=this.wheelStartX=this.wheelStartY=null;this.shift=!1;this.activeTouch=this.selForContextMenu=null;a.init(this)}function gv(a){a.doc.mode=hn.getMode(a.options,a.doc.modeOption);g5(a)}function g5(a){a.doc.iter(function(b){b.stateAfter&&(b.stateAfter=null);b.styles&&(b.styles=null)});a.doc.frontier=a.doc.first;db(a,100);a.state.modeGen++;a.curOp&&ge(a)}function bc(c){var d=h1(c.display),a=c.options.lineWrapping,b=a&&Math.max(5,c.display.scroller.clientWidth/iy(c.display)-3);return function(e){if(C(c.doc,e)){return 0}var f=0;if(e.widgets){for(var g=0;g<e.widgets.length;g++){e.widgets[g].height&&(f+=e.widgets[g].height)}}return a?f+(Math.ceil(e.text.length/b)||1)*d:f+d}}function iW(b){var c=b.doc,a=bc(b);c.iter(function(d){var e=a(d);e!=d.height&&a3(d,e)})}function kf(a){a.display.wrapper.className=a.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+a.options.theme.replace(/(^|\s)\s*/g," cm-s-");hp(a)}function h5(a){iZ(a);ge(a);setTimeout(function(){kc(a)},20)}function iZ(e){var f=e.display.gutters,a=e.options.gutters;gq(f);for(var b=0;b<a.length;++b){var c=a[b],d=f.appendChild(ht("div",null,"CodeMirror-gutter "+c));"CodeMirror-linenumbers"==c&&(e.display.lineGutter=d,d.style.width=(e.display.lineNumWidth||1)+"px")}f.style.display=b?"":"none";ky(e)}function ky(a){a.display.sizer.style.marginLeft=a.display.gutters.offsetWidth+"px"}function gk(c){if(0==c.height){return 0}for(var d=c.text.length,a,b=c;a=iS(b,!0);){a=a.find(0,!0),b=a.from.line,d+=a.from.ch-a.to.ch}for(b=c;a=iS(b,!1);){a=a.find(0,!0),d-=b.text.length-a.from.ch,b=a.to.line,d+=b.text.length-a.to.ch}return d}function ji(a){var b=a.display;a=a.doc;b.maxLine=hx(a,a.first);b.maxLineLength=gk(b.maxLine);b.maxLineChanged=!0;a.iter(function(d){var c=gk(d);c>b.maxLineLength&&(b.maxLineLength=c,b.maxLine=d)})}function i8(a){var b=de(a.gutters,"CodeMirror-linenumbers");-1==b&&a.lineNumbers?a.gutters=a.gutters.concat(["CodeMirror-linenumbers"]):-1<b&&!a.lineNumbers&&(a.gutters=a.gutters.slice(0),a.gutters.splice(b,1))}function gp(c){var d=c.display,a=d.gutters.offsetWidth,b=Math.round(c.doc.height+jQ(c.display));return{clientHeight:d.scroller.clientHeight,viewHeight:d.wrapper.clientHeight,scrollWidth:d.scroller.scrollWidth,clientWidth:d.scroller.clientWidth,viewWidth:d.wrapper.clientWidth,barLeft:c.options.fixedGutter?a:0,docHeight:b,scrollHeight:b+gD(c)+d.barHeight,nativeBarWidth:d.nativeBarWidth,gutterWidth:a}}function hP(d,e,a){this.cm=a;var b=this.vert=ht("div",[ht("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),c=this.horiz=ht("div",[ht("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");d(b);d(c);hy(b,"scroll",function(){b.clientHeight&&e(b.scrollTop,"vertical")});hy(c,"scroll",function(){c.clientWidth&&e(c.scrollLeft,"horizontal")});this.checkedOverlay=!1;cd&&8>da&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")}function ij(){}function kz(a){a.display.scrollbars&&(a.display.scrollbars.clear(),a.display.scrollbars.addClass&&g0(a.display.wrapper,a.display.scrollbars.addClass));a.display.scrollbars=new hn.scrollbarModel[a.options.scrollbarStyle](function(b){a.display.wrapper.insertBefore(b,a.display.scrollbarFiller);hy(b,"mousedown",function(){a.state.focused&&setTimeout(function(){a.display.input.focus()},0)});b.setAttribute("cm-not-content","true")},function(c,b){"horizontal"==b?bb(a,c):ir(a,c)},a);a.display.scrollbars.addClass&&i2(a.display.wrapper,a.display.scrollbars.addClass)}function fa(d,e){e||(e=gp(d));var a=d.display.barWidth,b=d.display.barHeight;a0(d,e);for(var c=0;4>c&&a!=d.display.barWidth||b!=d.display.barHeight;c++){a!=d.display.barWidth&&d.options.lineWrapping&&gX(d),a0(d,gp(d)),a=d.display.barWidth,b=d.display.barHeight}}function a0(c,d){var a=c.display,b=a.scrollbars.update(d);a.sizer.style.paddingRight=(a.barWidth=b.right)+"px";a.sizer.style.paddingBottom=(a.barHeight=b.bottom)+"px";b.right&&b.bottom?(a.scrollbarFiller.style.display="block",a.scrollbarFiller.style.height=b.bottom+"px",a.scrollbarFiller.style.width=b.right+"px"):a.scrollbarFiller.style.display="";b.bottom&&c.options.coverGutterNextToScrollbar&&c.options.fixedGutter?(a.gutterFiller.style.display="block",a.gutterFiller.style.height=b.bottom+"px",a.gutterFiller.style.width=d.gutterWidth+"px"):a.gutterFiller.style.display=""}function M(e,f,a){var b=a&&null!=a.top?Math.max(0,a.top):e.scroller.scrollTop,b=Math.floor(b-e.lineSpace.offsetTop),c=a&&null!=a.bottom?a.bottom:b+e.wrapper.clientHeight,b=ka(f,b),c=ka(f,c);if(a&&a.ensure){var d=a.ensure.from.line;a=a.ensure.to.line;d<b?(b=d,c=ka(f,g4(hx(f,d))+e.wrapper.clientHeight)):Math.min(a,f.lastLine())>=c&&(b=ka(f,g4(hx(f,a))-e.wrapper.clientHeight),c=a)}return{from:b,to:Math.max(c,b+1)}}function kc(c){var d=c.display,e=d.view;if(d.alignWidgets||d.gutters.firstChild&&c.options.fixedGutter){for(var f=gO(d)-d.scroller.scrollLeft+c.doc.scrollLeft,g=d.gutters.offsetWidth,h=f+"px",i=0;i<e.length;i++){if(!e[i].hidden){c.options.fixedGutter&&e[i].gutter&&(e[i].gutter.style.left=h);var a=e[i].alignable;if(a){for(var b=0;b<a.length;b++){a[b].style.left=h}}}}c.options.fixedGutter&&(d.gutters.style.left=f+g+"px")}}function a8(d){if(!d.options.lineNumbers){return !1}var e=d.doc,e=ag(d.options,e.first+e.size-1),a=d.display;if(e.length!=a.lineNumChars){var b=a.measure.appendChild(ht("div",[ht("div",e)],"CodeMirror-linenumber CodeMirror-gutter-elt")),c=b.firstChild.offsetWidth,b=b.offsetWidth-c;a.lineGutter.style.width="";a.lineNumInnerWidth=Math.max(c,a.lineGutter.offsetWidth-b)+1;a.lineNumWidth=a.lineNumInnerWidth+b;a.lineNumChars=a.lineNumInnerWidth?e.length:-1;a.lineGutter.style.width=a.lineNumWidth+"px";ky(d);return !0}return !1}function ag(a,b){return String(a.lineNumberFormatter(b+a.firstLineNumber))}function gO(a){return a.scroller.getBoundingClientRect().left-a.sizer.getBoundingClientRect().left}function bd(c,d,a){var b=c.display;this.viewport=d;this.visible=M(b,c.doc,d);this.editorIsHidden=!b.wrapper.offsetWidth;this.wrapperHeight=b.wrapper.clientHeight;this.wrapperWidth=b.wrapper.clientWidth;this.oldDisplayWidth=jv(c);this.force=a;this.dims=go(c);this.events=[]}function gZ(f,g){var a=f.display,b=f.doc;if(g.editorIsHidden){return j0(f),!1}if(!g.force&&g.visible.from>=a.viewFrom&&g.visible.to<=a.viewTo&&(null==a.updateLineNumbers||a.updateLineNumbers>=a.viewTo)&&a.renderedView==a.view&&0==gs(f)){return !1}a8(f)&&(j0(f),g.dims=go(f));var c=b.first+b.size,d=Math.max(g.visible.from-f.options.viewportMargin,b.first),e=Math.min(c,g.visible.to+f.options.viewportMargin);a.viewFrom<d&&20>d-a.viewFrom&&(d=Math.max(b.first,a.viewFrom));a.viewTo>e&&20>a.viewTo-e&&(e=Math.min(c,a.viewTo));iv&&(d=bg(f.doc,d),e=g1(f.doc,e));b=d!=a.viewFrom||e!=a.viewTo||a.lastWrapHeight!=g.wrapperHeight||a.lastWrapWidth!=g.wrapperWidth;c=f.display;0==c.view.length||d>=c.viewTo||e<=c.viewFrom?(c.view=fb(f,d,e),c.viewFrom=d):(c.viewFrom>d?c.view=fb(f,d,c.viewFrom).concat(c.view):c.viewFrom<d&&(c.view=c.view.slice(kw(f,d))),c.viewFrom=d,c.viewTo<e?c.view=c.view.concat(fb(f,c.viewTo,e)):c.viewTo>e&&(c.view=c.view.slice(0,kw(f,e))));c.viewTo=e;a.viewOffset=g4(hx(f.doc,a.viewFrom));f.display.mover.style.top=a.viewOffset+"px";e=gs(f);if(!b&&0==e&&!g.force&&a.renderedView==a.view&&(null==a.updateLineNumbers||a.updateLineNumbers>=a.viewTo)){return !1}d=cg();4<e&&(a.lineDiv.style.display="none");kH(f,a.updateLineNumbers,g.dims);4<e&&(a.lineDiv.style.display="");a.renderedView=a.view;d&&cg()!=d&&d.offsetHeight&&d.focus();gq(a.cursorDiv);gq(a.selectionDiv);a.gutters.style.height=0;b&&(a.lastWrapHeight=g.wrapperHeight,a.lastWrapWidth=g.wrapperWidth,db(f,400));a.updateLineNumbers=null;return !0}function ca(c,d){for(var a=d.viewport,b=!0;;b=!1){if(!b||!c.options.lineWrapping||d.oldDisplayWidth==jv(c)){if(a&&null!=a.top&&(a={top:Math.min(c.doc.height+jQ(c.display)-fd(c),a.top)}),d.visible=M(c.display,c.doc,a),d.visible.from>=c.display.viewFrom&&d.visible.to<=c.display.viewTo){break}}if(!gZ(c,d)){break}gX(c);b=gp(c);hd(c);hc(c,b);fa(c,b)}d.signal(c,"update",c);if(c.display.viewFrom!=c.display.reportedViewFrom||c.display.viewTo!=c.display.reportedViewTo){d.signal(c,"viewportChange",c,c.display.viewFrom,c.display.viewTo),c.display.reportedViewFrom=c.display.viewFrom,c.display.reportedViewTo=c.display.viewTo}}function hQ(c,d){var a=new bd(c,d);if(gZ(c,a)){gX(c);ca(c,a);var b=gp(c);hd(c);hc(c,b);fa(c,b);a.finish()}}function hc(b,c){b.display.sizer.style.minHeight=c.docHeight+"px";var a=c.docHeight+b.display.barHeight;b.display.heightForcer.style.top=a+"px";b.display.gutters.style.height=Math.max(a+gD(b),c.clientHeight)+"px"}function gX(e){e=e.display;for(var f=e.lineDiv.offsetTop,a=0;a<e.view.length;a++){var b=e.view[a],c;if(!b.hidden){if(cd&&8>da){var d=b.node.offsetTop+b.node.offsetHeight;c=d-f;f=d}else{c=b.node.getBoundingClientRect(),c=c.bottom-c.top}d=b.line.height-c;2>c&&(c=h1(e));if(0.001<d||-0.001>d){if(a3(b.line,c),fg(b.line),b.rest){for(c=0;c<b.rest.length;c++){fg(b.rest[c])}}}}}}function fg(a){if(a.widgets){for(var b=0;b<a.widgets.length;++b){a.widgets[b].height=a.widgets[b].node.offsetHeight}}}function go(f){for(var g=f.display,a={},b={},c=g.gutters.clientLeft,d=g.gutters.firstChild,e=0;d;d=d.nextSibling,++e){a[f.options.gutters[e]]=d.offsetLeft+d.clientLeft+c,b[f.options.gutters[e]]=d.clientWidth}return{fixedPos:gO(g),gutterTotalWidth:g.gutters.offsetWidth,gutterLeft:a,gutterWidth:b,wrapperWidth:g.wrapper.clientWidth}}function kH(c,d,e){function f(n){var m=n.nextSibling;fx&&aa&&c.display.currentWheelTarget==n?n.style.display="none":n.parentNode.removeChild(n);return m}for(var g=c.display,h=c.options.lineNumbers,i=g.lineDiv,j=i.firstChild,k=g.view,g=g.viewFrom,l=0;l<k.length;l++){var a=k[l];if(!a.hidden){if(a.node&&a.node.parentNode==i){for(;j!=a.node;){j=f(j)}j=h&&null!=d&&d<=g&&a.lineNumber;a.changes&&(-1<de(a.changes,"gutter")&&(j=!1),he(c,a,g,e));j&&(gq(a.lineNumber),a.lineNumber.appendChild(document.createTextNode(ag(c.options,g))));j=a.node.nextSibling}else{var b=jI(c,a,g,e);i.insertBefore(b,j)}}g+=a.size}for(;j;){j=f(j)}}function he(c,d,e,f){for(var g=0;g<d.changes.length;g++){var h=d.changes[g];if("text"==h){var h=d,i=h.text.className,j=hT(c,h);h.text==h.node&&(h.node=j.pre);h.text.parentNode.replaceChild(j.pre,h.text);h.text=j.pre;j.bgClass!=h.bgClass||j.textClass!=h.textClass?(h.bgClass=j.bgClass,h.textClass=j.textClass,ik(h)):i&&(h.text.className=i)}else{if("gutter"==h){gg(c,d,e,f)}else{if("class"==h){ik(d)}else{if("widget"==h){h=c;i=d;j=f;i.alignable&&(i.alignable=null);for(var a=i.node.firstChild,b=void 0;a;a=b){b=a.nextSibling,"CodeMirror-linewidget"==a.className&&i.node.removeChild(a)}gS(h,i,j)}}}}}d.changes=null}function iU(a){a.node==a.text&&(a.node=ht("div",null,null,"position: relative"),a.text.parentNode&&a.text.parentNode.replaceChild(a.node,a.text),a.node.appendChild(a.text),cd&&8>da&&(a.node.style.zIndex=2));return a.node}function hT(b,c){var a=b.display.externalMeasured;return a&&a.line==c.line?(b.display.externalMeasured=null,c.measure=a.measure,a.built):jM(b,c)}function ik(b){var c=b.bgClass?b.bgClass+" "+(b.line.bgClass||""):b.line.bgClass;c&&(c+=" CodeMirror-linebackground");if(b.background){c?b.background.className=c:(b.background.parentNode.removeChild(b.background),b.background=null)}else{if(c){var a=iU(b);b.background=a.insertBefore(ht("div",null,c),a.firstChild)}}b.line.wrapClass?iU(b).className=b.line.wrapClass:b.node!=b.text&&(b.node.className="");b.text.className=(b.textClass?b.textClass+" "+(b.line.textClass||""):b.line.textClass)||""}function gg(f,g,a,b){g.gutter&&(g.node.removeChild(g.gutter),g.gutter=null);var c=g.line.gutterMarkers;if(f.options.lineNumbers||c){var d=iU(g),e=g.gutter=ht("div",null,"CodeMirror-gutter-wrapper","left: "+(f.options.fixedGutter?b.fixedPos:-b.gutterTotalWidth)+"px; width: "+b.gutterTotalWidth+"px");f.display.input.setUneditable(e);d.insertBefore(e,g.text);g.line.gutterClass&&(e.className+=" "+g.line.gutterClass);!f.options.lineNumbers||c&&c["CodeMirror-linenumbers"]||(g.lineNumber=e.appendChild(ht("div",ag(f.options,a),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+b.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+f.display.lineNumInnerWidth+"px")));if(c){for(g=0;g<f.options.gutters.length;++g){a=f.options.gutters[g],(d=c.hasOwnProperty(a)&&c[a])&&e.appendChild(ht("div",[d],"CodeMirror-gutter-elt","left: "+b.gutterLeft[a]+"px; width: "+b.gutterWidth[a]+"px"))}}}}function jI(d,e,a,b){var c=hT(d,e);e.text=e.node=c.pre;c.bgClass&&(e.bgClass=c.bgClass);c.textClass&&(e.textClass=c.textClass);ik(e);gg(d,e,a,b);gS(d,e,b);return e.node}function gS(c,d,a){iV(c,d.line,d,a,!0);if(d.rest){for(var b=0;b<d.rest.length;b++){iV(c,d.rest[b],d,a,!1)}}}function iV(b,d,e,f,g){if(d.widgets){var h=iU(e),i=0;for(d=d.widgets;i<d.length;++i){var j=d[i],k=ht("div",[j.node],"CodeMirror-linewidget");j.handleMouseEvents||k.setAttribute("cm-ignore-events","true");var l=j,m=k,c=f;if(l.noHScroll){(e.alignable||(e.alignable=[])).push(m);var a=c.wrapperWidth;m.style.left=c.fixedPos+"px";l.coverGutter||(a-=c.gutterTotalWidth,m.style.paddingLeft=c.gutterTotalWidth+"px");m.style.width=a+"px"}l.coverGutter&&(m.style.zIndex=5,m.style.position="relative",l.noHScroll||(m.style.marginLeft=-c.gutterTotalWidth+"px"));b.display.input.setUneditable(k);g&&j.above?h.insertBefore(k,e.gutter||e.text):h.appendChild(k);fz(j,"redraw")}}}function gQ(a){return ho(a.line,a.ch)}function hN(a,b){return 0>hJ(a,b)?b:a}function ii(a,b){return 0>hJ(a,b)?a:b}function jg(a){a.state.focused||(a.display.input.focus(),h7(a))}function gP(a){return a.options.readOnly||a.doc.cantEdit}function jJ(b,d,e,f,g){var h=b.doc;b.display.shift=!1;f||(f=h.sel);var i=v(d),j=null;b.state.pasteIncoming&&1<f.ranges.length&&(ab&&ab.join("\n")==d?j=0==f.ranges.length%ab.length&&kh(ab,v):i.length==f.ranges.length&&(j=kh(i,function(o){return[o]})));for(var k=f.ranges.length-1;0<=k;k--){var l=f.ranges[k],n=l.from(),c=l.to();l.empty()&&(e&&0<e?n=ho(n.line,n.ch-e):b.state.overwrite&&!b.state.pasteIncoming&&(c=ho(c.line,Math.min(hx(h,c.line).text.length,c.ch+cb(i).length))));var a=b.curOp.updateInput,n={from:n,to:c,text:j?j[k%j.length]:i,origin:g||(b.state.pasteIncoming?"paste":b.state.cutIncoming?"cut":"+input")};iR(b.doc,n);fz(b,"inputRead",b,n);if(d&&!b.state.pasteIncoming&&b.options.electricChars&&b.options.smartIndent&&100>l.head.ch&&(!k||f.ranges[k-1].head.line!=l.head.line)){l=b.getModeAt(l.head);n=kk(n);c=!1;if(l.electricChars){for(var m=0;m<l.electricChars.length;m++){if(-1<d.indexOf(l.electricChars.charAt(m))){c=jx(b,n.line,"smart");break}}}else{l.electricInput&&l.electricInput.test(hx(h,n.line).text.slice(0,n.ch))&&(c=jx(b,n.line,"smart"))}c&&fz(b,"electricInput",b,n.line)}}hK(b);b.curOp.updateInput=a;b.curOp.typing=!0;b.state.pasteIncoming=b.state.cutIncoming=!1}function h0(d){for(var e=[],a=[],b=0;b<d.doc.sel.ranges.length;b++){var c=d.doc.sel.ranges[b].head.line,c={anchor:ho(c,0),head:ho(c+1,0)};a.push(c);e.push(d.getRange(c.anchor,c.head))}return{text:e,ranges:a}}function jl(a){a.setAttribute("autocorrect","off");a.setAttribute("autocapitalize","off");a.setAttribute("spellcheck","false")}function iQ(a){this.cm=a;this.prevInput="";this.pollingFast=!1;this.polling=new dc;this.hasSelection=this.inaccurateSelection=!1;this.composing=null}function jU(){var a=ht("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em; outline: none"),b=ht("div",[a],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");fx?a.style.width="1000px":a.setAttribute("wrap","off");ig&&(a.style.border="1px solid black");jl(a);return b}function jf(a){this.cm=a;this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null;this.polling=new dc;this.gracePeriod=!1}function io(c,d){var a=hW(c,d.line);if(!a||a.hidden){return null}var b=hx(c.doc,d.line),a=r(a,b,d.line);(b=ac(b))&&jG(b,d.ch);b=hF(a.map,d.ch,"left");b.offset="right"==b.collapse?b.end:b.start;return b}function gK(a,b){b&&(a.bad=!0);return a}function iP(e,f,a){var b;if(f==e.display.lineDiv){b=e.display.lineDiv.childNodes[a];if(!b){return gK(e.clipPos(ho(e.display.viewTo-1)),!0)}f=null;a=0}else{for(b=f;;b=b.parentNode){if(!b||b==e.display.lineDiv){return null}if(b.parentNode&&b.parentNode==e.display.lineDiv){break}}}for(var c=0;c<e.display.view.length;c++){var d=e.display.view[c];if(d.node==b){return hE(d,f,a)}}}function hE(c,d,e){function f(s,k,l){for(var m=-1;m<(b?b.length:0);m++){for(var n=0>m?a.map:b[m],o=0;o<n.length;o+=3){var p=n[o+2];if(p==s||p==k){k=ea(0>m?c.line:c.rest[m]);m=n[o]+l;if(0>l||p!=s){m=n[o+(l?1:0)]}return ho(k,m)}}}}var g=c.text.firstChild,h=!1;if(!d||!jk(g,d)){return gK(ho(ea(c.line),0),!0)}if(d==g&&(h=!0,d=g.childNodes[e],e=0,!d)){return e=c.rest?cb(c.rest):c.line,gK(ho(ea(e),e.text.length),h)}var i=3==d.nodeType?d:null,j=d;i||1!=d.childNodes.length||3!=d.firstChild.nodeType||(i=d.firstChild,e&&(e=i.nodeValue.length));for(;j.parentNode!=g;){j=j.parentNode}var a=c.measure,b=a.maps;if(d=f(i,j,e)){return gK(d,h)}g=j.nextSibling;for(i=i?i.nodeValue.length-e:0;g;g=g.nextSibling){if(d=f(g,g.firstChild,0)){return gK(ho(d.line,d.ch-i),h)}i+=g.textContent.length}j=j.previousSibling;for(i=e;j;j=j.previousSibling){if(d=f(j,j.firstChild,-1)){return gK(ho(d.line,d.ch+i),h)}i+=g.textContent.length}}function id(c,d,e,f,g){function h(j){return function(k){return k.id==j}}function i(j){if(1==j.nodeType){var k=j.getAttribute("cm-text");if(null!=k){""==k&&(k=j.textContent.replace(/\u200b/g,"")),a+=k}else{var k=j.getAttribute("cm-marker"),l;if(k){j=c.findMarks(ho(f,0),ho(g+1,0),h(+k)),j.length&&(l=j[0].find())&&(a+=kI(c.doc,l.from,l.to).join("\n"))}else{if("false"!=j.getAttribute("contenteditable")){for(l=0;l<j.childNodes.length;l++){i(j.childNodes[l])}/^(pre|div|p)$/i.test(j.nodeName)&&(b=!0)}}}}else{3==j.nodeType&&(j=j.nodeValue)&&(b&&(a+="\n",b=!1),a+=j)}}for(var a="",b=!1;;){i(d);if(d==e){break}d=d.nextSibling}return a}function ip(a,b){this.ranges=a;this.primIndex=b}function gm(a,b){this.anchor=a;this.head=b}function ae(f,g){var a=f[g];f.sort(function(h,i){return hJ(h.from(),i.from())});g=de(f,a);for(a=1;a<f.length;a++){var b=f[a],c=f[a-1];if(0<=hJ(c.to(),b.from())){var d=ii(c.from(),b.from()),e=hN(c.to(),b.to()),b=c.empty()?b.from()==b.head:c.from()==c.head;a<=g&&--g;f.splice(--a,2,new gm(b?e:d,b?d:e))}}return new ip(f,g)}function iw(a,b){return new ip([new gm(a,b||a)],0)}function hC(c,d){if(d.line<c.first){return ho(c.first,0)}var a=c.first+c.size-1;if(d.line>a){return ho(a,hx(c,a).text.length)}var a=hx(c,d.line).text.length,b=d.ch,a=null==b||b>a?ho(d.line,a):0>b?ho(d.line,0):d;return a}function j2(a,b){return b>=a.first&&b<a.first+a.size}function iz(c,d,a,b){return c.cm&&c.cm.display.shift||c.extend?(c=d.anchor,b&&(d=0>hJ(a,c),d!=0>hJ(b,c)?(c=a,a=b):d!=0>hJ(a,b)&&(a=b)),new gm(c,a)):new gm(b||a,a)}function je(c,d,a,b){fe(c,new ip([iz(c,c.sel.primary(),d,a)],0),b)}function U(d,e,a){for(var b=[],c=0;c<d.sel.ranges.length;c++){b[c]=iz(d,d.sel.ranges[c],e[c],null)}e=ae(b,d.sel.primIndex);fe(d,e,a)}function jS(d,e,a,b){var c=d.sel.ranges.slice(0);c[e]=a;fe(d,ae(c,d.sel.primIndex),b)}function J(b,c){var a={ranges:c.ranges,update:function(e){this.ranges=[];for(var d=0;d<e.length;d++){this.ranges[d]=new gm(hC(b,e[d].anchor),hC(b,e[d].head))}}};fy(b,"beforeSelectionChange",b,a);b.cm&&fy(b.cm,"beforeSelectionChange",b.cm,a);return a.ranges!=c.ranges?ae(a.ranges,a.ranges.length-1):c}function ee(d,e,a){var b=d.history.done,c=cb(b);c&&c.ranges?(b[b.length-1]=e,hU(d,e,a)):fe(d,e,a)}function fe(f,g,h){hU(f,g,h);g=f.sel;var a=f.cm?f.cm.curOp.id:NaN,b=f.history,c=h&&h.origin,d;if(!(d=a==b.lastSelOp)&&(d=c&&b.lastSelOrigin==c)&&!(d=b.lastModTime==b.lastSelTime&&b.lastOrigin==c)){d=cb(b.done);var e=c.charAt(0);d="*"==e||"+"==e&&d.ranges.length==g.ranges.length&&d.somethingSelected()==g.somethingSelected()&&new Date-f.history.lastSelTime<=(f.cm?f.cm.options.historyEventDelay:500)}d?b.done[b.done.length-1]=g:ku(g,b.done);b.lastSelTime=+new Date;b.lastSelOrigin=c;b.lastSelOp=a;h&&!1!==h.clearRedo&&a7(b.undone)}function hU(c,d,a){if(W(c,"beforeSelectionChange")||c.cm&&W(c.cm,"beforeSelectionChange")){d=J(c,d)}var b=a&&a.bias||(0>hJ(d.primary().head,c.sel.primary().head)?-1:1);gN(c,g8(c,d,b,!0));a&&!1===a.scroll||!c.cm||hK(c.cm)}function gN(a,b){b.equals(a.sel)||(a.sel=b,a.cm&&(a.cm.curOp.updateInput=a.cm.curOp.selectionChanged=!0,eb(a.cm)),fz(a,"cursorActivity",a))}function iI(a){gN(a,g8(a,a.sel,null,!1),hl)}function g8(c,d,e,f){for(var g,h=0;h<d.ranges.length;h++){var i=d.ranges[h],a=jR(c,i.anchor,e,f),b=jR(c,i.head,e,f);if(g||a!=i.anchor||b!=i.head){g||(g=d.ranges.slice(0,h)),g[h]=new gm(a,b)}}return g?ae(g,d.primIndex):d}function jR(c,d,e,f){var g=!1,h=d,i=e||1;c.cantEdit=!1;c:for(;;){var j=hx(c,h.line);if(j.markedSpans){for(var k=0;k<j.markedSpans.length;++k){var a=j.markedSpans[k],b=a.marker;if((null==a.from||(b.inclusiveLeft?a.from<=h.ch:a.from<h.ch))&&(null==a.to||(b.inclusiveRight?a.to>=h.ch:a.to>h.ch))){if(f&&(fy(b,"beforeCursorEnter"),b.explicitlyCleared)){if(j.markedSpans){--k;continue}else{break}}if(b.atomic){k=b.find(0>i?-1:1);if(0==hJ(k,h)&&(k.ch+=i,0>k.ch?k=k.line>c.first?hC(c,ho(k.line-1)):null:k.ch>j.text.length&&(k=k.line<c.first+c.size-1?ho(k.line+1,0):null),!k)){if(g){if(!f){return jR(c,d,e,!0)}c.cantEdit=!0;return ho(c.first,0)}g=!0;k=d;i=-i}h=k;continue c}}}}return h}}function hd(a){a.display.input.showSelection(a.display.input.prepareSelection())}function hA(b,d){for(var e=b.doc,f={},g=f.cursors=document.createDocumentFragment(),h=f.selection=document.createDocumentFragment(),i=0;i<e.sel.ranges.length;i++){if(!1!==d||i!=e.sel.primIndex){var j=e.sel.ranges[i],k=j.empty();if(k||b.options.showCursorWhenSelecting){var l=b,m=g,c=i1(l,j.head,"div",null,null,!l.options.singleCursorHeightPerLine),a=m.appendChild(ht("div"," ","CodeMirror-cursor"));a.style.left=c.left+"px";a.style.top=c.top+"px";a.style.height=Math.max(0,c.bottom-c.top)*l.options.cursorHeight+"px";c.other&&(l=m.appendChild(ht("div"," ","CodeMirror-cursor CodeMirror-secondarycursor")),l.style.display="",l.style.left=c.other.left+"px",l.style.top=c.other.top+"px",l.style.height=0.85*(c.other.bottom-c.other.top)+"px")}k||gF(b,j,h)}}return f}function gF(c,d,e){function f(o,p,m,n){0>p&&(p=0);p=Math.round(p);n=Math.round(n);j.appendChild(ht("div",null,"CodeMirror-selected","position: absolute; left: "+o+"px; top: "+p+"px; width: "+(null==m?a-o:m)+"px; height: "+(n-p)+"px"))}function g(I,m,n){var p=hx(i,I),s=p.text.length,E,o;i3(ac(p),m||0,null==n?s:n,function(ai,ah,aj){var ak=j9(c,ho(I,ai),"div",p,"left"),al,am;ai==ah?(al=ak,aj=am=ak.left):(al=j9(c,ho(I,ah-1),"div",p,"right"),"rtl"==aj&&(aj=ak,ak=al,al=aj),aj=ak.left,am=al.right);null==m&&0==ai&&(aj=l);3<al.top-ak.top&&(f(aj,ak.top,null,ak.bottom),aj=l,ak.bottom<al.top&&f(aj,ak.bottom,null,al.top));null==n&&ah==s&&(am=a);if(!E||ak.top<E.top||ak.top==E.top&&ak.left<E.left){E=ak}if(!o||al.bottom>o.bottom||al.bottom==o.bottom&&al.right>o.right){o=al}aj<l+1&&(aj=l);f(aj,al.top,am-aj,al.bottom)});return{start:E,end:o}}var h=c.display,i=c.doc,j=document.createDocumentFragment(),k=ib(c.display),l=k.left,a=Math.max(h.sizerWidth,jv(c)-h.sizer.offsetLeft)-k.right,h=d.from();d=d.to();if(h.line==d.line){g(h.line,h.ch,d.ch)}else{var b=hx(i,h.line),k=hx(i,d.line),k=h3(b)==h3(k),h=g(h.line,h.ch,k?b.text.length+1:null).end;d=g(d.line,k?0:null,d.ch).start;k&&(h.top<d.top-2?(f(h.right,h.top,null,h.bottom),f(l,d.top,d.left,d.bottom)):f(h.right,h.top,d.left-h.right,h.bottom));h.bottom<d.top&&f(l,h.bottom,null,d.top)}e.appendChild(j)}function il(b){if(b.state.focused){var c=b.display;clearInterval(c.blinker);var a=!0;c.cursorDiv.style.visibility="";0<b.options.cursorBlinkRate?c.blinker=setInterval(function(){c.cursorDiv.style.visibility=(a=!a)?"":"hidden"},b.options.cursorBlinkRate):0>b.options.cursorBlinkRate&&(c.cursorDiv.style.visibility="hidden")}}function db(a,b){a.doc.mode.startState&&a.doc.frontier<a.display.viewTo&&a.state.highlight.set(b,a4(ki,a))}function ki(d){var e=d.doc;e.frontier<e.first&&(e.frontier=e.first);if(!(e.frontier>=d.display.viewTo)){var a=+new Date+d.options.workTime,b=jC(e.mode,w(d,e.frontier)),c=[];e.iter(e.frontier,Math.min(e.first+e.size,d.display.viewTo+500),function(h){if(e.frontier>=d.display.viewFrom){var i=h.styles,f=gy(d,h,b,!0);h.styles=f.styles;var g=h.styleClasses;(f=f.classes)?h.styleClasses=f:g&&(h.styleClasses=null);g=!i||i.length!=h.styles.length||g!=f&&(!g||!f||g.bgClass!=f.bgClass||g.textClass!=f.textClass);for(f=0;!g&&f<i.length;++f){g=i[f]!=h.styles[f]}g&&c.push(e.frontier);h.stateAfter=jC(e.mode,b)}else{q(d,h.text,b),h.stateAfter=0==e.frontier%5?jC(e.mode,b):null}++e.frontier;if(+new Date>a){return db(d,d.options.workDelay),!0}});c.length&&X(d,function(){for(var f=0;f<c.length;f++){hb(d,c[f],"text")}})}}function kB(f,g,h){for(var a,b,c=f.doc,d=h?-1:g-(f.doc.mode.innerMode?1000:100);g>d;--g){if(g<=c.first){return c.first}var e=hx(c,g-1);if(e.stateAfter&&(!h||g<=c.frontier)){return g}e=Q(e.text,null,f.options.tabSize);if(null==b||a>e){b=g-1,a=e}}return b}function w(f,g,a){var b=f.doc,c=f.display;if(!b.mode.startState){return !0}var d=kB(f,g,a),e=d>b.first&&hx(b,d-1).stateAfter,e=e?jC(b.mode,e):jn(b.mode);b.iter(d,g,function(h){q(f,h.text,e);h.stateAfter=d==g-1||0==d%5||d>=c.viewFrom&&d<c.viewTo?jC(b.mode,e):null;++d});a&&(b.frontier=d);return e}function jQ(a){return a.mover.offsetHeight-a.lineSpace.offsetHeight}function ib(a){if(a.cachedPaddingH){return a.cachedPaddingH}var b=Y(a.measure,ht("pre","x")),b=window.getComputedStyle?window.getComputedStyle(b):b.currentStyle,b={left:parseInt(b.paddingLeft),right:parseInt(b.paddingRight)};isNaN(b.left)||isNaN(b.right)||(a.cachedPaddingH=b);return b}function gD(a){return N-a.display.nativeBarWidth}function jv(a){return a.display.scroller.clientWidth-gD(a)-a.display.barWidth}function fd(a){return a.display.scroller.clientHeight-gD(a)-a.display.barHeight}function r(c,d,a){if(c.line==d){return{map:c.measure.map,cache:c.measure.cache}}for(var b=0;b<c.rest.length;b++){if(c.rest[b]==d){return{map:c.measure.maps[b],cache:c.measure.caches[b]}}}for(b=0;b<c.rest.length;b++){if(ea(c.rest[b])>a){return{map:c.measure.maps[b],cache:c.measure.caches[b],before:!0}}}}function hW(b,c){if(c>=b.display.viewFrom&&c<b.display.viewTo){return b.display.view[kw(b,c)]}var a=b.display.externalMeasured;if(a&&c>=a.lineN&&c<a.lineN+a.size){return a}}function i7(d,e){var a=ea(e),b=hW(d,a);b&&!b.text?b=null:b&&b.changes&&he(d,b,a,go(d));if(!b){var c;c=h3(e);b=ea(c);c=d.display.externalMeasured=new ju(d.doc,c,b);c.lineN=b;b=c.built=jM(d,c);c.text=b.pre;Y(d.display.lineMeasure,b.pre);b=c}a=r(b,e,a);return{line:e,view:b,rect:null,map:a.map,cache:a.cache,before:a.before,hasHeights:!1}}function hB(b,d,e,f,g){d.before&&(e=-1);var h=e+(f||"");if(d.cache.hasOwnProperty(h)){b=d.cache[h]}else{d.rect||(d.rect=d.view.text.getBoundingClientRect());if(!d.hasHeights){var i=d.view,j=d.rect,k=b.options.lineWrapping,l=k&&jv(b);if(!i.measure.heights||k&&i.measure.width!=l){var n=i.measure.heights=[];if(k){for(i.measure.width=l,i=i.text.firstChild.getClientRects(),k=0;k<i.length-1;k++){var l=i[k],c=i[k+1];2<Math.abs(l.bottom-c.bottom)&&n.push((l.bottom+c.top)/2-j.top)}}n.push(j.bottom-j.top)}d.hasHeights=!0}i=f;k=hF(d.map,e,i);f=k.node;j=k.start;l=k.end;e=k.collapse;var a;if(3==f.nodeType){for(n=0;4>n;n++){for(;j&&kn(d.line.text.charAt(k.coverStart+j));){--j}for(;k.coverStart+l<k.coverEnd&&kn(d.line.text.charAt(k.coverStart+l));){++l}if(cd&&9>da&&0==j&&l==k.coverEnd-k.coverStart){a=f.parentNode.getBoundingClientRect()}else{if(cd&&b.options.lineWrapping){var m=jK(f,j,l).getClientRects();a=m.length?m["right"==i?m.length-1:0]:T}else{a=jK(f,j,l).getBoundingClientRect()||T}}if(a.left||a.right||0==j){break}l=j;--j;e="right"}cd&&11>da&&((m=!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI)||(null!=ec?m=ec:(n=Y(b.display.measure,ht("span","x")),m=n.getBoundingClientRect(),n=jK(n,0,1).getBoundingClientRect(),m=ec=1<Math.abs(m.left-n.left)),m=!m),m||(m=screen.logicalXDPI/screen.deviceXDPI,n=screen.logicalYDPI/screen.deviceYDPI,a={left:a.left*m,right:a.right*m,top:a.top*n,bottom:a.bottom*n}))}else{0<j&&(e=i="right"),a=b.options.lineWrapping&&1<(m=f.getClientRects()).length?m["right"==i?m.length-1:0]:f.getBoundingClientRect()}!(cd&&9>da)||j||a&&(a.left||a.right)||(a=(a=f.parentNode.getClientRects()[0])?{left:a.left,right:a.left+iy(b.display),top:a.top,bottom:a.bottom}:T);m=a.top-d.rect.top;f=a.bottom-d.rect.top;j=(m+f)/2;i=d.view.measure.heights;for(n=0;n<i.length-1&&!(j<i[n]);n++){}e={left:("right"==e?a.right:a.left)-d.rect.left,right:("left"==e?a.left:a.right)-d.rect.left,top:n?i[n-1]:0,bottom:i[n]};a.left||a.right||(e.bogus=!0);b.options.singleCursorHeightPerLine||(e.rtop=m,e.rbottom=f);b=e;b.bogus||(d.cache[h]=b)}return{left:b.left,right:b.right,top:g?b.rtop:b.top,bottom:g?b.rbottom:b.bottom}}function hF(c,d,e){for(var f,g,h,i,j=0;j<c.length;j+=3){var a=c[j],b=c[j+1];if(d<a){g=0,h=1,i="left"}else{if(d<b){g=d-a,h=g+1}else{if(j==c.length-3||d==b&&c[j+3]>d){h=b-a,g=h-1,d>=b&&(i="right")}}}if(null!=g){f=c[j+2];a==b&&e==(f.insertLeft?"left":"right")&&(i=e);if("left"==e&&0==g){for(;j&&c[j-2]==c[j-3]&&c[j-1].insertLeft;){f=c[(j-=3)+2],i="left"}}if("right"==e&&g==b-a){for(;j<c.length-3&&c[j+3]==c[j+4]&&!c[j+5].insertLeft;){f=c[(j+=3)+2],i="right"}}break}}return{node:f,start:g,end:h,collapse:i,coverStart:a,coverEnd:b}}function iD(a){if(a.measure&&(a.measure.cache={},a.measure.heights=null,a.rest)){for(var b=0;b<a.rest.length;b++){a.measure.caches[b]={}}}}function i9(a){a.display.externalMeasure=null;gq(a.display.lineMeasure);for(var b=0;b<a.display.view.length;b++){iD(a.display.view[b])}}function hp(a){i9(a);a.display.cachedCharWidth=a.display.cachedTextHeight=a.display.cachedPaddingH=null;a.options.lineWrapping||(a.display.maxLineChanged=!0);a.display.lineNumChars=null}function a6(e,f,a,b){if(f.widgets){for(var c=0;c<f.widgets.length;++c){if(f.widgets[c].above){var d=kD(f.widgets[c]);a.top+=d;a.bottom+=d}}}if("line"==b){return a}b||(b="local");f=g4(f);f="local"==b?f+e.display.lineSpace.offsetTop:f-e.display.viewOffset;if("page"==b||"window"==b){e=e.display.lineSpace.getBoundingClientRect(),f+=e.top+("window"==b?0:window.pageYOffset||(document.documentElement||document.body).scrollTop),b=e.left+("window"==b?0:window.pageXOffset||(document.documentElement||document.body).scrollLeft),a.left+=b,a.right+=b}a.top+=f;a.bottom+=f;return a}function hm(c,d,a){if("div"==a){return d}var b=d.left;d=d.top;"page"==a?(b-=window.pageXOffset||(document.documentElement||document.body).scrollLeft,d-=window.pageYOffset||(document.documentElement||document.body).scrollTop):"local"!=a&&a||(a=c.display.sizer.getBoundingClientRect(),b+=a.left,d+=a.top);c=c.display.lineSpace.getBoundingClientRect();return{left:b-c.left,top:d-c.top}}function j9(e,f,a,b,c){b||(b=hx(e.doc,f.line));var d=b;f=f.ch;b=hB(e,i7(e,b),f,c);return a6(e,d,b,a)}function i1(c,d,e,f,g,h){function i(m,k){var l=hB(c,g,m,k?"right":"left",h);k?l.left=l.right:l.right=l.left;return a6(c,f,l,e)}function j(m,n){var k=a[n],l=k.level%2;m==gM(k)&&n&&k.level<a[n-1].level?(k=a[--n],m=g7(k)-(k.level%2?0:1),l=!0):m==g7(k)&&n<a.length-1&&k.level<a[n+1].level&&(k=a[++n],m=gM(k)-k.level%2,l=!1);return l&&m==k.to&&m>k.from?i(m-1):i(m,l)}f=f||hx(c.doc,d.line);g||(g=i7(c,f));var a=ac(f);d=d.ch;if(!a){return i(d)}var b=jG(a,d),b=j(d,b);null!=jt&&(b.other=j(d,jt));return b}function km(d,e){var a=0;e=hC(d.doc,e);d.options.lineWrapping||(a=iy(d.display)*e.ch);var b=hx(d.doc,e.line),c=g4(b)+d.display.lineSpace.offsetTop;return{left:a,right:a,top:c,bottom:c+b.height}}function hz(c,d,a,b){c=ho(c,d);c.xRel=b;a&&(c.outside=!0);return c}function df(e,f,a){var b=e.doc;a+=e.display.viewOffset;if(0>a){return hz(b.first,0,!0,-1)}var c=ka(b,a),d=b.first+b.size-1;if(c>d){return hz(b.first+b.size-1,hx(b,d).text.length,!0,1)}0>f&&(f=0);for(b=hx(b,c);;){if(c=jW(e,b,c,f,a),d=(b=iS(b,!1))&&b.find(0,!0),b&&(c.ch>d.from.ch||c.ch==d.from.ch&&0<c.xRel)){c=ea(b=d.to.line)}else{return c}}}function jW(a,b,c,d,e){function f(ai){ai=i1(a,ho(c,ai),"line",b,l);h=!0;if(g>ai.bottom){return ai.left-j}if(g<ai.top){return ai.left+j}h=!1;return ai.left}var g=e-g4(b),h=!1,j=2*a.display.wrapper.clientWidth,l=i7(a,b),m=ac(b),o=b.text.length;e=S(b);var n=dg(b),I=f(e),p=h,E=f(n),ah=h;if(d>E){return hz(c,n,ah,1)}for(;;){if(m?n==e||n==iG(b,e,1):1>=n-e){m=d<I||d-I<=E-d?e:n;for(d-=m==e?I:E;kn(b.text.charAt(m));){++m}return hz(c,m,m==e?p:ah,-1>d?-1:1<d?1:0)}var i=Math.ceil(o/2),k=e+i;if(m){for(var k=e,s=0;s<i;++s){k=iG(b,k,1)}}s=f(k);if(s>d){n=k;E=s;if(ah=h){E+=1000}o=i}else{e=k,I=s,p=h,o-=i}}}function h1(a){if(null!=a.cachedTextHeight){return a.cachedTextHeight}if(null==hI){hI=ht("pre");for(var b=0;49>b;++b){hI.appendChild(document.createTextNode("x")),hI.appendChild(ht("br"))}hI.appendChild(document.createTextNode("x"))}Y(a.measure,hI);b=hI.offsetHeight/50;3<b&&(a.cachedTextHeight=b);gq(a.measure);return b||1}function iy(b){if(null!=b.cachedCharWidth){return b.cachedCharWidth}var c=ht("span","xxxxxxxxxx"),a=ht("pre",[c]);Y(b.measure,a);c=c.getBoundingClientRect();c=(c.right-c.left)/10;2<c&&(b.cachedCharWidth=c);return c||10}function ad(a){a.curOp={cm:a,viewChanged:!1,startHeight:a.doc.height,forceUpdate:!1,updateInput:null,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++hZ};iL?iL.ops.push(a.curOp):a.curOp.ownsGroup=iL={ops:[a.curOp],delayedCallbacks:[]}}function gU(h){if(h=h.curOp.ownsGroup){try{var k=h.delayedCallbacks,m=0;do{for(;m<k.length;m++){k[m]()}for(var o=0;o<h.ops.length;o++){var a=h.ops[o];if(a.cursorActivityHandlers){for(;a.cursorActivityCalled<a.cursorActivityHandlers.length;){a.cursorActivityHandlers[a.cursorActivityCalled++](a.cm)}}}}while(m<k.length)}finally{iL=null;for(k=0;k<h.ops.length;k++){h.ops[k].cm.curOp=null}h=h.ops;for(k=0;k<h.length;k++){var a=h[k],m=a.cm,b=o=m.display;!b.scrollbarsClipped&&b.scroller.offsetWidth&&(b.nativeBarWidth=b.scroller.offsetWidth-b.scroller.clientWidth,b.heightForcer.style.height=gD(m)+"px",b.sizer.style.marginBottom=-b.nativeBarWidth+"px",b.sizer.style.borderRightWidth=gD(m)+"px",b.scrollbarsClipped=!0);a.updateMaxLine&&ji(m);a.mustUpdate=a.viewChanged||a.forceUpdate||null!=a.scrollTop||a.scrollToPos&&(a.scrollToPos.from.line<o.viewFrom||a.scrollToPos.to.line>=o.viewTo)||o.maxLineChanged&&m.options.lineWrapping;a.update=a.mustUpdate&&new bd(m,a.mustUpdate&&{top:a.scrollTop,ensure:a.scrollToPos},a.forceUpdate)}for(k=0;k<h.length;k++){a=h[k],a.updatedDisplay=a.mustUpdate&&gZ(a.cm,a.update)}for(k=0;k<h.length;k++){if(a=h[k],m=a.cm,o=m.display,a.updatedDisplay&&gX(m),a.barMeasure=gp(m),o.maxLineChanged&&!m.options.lineWrapping&&(b=void 0,b=o.maxLine.text.length,b=hB(m,i7(m,o.maxLine),b,void 0),a.adjustWidthTo=b.left+3,m.display.sizerWidth=a.adjustWidthTo,a.barMeasure.scrollWidth=Math.max(o.scroller.clientWidth,o.sizer.offsetLeft+a.adjustWidthTo+gD(m)+m.display.barWidth),a.maxScrollLeft=Math.max(0,o.sizer.offsetLeft+a.adjustWidthTo-jv(m))),a.updatedDisplay||a.selectionChanged){a.preparedSelection=o.input.prepareSelection()}}for(k=0;k<h.length;k++){a=h[k],m=a.cm,null!=a.adjustWidthTo&&(m.display.sizer.style.minWidth=a.adjustWidthTo+"px",a.maxScrollLeft<m.doc.scrollLeft&&bb(m,Math.min(m.display.scroller.scrollLeft,a.maxScrollLeft),!0),m.display.maxLineChanged=!1),a.preparedSelection&&m.display.input.showSelection(a.preparedSelection),a.updatedDisplay&&hc(m,a.barMeasure),(a.updatedDisplay||a.startHeight!=m.doc.height)&&fa(m,a.barMeasure),a.selectionChanged&&il(m),m.state.focused&&a.updateInput&&m.display.input.reset(a.typing),a.focus&&a.focus==cg()&&jg(a.cm)}for(k=0;k<h.length;k++){a=h[k];m=a.cm;o=m.display;b=m.doc;a.updatedDisplay&&ca(m,a.update);null==o.wheelStartX||null==a.scrollTop&&null==a.scrollLeft&&!a.scrollToPos||(o.wheelStartX=o.wheelStartY=null);null==a.scrollTop||o.scroller.scrollTop==a.scrollTop&&!a.forceScroll||(b.scrollTop=Math.max(0,Math.min(o.scroller.scrollHeight-o.scroller.clientHeight,a.scrollTop)),o.scrollbars.setScrollTop(b.scrollTop),o.scroller.scrollTop=b.scrollTop);null==a.scrollLeft||o.scroller.scrollLeft==a.scrollLeft&&!a.forceScroll||(b.scrollLeft=Math.max(0,Math.min(o.scroller.scrollWidth-jv(m),a.scrollLeft)),o.scrollbars.setScrollLeft(b.scrollLeft),o.scroller.scrollLeft=b.scrollLeft,kc(m));if(a.scrollToPos){var c=void 0,d=hC(b,a.scrollToPos.from),c=hC(b,a.scrollToPos.to),e=a.scrollToPos.margin;null==e&&(e=0);for(var f=0;5>f;f++){var g=!1,j=i1(m,d),i=c&&c!=d?i1(m,c):j,i=a5(m,Math.min(j.left,i.left),Math.min(j.top,i.top)-e,Math.max(j.left,i.left),Math.max(j.bottom,i.bottom)+e),l=m.doc.scrollTop,n=m.doc.scrollLeft;null!=i.scrollTop&&(ir(m,i.scrollTop),1<Math.abs(m.doc.scrollTop-l)&&(g=!0));null!=i.scrollLeft&&(bb(m,i.scrollLeft),1<Math.abs(m.doc.scrollLeft-n)&&(g=!0));if(!g){break}}c=j;a.scrollToPos.isCursor&&m.state.focused&&(gn(m,"scrollCursorIntoView")||(e=m.display,f=e.sizer.getBoundingClientRect(),d=null,0>c.top+f.top?d=!0:c.bottom+f.top>(window.innerHeight||document.documentElement.clientHeight)&&(d=!1),null==d||B||(c=ht("div","",null,"position: absolute; top: "+(c.top-e.viewOffset-m.display.lineSpace.offsetTop)+"px; height: "+(c.bottom-c.top+gD(m)+e.barHeight)+"px; left: "+c.left+"px; width: 2px;"),m.display.lineSpace.appendChild(c),c.scrollIntoView(d),m.display.lineSpace.removeChild(c))))}d=a.maybeHiddenMarkers;c=a.maybeUnhiddenMarkers;if(d){for(e=0;e<d.length;++e){d[e].lines.length||fy(d[e],"hide")}}if(c){for(e=0;e<c.length;++e){c[e].lines.length&&fy(c[e],"unhide")}}o.wrapper.offsetHeight&&(b.scrollTop=m.display.scroller.scrollTop);a.changeObjs&&fy(m,"changes",m,a.changeObjs);a.update&&a.update.finish()}}}}function X(a,b){if(a.curOp){return b()}ad(a);try{return b()}finally{gU(a)}}function eg(a,b){return function(){if(a.curOp){return b.apply(a,arguments)}ad(a);try{return b.apply(a,arguments)}finally{gU(a)}}}function ga(a){return function(){if(this.curOp){return a.apply(this,arguments)}ad(this);try{return a.apply(this,arguments)}finally{gU(this)}}}function gb(a){return function(){var b=this.cm;if(!b||b.curOp){return a.apply(this,arguments)}ad(b);try{return a.apply(this,arguments)}finally{gU(b)}}}function ju(d,e,a){for(var b=this.line=e,c;b=iS(b,!1);){b=b.find(1,!0).line,(c||(c=[])).push(b)}this.size=(this.rest=c)?ea(cb(this.rest))-a+1:1;this.node=this.text=null;this.hidden=C(d,e)}function fb(d,e,a){var b=[],c;for(c=e;c<a;){e=new ju(d.doc,hx(d.doc,c),c),c+=e.size,b.push(e)}return b}function ge(f,g,a,b){null==g&&(g=f.doc.first);null==a&&(a=f.doc.first+f.doc.size);b||(b=0);var c=f.display;b&&a<c.viewTo&&(null==c.updateLineNumbers||c.updateLineNumbers>g)&&(c.updateLineNumbers=g);f.curOp.viewChanged=!0;if(g>=c.viewTo){iv&&bg(f.doc,g)<c.viewTo&&j0(f)}else{if(a<=c.viewFrom){iv&&g1(f.doc,a+b)>c.viewFrom?j0(f):(c.viewFrom+=b,c.viewTo+=b)}else{if(g<=c.viewFrom&&a>=c.viewTo){j0(f)}else{if(g<=c.viewFrom){var d=gJ(f,a,a+b,1);d?(c.view=c.view.slice(d.index),c.viewFrom=d.lineN,c.viewTo+=b):j0(f)}else{if(a>=c.viewTo){(d=gJ(f,g,g,-1))?(c.view=c.view.slice(0,d.index),c.viewTo=d.lineN):j0(f)}else{var d=gJ(f,g,g,-1),e=gJ(f,a,a+b,1);d&&e?(c.view=c.view.slice(0,d.index).concat(fb(f,d.lineN,e.lineN)).concat(c.view.slice(e.index)),c.viewTo+=b):j0(f)}}}}}if(f=c.externalMeasured){a<f.lineN?f.lineN+=b:g<f.lineN+f.size&&(c.externalMeasured=null)}}function hb(d,e,a){d.curOp.viewChanged=!0;var b=d.display,c=d.display.externalMeasured;c&&e>=c.lineN&&e<c.lineN+c.size&&(b.externalMeasured=null);e<b.viewFrom||e>=b.viewTo||(d=b.view[kw(d,e)],null!=d.node&&(d=d.changes||(d.changes=[]),-1==de(d,a)&&d.push(a)))}function j0(a){a.display.viewFrom=a.display.viewTo=a.doc.first;a.display.view=[];a.display.viewOffset=0}function kw(c,d){if(d>=c.display.viewTo){return null}d-=c.display.viewFrom;if(0>d){return null}for(var a=c.display.view,b=0;b<a.length;b++){if(d-=a[b].size,0>d){return b}}}function gJ(f,g,h,a){var b=kw(f,g),c=f.display.view;if(!iv||h==f.doc.first+f.doc.size){return{index:b,lineN:h}}for(var d=0,e=f.display.viewFrom;d<b;d++){e+=c[d].size}if(e!=g){if(0<a){if(b==c.length-1){return null}g=e+c[b].size-g;b++}else{g=e-g}h+=g}for(;bg(f.doc,h)!=h;){if(b==(0>a?0:c.length-1)){return null}h+=a*c[b-(0>a?1:0)].size;b+=a}return{index:b,lineN:h}}function gs(c){c=c.display.view;for(var d=0,a=0;a<c.length;a++){var b=c[a];b.hidden||b.node&&!b.changes||++d}return d}function A(f){function g(){b.activeTouch&&(c=setTimeout(function(){b.activeTouch=null},1000),d=b.activeTouch,d.end=+new Date)}function a(i,k){if(null==k.left){return !0}var j=k.left-i.left,h=k.top-i.top;return 400<j*j+h*h}var b=f.display;hy(b.scroller,"mousedown",eg(f,jF));cd&&11>da?hy(b.scroller,"dblclick",eg(f,function(i){if(!gn(f,i)){var h=jc(f,i);!h||hw(f,i,"gutterClick",!0,fz)||ke(f.display,i)||(gc(i),i=f.findWordAt(h),je(f.doc,i.anchor,i.head))}})):hy(b.scroller,"dblclick",function(h){gn(f,h)||gc(h)});h8||hy(b.scroller,"contextmenu",function(h){j5(f,h)});var c,d={end:0};hy(b.scroller,"touchstart",function(h){var i;1!=h.touches.length?i=!1:(i=h.touches[0],i=1>=i.radiusX&&1>=i.radiusY);i||(clearTimeout(c),i=+new Date,b.activeTouch={start:i,moved:!1,prev:300>=i-d.end?d:null},1==h.touches.length&&(b.activeTouch.left=h.touches[0].pageX,b.activeTouch.top=h.touches[0].pageY))});hy(b.scroller,"touchmove",function(){b.activeTouch&&(b.activeTouch.moved=!0)});hy(b.scroller,"touchend",function(h){var i=b.activeTouch;if(i&&!ke(b,h)&&null!=i.left&&!i.moved&&300>new Date-i.start){var j=f.coordsChar(b.activeTouch,"page"),i=!i.prev||a(i,i.prev)?new gm(j,j):!i.prev.prev||a(i,i.prev.prev)?f.findWordAt(j):new gm(ho(j.line,0),hC(f.doc,ho(j.line+1,0)));f.setSelection(i.anchor,i.head);f.focus();gc(h)}g()});hy(b.scroller,"touchcancel",g);hy(b.scroller,"scroll",function(){b.scroller.clientHeight&&(ir(f,b.scroller.scrollTop),bb(f,b.scroller.scrollLeft,!0),fy(f,"scroll",f))});hy(b.scroller,"mousewheel",function(h){iH(f,h)});hy(b.scroller,"DOMMouseScroll",function(h){iH(f,h)});hy(b.wrapper,"scroll",function(){b.wrapper.scrollTop=b.wrapper.scrollLeft=0});b.dragFunctions={simple:function(h){gn(f,h)||gu(h)},start:function(i){if(cd&&(!f.state.draggingText||100>+new Date-z)){gu(i)}else{if(!gn(f,i)&&!ke(f.display,i)&&(i.dataTransfer.setData("Text",f.getSelection()),i.dataTransfer.setDragImage&&!kt)){var h=ht("img",null,null,"position: fixed; left: 0; top: 0;");h.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw\x3d\x3d";cf&&(h.width=h.height=1,f.display.wrapper.appendChild(h),h._top=h.offsetTop);i.dataTransfer.setDragImage(h,0,0);cf&&h.parentNode.removeChild(h)}}},drop:eg(f,P)};var e=b.input.getField();hy(e,"keyup",function(h){kG.call(f,h)});hy(e,"keydown",eg(f,jE));hy(e,"keypress",eg(f,hv));hy(e,"focus",a4(h7,f));hy(e,"blur",a4(gG,f))}function bf(a){var b=a.display;if(b.lastWrapHeight!=b.wrapper.clientHeight||b.lastWrapWidth!=b.wrapper.clientWidth){b.cachedCharWidth=b.cachedTextHeight=b.cachedPaddingH=null,b.scrollbarsClipped=!1,a.setSize()}}function ke(b,c){for(var a=c.target||c.srcElement;a!=b.wrapper;a=a.parentNode){if(!a||1==a.nodeType&&"true"==a.getAttribute("cm-ignore-events")||a.parentNode==b.sizer&&a!=b.mover){return !0}}}function jc(c,d,e,f){var g=c.display;if(!e&&"true"==(d.target||d.srcElement).getAttribute("cm-not-content")){return null}var h,i;e=g.lineSpace.getBoundingClientRect();try{h=d.clientX-e.left,i=d.clientY-e.top}catch(a){return null}d=df(c,h,i);var b;f&&1==d.xRel&&(b=hx(c.doc,d.line).text).length==d.ch&&(f=Q(b,b.length,c.options.tabSize)-b.length,d=ho(d.line,Math.max(0,Math.round((h-ib(c.display).left)/iy(c.display))-f)));return d}function jF(b){var c=this.display;if(!(c.activeTouch&&c.input.supportsTouch()||gn(this,b))){if(c.shift=b.shiftKey,ke(c,b)){fx||(c.scroller.draggable=!1,setTimeout(function(){c.scroller.draggable=!0},100))}else{if(!hw(this,b,"gutterClick",!0,fz)){var a=jc(this,b);window.focus();switch(ia(b)){case 1:a?a2(this,b,a):(b.target||b.srcElement)==c.scroller&&gc(b);break;case 2:fx&&(this.state.lastMiddleDown=+new Date);a&&je(this.doc,a);setTimeout(function(){c.input.focus()},20);gc(b);break;case 3:h8?j5(this,b):gx(this)}}}}}function a2(f,g,a){cd?setTimeout(a4(jg,f),0):f.curOp.focus=cg();var b=+new Date,c;g6&&g6.time>b-400&&0==hJ(g6.pos,a)?c="triple":dd&&dd.time>b-400&&0==hJ(dd.pos,a)?(c="double",g6={time:b,pos:a}):(c="single",dd={time:b,pos:a});var b=f.doc.sel,d=aa?g.metaKey:g.ctrlKey,e;f.options.dragDrop&&g3&&!gP(f)&&"single"==c&&-1<(e=b.contains(a))&&!b.ranges[e].empty()?ce(f,g,a,d):it(f,g,a,c,d)}function ce(f,g,a,b){var c=f.display,d=+new Date,e=eg(f,function(h){fx&&(c.scroller.draggable=!1);f.state.draggingText=!1;gY(document,"mouseup",e);gY(c.scroller,"drop",e);10>Math.abs(g.clientX-h.clientX)+Math.abs(g.clientY-h.clientY)&&(gc(h),!b&&+new Date-200<d&&je(f.doc,a),fx||cd&&9==da?setTimeout(function(){document.body.focus();c.input.focus()},20):c.input.focus())});fx&&(c.scroller.draggable=!0);f.state.draggingText=e;c.scroller.dragDrop&&c.scroller.dragDrop();hy(document,"mouseup",e);hy(c.scroller,"drop",e)}function it(a,b,c,d,e){function f(an){if(0!=hJ(ah,an)){if(ah=an,"rect"==d){for(var ao=[],aq=a.options.tabSize,ai=Q(hx(j,c.line).text,c.ch,aq),aj=Q(hx(j,an.line).text,an.ch,aq),al=Math.min(ai,aj),ai=Math.max(ai,aj),aj=Math.min(c.line,an.line),ap=Math.min(a.lastLine(),Math.max(c.line,an.line));aj<=ap;aj++){var ak=hx(j,aj).text,am=H(ak,al,aq);al==ai?ao.push(new gm(ho(aj,am),ho(aj,am))):ak.length>am&&ao.push(new gm(ho(aj,am),ho(aj,H(ak,ai,aq))))}ao.length||ao.push(new gm(c,c));fe(j,ae(o.ranges.slice(0,p).concat(ao),p),{origin:"*mouse",scroll:!1});a.scrollIntoView(an)}else{ao=l,aq=ao.anchor,al=an,"single"!=d&&(an="double"==d?a.findWordAt(an):new gm(ho(an.line,0),hC(j,ho(an.line+1,0))),0<hJ(an.anchor,aq)?(al=an.head,aq=ii(ao.from(),an.anchor)):(al=an.anchor,aq=hN(ao.to(),an.head))),ao=o.ranges.slice(0),ao[p]=new gm(hC(j,aq),al),fe(j,ae(ao,p),jr)}}}function g(ak){var am=++I,aj=jc(a,ak,!0,"rect"==d);if(aj){if(0!=hJ(aj,ah)){a.curOp.focus=cg();f(aj);var ai=M(i,j);(aj.line>=ai.to||aj.line<ai.from)&&setTimeout(eg(a,function(){I==am&&g(ak)}),150)}else{var al=ak.clientY<m.top?-20:ak.clientY>m.bottom?20:0;al&&setTimeout(eg(a,function(){I==am&&(i.scroller.scrollTop+=al,g(ak))}),50)}}}function h(ai){I=Infinity;gc(ai);i.input.focus();gY(document,"mousemove",E);gY(document,"mouseup",n);j.history.lastSelOrigin=null}var i=a.display,j=a.doc;gc(b);var l,p,o=j.sel,k=o.ranges;e&&!b.shiftKey?(p=j.sel.contains(c),l=-1<p?k[p]:new gm(c,c)):(l=j.sel.primary(),p=j.sel.primIndex);if(b.altKey){d="rect",e||(l=new gm(c,c)),c=jc(a,b,!0,!0),p=-1}else{if("double"==d){var s=a.findWordAt(c);l=a.display.shift||j.extend?iz(j,l,s.anchor,s.head):s}else{"triple"==d?(s=new gm(ho(c.line,0),hC(j,ho(c.line+1,0))),l=a.display.shift||j.extend?iz(j,l,s.anchor,s.head):s):l=iz(j,l,c)}}e?-1==p?(p=k.length,fe(j,ae(k.concat([l]),p),{scroll:!1,origin:"*mouse"})):1<k.length&&k[p].empty()&&"single"==d&&!b.shiftKey?(fe(j,ae(k.slice(0,p).concat(k.slice(p+1)),0)),o=j.sel):jS(j,p,l,jr):(p=0,fe(j,new ip([l],0),jr),o=j.sel);var ah=c,m=i.wrapper.getBoundingClientRect(),I=0,E=eg(a,function(ai){ia(ai)?g(ai):h(ai)}),n=eg(a,h);hy(document,"mousemove",E);hy(document,"mouseup",n)}function hw(c,d,e,f,g){try{var h=d.clientX,i=d.clientY}catch(j){return !1}if(h>=Math.floor(c.display.gutters.getBoundingClientRect().right)){return !1}f&&gc(d);f=c.display;var a=f.lineDiv.getBoundingClientRect();if(i>a.bottom||!W(c,e)){return iA(d)}i-=a.top-f.viewOffset;for(a=0;a<c.options.gutters.length;++a){var b=f.gutters.childNodes[a];if(b&&b.getBoundingClientRect().right>=h){return h=ka(c.doc,i),g(c,e,c,h,c.options.gutters[a],d),iA(d)}}}function P(c){var d=this;if(!gn(d,c)&&!ke(d.display,c)){gc(c);cd&&(z=+new Date);var e=jc(d,c,!0),f=c.dataTransfer.files;if(e&&!gP(d)){if(f&&f.length&&window.FileReader&&window.File){var g=f.length,h=Array(g),i=0;c=function(m,k){var l=new FileReader;l.onload=eg(d,function(){h[k]=l.result;if(++i==g){e=hC(d.doc,e);var n={from:e,to:e,text:v(h.join("\n")),origin:"paste"};iR(d.doc,n);ee(d.doc,iw(e,kk(n)))}});l.readAsText(m)};for(var j=0;j<g;++j){c(f[j],j)}}else{if(d.state.draggingText&&-1<d.doc.sel.contains(e)){d.state.draggingText(c),setTimeout(function(){d.display.input.focus()},20)}else{try{if(h=c.dataTransfer.getData("Text")){if(d.state.draggingText&&(aa?!c.altKey:!c.ctrlKey)){var a=d.listSelections()}hU(d.doc,iw(e,e));if(a){for(j=0;j<a.length;++j){j1(d.doc,"",a[j].anchor,a[j].head,"drag")}}d.replaceSelection(h,"around","paste");d.display.input.focus()}}catch(b){}}}}}}function ir(a,b){2>Math.abs(a.doc.scrollTop-b)||(a.doc.scrollTop=b,jZ||hQ(a,{top:b}),a.display.scroller.scrollTop!=b&&(a.display.scroller.scrollTop=b),a.display.scrollbars.setScrollTop(b),jZ&&hQ(a),db(a,100))}function bb(b,c,a){(a?c==b.doc.scrollLeft:2>Math.abs(b.doc.scrollLeft-c))||(c=Math.min(c,b.display.scroller.scrollWidth-b.display.scroller.clientWidth),b.doc.scrollLeft=c,kc(b),b.display.scroller.scrollLeft!=c&&(b.display.scroller.scrollLeft=c),b.display.scrollbars.setScrollLeft(c))}function iH(c,d){var e=gC(d),f=e.x,e=e.y,g=c.display,h=g.scroller;if(f&&h.scrollWidth>h.clientWidth||e&&h.scrollHeight>h.clientHeight){if(e&&aa&&fx){var i=d.target,a=g.view;c:for(;i!=h;i=i.parentNode){for(var b=0;b<a.length;b++){if(a[b].node==i){c.display.currentWheelTarget=i;break c}}}}!f||jZ||cf||null==gf?(e&&null!=gf&&(i=e*gf,a=c.doc.scrollTop,b=a+g.wrapper.clientHeight,0>i?a=Math.max(0,a+i-50):b=Math.min(c.doc.height,b+i+50),hQ(c,{top:a,bottom:b})),20>iC&&(null==g.wheelStartX?(g.wheelStartX=h.scrollLeft,g.wheelStartY=h.scrollTop,g.wheelDX=f,g.wheelDY=e,setTimeout(function(){if(null!=g.wheelStartX){var k=h.scrollLeft-g.wheelStartX,j=h.scrollTop-g.wheelStartY,k=j&&g.wheelDY&&j/g.wheelDY||k&&g.wheelDX&&k/g.wheelDX;g.wheelStartX=g.wheelStartY=null;k&&(gf=(gf*iC+k)/(iC+1),++iC)}},200)):(g.wheelDX+=f,g.wheelDY+=e))):(e&&ir(c,Math.max(0,Math.min(h.scrollTop+e*gf,h.scrollHeight-h.clientHeight))),bb(c,Math.max(0,Math.min(h.scrollLeft+f*gf,h.scrollWidth-h.clientWidth))),gc(d),g.wheelStartX=null)}}function hs(d,e,a){if("string"==typeof e&&(e=h6[e],!e)){return !1}d.display.input.ensurePolled();var b=d.display.shift,c=!1;try{gP(d)&&(d.state.suppressEdits=!0),a&&(d.display.shift=!1),c=e(d)!=i0}finally{d.display.shift=b,d.state.suppressEdits=!1}return c}function hi(d,e,a){for(var b=0;b<d.state.keyMaps.length;b++){var c=h4(e,d.state.keyMaps[b],a,d);if(c){return c}}return d.options.extraKeys&&h4(e,d.options.extraKeys,a,d)||h4(e,d.options.keyMap,a,d)}function gr(d,e,a,b){var c=d.state.keySeq;if(c){if(hY(e)){return"handled"}gj.set(50,function(){d.state.keySeq==c&&(d.state.keySeq=null,d.display.input.reset())});e=c+" "+e}b=hi(d,e,b);"multi"==b&&(d.state.keySeq=e);"handled"==b&&fz(d,"keyHandled",d,e,a);if("handled"==b||"multi"==b){gc(a),il(d)}return c&&!b&&/\'$/.test(e)?(gc(a),!0):!!b}function kg(b,c){var a=gW(c,!0);return a?c.shiftKey&&!b.state.keySeq?gr(b,"Shift-"+a,c,function(d){return hs(b,d,!0)})||gr(b,a,c,function(d){if("string"==typeof d?/^go[A-Z]/.test(d):d.motion){return hs(b,d)}}):gr(b,a,c,function(d){return hs(b,d)}):!1}function im(b,c,a){return gr(b,"'"+a+"'",c,function(d){return hs(b,d,!0)})}function jE(b){this.curOp.focus=cg();if(!gn(this,b)){cd&&11>da&&27==b.keyCode&&(b.returnValue=!1);var c=b.keyCode;this.display.shift=16==c||b.shiftKey;var a=kg(this,b);cf&&(i6=a?c:null,!a&&88==c&&!kA&&(aa?b.metaKey:b.ctrlKey)&&this.replaceSelection("",null,"cut"));18!=c||/\bCodeMirror-crosshair\b/.test(this.display.lineDiv.className)||iY(this)}}function iY(b){function c(d){18!=d.keyCode&&d.altKey||(g0(a,"CodeMirror-crosshair"),gY(document,"keyup",c),gY(document,"mouseover",c))}var a=b.display.lineDiv;i2(a,"CodeMirror-crosshair");hy(document,"keyup",c);hy(document,"mouseover",c)}function kG(a){16==a.keyCode&&(this.doc.sel.shift=!1);gn(this,a)}function hv(b){if(!(ke(this.display,b)||gn(this,b)||b.ctrlKey&&!b.altKey||aa&&b.metaKey)){var c=b.keyCode,a=b.charCode;if(cf&&c==i6){i6=null,gc(b)}else{if(!cf||b.which&&!(10>b.which)||!kg(this,b)){if(c=String.fromCharCode(null==a?c:a),!im(this,b,c)){this.display.input.onKeyPress(b)}}}}}function gx(a){a.state.delayingBlurEvent=!0;setTimeout(function(){a.state.delayingBlurEvent&&(a.state.delayingBlurEvent=!1,gG(a))},100)}function h7(a){a.state.delayingBlurEvent&&(a.state.delayingBlurEvent=!1);"nocursor"!=a.options.readOnly&&(a.state.focused||(fy(a,"focus",a),a.state.focused=!0,i2(a.display.wrapper,"CodeMirror-focused"),a.curOp||a.display.selForContextMenu==a.doc.sel||(a.display.input.reset(),fx&&setTimeout(function(){a.display.input.reset(!0)},20)),a.display.input.receivedFocus()),il(a))}function gG(a){a.state.delayingBlurEvent||(a.state.focused&&(fy(a,"blur",a),a.state.focused=!1,g0(a.display.wrapper,"CodeMirror-focused")),clearInterval(a.display.blinker),setTimeout(function(){a.state.focused||(a.display.shift=!1)},150))}function j5(b,c){var a;(a=ke(b.display,c))||(a=W(b,"gutterContextMenu")?hw(b,c,"gutterContextMenu",!1,fy):!1);if(!a){b.display.input.onContextMenu(c)}}function jm(c,d){if(0>hJ(c,d.from)){return c}if(0>=hJ(c,d.to)){return kk(d)}var a=c.line+d.text.length-(d.to.line-d.from.line)-1,b=c.ch;c.line==d.to.line&&(b+=kk(d).ch-d.to.ch);return ho(a,b)}function hj(d,e){for(var a=[],b=0;b<d.sel.ranges.length;b++){var c=d.sel.ranges[b];a.push(new gm(jm(c.anchor,e),jm(c.head,e)))}return ae(a,d.sel.primIndex)}function jV(b,c,a){return b.line==c.line?ho(a.line,b.ch-c.ch+a.ch):ho(a.line+(b.line-c.line),b.ch)}function hV(b,c,a){c={canceled:!1,from:c.from,to:c.to,text:c.text,origin:c.origin,cancel:function(){this.canceled=!0}};a&&(c.update=function(g,d,e,f){g&&(this.from=hC(b,g));d&&(this.to=hC(b,d));e&&(this.text=e);void 0!==f&&(this.origin=f)});fy(b,"beforeChange",b,c);b.cm&&fy(b.cm,"beforeChange",b.cm,c);return c.canceled?null:{from:c.from,to:c.to,text:c.text,origin:c.origin}}function iR(c,d,a){if(c.cm){if(!c.cm.curOp){return eg(c.cm,iR)(c,d,a)}if(c.cm.state.suppressEdits){return}}if(W(c,"beforeChange")||c.cm&&W(c.cm,"beforeChange")){if(d=hV(c,d,!0),!d){return}}if(a=a9&&!a&&ha(c,d.from,d.to)){for(var b=a.length-1;0<=b;--b){O(c,{from:a[b].from,to:a[b].to,text:b?[""]:d.text})}}else{O(c,d)}}function O(c,d){if(1!=d.text.length||""!=d.text[0]||0!=hJ(d.from,d.to)){var a=hj(c,d);be(c,d,a,c.cm?c.cm.curOp.id:NaN);D(c,d,a,kl(c,d));var b=[];ie(c,function(f,e){e||-1!=de(b,f.history)||(a1(f.history,d),b.push(f.history));D(f,d,null,kl(f,d))})}}function jo(c,d,e){if(!c.cm||!c.cm.state.suppressEdits){for(var f=c.history,g,h=c.sel,i="undo"==d?f.done:f.undone,j="undo"==d?f.undone:f.done,k=0;k<i.length&&(g=i[k],e?!g.ranges||g.equals(c.sel):g.ranges);k++){}if(k!=i.length){for(f.lastOrigin=f.lastSelOrigin=null;;){if(g=i.pop(),g.ranges){ku(g,j);if(e&&!g.equals(c.sel)){fe(c,g,{clearRedo:!1});return}h=g}else{break}}e=[];ku(h,j);j.push({changes:e,generation:f.generation});f.generation=g.generation||++f.maxGeneration;f=W(c,"beforeChange")||c.cm&&W(c.cm,"beforeChange");for(k=g.changes.length-1;0<=k;--k){var a=g.changes[k];a.origin=d;if(f&&!hV(c,a,!1)){i.length=0;break}e.push(jD(c,a));h=k?hj(c,a):cb(i);D(c,a,h,gw(c,a));!k&&c.cm&&c.cm.scrollIntoView({from:a.from,to:kk(a)});var b=[];ie(c,function(l,m){m||-1!=de(b,l.history)||(a1(l.history,a),b.push(l.history));D(l,a,null,gw(l,a))})}}}}function g2(c,d){if(0!=d&&(c.first+=d,c.sel=new ip(kh(c.sel.ranges,function(e){return new gm(ho(e.anchor.line+d,e.anchor.ch),ho(e.head.line+d,e.head.ch))}),c.sel.primIndex),c.cm)){ge(c.cm,c.first,c.first-d,d);for(var a=c.cm.display,b=a.viewFrom;b<a.viewTo;b++){hb(c.cm,b,"gutter")}}}function D(d,e,a,b){if(d.cm&&!d.cm.curOp){return eg(d.cm,D)(d,e,a,b)}if(e.to.line<d.first){g2(d,e.text.length-1-(e.to.line-e.from.line))}else{if(!(e.from.line>d.lastLine())){if(e.from.line<d.first){var c=e.text.length-1-(d.first-e.from.line);g2(d,c);e={from:ho(d.first,0),to:ho(e.to.line+c,e.to.ch),text:[cb(e.text)],origin:e.origin}}c=d.lastLine();e.to.line>c&&(e={from:e.from,to:ho(c,hx(d,c).text.length),text:[e.text[0]],origin:e.origin});e.removed=kI(d,e.from,e.to);a||(a=hj(d,e));d.cm?kd(d.cm,e,b):j4(d,e,b);hU(d,a,hl)}}}function kd(c,d,e){var f=c.doc,g=c.display,h=d.from,i=d.to,a=!1,b=h.line;c.options.lineWrapping||(b=ea(h3(hx(f,h.line))),f.iter(b,i.line+1,function(j){if(j==g.maxLine){return a=!0}}));-1<f.sel.contains(d.from,d.to)&&eb(c);j4(f,d,e,bc(c));c.options.lineWrapping||(f.iter(b,h.line+d.text.length,function(k){var j=gk(k);j>g.maxLineLength&&(g.maxLine=k,g.maxLineLength=j,g.maxLineChanged=!0,a=!1)}),a&&(c.curOp.updateMaxLine=!0));f.frontier=Math.min(f.frontier,h.line);db(c,400);e=d.text.length-(i.line-h.line)-1;d.full?ge(c):h.line!=i.line||1!=d.text.length||cc(c.doc,d)?ge(c,h.line,i.line+1,e):hb(c,h.line,"text");e=W(c,"changes");if((f=W(c,"change"))||e){d={from:h,to:i,text:d.text,removed:d.removed,origin:d.origin},f&&fz(c,"change",c,d),e&&(c.curOp.changeObjs||(c.curOp.changeObjs=[])).push(d)}c.display.selForContextMenu=null}function j1(e,f,a,b,c){b||(b=a);if(0>hJ(b,a)){var d=b;b=a;a=d}"string"==typeof f&&(f=v(f));iR(e,{from:a,to:b,text:f,origin:c})}function a5(c,d,e,f,g){var h=c.display,i=h1(c.display);0>e&&(e=0);var j=c.curOp&&null!=c.curOp.scrollTop?c.curOp.scrollTop:h.scroller.scrollTop,k=fd(c),l={};g-e>k&&(g=e+k);var a=c.doc.height+jQ(h),b=e<i,i=g>a-i;e<j?l.scrollTop=b?0:e:g>j+k&&(e=Math.min(e,(i?a:g)-k),e!=j&&(l.scrollTop=e));j=c.curOp&&null!=c.curOp.scrollLeft?c.curOp.scrollLeft:h.scroller.scrollLeft;c=jv(c)-(c.options.fixedGutter?h.gutters.offsetWidth:0);(h=f-d>c)&&(f=d+c);10>d?l.scrollLeft=0:d<j?l.scrollLeft=Math.max(0,d-(h?0:10)):f>c+j-3&&(l.scrollLeft=f+(h?0:10)-c);return l}function ix(b,c,a){null==c&&null==a||i5(b);null!=c&&(b.curOp.scrollLeft=(null==b.curOp.scrollLeft?b.doc.scrollLeft:b.curOp.scrollLeft)+c);null!=a&&(b.curOp.scrollTop=(null==b.curOp.scrollTop?b.doc.scrollTop:b.curOp.scrollTop)+a)}function hK(c){i5(c);var d=c.getCursor(),a=d,b=d;c.options.lineWrapping||(a=d.ch?ho(d.line,d.ch-1):d,b=ho(d.line,d.ch+1));c.curOp.scrollToPos={from:a,to:b,margin:c.options.cursorScrollMargin,isCursor:!0}}function i5(c){var d=c.curOp.scrollToPos;if(d){c.curOp.scrollToPos=null;var a=km(c,d.from),b=km(c,d.to),d=a5(c,Math.min(a.left,b.left),Math.min(a.top,b.top)-d.margin,Math.max(a.right,b.right),Math.max(a.bottom,b.bottom)+d.margin);c.scrollTo(d.scrollLeft,d.scrollTop)}}function jx(c,d,e,f){var g=c.doc,h;null==e&&(e="add");"smart"==e&&(g.mode.indent?h=w(c,d):e="prev");var i=c.options.tabSize,j=hx(g,d),k=Q(j.text,null,i);j.stateAfter&&(j.stateAfter=null);var a=j.text.match(/^\s*/)[0],b;if(!f&&!/\S/.test(j.text)){b=0,e="not"}else{if("smart"==e&&(b=g.mode.indent(h,j.text.slice(a.length),j.text),b==i0||150<b)){if(!f){return}e="prev"}}"prev"==e?b=d>g.first?Q(hx(g,d-1).text,null,i):0:"add"==e?b=k+c.options.indentUnit:"subtract"==e?b=k-c.options.indentUnit:"number"==typeof e&&(b=k+e);b=Math.max(0,b);e="";f=0;if(c.options.indentWithTabs){for(c=Math.floor(b/i);c;--c){f+=i,e+="\t"}}f<b&&(e+=fw(b-f));if(e!=a){return j1(g,e,ho(d,0),ho(d,a.length),"+input"),j.stateAfter=null,!0}for(c=0;c<g.sel.ranges.length;c++){if(i=g.sel.ranges[c],i.head.line==d&&i.head.ch<a.length){f=ho(d,a.length);jS(g,c,new gm(f,f));break}}}function hf(e,f,a,b){var c=f,d=f;"number"==typeof f?d=hx(e,Math.max(e.first,Math.min(f,e.first+e.size-1))):c=ea(f);if(null==c){return null}b(d,c)&&e.cm&&hb(e.cm,c,a);return d}function hR(f,g){for(var a=f.doc.sel.ranges,b=[],c=0;c<a.length;c++){for(var d=g(a[c]);b.length&&0>=hJ(d.from,cb(b).to);){var e=b.pop();if(0>hJ(e.from,d.from)){d.from=e.from;break}}b.push(d)}X(f,function(){for(var h=b.length-1;0<=h;h--){j1(f.doc,"",b[h].from,b[h].to,"+delete")}hK(f)})}function iE(l,n,b,c,d){function e(p){var o=(d?iG:hh)(i,g,b,!0);if(null==o){if(p=!p){p=f+b,p<l.first||p>=l.first+l.size?p=j=!1:(f=p,p=i=hx(l,p))}if(p){g=d?(0>b?dg:S)(i):0>b?i.text.length:0}else{return j=!1}}else{g=o}return !0}var f=n.line,g=n.ch,h=b,i=hx(l,f),j=!0;if("char"==c){e()}else{if("column"==c){e(!0)}else{if("word"==c||"group"==c){var m=null;c="group"==c;n=l.cm&&l.cm.getHelper(n,"wordChars");for(var k=!0;!(0>b)||e(!k);k=!1){var a=i.text.charAt(g)||"\n",a=kj(a,n)?"w":c&&"\n"==a?"n":!c||/\s/.test(a)?null:"p";!c||k||a||(a="s");if(m&&m!=a){0>b&&(b=1,e());break}a&&(m=a);if(0<b&&!e(!k)){break}}}}}h=jR(l,ho(f,g),h,!0);j||(h.hitSide=!0);return h}function hX(f,g,a,b){var c=f.doc,d=g.left,e;"page"==b?(e=Math.min(f.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),e=g.top+a*(e-(0>a?1.5:0.5)*h1(f.display))):"line"==b&&(e=0<a?g.bottom+3:g.top-3);for(;;){g=df(f,d,e);if(!g.outside){break}if(0>a?0>=e:e>=c.height){g.hitSide=!0;break}e+=5*a}return g}function hG(c,d,a,b){hn.defaults[c]=d;a&&(gh[c]=b?function(f,g,e){e!=hS&&a(f,g,e)}:a)}function js(f){var g=f.split(/-(?!$)/);f=g[g.length-1];for(var h,a,b,c,d=0;d<g.length-1;d++){var e=g[d];if(/^(cmd|meta|m)$/i.test(e)){c=!0}else{if(/^a(lt)?$/i.test(e)){h=!0}else{if(/^(c|ctrl|control)$/i.test(e)){a=!0}else{if(/^s(hift)$/i.test(e)){b=!0}else{throw Error("Unrecognized modifier name: "+e)}}}}}h&&(f="Alt-"+f);a&&(f="Ctrl-"+f);c&&(f="Cmd-"+f);b&&(f="Shift-"+f);return f}function jz(a){return"string"==typeof a?kC[a]:a}function ks(c,d,e,f,g){if(f&&f.shared){return jY(c,d,e,f,g)}if(c.cm&&!c.cm.curOp){return eg(c.cm,ks)(c,d,e,f,g)}var h=new K(c,g);g=hJ(d,e);f&&Z(f,h,!1);if(0<g||0==g&&!1!==h.clearWhenEmpty){return h}h.replacedWith&&(h.collapsed=!0,h.widgetNode=ht("span",[h.replacedWith],"CodeMirror-widget"),f.handleMouseEvents||h.widgetNode.setAttribute("cm-ignore-events","true"),f.insertLeft&&(h.widgetNode.insertLeft=!0));if(h.collapsed){if(gi(c,d.line,d,e,h)||d.line!=e.line&&gi(c,e.line,d,e,h)){throw Error("Inserting collapsed marker partially overlapping an existing one")}iv=!0}h.addToHistory&&be(c,{from:d,to:e,origin:"markText"},c.sel,NaN);var i=d.line,a=c.cm,b;c.iter(i,e.line+1,function(j){a&&h.collapsed&&!a.options.lineWrapping&&h3(j)==a.display.maxLine&&(b=!0);h.collapsed&&i!=d.line&&a3(j,0);var k=new j3(h,i==d.line?d.ch:null,i==e.line?e.ch:null);j.markedSpans=j.markedSpans?j.markedSpans.concat([k]):[k];k.marker.attachLine(j);++i});h.collapsed&&c.iter(d.line,e.line+1,function(j){C(c,j)&&a3(j,0)});h.clearOnEnter&&hy(h,"beforeCursorEnter",function(){h.clear()});h.readOnly&&(a9=!0,(c.history.done.length||c.history.undone.length)&&c.clearHistory());h.collapsed&&(h.id=++y,h.atomic=!0);if(a){b&&(a.curOp.updateMaxLine=!0);if(h.collapsed){ge(a,d.line,e.line+1)}else{if(h.className||h.title||h.startStyle||h.endStyle||h.css){for(f=d.line;f<=e.line;f++){hb(a,f,"text")}}}h.atomic&&iI(a.doc);fz(a,"markerAdded",a,h)}return h}function jY(f,g,h,a,b){a=Z(a);a.shared=!1;var c=[ks(f,g,h,a,b)],d=c[0],e=a.widgetNode;ie(f,function(i){e&&(a.widgetNode=e.cloneNode(!0));c.push(ks(i,hC(i,g),hC(i,h),a,b));for(var j=0;j<i.linked.length;++j){if(i.linked[j].isParent){return}}d=cb(c)});return new iB(c,d)}function gV(a){return a.findMarks(ho(a.first,0),a.clipPos(ho(a.lastLine())),function(b){return b.parent})}function iu(e){for(var f=0;f<e.length;f++){var a=e[f],b=[a.primary.doc];ie(a.primary.doc,function(g){b.push(g)});for(var c=0;c<a.markers.length;c++){var d=a.markers[c];-1==de(b,d.doc)&&(d.parent=null,a.markers.splice(c--,1))}}}function j3(b,c,a){this.marker=b;this.from=c;this.to=a}function gt(c,d){if(c){for(var a=0;a<c.length;++a){var b=c[a];if(b.marker==d){return b}}}}function kl(l,n){if(n.full){return null}var b=j2(l,n.from.line)&&hx(l,n.from.line).markedSpans,c=j2(l,n.to.line)&&hx(l,n.to.line).markedSpans;if(!b&&!c){return null}var d=n.from.ch,e=n.to.ch,f=0==hJ(n.from,n.to);if(b){for(var g=0,h;g<b.length;++g){var i=b[g],j=i.marker;if(null==i.from||(j.inclusiveLeft?i.from<=d:i.from<d)||!(i.from!=d||"bookmark"!=j.type||f&&i.marker.insertLeft)){var m=null==i.to||(j.inclusiveRight?i.to>=d:i.to>d);(h||(h=[])).push(new j3(j,i.from,m?null:i.to))}}}b=h;if(c){for(var g=0,k;g<c.length;++g){if(h=c[g],i=h.marker,null==h.to||(i.inclusiveRight?h.to>=e:h.to>e)||h.from==e&&"bookmark"==i.type&&(!f||h.marker.insertLeft)){j=null==h.from||(i.inclusiveLeft?h.from<=e:h.from<e),(k||(k=[])).push(new j3(i,j?null:h.from-e,null==h.to?null:h.to-e))}}}c=k;f=1==n.text.length;k=cb(n.text).length+(f?d:0);if(b){for(e=0;e<b.length;++e){if(g=b[e],null==g.to){(h=gt(c,g.marker),h)?f&&(g.to=null==h.to?null:h.to+k):g.to=d}}}if(c){for(e=0;e<c.length;++e){g=c[e],null!=g.to&&(g.to+=k),null==g.from?(h=gt(b,g.marker),h||(g.from=k,f&&(b||(b=[])).push(g))):(g.from+=k,f&&(b||(b=[])).push(g))}}b&&(b=jN(b));c&&c!=b&&(c=jN(c));d=[b];if(!f){var f=n.text.length-2,a;if(0<f&&b){for(e=0;e<b.length;++e){null==b[e].to&&(a||(a=[])).push(new j3(b[e].marker,null,null))}}for(e=0;e<f;++e){d.push(a)}d.push(c)}return d}function jN(b){for(var c=0;c<b.length;++c){var a=b[c];null!=a.from&&a.from==a.to&&!1!==a.marker.clearWhenEmpty&&b.splice(c--,1)}return b.length?b:null}function gw(c,d){var e;if(e=d["spans_"+c.id]){for(var f=0,g=[];f<d.text.length;++f){g.push(u(e[f]))}e=g}else{e=null}f=kl(c,d);if(!e){return f}if(!f){return e}for(g=0;g<e.length;++g){var h=e[g],i=f[g];if(h&&i){var j=0;c:for(;j<i.length;++j){for(var a=i[j],b=0;b<h.length;++b){if(h[b].marker==a.marker){continue c}}h.push(a)}}else{i&&(e[g]=i)}}return e}function ha(c,d,e){var f=null;c.iter(d.line,e.line+1,function(l){if(l.markedSpans){for(var m=0;m<l.markedSpans.length;++m){var k=l.markedSpans[m].marker;!k.readOnly||f&&-1!=de(f,k)||(f||(f=[])).push(k)}}});if(!f){return null}c=[{from:d,to:e}];for(d=0;d<f.length;++d){e=f[d];for(var g=e.find(0),h=0;h<c.length;++h){var i=c[h];if(!(0>hJ(i.to,g.from)||0<hJ(i.from,g.to))){var j=[h,1],a=hJ(i.from,g.from),b=hJ(i.to,g.to);(0>a||!e.inclusiveLeft&&!a)&&j.push({from:i.from,to:g.from});(0<b||!e.inclusiveRight&&!b)&&j.push({from:g.to,to:i.to});c.splice.apply(c,j);h+=j.length-1}}}return c}function iX(b){var c=b.markedSpans;if(c){for(var a=0;a<c.length;++a){c[a].marker.detachLine(b)}b.markedSpans=null}}function jh(b,c){if(c){for(var a=0;a<c.length;++a){c[a].marker.attachLine(b)}b.markedSpans=c}}function h2(d,e){var a=d.lines.length-e.lines.length;if(0!=a){return a}var a=d.find(),b=e.find(),c=hJ(a.from,b.from)||(d.inclusiveLeft?-1:0)-(e.inclusiveLeft?-1:0);return c?-c:(a=hJ(a.to,b.to)||(d.inclusiveRight?1:0)-(e.inclusiveRight?1:0))?a:e.id-d.id}function iS(e,f){var a=iv&&e.markedSpans,b;if(a){for(var c,d=0;d<a.length;++d){c=a[d],c.marker.collapsed&&null==(f?c.from:c.to)&&(!b||0>h2(b,c.marker))&&(b=c.marker)}}return b}function gi(c,d,e,f,g){c=hx(c,d);if(c=iv&&c.markedSpans){for(d=0;d<c.length;++d){var h=c[d];if(h.marker.collapsed){var i=h.marker.find(0),a=hJ(i.from,e)||(h.marker.inclusiveLeft?-1:0)-(g.inclusiveLeft?-1:0),b=hJ(i.to,f)||(h.marker.inclusiveRight?1:0)-(g.inclusiveRight?1:0);if(!(0<=a&&0>=b||0>=a&&0<=b)&&(0>=a&&(0<hJ(i.to,e)||h.marker.inclusiveRight&&g.inclusiveLeft)||0<=a&&(0>hJ(i.from,f)||h.marker.inclusiveLeft&&g.inclusiveRight))){return !0}}}}}function h3(a){for(var b;b=iS(a,!0);){a=b.find(-1,!0).line}return a}function bg(c,d){var a=hx(c,d),b=h3(a);return a==b?d:ea(b)}function g1(c,d){if(d>c.lastLine()){return d}var a=hx(c,d),b;if(!C(c,a)){return d}for(;b=iS(a,!1);){a=b.find(1,!0).line}return ea(a)+1}function C(d,e){var a=iv&&e.markedSpans;if(a){for(var b,c=0;c<a.length;++c){if(b=a[c],b.marker.collapsed&&(null==b.from||!b.marker.widgetNode&&0==b.from&&b.marker.inclusiveLeft&&kr(d,e,b))){return !0}}}}function kr(d,e,a){if(null==a.to){return e=a.marker.find(1,!0),kr(d,e.line,gt(e.line.markedSpans,a.marker))}if(a.marker.inclusiveRight&&a.to==e.text.length){return !0}for(var b,c=0;c<e.markedSpans.length;++c){if(b=e.markedSpans[c],b.marker.collapsed&&!b.marker.widgetNode&&b.from==a.to&&(null==b.to||b.to!=a.from)&&(b.marker.inclusiveLeft||a.marker.inclusiveRight)&&kr(d,e,b)){return !0}}}function kD(b){if(null!=b.height){return b.height}var c=b.doc.cm;if(!c){return 0}if(!jk(document.body,b.node)){var a="position: relative;";b.coverGutter&&(a+="margin-left: -"+c.display.gutters.offsetWidth+"px;");b.noHScroll&&(a+="width: "+c.display.wrapper.clientWidth+"px;");Y(c.display.measure,ht("div",[b.node],null,a))}return b.height=b.node.offsetHeight}function hO(e,f,a,b){var c=new x(e,a,b),d=e.cm;d&&c.noHScroll&&(d.display.alignWidgets=!0);hf(e,f,"widget",function(g){var h=g.widgets||(g.widgets=[]);null==c.insertAt?h.push(c):h.splice(Math.min(h.length-1,Math.max(0,c.insertAt)),0,c);c.line=g;d&&!C(e,g)&&(h=g4(g)<e.scrollTop,a3(g,g.height+kD(c)),h&&ix(d,null,c.height),d.curOp.forceUpdate=!0);return !0});return c}function jp(c,d){if(c){for(;;){var a=c.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!a){break}c=c.slice(0,a.index)+c.slice(a.index+a[0].length);var b=a[1]?"bgClass":"textClass";null==d[b]?d[b]=a[2]:(new RegExp("(?:^|s)"+a[2]+"(?:$|s)")).test(d[b])||(d[b]+=" "+a[2])}}return c}function jX(b,c){if(b.blankLine){return b.blankLine(c)}if(b.innerMode){var a=hn.innerMode(b,c);if(a.mode.blankLine){return a.mode.blankLine(a.state)}}}function kF(e,f,a,b){for(var c=0;10>c;c++){b&&(b[0]=hn.innerMode(e,a).mode);var d=e.token(f,a);if(f.pos>f.start){return d}}throw Error("Mode "+e.name+" failed to advance stream.")}function iq(c,d,e,f){function g(m){return{start:a.start,end:a.pos,string:a.current(),type:j||null,state:m?jC(h.mode,l):l}}var h=c.doc,i=h.mode,j;d=hC(h,d);var k=hx(h,d.line),l=w(c,d.line,e),a=new ko(k.text,c.options.tabSize),b;for(f&&(b=[]);(f||a.pos<d.ch)&&!a.eol();){a.start=a.pos,j=kF(i,a,l),f&&b.push(g(!0))}return f?b:g()}function t(l,n,b,c,d,e,f){var g=b.flattenSpans;null==g&&(g=l.options.flattenSpans);var h=0,i=null,j=new ko(n,l.options.tabSize),m,k=l.options.addModeClass&&[null];for(""==n&&jp(jX(b,c),e);!j.eol();){j.pos>l.options.maxHighlightLength?(g=!1,f&&q(l,n,c,j.pos),j.pos=n.length,m=null):m=jp(kF(b,j,c,k),e);if(k){var a=k[0].name;a&&(m="m-"+(m?a+" "+m:a))}if(!g||i!=m){for(;h<j.start;){h=Math.min(j.start,h+50000),d(h,i)}i=m}j.start=j.pos}for(;h<j.pos;){l=Math.min(j.pos,h+50000),d(l,i),h=l}}function gy(c,d,e,f){var g=[c.state.modeGen],h={};t(c,d.text,c.doc.mode,e,function(k,j){g.push(k,j)},h,f);for(e=0;e<c.state.overlays.length;++e){var i=c.state.overlays[e],a=1,b=0;t(c,d.text,i.mode,!0,function(m,j){for(var k=a;b<m;){var l=g[a];l>m&&g.splice(a,1,m,g[a+1],l);a+=2;b=Math.min(m,l)}if(j){if(i.opaque){g.splice(k,a-k,m,"cm-overlay "+j),a=k+2}else{for(;k<a;k+=2){l=g[k+1],g[k+1]=(l?l+" ":"")+"cm-overlay "+j}}}},h)}return{styles:g,classes:h.bgClass||h.textClass?h:null}}function hL(c,d,a){if(!d.styles||d.styles[0]!=c.state.modeGen){var b=gy(c,d,d.stateAfter=w(c,ea(d)));d.styles=b.styles;b.classes?d.styleClasses=b.classes:d.styleClasses&&(d.styleClasses=null);a===c.doc.frontier&&c.doc.frontier++}return d.styles}function q(e,f,a,b){var c=e.doc.mode,d=new ko(f,e.options.tabSize);d.start=d.pos=b||0;for(""==f&&jX(c,a);!d.eol()&&d.pos<=e.options.maxHighlightLength;){kF(c,d,a),d.start=d.pos}}function V(b,c){if(!b||/^\s*$/.test(b)){return null}var a=c.addModeClass?gl:ff;return a[b]||(a[b]=b.replace(/\S+/g,"cm-$\x26"))}function jM(ai,aj){var ak=ht("span",null,null,fx?"padding-right: .1px":null),ak={pre:ht("pre",[ak]),content:ak,col:0,pos:0,cm:ai,splitSpaces:(cd||fx)&&ai.getOption("lineWrapping")};aj.measure={};for(var al=0;al<=(aj.rest?aj.rest.length:0);al++){var am=al?aj.rest[al-1]:aj.line,an;ak.pos=0;ak.addToken=hk;var ao;if(null!=jB){ao=jB}else{ao=Y(ai.display.measure,document.createTextNode("AخA"));var a=jK(ao,0,1).getBoundingClientRect();ao=a&&a.left!=a.right?jB=3>jK(ao,1,2).getBoundingClientRect().right-a.right:!1}ao&&(an=ac(am))&&(ak.addToken=gT(ak.addToken,an));ak.map=[];a=aj!=ai.display.externalMeasured&&ea(am);ai:{ao=ak;var a=hL(ai,am,a),b=am.markedSpans,c=am.text,d=0;if(b){for(var f=c.length,e=0,h=1,i="",l=void 0,m=void 0,o=0,s=void 0,ah=void 0,g=void 0,j=void 0,I=void 0;;){if(o==e){for(var s=ah=g=j=m="",I=null,o=Infinity,n=[],p=0;p<b.length;++p){var E=b[p],k=E.marker;"bookmark"==k.type&&E.from==e&&k.widgetNode?n.push(k):E.from<=e&&(null==E.to||E.to>e||k.collapsed&&E.to==e&&E.from==e)?(null!=E.to&&E.to!=e&&o>E.to&&(o=E.to,ah=""),k.className&&(s+=" "+k.className),k.css&&(m=k.css),k.startStyle&&E.from==e&&(g+=" "+k.startStyle),k.endStyle&&E.to==o&&(ah+=" "+k.endStyle),k.title&&!j&&(j=k.title),k.collapsed&&(!I||0>h2(I.marker,k))&&(I=E)):E.from>e&&o>E.from&&(o=E.from)}if(I&&(I.from||0)==e){fc(ao,(null==I.to?f+1:I.to)-e,I.marker,null==I.from);if(null==I.to){break ai}I.to==e&&(I=!1)}if(!I&&n.length){for(p=0;p<n.length;++p){fc(ao,0,n[p])}}}if(e>=f){break}for(n=Math.min(f,o);;){if(i){p=e+i.length;I||(E=p>n?i.slice(0,n-e):i,ao.addToken(ao,E,l?l+s:s,g,e+E.length==o?ah:"",j,m));if(p>=n){i=i.slice(n-e);e=n;break}e=p;g=""}i=c.slice(d,d=a[h++]);l=V(a[h++],ao.cm.options)}}}else{for(var h=1;h<a.length;h+=2){ao.addToken(ao,c.slice(d,d=a[h]),V(a[h+1],ao.cm.options))}}}am.styleClasses&&(am.styleClasses.bgClass&&(ak.bgClass=jd(am.styleClasses.bgClass,ak.bgClass||"")),am.styleClasses.textClass&&(ak.textClass=jd(am.styleClasses.textClass,ak.textClass||"")));0==ak.map.length&&ak.map.push(0,0,ak.content.appendChild(ba(ai.display.measure)));0==al?(aj.measure.map=ak.map,aj.measure.cache={}):((aj.measure.maps||(aj.measure.maps=[])).push(ak.map),(aj.measure.caches||(aj.measure.caches=[])).push({}))}fx&&/\bcm-tab\b/.test(ak.content.lastChild.className)&&(ak.content.className="cm-tab-wrap-hack");fy(ai,"renderLine",ai,aj.line,ak.pre);ak.pre.className&&(ak.textClass=jd(ak.pre.className,ak.textClass||""));return ak}function hk(h,k,m,o,a,b,c){if(k){var d=h.splitSpaces?k.replace(/ {3,}/g,ef):k,e=h.cm.state.specialChars,f=!1;if(e.test(k)){for(var g=document.createDocumentFragment(),j=0;;){e.lastIndex=j;var i=e.exec(k),l=i?i.index-j:k.length-j;if(l){var n=document.createTextNode(d.slice(j,j+l));cd&&9>da?g.appendChild(ht("span",[n])):g.appendChild(n);h.map.push(h.pos,h.pos+l,n);h.col+=l;h.pos+=l}if(!i){break}j+=l+1;"\t"==i[0]?(n=h.cm.options.tabSize,i=n-h.col%n,n=g.appendChild(ht("span",fw(i),"cm-tab")),n.setAttribute("role","presentation"),n.setAttribute("cm-text","\t"),h.col+=i):(n=h.cm.options.specialCharPlaceholder(i[0]),n.setAttribute("cm-text",i[0]),cd&&9>da?g.appendChild(ht("span",[n])):g.appendChild(n),h.col+=1);h.map.push(h.pos,h.pos+1,n);h.pos++}}else{h.col+=k.length;var g=document.createTextNode(d);h.map.push(h.pos,h.pos+k.length,g);cd&&9>da&&(f=!0);h.pos+=k.length}if(m||o||a||f||c){return k=m||"",o&&(k+=o),a&&(k+=a),o=ht("span",[g],k,c),b&&(o.title=b),h.content.appendChild(o)}h.content.appendChild(g)}}function ef(b){for(var c=" ",a=0;a<b.length-2;++a){c+=a%2?" ":" "}return c+" "}function gT(a,b){return function(c,d,e,f,g,h,i){e=e?e+" cm-force-border":"cm-force-border";for(var j=c.pos,k=j+d.length;;){for(var m=0;m<b.length;m++){var l=b[m];if(l.to>j&&l.from<=j){break}}if(l.to>=k){return a(c,d,e,f,g,h,i)}a(c,d.slice(0,l.to-j),e,f,null,h,i);f=null;d=d.slice(l.to-j);j=l.to}}}function fc(d,e,a,b){var c=!b&&a.widgetNode;c&&d.map.push(d.pos,d.pos+e,c);!b&&d.cm.display.input.needsContentAttribute&&(c||(c=d.content.appendChild(document.createElement("span"))),c.setAttribute("cm-marker",a.id));c&&(d.cm.display.input.setUneditable(c),d.content.appendChild(c));d.pos+=e}function cc(a,b){return 0==b.from.ch&&0==b.to.ch&&""==cb(b.text)&&(!a.cm||a.cm.options.wholeLineUpdateBefore)}function j4(h,k,m,o){function a(E,p,s){E.text=p;E.stateAfter&&(E.stateAfter=null);E.styles&&(E.styles=null);null!=E.order&&(E.order=null);iX(E);jh(E,s);p=o?o(E):1;p!=E.height&&a3(E,p);fz(E,"change",E,k)}function b(E,I){for(var p=E,s=[];p<I;++p){s.push(new iT(e[p],m?m[p]:null,o))}return s}var c=k.from,d=k.to,e=k.text,f=hx(h,c.line),g=hx(h,d.line),j=cb(e),i=m?m[e.length-1]:null,l=d.line-c.line;if(k.full){h.insert(0,b(0,e.length)),h.remove(e.length,h.size-e.length)}else{if(cc(h,k)){var n=b(0,e.length-1);a(g,g.text,i);l&&h.remove(c.line,l);n.length&&h.insert(c.line,n)}else{f==g?1==e.length?a(f,f.text.slice(0,c.ch)+j+f.text.slice(d.ch),i):(n=b(1,e.length-1),n.push(new iT(j+f.text.slice(d.ch),i,o)),a(f,f.text.slice(0,c.ch)+e[0],m?m[0]:null),h.insert(c.line+1,n)):1==e.length?(a(f,f.text.slice(0,c.ch)+e[0]+g.text.slice(d.ch),m?m[0]:null),h.remove(c.line+1,l)):(a(f,f.text.slice(0,c.ch)+e[0],m?m[0]:null),a(g,j+g.text.slice(d.ch),i),n=b(1,e.length-1),1<l&&h.remove(c.line+1,l-1),h.insert(c.line+1,n))}}fz(h,"change",h,k)}function kb(b){this.lines=b;this.parent=null;for(var c=0,a=0;c<b.length;++c){b[c].parent=this,a+=b[c].height}this.height=a}function kx(d){this.children=d;for(var e=0,a=0,b=0;b<d.length;++b){var c=d[b],e=e+c.chunkSize(),a=a+c.height;c.parent=this}this.size=e;this.height=a;this.parent=null}function ie(c,d,a){function b(g,f,i){if(g.linked){for(var j=0;j<g.linked.length;++j){var e=g.linked[j];if(e.doc!=f){var h=i&&e.sharedHist;if(!a||h){d(e.doc,h),b(e.doc,g,h)}}}}}b(c,null,!0)}function jT(a,b){if(b.cm){throw Error("This document is already in use.")}a.doc=b;b.cm=a;iW(a);gv(a);a.options.lineWrapping||ji(a);a.options.mode=b.modeOption;ge(a)}function hx(e,f){f-=e.first;if(0>f||f>=e.size){throw Error("There is no line "+(f+e.first)+" in the document.")}for(var a=e;!a.lines;){for(var b=0;;++b){var c=a.children[b],d=c.chunkSize();if(f<d){a=c;break}f-=d}}return a.lines[f]}function kI(d,e,a){var b=[],c=e.line;d.iter(e.line,a.line+1,function(f){f=f.text;c==a.line&&(f=f.slice(0,a.ch));c==e.line&&(f=f.slice(e.ch));b.push(f);++c});return b}function h9(c,d,a){var b=[];c.iter(d,a,function(e){b.push(e.text)});return b}function a3(c,d){var a=d-c.height;if(a){for(var b=c;b;b=b.parent){b.height+=a}}}function ea(c){if(null==c.parent){return null}var d=c.parent;c=de(d.lines,c);for(var a=d.parent;a;d=a,a=a.parent){for(var b=0;a.children[b]!=d;++b){c+=a.children[b].chunkSize()}}return c+d.first}function ka(e,f){var a=e.first;e:do{for(var b=0;b<e.children.length;++b){var c=e.children[b],d=c.height;if(f<d){e=c;continue e}f-=d;a+=c.chunkSize()}return a}while(!e.lines);for(b=0;b<e.lines.length;++b){c=e.lines[b].height;if(f<c){break}f-=c}return a+b}function g4(d){d=h3(d);for(var e=0,a=d.parent,b=0;b<a.lines.length;++b){var c=a.lines[b];if(c==d){break}else{e+=c.height}}for(d=a.parent;d;a=d,d=a.parent){for(b=0;b<d.children.length&&(c=d.children[b],c!=a);++b){e+=c.height}}return e}function ac(a){var b=a.order;null==b&&(b=a.order=iN(a.text));return b}function kE(a){this.done=[];this.undone=[];this.undoDepth=Infinity;this.lastModTime=this.lastSelTime=0;this.lastOrigin=this.lastSelOrigin=this.lastOp=this.lastSelOp=null;this.generation=this.maxGeneration=a||1}function jD(b,c){var a={from:gQ(c.from),to:kk(c),text:kI(b,c.from,c.to)};hg(b,a,c.from.line,c.to.line+1);ie(b,function(d){hg(d,a,c.from.line,c.to.line+1)},!0);return a}function a7(a){for(;a.length;){if(cb(a).ranges){a.pop()}else{break}}}function be(c,d,e,f){var g=c.history;g.undone.length=0;var h=+new Date,i,a;if(a=g.lastOp==f||g.lastOrigin==d.origin&&d.origin&&("+"==d.origin.charAt(0)&&c.cm&&g.lastModTime>h-c.cm.options.historyEventDelay||"*"==d.origin.charAt(0))){g.lastOp==f?(a7(g.done),i=cb(g.done)):g.done.length&&!cb(g.done).ranges?i=cb(g.done):1<g.done.length&&!g.done[g.done.length-2].ranges?(g.done.pop(),i=cb(g.done)):i=void 0,a=i}if(a){var b=cb(i.changes);0==hJ(d.from,d.to)&&0==hJ(d.from,b.to)?b.to=kk(d):i.changes.push(jD(c,d))}else{for((i=cb(g.done))&&i.ranges||ku(c.sel,g.done),i={changes:[jD(c,d)],generation:g.generation},g.done.push(i);g.done.length>g.undoDepth;){g.done.shift(),g.done[0].ranges||g.done.shift()}}g.done.push(e);g.generation=++g.maxGeneration;g.lastModTime=g.lastSelTime=h;g.lastOp=g.lastSelOp=f;g.lastOrigin=g.lastSelOrigin=d.origin;b||fy(c,"historyAdded")}function ku(b,c){var a=cb(c);a&&a.ranges&&a.equals(b)||c.push(b)}function hg(e,f,a,b){var c=f["spans_"+e.id],d=0;e.iter(Math.max(e.first,a),Math.min(e.first+e.size,b),function(g){g.markedSpans&&((c||(c=f["spans_"+e.id]={}))[d]=g.markedSpans);++d})}function u(b){if(!b){return null}for(var c=0,a;c<b.length;++c){b[c].marker.explicitlyCleared?a||(a=b.slice(0,c)):a&&a.push(b[c])}return a?a.length?a:null:b}function jO(c,d,e){for(var f=0,g=[];f<c.length;++f){var h=c[f];if(h.ranges){g.push(e?ip.prototype.deepCopy.call(h):h)}else{var h=h.changes,i=[];g.push({changes:i});for(var j=0;j<h.length;++j){var k=h[j],a;i.push({from:k.from,to:k.to,text:k.text});if(d){for(var b in k){(a=b.match(/^spans_(\d+)$/))&&-1<de(d,Number(a[1]))&&(cb(i)[b]=k[b],delete k[b])}}}}}return g}function gR(c,d,a,b){a<c.line?c.line+=b:d<c.line&&(c.line=d,c.ch=0)}function g9(c,d,e,f){for(var g=0;g<c.length;++g){var h=c[g],i=!0;if(h.ranges){h.copied||(h=c[g]=h.deepCopy(),h.copied=!0);for(var a=0;a<h.ranges.length;a++){gR(h.ranges[a].anchor,d,e,f),gR(h.ranges[a].head,d,e,f)}}else{for(a=0;a<h.changes.length;++a){var b=h.changes[a];if(e<b.from.line){b.from=ho(b.from.line+f,b.from.ch),b.to=ho(b.to.line+f,b.to.ch)}else{if(d<=b.to.line){i=!1;break}}}i||(c.splice(0,g+1),g=0)}}}function a1(d,e){var a=e.from.line,b=e.to.line,c=e.text.length-(b-a)-1;g9(d.done,a,b,c);g9(d.undone,a,b,c)}function iA(a){return null!=a.defaultPrevented?a.defaultPrevented:0==a.returnValue}function ia(a){var b=a.which;null==b&&(a.button&1?b=1:a.button&2?b=3:a.button&4&&(b=2));aa&&a.ctrlKey&&1==b&&(b=3);return b}function fz(f,g){function a(h){return function(){h.apply(null,c)}}var b=f._handlers&&f._handlers[g];if(b){var c=Array.prototype.slice.call(arguments,2),d;iL?d=iL.delayedCallbacks:kJ?d=kJ:(d=kJ=[],setTimeout(hH,0));for(var e=0;e<b.length;++e){d.push(a(b[e]))}}}function hH(){var a=kJ;kJ=null;for(var b=0;b<a.length;++b){a[b]()}}function gn(b,c,a){"string"==typeof c&&(c={type:c,preventDefault:function(){this.defaultPrevented=!0}});fy(b,a||c.type,b,c);return iA(c)||c.codemirrorIgnore}function eb(b){var c=b._handlers&&b._handlers.cursorActivity;if(c){b=b.curOp.cursorActivityHandlers||(b.curOp.cursorActivityHandlers=[]);for(var a=0;a<c.length;++a){-1==de(b,c[a])&&b.push(c[a])}}}function W(b,c){var a=b._handlers&&b._handlers[c];return a&&0<a.length}function j8(a){a.prototype.on=function(c,b){hy(this,c,b)};a.prototype.off=function(c,b){gY(this,c,b)}}function dc(){this.id=null}function H(f,g,a){for(var b=0,c=0;;){var d=f.indexOf("\t",b);-1==d&&(d=f.length);var e=d-b;if(d==f.length||c+e>=g){return b+Math.min(e,g-c)}c+=d-b;c+=a-c%a;b=d+1;if(c>=g){return b}}}function fw(a){for(;jw.length<=a;){jw.push(cb(jw)+" ")}return jw[a]}function cb(a){return a[a.length-1]}function de(b,c){for(var a=0;a<b.length;++a){if(b[a]==c){return a}}return -1}function kh(c,d){for(var a=[],b=0;b<c.length;b++){a[b]=d(c[b],b)}return a}function jP(){}function ed(b,c){var a;Object.create?a=Object.create(b):(jP.prototype=b,a=new jP);c&&Z(c,a);return a}function Z(c,d,a){d||(d={});for(var b in c){!c.hasOwnProperty(b)||!1===a&&d.hasOwnProperty(b)||(d[b]=c[b])}return d}function a4(a){var b=Array.prototype.slice.call(arguments,1);return function(){return a.apply(null,b)}}function kj(a,b){return b?-1<b.source.indexOf("\\w")&&iK(a)?!0:b.test(a):iK(a)}function hD(a){for(var b in a){if(a.hasOwnProperty(b)&&a[b]){return !1}}return !0}function kn(a){return 768<=a.charCodeAt(0)&&ic.test(a)}function ht(c,d,a,b){c=document.createElement(c);a&&(c.className=a);b&&(c.style.cssText=b);if("string"==typeof d){c.appendChild(document.createTextNode(d))}else{if(d){for(a=0;a<d.length;++a){c.appendChild(d[a])}}}return c}function gq(a){for(var b=a.childNodes.length;0<b;--b){a.removeChild(a.firstChild)}return a}function Y(a,b){return gq(a).appendChild(b)}function cg(){return document.activeElement}function hM(a){return new RegExp("(^|\\s)"+a+"(?:$|\\s)\\s*")}function jd(c,d){for(var a=c.split(" "),b=0;b<a.length;b++){a[b]&&!hM(a[b]).test(d)&&(d+=" "+a[b])}return d}function gE(c){if(document.body.getElementsByClassName){for(var d=document.body.getElementsByClassName("CodeMirror"),a=0;a<d.length;a++){var b=d[a].CodeMirror;b&&c(b)}}}function kv(){var a;hy(window,"resize",function(){null==a&&(a=setTimeout(function(){a=null;gE(bf)},100))});hy(window,"blur",function(){gE(gG)})}function ba(a){if(null==G){var b=ht("span","");Y(a,ht("span",[b,document.createTextNode("x")]));0!=a.firstChild.offsetHeight&&(G=1>=b.offsetWidth&&2<b.offsetHeight&&!(cd&&8>da))}a=G?ht("span",""):ht("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px");a.setAttribute("cm-text","");return a}function i3(f,g,a,b){if(!f){return b(g,a,"ltr")}for(var c=!1,d=0;d<f.length;++d){var e=f[d];if(e.from<a&&e.to>g||g==a&&e.to==g){b(Math.max(e.from,g),Math.min(e.to,a),1==e.level?"rtl":"ltr"),c=!0}}c||b(g,a,"ltr")}function gM(a){return a.level%2?a.to:a.from}function g7(a){return a.level%2?a.from:a.to}function S(a){return(a=ac(a))?gM(a[0]):0}function dg(a){var b=ac(a);return b?g7(cb(b)):a.text.length}function jy(c,d){var a=hx(c.doc,d),b=h3(a);b!=a&&(d=ea(b));b=(a=ac(b))?a[0].level%2?dg(b):S(b):0;return ho(d,b)}function iF(d,e){var a=jy(d,e.line),b=hx(d.doc,a.line),c=ac(b);return c&&0!=c[0].level?a:(b=Math.max(0,b.text.search(/\S/)),ho(a.line,e.line==a.line&&e.ch<=b&&e.ch?0:b))}function jG(f,g){jt=null;for(var h=0,a;h<f.length;++h){var b=f[h];if(b.from<g&&b.to>g){return h}if(b.from==g||b.to==g){if(null==a){a=h}else{var c;c=b.level;var d=f[a].level,e=f[0].level;c=c==e?!0:d==e?!1:c<d;if(c){return b.from!=b.to&&(jt=a),h}b.from!=b.to&&(jt=h);break}}}return a}function gz(c,d,a,b){if(!b){return d+a}do{d+=a}while(0<d&&kn(c.text.charAt(d)));return d}function iG(f,g,a,b){var c=ac(f);if(!c){return hh(f,g,a,b)}var d=jG(c,g),e=c[d];for(g=gz(f,g,e.level%2?-a:a,b);;){if(g>e.from&&g<e.to){return g}if(g==e.from||g==e.to){if(jG(c,g)==d){return g}e=c[d+a];return 0<a==e.level%2?e.to:e.from}e=c[d+=a];if(!e){return null}g=0<a==e.level%2?gz(f,e.to,-1,b):gz(f,e.from,1,b)}}function hh(c,d,a,b){d+=a;if(b){for(;0<d&&kn(c.text.charAt(d));){d+=a}}return 0>d||d>c.text.length?null:d}var jZ=/gecko\/\d/i.test(navigator.userAgent),ja=/MSIE \d/.test(navigator.userAgent),hq=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),cd=ja||hq,da=cd&&(ja?document.documentMode||6:hq[1]),fx=/WebKit\//.test(navigator.userAgent),gH=fx&&/Qt\/\d+\.\d+/.test(navigator.userAgent),jA=/Chrome\//.test(navigator.userAgent),cf=/Opera\//.test(navigator.userAgent),kt=/Apple Computer/.test(navigator.vendor),iJ=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(navigator.userAgent),B=/PhantomJS/.test(navigator.userAgent),ig=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),R=ig||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(navigator.userAgent),aa=ig||/Mac/.test(navigator.platform),jb=/win/i.test(navigator.platform),gI=cf&&navigator.userAgent.match(/Version\/(\d*\.\d*)/);gI&&(gI=Number(gI[1]));gI&&15<=gI&&(cf=!1,fx=!0);var kp=aa&&(gH||cf&&(null==gI||12.11>gI)),h8=jZ||cd&&9<=da,a9=!1,iv=!1;hP.prototype=Z({update:function(c){var d=c.scrollWidth>c.clientWidth+1,a=c.scrollHeight>c.clientHeight+1,b=c.nativeBarWidth;a?(this.vert.style.display="block",this.vert.style.bottom=d?b+"px":"0",this.vert.firstChild.style.height=Math.max(0,c.scrollHeight-c.clientHeight+(c.viewHeight-(d?b:0)))+"px"):(this.vert.style.display="",this.vert.firstChild.style.height="0");d?(this.horiz.style.display="block",this.horiz.style.right=a?b+"px":"0",this.horiz.style.left=c.barLeft+"px",this.horiz.firstChild.style.width=c.scrollWidth-c.clientWidth+(c.viewWidth-c.barLeft-(a?b:0))+"px"):(this.horiz.style.display="",this.horiz.firstChild.style.width="0");!this.checkedOverlay&&0<c.clientHeight&&(0==b&&this.overlayHack(),this.checkedOverlay=!0);return{right:a?b:0,bottom:d?b:0}},setScrollLeft:function(a){this.horiz.scrollLeft!=a&&(this.horiz.scrollLeft=a)},setScrollTop:function(a){this.vert.scrollTop!=a&&(this.vert.scrollTop=a)},overlayHack:function(){this.horiz.style.minHeight=this.vert.style.minWidth=aa&&!iJ?"12px":"18px";var a=this,b=function(c){(c.target||c.srcElement)!=a.vert&&(c.target||c.srcElement)!=a.horiz&&eg(a.cm,jF)(c)};hy(this.vert,"mousedown",b);hy(this.horiz,"mousedown",b)},clear:function(){var a=this.horiz.parentNode;a.removeChild(this.horiz);a.removeChild(this.vert)}},hP.prototype);ij.prototype=Z({update:function(){return{bottom:0,right:0}},setScrollLeft:function(){},setScrollTop:function(){},clear:function(){}},ij.prototype);hn.scrollbarModel={"native":hP,"null":ij};bd.prototype.signal=function(a,b){W(a,b)&&this.events.push(arguments)};bd.prototype.finish=function(){for(var a=0;a<this.events.length;a++){fy.apply(null,this.events[a])}};var ho=hn.Pos=function(a,b){if(!(this instanceof ho)){return new ho(a,b)}this.line=a;this.ch=b},hJ=hn.cmpPos=function(a,b){return a.line-b.line||a.ch-b.ch},ab=null;iQ.prototype=Z({init:function(e){function f(h){if(b.somethingSelected()){ab=b.getSelections(),a.inaccurateSelection&&(a.prevInput="",a.inaccurateSelection=!1,d.value=ab.join("\n"),i4(d))}else{if(b.options.lineWiseCopyCut){var g=h0(b);ab=g.text;"cut"==h.type?b.setSelections(g.ranges,null,hl):(a.prevInput="",d.value=g.text.join("\n"),i4(d))}else{return}}"cut"==h.type&&(b.state.cutIncoming=!0)}var a=this,b=this.cm,c=this.wrapper=jU(),d=this.textarea=c.firstChild;e.wrapper.insertBefore(c,e.wrapper.firstChild);ig&&(d.style.width="0px");hy(d,"input",function(){cd&&9<=da&&a.hasSelection&&(a.hasSelection=null);a.poll()});hy(d,"paste",function(){if(fx&&!b.state.fakedLastChar&&!(200>new Date-b.state.lastMiddleDown)){var h=d.selectionStart,g=d.selectionEnd;d.value+="$";d.selectionEnd=g;d.selectionStart=h;b.state.fakedLastChar=!0}b.state.pasteIncoming=!0;a.fastPoll()});hy(d,"cut",f);hy(d,"copy",f);hy(e.scroller,"paste",function(g){ke(e,g)||(b.state.pasteIncoming=!0,a.focus())});hy(e.lineSpace,"selectstart",function(g){ke(e,g)||gc(g)});hy(d,"compositionstart",function(){var g=b.getCursor("from");a.composing={start:g,range:b.markText(g,b.getCursor("to"),{className:"CodeMirror-composing"})}});hy(d,"compositionend",function(){a.composing&&(a.poll(),a.composing.range.clear(),a.composing=null)})},prepareSelection:function(){var d=this.cm,e=d.display,a=d.doc,b=hA(d);if(d.options.moveInputWithCursor){var d=i1(d,a.sel.primary().head,"div"),a=e.wrapper.getBoundingClientRect(),c=e.lineDiv.getBoundingClientRect();b.teTop=Math.max(0,Math.min(e.wrapper.clientHeight-10,d.top+c.top-a.top));b.teLeft=Math.max(0,Math.min(e.wrapper.clientWidth-10,d.left+c.left-a.left))}return b},showSelection:function(a){var b=this.cm.display;Y(b.cursorDiv,a.cursors);Y(b.selectionDiv,a.selection);null!=a.teTop&&(this.wrapper.style.top=a.teTop+"px",this.wrapper.style.left=a.teLeft+"px")},reset:function(d){if(!this.contextMenuPending){var e,a,b=this.cm,c=b.doc;b.somethingSelected()?(this.prevInput="",e=c.sel.primary(),a=(e=kA&&(100<e.to().line-e.from().line||1000<(a=b.getSelection()).length))?"-":a||b.getSelection(),this.textarea.value=a,b.state.focused&&i4(this.textarea),cd&&9<=da&&(this.hasSelection=a)):d||(this.prevInput=this.textarea.value="",cd&&9<=da&&(this.hasSelection=null));this.inaccurateSelection=e}},getField:function(){return this.textarea},supportsTouch:function(){return !1},focus:function(){if("nocursor"!=this.cm.options.readOnly&&(!R||cg()!=this.textarea)){try{this.textarea.focus()}catch(a){}}},blur:function(){this.textarea.blur()},resetPosition:function(){this.wrapper.style.top=this.wrapper.style.left=0},receivedFocus:function(){this.slowPoll()},slowPoll:function(){var a=this;a.pollingFast||a.polling.set(this.cm.options.pollInterval,function(){a.poll();a.cm.state.focused&&a.slowPoll()})},fastPoll:function(){function b(){a.poll()||c?(a.pollingFast=!1,a.slowPoll()):(c=!0,a.polling.set(60,b))}var c=!1,a=this;a.pollingFast=!0;a.polling.set(20,b)},poll:function(){var f=this.cm,g=this.textarea,a=this.prevInput;if(!f.state.focused||hr(g)&&!a||gP(f)||f.options.disableInput||f.state.keySeq){return !1}f.state.pasteIncoming&&f.state.fakedLastChar&&(g.value=g.value.substring(0,g.value.length-1),f.state.fakedLastChar=!1);var b=g.value;if(b==a&&!f.somethingSelected()){return !1}if(cd&&9<=da&&this.hasSelection===b||aa&&/[\uf700-\uf7ff]/.test(b)){return f.display.input.reset(),!1}if(f.doc.sel==f.display.selForContextMenu){var c=b.charCodeAt(0);8203!=c||a||(a="");if(8666==c){return this.reset(),this.cm.execCommand("undo")}}for(var d=0,c=Math.min(a.length,b.length);d<c&&a.charCodeAt(d)==b.charCodeAt(d);){++d}var e=this;X(f,function(){jJ(f,b.slice(d),a.length-d,null,e.composing?"*compose":null);1000<b.length||-1<b.indexOf("\n")?g.value=e.prevInput="":e.prevInput=b;e.composing&&(e.composing.range.clear(),e.composing.range=f.markText(e.composing.start,f.getCursor("to"),{className:"CodeMirror-composing"}))});return !0},ensurePolled:function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},onKeyPress:function(){cd&&9<=da&&(this.hasSelection=null);this.fastPoll()},onContextMenu:function(c){function d(){if(null!=i.selectionStart){var m=g.somethingSelected(),n=""+(m?i.value:"");i.value="⇚";i.value=n;f.prevInput=m?"":"";i.selectionStart=1;i.selectionEnd=n.length;h.selForContextMenu=g.doc.sel}}function e(){f.contextMenuPending=!1;f.wrapper.style.position="relative";i.style.cssText=l;cd&&9>da&&h.scrollbars.setScrollTop(h.scroller.scrollTop=k);if(null!=i.selectionStart){(!cd||cd&&9>da)&&d();var n=0,m=function(){h.selForContextMenu==g.doc.sel&&0==i.selectionStart&&0<i.selectionEnd&&""==f.prevInput?eg(g,h6.selectAll)(g):10>n++?h.detectingSelectAll=setTimeout(m,500):h.input.reset()};h.detectingSelectAll=setTimeout(m,200)}}var f=this,g=f.cm,h=g.display,i=f.textarea,j=jc(g,c),k=h.scroller.scrollTop;if(j&&!cf){g.options.resetSelectionOnContextMenu&&-1==g.doc.sel.contains(j)&&eg(g,fe)(g.doc,iw(j),hl);var l=i.style.cssText;f.wrapper.style.position="absolute";i.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(c.clientY-5)+"px; left: "+(c.clientX-5)+"px; z-index: 1000; background: "+(cd?"rgba(255, 255, 255, .05)":"transparent")+"; outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity\x3d5);";if(fx){var a=window.scrollY}h.input.focus();fx&&window.scrollTo(null,a);h.input.reset();g.somethingSelected()||(i.value=f.prevInput=" ");f.contextMenuPending=!0;h.selForContextMenu=g.doc.sel;clearTimeout(h.detectingSelectAll);cd&&9<=da&&d();if(h8){gu(c);var b=function(){gY(window,"mouseup",b);setTimeout(e,20)};hy(window,"mouseup",b)}else{setTimeout(e,50)}}},setUneditable:jP,needsContentAttribute:!1},iQ.prototype);jf.prototype=Z({init:function(c){function d(f){if(b.somethingSelected()){ab=b.getSelections(),"cut"==f.type&&b.replaceSelection("",null,"cut")}else{if(b.options.lineWiseCopyCut){var g=h0(b);ab=g.text;"cut"==f.type&&b.operation(function(){b.setSelections(g.ranges,0,hl);b.replaceSelection("",null,"cut")})}else{return}}if(f.clipboardData&&!ig){f.preventDefault(),f.clipboardData.clearData(),f.clipboardData.setData("text/plain",ab.join("\n"))}else{var h=jU();f=h.firstChild;b.display.lineSpace.insertBefore(h,b.display.lineSpace.firstChild);f.value=ab.join("\n");var e=document.activeElement;i4(f);setTimeout(function(){b.display.lineSpace.removeChild(h);e.focus()},50)}}var a=this,b=a.cm;c=a.div=c.lineDiv;c.contentEditable="true";jl(c);hy(c,"paste",function(e){var f=e.clipboardData&&e.clipboardData.getData("text/plain");f&&(e.preventDefault(),b.replaceSelection(f,null,"paste"))});hy(c,"compositionstart",function(f){f=f.data;a.composing={sel:b.doc.sel,data:f,startData:f};if(f){var g=b.doc.sel.primary(),e=b.getLine(g.head.line).indexOf(f,Math.max(0,g.head.ch-f.length));-1<e&&e<=g.head.ch&&(a.composing.sel=iw(ho(g.head.line,e),ho(g.head.line,e+f.length)))}});hy(c,"compositionupdate",function(e){a.composing.data=e.data});hy(c,"compositionend",function(e){var f=a.composing;f&&(e.data==f.startData||/\u200b/.test(e.data)||(f.data=e.data),setTimeout(function(){f.handled||a.applyComposition(f);a.composing==f&&(a.composing=null)},50))});hy(c,"touchstart",function(){a.forceCompositionEnd()});hy(c,"input",function(){a.composing||a.pollContent()||X(a.cm,function(){ge(b)})});hy(c,"copy",d);hy(c,"cut",d)},prepareSelection:function(){var a=hA(this.cm,!1);a.focus=this.cm.state.focused;return a},showSelection:function(a){a&&this.cm.display.view.length&&(a.focus&&this.showPrimarySelection(),this.showMultipleSelections(a))},showPrimarySelection:function(){var f=window.getSelection(),g=this.cm.doc.sel.primary(),a=iP(this.cm,f.anchorNode,f.anchorOffset),b=iP(this.cm,f.focusNode,f.focusOffset);if(!a||a.bad||!b||b.bad||0!=hJ(ii(a,b),g.from())||0!=hJ(hN(a,b),g.to())){if(a=io(this.cm,g.from()),b=io(this.cm,g.to()),a||b){var c=this.cm.display.view,g=f.rangeCount&&f.getRangeAt(0);a?b||(b=c[c.length-1].measure,b=b.maps?b.maps[b.maps.length-1]:b.map,b={node:b[b.length-1],offset:b[b.length-2]-b[b.length-3]}):a={node:c[0].measure.map[2],offset:0};try{var d=jK(a.node,a.offset,b.offset,b.node)}catch(e){}d&&(f.removeAllRanges(),f.addRange(d),g&&null==f.anchorNode?f.addRange(g):jZ&&this.startGracePeriod());this.rememberSelection()}}},startGracePeriod:function(){var a=this;clearTimeout(this.gracePeriod);this.gracePeriod=setTimeout(function(){a.gracePeriod=!1;a.selectionChanged()&&a.cm.operation(function(){a.cm.curOp.selectionChanged=!0})},20)},showMultipleSelections:function(a){Y(this.cm.display.cursorDiv,a.cursors);Y(this.cm.display.selectionDiv,a.selection)},rememberSelection:function(){var a=window.getSelection();this.lastAnchorNode=a.anchorNode;this.lastAnchorOffset=a.anchorOffset;this.lastFocusNode=a.focusNode;this.lastFocusOffset=a.focusOffset},selectionInEditor:function(){var a=window.getSelection();if(!a.rangeCount){return !1}a=a.getRangeAt(0).commonAncestorContainer;return jk(this.div,a)},focus:function(){"nocursor"!=this.cm.options.readOnly&&this.div.focus()},blur:function(){this.div.blur()},getField:function(){return this.div},supportsTouch:function(){return !0},receivedFocus:function(){function a(){b.cm.state.focused&&(b.pollSelection(),b.polling.set(b.cm.options.pollInterval,a))}var b=this;this.selectionInEditor()?this.pollSelection():X(this.cm,function(){b.cm.curOp.selectionChanged=!0});this.polling.set(this.cm.options.pollInterval,a)},selectionChanged:function(){var a=window.getSelection();return a.anchorNode!=this.lastAnchorNode||a.anchorOffset!=this.lastAnchorOffset||a.focusNode!=this.lastFocusNode||a.focusOffset!=this.lastFocusOffset},pollSelection:function(){if(!this.composing&&!this.gracePeriod&&this.selectionChanged()){var c=window.getSelection(),d=this.cm;this.rememberSelection();var a=iP(d,c.anchorNode,c.anchorOffset),b=iP(d,c.focusNode,c.focusOffset);a&&b&&X(d,function(){fe(d.doc,iw(a,b),hl);if(a.bad||b.bad){d.curOp.selectionChanged=!0}})}},pollContent:function(){var c=this.cm,d=c.display,e=c.doc.sel.primary(),f=e.from(),e=e.to();if(f.line<d.viewFrom||e.line>d.viewTo-1){return !1}var g;f.line==d.viewFrom||0==(g=kw(c,f.line))?(f=ea(d.view[0].line),g=d.view[0].node):(f=ea(d.view[g].line),g=d.view[g-1].node.nextSibling);var h=kw(c,e.line);h==d.view.length-1?(e=d.viewTo-1,d=d.view[h].node):(e=ea(d.view[h+1].line)-1,d=d.view[h+1].node.previousSibling);d=v(id(c,g,d,f,e));for(g=kI(c.doc,ho(f,0),ho(e,hx(c.doc,e).text.length));1<d.length&&1<g.length;){if(cb(d)==cb(g)){d.pop(),g.pop(),e--}else{if(d[0]==g[0]){d.shift(),g.shift(),f++}else{break}}}for(var i=0,h=0,j=d[0],a=g[0],b=Math.min(j.length,a.length);i<b&&j.charCodeAt(i)==a.charCodeAt(i);){++i}j=cb(d);a=cb(g);for(b=Math.min(j.length-(1==d.length?i:0),a.length-(1==g.length?i:0));h<b&&j.charCodeAt(j.length-h-1)==a.charCodeAt(a.length-h-1);){++h}d[d.length-1]=j.slice(0,j.length-h);d[0]=d[0].slice(i);f=ho(f,i);e=ho(e,g.length?cb(g).length-h:0);if(1<d.length||d[0]||hJ(f,e)){return j1(c.doc,d,f,e,"+input"),!0}},ensurePolled:function(){this.forceCompositionEnd()},reset:function(){this.forceCompositionEnd()},forceCompositionEnd:function(){this.composing&&!this.composing.handled&&(this.applyComposition(this.composing),this.composing.handled=!0,this.div.blur(),this.div.focus())},applyComposition:function(a){a.data&&a.data!=a.startData&&eg(this.cm,jJ)(this.cm,a.data,0,a.sel)},setUneditable:function(a){a.setAttribute("contenteditable","false")},onKeyPress:function(a){a.preventDefault();eg(this.cm,jJ)(this.cm,String.fromCharCode(null==a.charCode?a.keyCode:a.charCode),0)},onContextMenu:jP,resetPosition:jP,needsContentAttribute:!0},jf.prototype);hn.inputStyles={textarea:iQ,contenteditable:jf};ip.prototype={primary:function(){return this.ranges[this.primIndex]},equals:function(c){if(c==this){return !0}if(c.primIndex!=this.primIndex||c.ranges.length!=this.ranges.length){return !1}for(var d=0;d<this.ranges.length;d++){var a=this.ranges[d],b=c.ranges[d];if(0!=hJ(a.anchor,b.anchor)||0!=hJ(a.head,b.head)){return !1}}return !0},deepCopy:function(){for(var a=[],b=0;b<this.ranges.length;b++){a[b]=new gm(gQ(this.ranges[b].anchor),gQ(this.ranges[b].head))}return new ip(a,this.primIndex)},somethingSelected:function(){for(var a=0;a<this.ranges.length;a++){if(!this.ranges[a].empty()){return !0}}return !1},contains:function(c,d){d||(d=c);for(var a=0;a<this.ranges.length;a++){var b=this.ranges[a];if(0<=hJ(d,b.from())&&0>=hJ(c,b.to())){return a}}return -1}};gm.prototype={from:function(){return ii(this.anchor,this.head)},to:function(){return hN(this.anchor,this.head)},empty:function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch}};var T={left:0,right:0,top:0,bottom:0},hI,iL=null,hZ=0,dd,g6,z=0,iC=0,gf=null;cd?gf=-0.53:jZ?gf=15:jA?gf=-0.7:kt&&(gf=-1/3);var gC=function(b){var c=b.wheelDeltaX,a=b.wheelDeltaY;null==c&&b.detail&&b.axis==b.HORIZONTAL_AXIS&&(c=b.detail);null==a&&b.detail&&b.axis==b.VERTICAL_AXIS?a=b.detail:null==a&&(a=b.wheelDelta);return{x:c,y:a}};hn.wheelEventPixels=function(a){a=gC(a);a.x*=gf;a.y*=gf;return a};var gj=new dc,i6=null,kk=hn.changeEnd=function(a){return a.text?ho(a.from.line+a.text.length-1,cb(a.text).length+(1==a.text.length?a.from.ch:0)):a.to};hn.prototype={constructor:hn,focus:function(){window.focus();this.display.input.focus()},setOption:function(c,d){var a=this.options,b=a[c];if(a[c]!=d||"mode"==c){a[c]=d,gh.hasOwnProperty(c)&&eg(this,gh[c])(this,d,b)}},getOption:function(a){return this.options[a]},getDoc:function(){return this.doc},addKeyMap:function(a,b){this.state.keyMaps[b?"push":"unshift"](jz(a))},removeKeyMap:function(b){for(var c=this.state.keyMaps,a=0;a<c.length;++a){if(c[a]==b||c[a].name==b){return c.splice(a,1),!0}}},addOverlay:ga(function(b,c){var a=b.token?b:hn.getMode(this.options,b);if(a.startState){throw Error("Overlays may not be stateful.")}this.state.overlays.push({mode:a,modeSpec:b,opaque:c&&c.opaque});this.state.modeGen++;ge(this)}),removeOverlay:ga(function(c){for(var d=this.state.overlays,a=0;a<d.length;++a){var b=d[a].modeSpec;if(b==c||"string"==typeof c&&b.name==c){d.splice(a,1);this.state.modeGen++;ge(this);break}}}),indentLine:ga(function(b,c,a){"string"!=typeof c&&"number"!=typeof c&&(c=null==c?this.options.smartIndent?"smart":"prev":c?"add":"subtract");j2(this.doc,b)&&jx(this,b,c,a)}),indentSelection:ga(function(f){for(var g=this.doc.sel.ranges,a=-1,b=0;b<g.length;b++){var c=g[b];if(c.empty()){c.head.line>a&&(jx(this,c.head.line,f,!0),a=c.head.line,b==this.doc.sel.primIndex&&hK(this))}else{for(var d=c.from(),c=c.to(),e=Math.max(a,d.line),a=Math.min(this.lastLine(),c.line-(c.ch?0:1))+1,c=e;c<a;++c){jx(this,c,f)}c=this.doc.sel.ranges;0==d.ch&&g.length==c.length&&0<c[b].from().ch&&jS(this.doc,b,new gm(d,c[b].to()),hl)}}}),getTokenAt:function(a,b){return iq(this,a,b)},getLineTokens:function(a,b){return iq(this,ho(a),b,!0)},getTokenTypeAt:function(d){d=hC(this.doc,d);var e=hL(this,hx(this.doc,d.line)),a=0,b=(e.length-1)/2;d=d.ch;if(0==d){e=e[2]}else{for(;;){var c=a+b>>1;if((c?e[2*c-1]:0)>=d){b=c}else{if(e[2*c+1]<d){a=c+1}else{e=e[2*c+2];break}}}}a=e?e.indexOf("cm-overlay "):-1;return 0>a?e:0==a?null:e.slice(0,a-1)},getModeAt:function(a){var b=this.doc.mode;return b.innerMode?hn.innerMode(b,this.getTokenAt(a).state).mode:b},getHelper:function(a,b){return this.getHelpers(a,b)[0]},getHelpers:function(f,g){var a=[];if(!hu.hasOwnProperty(g)){return a}var b=hu[g],c=this.getModeAt(f);if("string"==typeof c[g]){b[c[g]]&&a.push(b[c[g]])}else{if(c[g]){for(var d=0;d<c[g].length;d++){var e=b[c[g][d]];e&&a.push(e)}}else{c.helperType&&b[c.helperType]?a.push(b[c.helperType]):b[c.name]&&a.push(b[c.name])}}for(d=0;d<b._global.length;d++){e=b._global[d],e.pred(c,this)&&-1==de(a,e.val)&&a.push(e.val)}return a},getStateAfter:function(b,c){var a=this.doc;b=Math.max(a.first,Math.min(null==b?a.first+a.size-1:b,a.first+a.size-1));return w(this,b+1,c)},cursorCoords:function(b,c){var a;a=this.doc.sel.primary();a=null==b?a.head:"object"==typeof b?hC(this.doc,b):b?a.from():a.to();return i1(this,a,c||"page")},charCoords:function(a,b){return j9(this,hC(this.doc,a),b||"page")},coordsChar:function(a,b){a=hm(this,a,b||"page");return df(this,a.left,a.top)},lineAtHeight:function(a,b){a=hm(this,{top:a,left:0},b||"page").top;return ka(this.doc,a+this.display.viewOffset)},heightAtLine:function(c,d){var a=!1,b;"number"==typeof c?(b=this.doc.first+this.doc.size-1,c<this.doc.first?c=this.doc.first:c>b&&(c=b,a=!0),b=hx(this.doc,c)):b=c;return a6(this,b,{top:0,left:0},d||"page").top+(a?this.doc.height-g4(b):0)},defaultTextHeight:function(){return h1(this.display)},defaultCharWidth:function(){return iy(this.display)},setGutterMarker:ga(function(b,c,a){return hf(this.doc,b,"gutter",function(e){var d=e.gutterMarkers||(e.gutterMarkers={});d[c]=a;!a&&hD(d)&&(e.gutterMarkers=null);return !0})}),clearGutter:ga(function(c){var d=this,a=d.doc,b=a.first;a.iter(function(e){e.gutterMarkers&&e.gutterMarkers[c]&&(e.gutterMarkers[c]=null,hb(d,b,"gutter"),hD(e.gutterMarkers)&&(e.gutterMarkers=null));++b})}),lineInfo:function(a){if("number"==typeof a){if(!j2(this.doc,a)){return null}var b=a;a=hx(this.doc,a);if(!a){return null}}else{if(b=ea(a),null==b){return null}}return{line:b,handle:a,text:a.text,gutterMarkers:a.gutterMarkers,textClass:a.textClass,bgClass:a.bgClass,wrapClass:a.wrapClass,widgets:a.widgets}},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(c,d,e,f,g){var h=this.display;c=i1(this,hC(this.doc,c));var i=c.bottom,j=c.left;d.style.position="absolute";d.setAttribute("cm-ignore-events","true");this.display.input.setUneditable(d);h.sizer.appendChild(d);if("over"==f){i=c.top}else{if("above"==f||"near"==f){var a=Math.max(h.wrapper.clientHeight,this.doc.height),b=Math.max(h.sizer.clientWidth,h.lineSpace.clientWidth);("above"==f||c.bottom+d.offsetHeight>a)&&c.top>d.offsetHeight?i=c.top-d.offsetHeight:c.bottom+d.offsetHeight<=a&&(i=c.bottom);j+d.offsetWidth>b&&(j=b-d.offsetWidth)}}d.style.top=i+"px";d.style.left=d.style.right="";"right"==g?(j=h.sizer.clientWidth-d.offsetWidth,d.style.right="0px"):("left"==g?j=0:"middle"==g&&(j=(h.sizer.clientWidth-d.offsetWidth)/2),d.style.left=j+"px");e&&(c=a5(this,j,i,j+d.offsetWidth,i+d.offsetHeight),null!=c.scrollTop&&ir(this,c.scrollTop),null!=c.scrollLeft&&bb(this,c.scrollLeft))},triggerOnKeyDown:ga(jE),triggerOnKeyPress:ga(hv),triggerOnKeyUp:kG,execCommand:function(a){if(h6.hasOwnProperty(a)){return h6[a](this)}},findPosH:function(e,f,a,b){var c=1;0>f&&(c=-1,f=-f);var d=0;for(e=hC(this.doc,e);d<f&&(e=iE(this.doc,e,c,a,b),!e.hitSide);++d){}return e},moveH:ga(function(b,c){var a=this;a.extendSelectionsBy(function(d){return a.display.shift||a.doc.extend||d.empty()?iE(a.doc,d.head,b,c,a.options.rtlMoveVisually):0>b?d.from():d.to()},ih)}),deleteH:ga(function(b,c){var a=this.doc;this.doc.sel.somethingSelected()?a.replaceSelection("",null,"+delete"):hR(this,function(d){var e=iE(a,d.head,b,c,!1);return 0>b?{from:e,to:d.head}:{from:d.head,to:e}})}),findPosV:function(e,f,a,b){var c=1;0>f&&(c=-1,f=-f);var d=0;for(e=hC(this.doc,e);d<f&&(e=i1(this,e,"div"),null==b?b=e.left:e.left=b,e=hX(this,e,c,a),!e.hitSide);++d){}return e},moveV:ga(function(f,g){var a=this,b=this.doc,c=[],d=!a.display.shift&&!b.extend&&b.sel.somethingSelected();b.extendSelectionsBy(function(h){if(d){return 0>f?h.from():h.to()}var i=i1(a,h.head,"div");null!=h.goalColumn&&(i.left=h.goalColumn);c.push(i.left);var j=hX(a,i,f,g);"page"==g&&h==b.sel.primary()&&ix(a,null,j9(a,j,"div").top-i.top);return j},ih);if(c.length){for(var e=0;e<b.sel.ranges.length;e++){b.sel.ranges[e].goalColumn=c[e]}}}),findWordAt:function(e){var f=hx(this.doc,e.line).text,a=e.ch,b=e.ch;if(f){var c=this.getHelper(e,"wordChars");(0>e.xRel||b==f.length)&&a?--a:++b;for(var d=f.charAt(a),d=kj(d,c)?function(g){return kj(g,c)}:/\s/.test(d)?function(g){return/\s/.test(g)}:function(g){return !/\s/.test(g)&&!kj(g)};0<a&&d(f.charAt(a-1));){--a}for(;b<f.length&&d(f.charAt(b));){++b}}return new gm(ho(e.line,a),ho(e.line,b))},toggleOverwrite:function(a){if(null==a||a!=this.state.overwrite){(this.state.overwrite=!this.state.overwrite)?i2(this.display.cursorDiv,"CodeMirror-overwrite"):g0(this.display.cursorDiv,"CodeMirror-overwrite"),fy(this,"overwriteToggle",this,this.state.overwrite)}},hasFocus:function(){return this.display.input.getField()==cg()},scrollTo:ga(function(a,b){null==a&&null==b||i5(this);null!=a&&(this.curOp.scrollLeft=a);null!=b&&(this.curOp.scrollTop=b)}),getScrollInfo:function(){var a=this.display.scroller;return{left:a.scrollLeft,top:a.scrollTop,height:a.scrollHeight-gD(this)-this.display.barHeight,width:a.scrollWidth-gD(this)-this.display.barWidth,clientHeight:fd(this),clientWidth:jv(this)}},scrollIntoView:ga(function(b,c){null==b?(b={from:this.doc.sel.primary().head,to:null},null==c&&(c=this.options.cursorScrollMargin)):"number"==typeof b?b={from:ho(b,0),to:null}:null==b.from&&(b={from:b,to:null});b.to||(b.to=b.from);b.margin=c||0;if(null!=b.from.line){i5(this),this.curOp.scrollToPos=b}else{var a=a5(this,Math.min(b.from.left,b.to.left),Math.min(b.from.top,b.to.top)-b.margin,Math.max(b.from.right,b.to.right),Math.max(b.from.bottom,b.to.bottom)+b.margin);this.scrollTo(a.scrollLeft,a.scrollTop)}}),setSize:ga(function(d,e){function a(f){return"number"==typeof f||/^\d+$/.test(String(f))?f+"px":f}var b=this;null!=d&&(b.display.wrapper.style.width=a(d));null!=e&&(b.display.wrapper.style.height=a(e));b.options.lineWrapping&&i9(this);var c=b.display.viewFrom;b.doc.iter(c,b.display.viewTo,function(f){if(f.widgets){for(var g=0;g<f.widgets.length;g++){if(f.widgets[g].noHScroll){hb(b,c,"widget");break}}}++c});b.curOp.forceUpdate=!0;fy(b,"refresh",this)}),operation:function(a){return X(this,a)},refresh:ga(function(){var a=this.display.cachedTextHeight;ge(this);this.curOp.forceUpdate=!0;hp(this);this.scrollTo(this.doc.scrollLeft,this.doc.scrollTop);ky(this);(null==a||0.5<Math.abs(a-h1(this.display)))&&iW(this);fy(this,"refresh",this)}),swapDoc:ga(function(a){var b=this.doc;b.cm=null;jT(this,a);hp(this);this.display.input.reset();this.scrollTo(a.scrollLeft,a.scrollTop);this.curOp.forceScroll=!0;fz(this,"swapDoc",this,b);return b}),getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}};j8(hn);var j6=hn.defaults={},gh=hn.optionHandlers={},hS=hn.Init={toString:function(){return"CodeMirror.Init"}};hG("value","",function(a,b){a.setValue(b)},!0);hG("mode",null,function(a,b){a.doc.modeOption=b;gv(a)},!0);hG("indentUnit",2,gv,!0);hG("indentWithTabs",!1);hG("smartIndent",!0);hG("tabSize",4,function(a){g5(a);hp(a);ge(a)},!0);hG("specialChars",/[\t\u0000-\u0019\u00ad\u200b-\u200f\u2028\u2029\ufeff]/g,function(b,c,a){b.state.specialChars=new RegExp(c.source+(c.test("\t")?"":"|\t"),"g");a!=hn.Init&&b.refresh()});hG("specialCharPlaceholder",function(a){var b=ht("span","•","cm-invalidchar");b.title="\\u"+a.charCodeAt(0).toString(16);b.setAttribute("aria-label",b.title);return b},function(a){a.refresh()},!0);hG("electricChars",!0);hG("inputStyle",R?"contenteditable":"textarea",function(){throw Error("inputStyle can not (yet) be changed in a running editor")},!0);hG("rtlMoveVisually",!jb);hG("wholeLineUpdateBefore",!0);hG("theme","default",function(a){kf(a);h5(a)},!0);hG("keyMap","default",function(b,c,a){c=jz(c);(a=a!=hn.Init&&jz(a))&&a.detach&&a.detach(b,c);c.attach&&c.attach(b,a||null)});hG("extraKeys",null);hG("lineWrapping",!1,function(a){a.options.lineWrapping?(i2(a.display.wrapper,"CodeMirror-wrap"),a.display.sizer.style.minWidth="",a.display.sizerWidth=null):(g0(a.display.wrapper,"CodeMirror-wrap"),ji(a));iW(a);ge(a);hp(a);setTimeout(function(){fa(a)},100)},!0);hG("gutters",[],function(a){i8(a.options);h5(a)},!0);hG("fixedGutter",!0,function(a,b){a.display.gutters.style.left=b?gO(a.display)+"px":"0";a.refresh()},!0);hG("coverGutterNextToScrollbar",!1,function(a){fa(a)},!0);hG("scrollbarStyle","native",function(a){kz(a);fa(a);a.display.scrollbars.setScrollTop(a.doc.scrollTop);a.display.scrollbars.setScrollLeft(a.doc.scrollLeft)},!0);hG("lineNumbers",!1,function(a){i8(a.options);h5(a)},!0);hG("firstLineNumber",1,h5,!0);hG("lineNumberFormatter",function(a){return a},h5,!0);hG("showCursorWhenSelecting",!1,hd,!0);hG("resetSelectionOnContextMenu",!0);hG("lineWiseCopyCut",!0);hG("readOnly",!1,function(a,b){"nocursor"==b?(gG(a),a.display.input.blur(),a.display.disabled=!0):(a.display.disabled=!1,b||a.display.input.reset())});hG("disableInput",!1,function(a,b){b||a.display.input.reset()},!0);hG("dragDrop",!0,function(b,c,a){!c!=!(a&&a!=hn.Init)&&(a=b.display.dragFunctions,c=c?hy:gY,c(b.display.scroller,"dragstart",a.start),c(b.display.scroller,"dragenter",a.simple),c(b.display.scroller,"dragover",a.simple),c(b.display.scroller,"drop",a.drop))});hG("cursorBlinkRate",530);hG("cursorScrollMargin",0);hG("cursorHeight",1,hd,!0);hG("singleCursorHeightPerLine",!0,hd,!0);hG("workTime",100);hG("workDelay",100);hG("flattenSpans",!0,g5,!0);hG("addModeClass",!1,g5,!0);hG("pollInterval",100);hG("undoDepth",200,function(a,b){a.doc.history.undoDepth=b});hG("historyEventDelay",1250);hG("viewportMargin",10,function(a){a.refresh()},!0);hG("maxHighlightLength",10000,g5,!0);hG("moveInputWithCursor",!0,function(a,b){b||a.display.input.resetPosition()});hG("tabindex",null,function(a,b){a.display.input.getField().tabIndex=b||""});hG("autofocus",null);var jH=hn.modes={},L=hn.mimeModes={};hn.defineMode=function(a,b){hn.defaults.mode||"null"==a||(hn.defaults.mode=a);2<arguments.length&&(b.dependencies=Array.prototype.slice.call(arguments,2));jH[a]=b};hn.defineMIME=function(a,b){L[a]=b};hn.resolveMode=function(a){if("string"==typeof a&&L.hasOwnProperty(a)){a=L[a]}else{if(a&&"string"==typeof a.name&&L.hasOwnProperty(a.name)){var b=L[a.name];"string"==typeof b&&(b={name:b});a=ed(b,a);a.name=b.name}else{if("string"==typeof a&&/^[\w\-]+\/[\w\-]+\+xml$/.test(a)){return hn.resolveMode("application/xml")}}}return"string"==typeof a?{name:a}:a||{name:"null"}};hn.getMode=function(d,e){e=hn.resolveMode(e);var a=jH[e.name];if(!a){return hn.getMode(d,"text/plain")}a=a(d,e);if(gL.hasOwnProperty(e.name)){var b=gL[e.name],c;for(c in b){b.hasOwnProperty(c)&&(a.hasOwnProperty(c)&&(a["_"+c]=a[c]),a[c]=b[c])}}a.name=e.name;e.helperType&&(a.helperType=e.helperType);if(e.modeProps){for(c in e.modeProps){a[c]=e.modeProps[c]}}return a};hn.defineMode("null",function(){return{token:function(a){a.skipToEnd()}}});hn.defineMIME("text/plain","null");var gL=hn.modeExtensions={};hn.extendMode=function(b,c){var a=gL.hasOwnProperty(b)?gL[b]:gL[b]={};Z(c,a)};hn.defineExtension=function(a,b){hn.prototype[a]=b};hn.defineDocExtension=function(a,b){gd.prototype[a]=b};hn.defineOption=hG;var F=[];hn.defineInitHook=function(a){F.push(a)};var hu=hn.helpers={};hn.registerHelper=function(b,c,a){hu.hasOwnProperty(b)||(hu[b]=hn[b]={_global:[]});hu[b][c]=a};hn.registerGlobalHelper=function(c,d,a,b){hn.registerHelper(c,d,b);hu[c]._global.push({pred:a,val:b})};var jC=hn.copyState=function(d,e){if(!0===e){return e}if(d.copyState){return d.copyState(e)}var a={},b;for(b in e){var c=e[b];c instanceof Array&&(c=c.concat([]));a[b]=c}return a},jn=hn.startState=function(b,c,a){return b.startState?b.startState(c,a):!0};hn.innerMode=function(b,c){for(;b.innerMode;){var a=b.innerMode(c);if(!a||a.mode==b){break}c=a.state;b=a.mode}return a||{mode:b,state:c}};var h6=hn.commands={selectAll:function(a){a.setSelection(ho(a.firstLine(),0),ho(a.lastLine()),hl)},singleSelection:function(a){a.setSelection(a.getCursor("anchor"),a.getCursor("head"),hl)},killLine:function(a){hR(a,function(c){if(c.empty()){var b=hx(a.doc,c.head.line).text.length;return c.head.ch==b&&c.head.line<a.lastLine()?{from:c.head,to:ho(c.head.line+1,0)}:{from:c.head,to:ho(c.head.line,b)}}return{from:c.from(),to:c.to()}})},deleteLine:function(a){hR(a,function(b){return{from:ho(b.from().line,0),to:hC(a.doc,ho(b.to().line+1,0))}})},delLineLeft:function(a){hR(a,function(b){return{from:ho(b.from().line,0),to:b.from()}})},delWrappedLineLeft:function(a){hR(a,function(c){var b=a.charCoords(c.head,"div").top+5;return{from:a.coordsChar({left:0,top:b},"div"),to:c.from()}})},delWrappedLineRight:function(a){hR(a,function(c){var b=a.charCoords(c.head,"div").top+5,b=a.coordsChar({left:a.display.lineDiv.offsetWidth+100,top:b},"div");return{from:c.from(),to:b}})},undo:function(a){a.undo()},redo:function(a){a.redo()},undoSelection:function(a){a.undoSelection()},redoSelection:function(a){a.redoSelection()},goDocStart:function(a){a.extendSelection(ho(a.firstLine(),0))},goDocEnd:function(a){a.extendSelection(ho(a.lastLine()))},goLineStart:function(a){a.extendSelectionsBy(function(b){return jy(a,b.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(a){a.extendSelectionsBy(function(b){return iF(a,b.head)},{origin:"+move",bias:1})},goLineEnd:function(a){a.extendSelectionsBy(function(d){d=d.head.line;for(var b,c=hx(a.doc,d);b=iS(c,!1);){c=b.find(1,!0).line,d=null}b=(b=ac(c))?b[0].level%2?S(c):dg(c):c.text.length;return ho(null==d?ea(c):d,b)},{origin:"+move",bias:-1})},goLineRight:function(a){a.extendSelectionsBy(function(b){b=a.charCoords(b.head,"div").top+5;return a.coordsChar({left:a.display.lineDiv.offsetWidth+100,top:b},"div")},ih)},goLineLeft:function(a){a.extendSelectionsBy(function(b){b=a.charCoords(b.head,"div").top+5;return a.coordsChar({left:0,top:b},"div")},ih)},goLineLeftSmart:function(a){a.extendSelectionsBy(function(c){var b=a.charCoords(c.head,"div").top+5,b=a.coordsChar({left:0,top:b},"div");return b.ch<a.getLine(b.line).search(/\S/)?iF(a,c.head):b},ih)},goLineUp:function(a){a.moveV(-1,"line")},goLineDown:function(a){a.moveV(1,"line")},goPageUp:function(a){a.moveV(-1,"page")},goPageDown:function(a){a.moveV(1,"page")},goCharLeft:function(a){a.moveH(-1,"char")},goCharRight:function(a){a.moveH(1,"char")},goColumnLeft:function(a){a.moveH(-1,"column")},goColumnRight:function(a){a.moveH(1,"column")},goWordLeft:function(a){a.moveH(-1,"word")},goGroupRight:function(a){a.moveH(1,"group")},goGroupLeft:function(a){a.moveH(-1,"group")},goWordRight:function(a){a.moveH(1,"word")},delCharBefore:function(a){a.deleteH(-1,"char")},delCharAfter:function(a){a.deleteH(1,"char")},delWordBefore:function(a){a.deleteH(-1,"word")},delWordAfter:function(a){a.deleteH(1,"word")},delGroupBefore:function(a){a.deleteH(-1,"group")},delGroupAfter:function(a){a.deleteH(1,"group")},indentAuto:function(a){a.indentSelection("smart")},indentMore:function(a){a.indentSelection("add")},indentLess:function(a){a.indentSelection("subtract")},insertTab:function(a){a.replaceSelection("\t")},insertSoftTab:function(e){for(var f=[],a=e.listSelections(),b=e.options.tabSize,c=0;c<a.length;c++){var d=a[c].from(),d=Q(e.getLine(d.line),d.ch,b);f.push(Array(b-d%b+1).join(" "))}e.replaceSelections(f)},defaultTab:function(a){a.somethingSelected()?a.indentSelection("add"):a.execCommand("insertTab")},transposeChars:function(a){X(a,function(){for(var g=a.listSelections(),b=[],c=0;c<g.length;c++){var d=g[c].head,e=hx(a.doc,d.line).text;if(e){if(d.ch==e.length&&(d=new ho(d.line,d.ch-1)),0<d.ch){d=new ho(d.line,d.ch+1),a.replaceRange(e.charAt(d.ch-1)+e.charAt(d.ch-2),ho(d.line,d.ch-2),d,"+transpose")}else{if(d.line>a.doc.first){var f=hx(a.doc,d.line-1).text;f&&a.replaceRange(e.charAt(0)+"\n"+f.charAt(f.length-1),ho(d.line-1,f.length-1),ho(d.line,1),"+transpose")}}}b.push(new gm(d,d))}a.setSelections(b)})},newlineAndIndent:function(a){X(a,function(){for(var d=a.listSelections().length,b=0;b<d;b++){var c=a.listSelections()[b];a.replaceRange("\n",c.anchor,c.head,"+input");a.indentLine(c.from().line+1,null,!0);hK(a)}})},toggleOverwrite:function(a){a.toggleOverwrite()}},kC=hn.keyMap={};kC.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"};kC.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"};kC.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars"};kC.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]};kC["default"]=aa?kC.macDefault:kC.pcDefault;hn.normalizeKeyMap=function(c){var d={},e;for(e in c){if(c.hasOwnProperty(e)){var f=c[e];if(!/^(name|fallthrough|(de|at)tach)$/.test(e)){if("..."!=f){for(var g=kh(e.split(" "),js),h=0;h<g.length;h++){var i,j;h==g.length-1?(j=e,i=f):(j=g.slice(0,h+1).join(" "),i="...");var a=d[j];if(!a){d[j]=i}else{if(a!=i){throw Error("Inconsistent bindings for "+j)}}}}delete c[e]}}}for(var b in d){c[b]=d[b]}return c};var h4=hn.lookupKey=function(e,f,a,b){f=jz(f);var c=f.call?f.call(e,b):f[e];if(!1===c){return"nothing"}if("..."===c){return"multi"}if(null!=c&&a(c)){return"handled"}if(f.fallthrough){if("[object Array]"!=Object.prototype.toString.call(f.fallthrough)){return h4(e,f.fallthrough,a,b)}for(c=0;c<f.fallthrough.length;c++){var d=h4(e,f.fallthrough[c],a,b);if(d){return d}}}},hY=hn.isModifierKey=function(a){a="string"==typeof a?a:jq[a.keyCode];return"Ctrl"==a||"Alt"==a||"Shift"==a||"Mod"==a},gW=hn.keyName=function(c,d){if(cf&&34==c.keyCode&&c["char"]){return !1}var a=jq[c.keyCode],b=a;if(null==b||c.altGraphKey){return !1}c.altKey&&"Alt"!=a&&(b="Alt-"+b);(kp?c.metaKey:c.ctrlKey)&&"Ctrl"!=a&&(b="Ctrl-"+b);(kp?c.ctrlKey:c.metaKey)&&"Cmd"!=a&&(b="Cmd-"+b);!d&&c.shiftKey&&"Shift"!=a&&(b="Shift-"+b);return b};hn.fromTextArea=function(c,d){function e(){c.value=b.getValue()}d=d?Z(d):{};d.value=c.value;!d.tabindex&&c.tabIndex&&(d.tabindex=c.tabIndex);!d.placeholder&&c.placeholder&&(d.placeholder=c.placeholder);if(null==d.autofocus){var f=cg();d.autofocus=f==c||null!=c.getAttribute("autofocus")&&f==document.body}if(c.form&&(hy(c.form,"submit",e),!d.leaveSubmitMethodAlone)){var g=c.form,h=g.submit;try{var i=g.submit=function(){e();g.submit=h;g.submit();g.submit=i}}catch(a){}}d.finishInit=function(j){j.save=e;j.getTextArea=function(){return c};j.toTextArea=function(){j.toTextArea=isNaN;e();c.parentNode.removeChild(j.getWrapperElement());c.style.display="";c.form&&(gY(c.form,"submit",e),"function"==typeof c.form.submit&&(c.form.submit=h))}};c.style.display="none";var b=hn(function(j){c.parentNode.insertBefore(j,c.nextSibling)},d);return b};var ko=hn.StringStream=function(a,b){this.pos=this.start=0;this.string=a;this.tabSize=b||8;this.lineStart=this.lastColumnPos=this.lastColumnValue=0};ko.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return this.pos==this.lineStart},peek:function(){return this.string.charAt(this.pos)||void 0},next:function(){if(this.pos<this.string.length){return this.string.charAt(this.pos++)}},eat:function(a){var b=this.string.charAt(this.pos);if("string"==typeof a?b==a:b&&(a.test?a.test(b):a(b))){return ++this.pos,b}},eatWhile:function(a){for(var b=this.pos;this.eat(a);){}return this.pos>b},eatSpace:function(){for(var a=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));){++this.pos}return this.pos>a},skipToEnd:function(){this.pos=this.string.length},skipTo:function(a){a=this.string.indexOf(a,this.pos);if(-1<a){return this.pos=a,!0}},backUp:function(a){this.pos-=a},column:function(){this.lastColumnPos<this.start&&(this.lastColumnValue=Q(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start);return this.lastColumnValue-(this.lineStart?Q(this.string,this.lineStart,this.tabSize):0)},indentation:function(){return Q(this.string,null,this.tabSize)-(this.lineStart?Q(this.string,this.lineStart,this.tabSize):0)},match:function(d,e,a){if("string"==typeof d){var b=function(f){return a?f.toLowerCase():f},c=this.string.substr(this.pos,d.length);if(b(c)==b(d)){return !1!==e&&(this.pos+=d.length),!0}}else{if((d=this.string.slice(this.pos).match(d))&&0<d.index){return null}d&&!1!==e&&(this.pos+=d[0].length);return d}},current:function(){return this.string.slice(this.start,this.pos)},hideFirstChars:function(a,b){this.lineStart+=a;try{return b()}finally{this.lineStart-=a}}};var y=0,K=hn.TextMarker=function(a,b){this.lines=[];this.type=b;this.doc=a;this.id=++y};j8(K);K.prototype.clear=function(){if(!this.explicitlyCleared){var c=this.doc.cm,d=c&&!c.curOp;d&&ad(c);if(W(this,"clear")){var e=this.find();e&&fz(this,"clear",e.from,e.to)}for(var f=e=null,g=0;g<this.lines.length;++g){var h=this.lines[g],i=gt(h.markedSpans,this);c&&!this.collapsed?hb(c,ea(h),"text"):c&&(null!=i.to&&(f=ea(h)),null!=i.from&&(e=ea(h)));for(var j=h,k=h.markedSpans,l=i,a=void 0,b=0;b<k.length;++b){k[b]!=l&&(a||(a=[])).push(k[b])}j.markedSpans=a;null==i.from&&this.collapsed&&!C(this.doc,h)&&c&&a3(h,h1(c.display))}if(c&&this.collapsed&&!c.options.lineWrapping){for(g=0;g<this.lines.length;++g){h=h3(this.lines[g]),i=gk(h),i>c.display.maxLineLength&&(c.display.maxLine=h,c.display.maxLineLength=i,c.display.maxLineChanged=!0)}}null!=e&&c&&this.collapsed&&ge(c,e,f+1);this.lines.length=0;this.explicitlyCleared=!0;this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,c&&iI(c.doc));c&&fz(c,"markerCleared",c,this);d&&gU(c);this.parent&&this.parent.clear()}};K.prototype.find=function(f,g){null==f&&"bookmark"==this.type&&(f=1);for(var a,b,c=0;c<this.lines.length;++c){var d=this.lines[c],e=gt(d.markedSpans,this);if(null!=e.from&&(a=ho(g?d:ea(d),e.from),-1==f)){return a}if(null!=e.to&&(b=ho(g?d:ea(d),e.to),1==f)){return b}}return a&&{from:a,to:b}};K.prototype.changed=function(){var b=this.find(-1,!0),c=this,a=this.doc.cm;b&&a&&X(a,function(){var d=b.line,e=ea(b.line);if(e=hW(a,e)){iD(e),a.curOp.selectionChanged=a.curOp.forceUpdate=!0}a.curOp.updateMaxLine=!0;C(c.doc,d)||null==c.height||(e=c.height,c.height=null,(e=kD(c)-e)&&a3(d,d.height+e))})};K.prototype.attachLine=function(a){if(!this.lines.length&&this.doc.cm){var b=this.doc.cm.curOp;b.maybeHiddenMarkers&&-1!=de(b.maybeHiddenMarkers,this)||(b.maybeUnhiddenMarkers||(b.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(a)};K.prototype.detachLine=function(a){this.lines.splice(de(this.lines,a),1);!this.lines.length&&this.doc.cm&&(a=this.doc.cm.curOp,(a.maybeHiddenMarkers||(a.maybeHiddenMarkers=[])).push(this))};var y=0,iB=hn.SharedTextMarker=function(b,c){this.markers=b;this.primary=c;for(var a=0;a<b.length;++a){b[a].parent=this}};j8(iB);iB.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var a=0;a<this.markers.length;++a){this.markers[a].clear()}fz(this,"clear")}};iB.prototype.find=function(a,b){return this.primary.find(a,b)};var x=hn.LineWidget=function(c,d,a){if(a){for(var b in a){a.hasOwnProperty(b)&&(this[b]=a[b])}}this.doc=c;this.node=d};j8(x);x.prototype.clear=function(){var e=this.doc.cm,f=this.line.widgets,a=this.line,b=ea(a);if(null!=b&&f){for(var c=0;c<f.length;++c){f[c]==this&&f.splice(c--,1)}f.length||(a.widgets=null);var d=kD(this);a3(a,Math.max(0,a.height-d));e&&X(e,function(){var g=-d;g4(a)<(e.curOp&&e.curOp.scrollTop||e.doc.scrollTop)&&ix(e,null,g);hb(e,b,"widget")})}};x.prototype.changed=function(){var c=this.height,d=this.doc.cm,a=this.line;this.height=null;var b=kD(this)-c;b&&(a3(a,a.height+b),d&&X(d,function(){d.curOp.forceUpdate=!0;g4(a)<(d.curOp&&d.curOp.scrollTop||d.doc.scrollTop)&&ix(d,null,b)}))};var iT=hn.Line=function(b,c,a){this.text=b;jh(this,c);this.height=a?a(this):1};j8(iT);iT.prototype.lineNo=function(){return ea(this)};var ff={},gl={};kb.prototype={chunkSize:function(){return this.lines.length},removeInner:function(e,f){for(var a=e,b=e+f;a<b;++a){var c=this.lines[a];this.height-=c.height;var d=c;d.parent=null;iX(d);fz(c,"delete")}this.lines.splice(e,f)},collapse:function(a){a.push.apply(a,this.lines)},insertInner:function(b,c,a){this.height+=a;this.lines=this.lines.slice(0,b).concat(c).concat(this.lines.slice(b));for(b=0;b<c.length;++b){c[b].parent=this}},iterN:function(b,c,a){for(c=b+c;b<c;++b){if(a(this.lines[b])){return !0}}}};kx.prototype={chunkSize:function(){return this.size},removeInner:function(f,g){this.size-=g;for(var a=0;a<this.children.length;++a){var b=this.children[a],c=b.chunkSize();if(f<c){var d=Math.min(g,c-f),e=b.height;b.removeInner(f,d);this.height-=e-b.height;c==d&&(this.children.splice(a--,1),b.parent=null);if(0==(g-=d)){break}f=0}else{f-=c}}25>this.size-g&&(1<this.children.length||!(this.children[0] instanceof kb))&&(a=[],this.collapse(a),this.children=[new kb(a)],this.children[0].parent=this)},collapse:function(a){for(var b=0;b<this.children.length;++b){this.children[b].collapse(a)}},insertInner:function(e,f,a){this.size+=f.length;this.height+=a;for(var b=0;b<this.children.length;++b){var c=this.children[b],d=c.chunkSize();if(e<=d){c.insertInner(e,f,a);if(c.lines&&50<c.lines.length){for(;50<c.lines.length;){e=c.lines.splice(c.lines.length-25,25),e=new kb(e),c.height-=e.height,this.children.splice(b+1,0,e),e.parent=this}this.maybeSpill()}break}e-=d}},maybeSpill:function(){if(!(10>=this.children.length)){var b=this;do{var c=b.children.splice(b.children.length-5,5),c=new kx(c);if(b.parent){b.size-=c.size;b.height-=c.height;var a=de(b.parent.children,b);b.parent.children.splice(a+1,0,c)}else{a=new kx(b.children),a.parent=b,b.children=[a,c],b=a}c.parent=b.parent}while(10<b.children.length);b.parent.maybeSpill()}},iterN:function(e,f,a){for(var b=0;b<this.children.length;++b){var c=this.children[b],d=c.chunkSize();if(e<d){d=Math.min(f,d-e);if(c.iterN(e,d,a)){return !0}if(0==(f-=d)){break}e=0}else{e-=d}}}};var kq=0,gd=hn.Doc=function(b,c,a){if(!(this instanceof gd)){return new gd(b,c,a)}null==a&&(a=0);kx.call(this,[new kb([new iT("",null)])]);this.first=a;this.scrollTop=this.scrollLeft=0;this.cantEdit=!1;this.cleanGeneration=1;this.frontier=a;a=ho(a,0);this.sel=iw(a);this.history=new kE(null);this.id=++kq;this.modeOption=c;"string"==typeof b&&(b=v(b));j4(this,{from:a,to:a,text:b});fe(this,iw(a),hl)};gd.prototype=ed(kx.prototype,{constructor:gd,iter:function(b,c,a){a?this.iterN(b-this.first,c-b,a):this.iterN(this.first,this.first+this.size,b)},insert:function(c,d){for(var a=0,b=0;b<d.length;++b){a+=d[b].height}this.insertInner(c-this.first,d,a)},remove:function(a,b){this.removeInner(a-this.first,b)},getValue:function(a){var b=h9(this,this.first,this.first+this.size);return !1===a?b:b.join(a||"\n")},setValue:gb(function(b){var c=ho(this.first,0),a=this.first+this.size-1;iR(this,{from:c,to:ho(a,hx(this,a).text.length),text:v(b),origin:"setValue",full:!0},!0);fe(this,iw(c))}),replaceRange:function(c,d,a,b){d=hC(this,d);a=a?hC(this,a):d;j1(this,c,d,a,b)},getRange:function(b,c,a){b=kI(this,hC(this,b),hC(this,c));return !1===a?b:b.join(a||"\n")},getLine:function(a){return(a=this.getLineHandle(a))&&a.text},getLineHandle:function(a){if(j2(this,a)){return hx(this,a)}},getLineNumber:function(a){return ea(a)},getLineHandleVisualStart:function(a){"number"==typeof a&&(a=hx(this,a));return h3(a)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(a){return hC(this,a)},getCursor:function(a){var b=this.sel.primary();return null==a||"head"==a?b.head:"anchor"==a?b.anchor:"end"==a||"to"==a||!1===a?b.to():b.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:gb(function(b,c,a){b=hC(this,"number"==typeof b?ho(b,c||0):b);fe(this,iw(b,null),a)}),setSelection:gb(function(c,d,a){var b=hC(this,c);c=hC(this,d||c);fe(this,iw(b,c),a)}),extendSelection:gb(function(b,c,a){je(this,hC(this,b),c&&hC(this,c),a)}),extendSelections:gb(function(c,d){for(var a=[],b=0;b<c.length;b++){a[b]=hC(this,c[b])}U(this,a)}),extendSelectionsBy:gb(function(a,b){U(this,kh(this.sel.ranges,a),b)}),setSelections:gb(function(d,e,a){if(d.length){for(var b=0,c=[];b<d.length;b++){c[b]=new gm(hC(this,d[b].anchor),hC(this,d[b].head))}null==e&&(e=Math.min(d.length-1,this.sel.primIndex));fe(this,ae(c,e),a)}}),addSelection:gb(function(c,d,a){var b=this.sel.ranges.slice(0);b.push(new gm(hC(this,c),hC(this,d||c)));fe(this,ae(b,b.length-1),a)}),getSelection:function(d){for(var e=this.sel.ranges,a,b=0;b<e.length;b++){var c=kI(this,e[b].from(),e[b].to());a=a?a.concat(c):c}return !1===d?a:a.join(d||"\n")},getSelections:function(d){for(var e=[],a=this.sel.ranges,b=0;b<a.length;b++){var c=kI(this,a[b].from(),a[b].to());!1!==d&&(c=c.join(d||"\n"));e[b]=c}return e},replaceSelection:function(d,e,a){for(var b=[],c=0;c<this.sel.ranges.length;c++){b[c]=d}this.replaceSelections(b,e,a||"+input")},replaceSelections:gb(function(c,d,e){for(var f=[],g=this.sel,h=0;h<g.ranges.length;h++){var i=g.ranges[h];f[h]={from:i.from(),to:i.to(),text:v(c[h]),origin:e}}if(h=d&&"end"!=d){h=[];e=c=ho(this.first,0);for(g=0;g<f.length;g++){var a=f[g],i=jV(a.from,c,e),b=jV(kk(a),c,e);c=a.to;e=b;"around"==d?(a=this.sel.ranges[g],a=0>hJ(a.head,a.anchor),h[g]=new gm(a?b:i,a?i:b)):h[g]=new gm(i,i)}h=new ip(h,this.sel.primIndex)}d=h;for(h=f.length-1;0<=h;h--){iR(this,f[h])}d?ee(this,d):this.cm&&hK(this.cm)}),undo:gb(function(){jo(this,"undo")}),redo:gb(function(){jo(this,"redo")}),undoSelection:gb(function(){jo(this,"undo",!0)}),redoSelection:gb(function(){jo(this,"redo",!0)}),setExtending:function(a){this.extend=a},getExtending:function(){return this.extend},historySize:function(){for(var c=this.history,d=0,a=0,b=0;b<c.done.length;b++){c.done[b].ranges||++d}for(b=0;b<c.undone.length;b++){c.undone[b].ranges||++a}return{undo:d,redo:a}},clearHistory:function(){this.history=new kE(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(a){a&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null);return this.history.generation},isClean:function(a){return this.history.generation==(a||this.cleanGeneration)},getHistory:function(){return{done:jO(this.history.done),undone:jO(this.history.undone)}},setHistory:function(a){var b=this.history=new kE(this.history.maxGeneration);b.done=jO(a.done.slice(0),null,!0);b.undone=jO(a.undone.slice(0),null,!0)},addLineClass:gb(function(b,c,a){return hf(this,b,"gutter"==c?"gutter":"class",function(e){var d="text"==c?"textClass":"background"==c?"bgClass":"gutter"==c?"gutterClass":"wrapClass";if(e[d]){if(hM(a).test(e[d])){return !1}e[d]+=" "+a}else{e[d]=a}return !0})}),removeLineClass:gb(function(b,c,a){return hf(this,b,"gutter"==c?"gutter":"class",function(g){var h="text"==c?"textClass":"background"==c?"bgClass":"gutter"==c?"gutterClass":"wrapClass",d=g[h];if(d){if(null==a){g[h]=null}else{var e=d.match(hM(a));if(!e){return !1}var f=e.index+e[0].length;g[h]=d.slice(0,e.index)+(e.index&&f!=d.length?" ":"")+d.slice(f)||null}}else{return !1}return !0})}),addLineWidget:gb(function(b,c,a){return hO(this,b,c,a)}),removeLineWidget:function(a){a.clear()},markText:function(b,c,a){return ks(this,hC(this,b),hC(this,c),a,"range")},setBookmark:function(b,c){var a={replacedWith:c&&(null==c.nodeType?c.widget:c),insertLeft:c&&c.insertLeft,clearWhenEmpty:!1,shared:c&&c.shared,handleMouseEvents:c&&c.handleMouseEvents};b=hC(this,b);return ks(this,b,b,a,"bookmark")},findMarksAt:function(d){d=hC(this,d);var e=[],a=hx(this,d.line).markedSpans;if(a){for(var b=0;b<a.length;++b){var c=a[b];(null==c.from||c.from<=d.ch)&&(null==c.to||c.to>=d.ch)&&e.push(c.marker.parent||c.marker)}}return e},findMarks:function(d,e,a){d=hC(this,d);e=hC(this,e);var b=[],c=d.line;this.iter(d.line,e.line+1,function(h){if(h=h.markedSpans){for(var f=0;f<h.length;f++){var g=h[f];c==d.line&&d.ch>g.to||null==g.from&&c!=d.line||c==e.line&&g.from>e.ch||a&&!a(g.marker)||b.push(g.marker.parent||g.marker)}}++c});return b},getAllMarks:function(){var a=[];this.iter(function(c){if(c=c.markedSpans){for(var b=0;b<c.length;++b){null!=c[b].from&&a.push(c[b].marker)}}});return a},posFromIndex:function(b){var c,a=this.first;this.iter(function(d){d=d.text.length+1;if(d>b){return c=b,!0}b-=d;++a});return hC(this,ho(a,c))},indexFromPos:function(a){a=hC(this,a);var b=a.ch;if(a.line<this.first||0>a.ch){return 0}this.iter(this.first,a.line,function(c){b+=c.text.length+1});return b},copy:function(a){var b=new gd(h9(this,this.first,this.first+this.size),this.modeOption,this.first);b.scrollTop=this.scrollTop;b.scrollLeft=this.scrollLeft;b.sel=this.sel;b.extend=!1;a&&(b.history.undoDepth=this.history.undoDepth,b.setHistory(this.getHistory()));return b},linkedDoc:function(e){e||(e={});var f=this.first,a=this.first+this.size;null!=e.from&&e.from>f&&(f=e.from);null!=e.to&&e.to<a&&(a=e.to);f=new gd(h9(this,f,a),e.mode||this.modeOption,f);e.sharedHist&&(f.history=this.history);(this.linked||(this.linked=[])).push({doc:f,sharedHist:e.sharedHist});f.linked=[{doc:this,isParent:!0,sharedHist:e.sharedHist}];e=gV(this);for(a=0;a<e.length;a++){var b=e[a],c=b.find(),d=f.clipPos(c.from),c=f.clipPos(c.to);hJ(d,c)&&(d=ks(f,d,c,b.primary,b.primary.type),b.markers.push(d),d.parent=b)}return f},unlinkDoc:function(b){b instanceof hn&&(b=b.doc);if(this.linked){for(var c=0;c<this.linked.length;++c){if(this.linked[c].doc==b){this.linked.splice(c,1);b.unlinkDoc(this);iu(gV(this));break}}}if(b.history==this.history){var a=[b.id];ie(b,function(d){a.push(d.id)},!0);b.history=new kE(null);b.history.done=jO(this.history.done,a);b.history.undone=jO(this.history.undone,a)}},iterLinkedDocs:function(a){ie(this,a)},getMode:function(){return this.mode},getEditor:function(){return this.cm}});gd.prototype.eachLine=gd.prototype.iter;var jL=["iter","insert","remove","copy","getEditor"],af;for(af in gd.prototype){gd.prototype.hasOwnProperty(af)&&0>de(jL,af)&&(hn.prototype[af]=function(a){return function(){return a.apply(this.doc,arguments)}}(gd.prototype[af]))}j8(gd);var gc=hn.e_preventDefault=function(a){a.preventDefault?a.preventDefault():a.returnValue=!1},j7=hn.e_stopPropagation=function(a){a.stopPropagation?a.stopPropagation():a.cancelBubble=!0},gu=hn.e_stop=function(a){gc(a);j7(a)},hy=hn.on=function(b,c,a){b.addEventListener?b.addEventListener(c,a,!1):b.attachEvent?b.attachEvent("on"+c,a):(b=b._handlers||(b._handlers={}),(b[c]||(b[c]=[])).push(a))},gY=hn.off=function(b,c,a){if(b.removeEventListener){b.removeEventListener(c,a,!1)}else{if(b.detachEvent){b.detachEvent("on"+c,a)}else{if(b=b._handlers&&b._handlers[c]){for(c=0;c<b.length;++c){if(b[c]==a){b.splice(c,1);break}}}}}},fy=hn.signal=function(d,e){var a=d._handlers&&d._handlers[e];if(a){for(var b=Array.prototype.slice.call(arguments,2),c=0;c<a.length;++c){a[c].apply(null,b)}}},kJ=null,N=30,i0=hn.Pass={toString:function(){return"CodeMirror.Pass"}},hl={scroll:!1},jr={origin:"*mouse"},ih={origin:"+move"};dc.prototype.set=function(a,b){clearTimeout(this.id);this.id=setTimeout(b,a)};var Q=hn.countColumn=function(e,f,a,b,c){null==f&&(f=e.search(/[^\s\u00a0]/),-1==f&&(f=e.length));b=b||0;for(c=c||0;;){var d=e.indexOf("\t",b);if(0>d||d>=f){return c+(f-b)}c+=d-b;c+=a-c%a;b=d+1}},jw=[""],i4=function(a){a.select()};ig?i4=function(a){a.selectionStart=0;a.selectionEnd=a.value.length}:cd&&(i4=function(a){try{a.select()}catch(b){}});var iO=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,iK=hn.isWordChar=function(a){return/\w/.test(a)||""<a&&(a.toUpperCase()!=a.toLowerCase()||iO.test(a))},ic=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/,jK;jK=document.createRange?function(d,e,a,b){var c=document.createRange();c.setEnd(b||d,a);c.setStart(d,e);return c}:function(d,e,a){var b=document.body.createTextRange();try{b.moveToElementText(d.parentNode)}catch(c){return b}b.collapse(!0);b.moveEnd("character",a);b.moveStart("character",e);return b};var jk=hn.contains=function(a,b){3==b.nodeType&&(b=b.parentNode);if(a.contains){return a.contains(b)}do{if(11==b.nodeType&&(b=b.host),b==a){return !0}}while(b=b.parentNode)};cd&&11>da&&(cg=function(){try{return document.activeElement}catch(a){return document.body}});var g0=hn.rmClass=function(d,e){var a=d.className,b=hM(e).exec(a);if(b){var c=a.slice(b.index+b[0].length);d.className=a.slice(0,b.index)+(c?b[1]+c:"")}},i2=hn.addClass=function(b,c){var a=b.className;hM(c).test(a)||(b.className+=(a?" ":"")+c)},jj=!1,g3=function(){if(cd&&9>da){return !1}var a=ht("div");return"draggable" in a||"dragDrop" in a}(),G,jB,v=hn.splitLines=3!="\n\nb".split(/\n/).length?function(f){for(var g=0,a=[],b=f.length;g<=b;){var c=f.indexOf("\n",g);-1==c&&(c=f.length);var d=f.slice(g,"\r"==f.charAt(c-1)?c-1:c),e=d.indexOf("\r");-1!=e?(a.push(d.slice(0,e)),g+=e+1):(a.push(d),g=c+1)}return a}:function(a){return a.split(/\r\n?|\n/)},hr=window.getSelection?function(a){try{return a.selectionStart!=a.selectionEnd}catch(b){return !1}}:function(b){try{var c=b.ownerDocument.selection.createRange()}catch(a){}return c&&c.parentElement()==b?0!=c.compareEndPoints("StartToEnd",c):!1},kA=function(){var a=ht("div");if("oncopy" in a){return !0}a.setAttribute("oncopy","return;");return"function"==typeof a.oncopy}(),ec=null,jq={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"\x3d",91:"Mod",92:"Mod",93:"Mod",107:"\x3d",109:"-",127:"Delete",173:"-",186:";",187:"\x3d",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"};hn.keyNames=jq;(function(){for(var a=0;10>a;a++){jq[a+48]=jq[a+96]=String(a)}for(a=65;90>=a;a++){jq[a]=String.fromCharCode(a)}for(a=1;12>=a;a++){jq[a+111]=jq[a+63235]="F"+a}})();var jt,iN=function(){function f(h){return 247>=h?"bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN".charAt(h):1424<=h&&1524>=h?"R":1536<=h&&1773>=h?"rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmm".charAt(h-1536):1774<=h&&2220>=h?"r":8192<=h&&8203>=h?"w":8204==h?"b":"L"}function g(i,j,h){this.level=i;this.from=j;this.to=h}var a=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,b=/[stwN]/,c=/[LRr]/,d=/[Lb1n]/,e=/[1n]/;return function(o){if(!a.test(o)){return !1}for(var p=o.length,h=[],i=0,k;i<p;++i){h.push(f(o.charCodeAt(i)))}for(var i=0,j="L";i<p;++i){k=h[i],"m"==k?h[i]=j:j=k}i=0;for(j="L";i<p;++i){k=h[i],"1"==k&&"r"==j?h[i]="n":c.test(k)&&(j=k,"r"==k&&(h[i]="R"))}i=1;for(j=h[0];i<p-1;++i){k=h[i],"+"==k&&"1"==j&&"1"==h[i+1]?h[i]="1":","!=k||j!=h[i+1]||"1"!=j&&"n"!=j||(h[i]=j),j=k}for(i=0;i<p;++i){if(k=h[i],","==k){h[i]="N"}else{if("%"==k){for(j=i+1;j<p&&"%"==h[j];++j){}var l=i&&"!"==h[i-1]||j<p&&"1"==h[j]?"1":"N";for(k=i;k<j;++k){h[k]=l}i=j-1}}}i=0;for(j="L";i<p;++i){k=h[i],"L"==j&&"1"==k?h[i]="L":c.test(k)&&(j=k)}for(i=0;i<p;++i){if(b.test(h[i])){for(j=i+1;j<p&&b.test(h[j]);++j){}k="L"==(j<p?h[j]:"L");l="L"==(i?h[i-1]:"L")||k?"L":"R";for(k=i;k<j;++k){h[k]=l}i=j-1}}for(var j=[],m,i=0;i<p;){if(d.test(h[i])){k=i;for(++i;i<p&&d.test(h[i]);++i){}j.push(new g(0,k,i))}else{var n=i,l=j.length;for(++i;i<p&&"L"!=h[i];++i){}for(k=n;k<i;){if(e.test(h[k])){n<k&&j.splice(l,0,new g(1,n,k));n=k;for(++k;k<i&&e.test(h[k]);++k){}j.splice(l,0,new g(2,n,k));n=k}else{++k}}n<i&&j.splice(l,0,new g(1,n,i))}}1==j[0].level&&(m=o.match(/^\s+/))&&(j[0].from=m[0].length,j.unshift(new g(0,0,m[0].length)));1==cb(j).level&&(m=o.match(/\s+$/))&&(cb(j).to-=m[0].length,j.push(new g(0,p-m[0].length,p)));2==j[0].level&&j.unshift(new g(1,j[0].to,j[0].to));j[0].level!=cb(j).level&&j.push(new g(j[0].level,p,p));return j}}();hn.version="5.2.0";return hn});
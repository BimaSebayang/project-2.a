/*!
 AutoFill 1.2.1
 Â©2008-2014 SpryMedia Ltd - datatables.net/license
*/
(function(g,h,f){var e=function(a,c){var b=function(d,j){if(!(this instanceof b)){throw"Warning: AutoFill must be initialised with the keyword 'new'"}if(!a.fn.dataTableExt.fnVersionCheck("1.7.0")){throw"Warning: AutoFill requires DataTables 1.7 or greater"}this.c={};this.s={filler:{height:0,width:0},border:{width:2},drag:{startX:-1,startY:-1,startTd:null,endTd:null,dragging:!1},screen:{interval:null,y:0,height:0,scrollTop:0},scroller:{top:0,bottom:0},columns:[]};this.dom={table:null,filler:null,borderTop:null,borderRight:null,borderBottom:null,borderLeft:null,currentTarget:null};this.fnSettings=function(){return this.s};this._fnInit(d,j);return this};b.prototype={_fnInit:function(d,r){var q=this;this.s.dt=c.Api?(new c.Api(d)).settings()[0]:d.fnSettings();this.s.init=r||{};this.dom.table=this.s.dt.nTable;a.extend(!0,this.c,b.defaults,r);this._initColumns();var n=a("<div/>",{"class":"AutoFill_filler"}).appendTo("body");this.dom.filler=n[0];this.s.filler.height=n.height();this.s.filler.width=n.width();n[0].style.display="none";var p,o=h.body;""!==q.s.dt.oScroll.sY&&(q.s.dt.nTable.parentNode.style.position="relative",o=q.s.dt.nTable.parentNode);p=a("<div/>",{"class":"AutoFill_border"});this.dom.borderTop=p.clone().appendTo(o)[0];this.dom.borderRight=p.clone().appendTo(o)[0];this.dom.borderBottom=p.clone().appendTo(o)[0];this.dom.borderLeft=p.clone().appendTo(o)[0];n.on("mousedown.DTAF",function(i){this.onselectstart=function(){return false};q._fnFillerDragStart.call(q,i);return false});a("tbody",this.dom.table).on("mouseover.DTAF mouseout.DTAF",">tr>td, >tr>th",function(i){q._fnFillerDisplay.call(q,i)});a(this.dom.table).on("destroy.dt.DTAF",function(){n.off("mousedown.DTAF").remove();a("tbody",this.dom.table).off("mouseover.DTAF mouseout.DTAF")})},_initColumns:function(){var d=this,p,o,m=this.s.dt,n=this.s.init;p=0;for(o=m.aoColumns.length;p<o;p++){this.s.columns[p]=a.extend(!0,{},b.defaults.column)}m.oApi._fnApplyColumnDefs(m,n.aoColumnDefs||n.columnDefs,n.aoColumns||n.columns,function(j,i){d._fnColumnOptions(j,i)});p=0;for(o=m.aoColumns.length;p<o;p++){if(m=this.s.columns[p],m.read||(m.read=this._fnReadCell),m.write||(m.read=this._fnWriteCell),!m.step){m.read=this._fnStep}}},_fnColumnOptions:function(l,n){var m=this.s.columns[l],d=function(i,j){n[j[0]]!==f&&(m[i]=n[j[0]]);n[j[1]]!==f&&(m[i]=n[j[1]])};d("enable",["bEnable","enable"]);d("read",["fnRead","read"]);d("write",["fnWrite","write"]);d("step",["fnStep","step"]);d("increment",["bIncrement","increment"])},_fnTargetCoords:function(d){var l=a(d).parents("tr")[0],k=this.s.dt.oInstance.fnGetPosition(d);return{x:a("td",l).index(d),y:a("tr",l.parentNode).index(l),row:k[0],column:k[2]}},_fnUpdateBorder:function(A,z){var y=this.s.border.width,B=a(A).offset(),d=a(z).offset(),C=B.left-y,j=d.left+a(z).outerWidth(),x=B.top-y,i=d.top+a(z).outerHeight(),k=d.left+a(z).outerWidth()-B.left+2*y,n=d.top+a(z).outerHeight()-B.top+2*y;B.left>d.left&&(C=d.left-y,j=B.left+a(A).outerWidth(),k=B.left+a(A).outerWidth()-d.left+2*y);""!==this.s.dt.oScroll.sY&&(y=a(this.s.dt.nTable.parentNode).offset(),B=a(this.s.dt.nTable.parentNode).scrollTop(),d=a(this.s.dt.nTable.parentNode).scrollLeft(),C-=y.left-d,j-=y.left-d,x-=y.top-B,i-=y.top-B);y=this.dom.borderTop.style;y.top=x+"px";y.left=C+"px";y.height=this.s.border.width+"px";y.width=k+"px";y=this.dom.borderBottom.style;y.top=i+"px";y.left=C+"px";y.height=this.s.border.width+"px";y.width=k+"px";y=this.dom.borderLeft.style;y.top=x+"px";y.left=C+"px";y.height=n+"px";y.width=this.s.border.width+"px";y=this.dom.borderRight.style;y.top=x+"px";y.left=j+"px";y.height=n+"px";y.width=this.s.border.width+"px"},_fnFillerDragStart:function(d){var n=this,m=this.dom.currentTarget;this.s.drag.dragging=!0;n.dom.borderTop.style.display="block";n.dom.borderRight.style.display="block";n.dom.borderBottom.style.display="block";n.dom.borderLeft.style.display="block";var l=this._fnTargetCoords(m);this.s.drag.startX=l.x;this.s.drag.startY=l.y;this.s.drag.startTd=m;this.s.drag.endTd=m;this._fnUpdateBorder(m,m);a(h).bind("mousemove.AutoFill",function(i){n._fnFillerDragMove.call(n,i)});a(h).bind("mouseup.AutoFill",function(i){n._fnFillerFinish.call(n,i)});this.s.screen.y=d.pageY;this.s.screen.height=a(g).height();this.s.screen.scrollTop=a(h).scrollTop();""!==this.s.dt.oScroll.sY&&(this.s.scroller.top=a(this.s.dt.nTable.parentNode).offset().top,this.s.scroller.bottom=this.s.scroller.top+a(this.s.dt.nTable.parentNode).height());this.s.screen.interval=setInterval(function(){var i=a(h).scrollTop();n.s.screen.y=n.s.screen.y+(i-n.s.screen.scrollTop);n.s.screen.height-n.s.screen.y+i<50?a("html, body").animate({scrollTop:i+50},240,"linear"):n.s.screen.y-i<50&&a("html, body").animate({scrollTop:i-50},240,"linear");n.s.dt.oScroll.sY!==""&&(n.s.screen.y>n.s.scroller.bottom-50?a(n.s.dt.nTable.parentNode).animate({scrollTop:a(n.s.dt.nTable.parentNode).scrollTop()+50},240,"linear"):n.s.screen.y<n.s.scroller.top+50&&a(n.s.dt.nTable.parentNode).animate({scrollTop:a(n.s.dt.nTable.parentNode).scrollTop()-50},240,"linear"))},250)},_fnFillerDragMove:function(d){if(d.target&&"TD"==d.target.nodeName.toUpperCase()&&d.target!=this.s.drag.endTd){var l=this._fnTargetCoords(d.target);"y"==this.c.mode&&l.x!=this.s.drag.startX&&(d.target=a("tbody>tr:eq("+l.y+")>td:eq("+this.s.drag.startX+")",this.dom.table)[0]);"x"==this.c.mode&&l.y!=this.s.drag.startY&&(d.target=a("tbody>tr:eq("+this.s.drag.startY+")>td:eq("+l.x+")",this.dom.table)[0]);"either"==this.c.mode&&(l.x!=this.s.drag.startX?d.target=a("tbody>tr:eq("+this.s.drag.startY+")>td:eq("+l.x+")",this.dom.table)[0]:l.y!=this.s.drag.startY&&(d.target=a("tbody>tr:eq("+l.y+")>td:eq("+this.s.drag.startX+")",this.dom.table)[0]));"both"!==this.c.mode&&(l=this._fnTargetCoords(d.target));var k=this.s.drag;k.endTd=d.target;l.y>=this.s.drag.startY?this._fnUpdateBorder(k.startTd,k.endTd):this._fnUpdateBorder(k.endTd,k.startTd);this._fnFillerPosition(d.target)}this.s.screen.y=d.pageY;this.s.screen.scrollTop=a(h).scrollTop();""!==this.s.dt.oScroll.sY&&(this.s.scroller.scrollTop=a(this.s.dt.nTable.parentNode).scrollTop(),this.s.scroller.top=a(this.s.dt.nTable.parentNode).offset().top,this.s.scroller.bottom=this.s.scroller.top+a(this.s.dt.nTable.parentNode).height())},_fnFillerFinish:function(){var A=this,z,y;a(h).unbind("mousemove.AutoFill mouseup.AutoFill");this.dom.borderTop.style.display="none";this.dom.borderRight.style.display="none";this.dom.borderBottom.style.display="none";this.dom.borderLeft.style.display="none";this.s.drag.dragging=!1;clearInterval(this.s.screen.interval);var d=[],l=this.dom.table,i=this._fnTargetCoords(this.s.drag.startTd),v=this._fnTargetCoords(this.s.drag.endTd),m=function(j){return A.s.dt.oApi._fnVisibleToColumnIndex(A.s.dt,j)};if(i.y<=v.y){for(z=i.y;z<=v.y;z++){if(i.x<=v.x){for(y=i.x;y<=v.x;y++){d.push({node:a("tbody>tr:eq("+z+")>td:eq("+y+")",l)[0],x:y-i.x,y:z-i.y,colIdx:m(y)})}}else{for(y=i.x;y>=v.x;y--){d.push({node:a("tbody>tr:eq("+z+")>td:eq("+y+")",l)[0],x:y-i.x,y:z-i.y,colIdx:m(y)})}}}}else{for(z=i.y;z>=v.y;z--){if(i.x<=v.x){for(y=i.x;y<=v.x;y++){d.push({node:a("tbody>tr:eq("+z+")>td:eq("+y+")",l)[0],x:y-i.x,y:z-i.y,colIdx:m(y)})}}else{for(y=i.x;y>=v.x;y--){d.push({node:a("tbody>tr:eq("+z+")>td:eq("+y+")",l)[0],x:i.x-y,y:i.y-z,colIdx:m(y)})}}}}if(!(1>=d.length)){var l=[],x;z=0;for(y=d.length;z<y;z++){var i=d[z],v=this.s.columns[i.colIdx],m=v.read.call(v,i.node),w=v.step.call(v,i.node,m,x,z,i.x,i.y);v.write.call(v,i.node,w);x=w;l.push({cell:i,colIdx:i.colIdx,newValue:w,oldValue:m})}null!==this.c.complete&&this.c.complete.call(this,l);c.Api?(new c.Api(this.s.dt)).draw(!1):this.s.dt.oInstance.fnDraw()}},_fnFillerDisplay:function(d){var n=this.dom.filler;if(!this.s.drag.dragging){var m="td"==d.target.nodeName.toLowerCase()?d.target:a(d.target).parents("td")[0],l=this._fnTargetCoords(m).column;if(this.s.columns[l].enable){if("mouseover"==d.type){this.dom.currentTarget=m,this._fnFillerPosition(m),n.style.display="block"}else{if(!d.relatedTarget||!d.relatedTarget.className.match(/AutoFill/)){n.style.display="none"}}}else{n.style.display="none"}}},_fnFillerPosition:function(d){var l=a(d).offset(),k=this.dom.filler;k.style.top=l.top-this.s.filler.height/2-1+a(d).outerHeight()+"px";k.style.left=l.left-this.s.filler.width/2-1+a(d).outerWidth()+"px"}};c.AutoFill=b;c.AutoFill=b;b.version="1.2.1";b.defaults={mode:"y",complete:null,column:{enable:!0,increment:!0,read:function(d){return a(d).html()},write:function(d,n){var m=a(d).parents("table");if(c.Api){m.DataTable().cell(d).data(n)}else{var m=m.dataTable(),l=m.fnGetPosition(d);m.fnUpdate(n,l[0],l[2],!1)}},step:function(d,r,q,n,p,o){d=/(\-?\d+)/;return(n=this.increment&&q?q.match(d):null)?q.replace(d,parseInt(n[1],10)+(0>p||0>o?-1:1)):q===f?r:q}}};return b};"function"===typeof define&&define.amd?define(["jquery","datatables"],e):"object"===typeof exports?e(require("jquery"),require("datatables")):jQuery&&!jQuery.fn.dataTable.AutoFill&&e(jQuery,jQuery.fn.dataTable)})(window,document);